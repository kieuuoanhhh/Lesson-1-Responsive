(self.miniJsonp=self.miniJsonp||[]).push([[592],{37764:function(e,t,r){var n;n=(e,t,r,n,o,a,c,s,i,u,l,p,d,f,E,_,S,h,O,v,T,m,g,y,b,R)=>(()=>{var C={757:(e,t,r)=>{e.exports=r(666)},439:(e,t,r)=>{"use strict";r.d(t,{t:()=>a});var n=r(661),o=r.n(n),a=o().t.bind(o())},187:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,a),n(r)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}_(e,t,a,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&_(e,"error",t,{once:!0})}(e,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function i(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var o,a,c,u;if(s(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),c=a[t]),void 0===c)c=a[t]=r,++e._eventsCount;else if("function"==typeof c?c=a[t]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),(o=i(e))>0&&c.length>o&&!c.warned){c.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=c.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=l.bind(n);return o.listener=r,n.wrapFn=o,o}function d(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):E(o,o.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function E(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function _(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(a){n.once&&e.removeEventListener(t,o),r(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return i(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,a=this._events;if(void 0!==a)o=o&&void 0===a.error;else if(!o)return!1;if(o){var c;if(t.length>0&&(c=t[0]),c instanceof Error)throw c;var s=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw s.context=c,s}var i=a[e];if(void 0===i)return!1;if("function"==typeof i)n(i,this,t);else{var u=i.length,l=E(i,u);for(r=0;r<u;++r)n(l[r],this,t)}return!0},a.prototype.addListener=function(e,t){return u(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return u(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,p(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,a,c;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){c=r[a].listener,o=a;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,c||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(o=a[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof S?t:S,a=Object.create(o.prototype),c=new P(n||[]);return a._invoke=function(e,t,r){var n=p;return function(o,a){if(n===f)throw new Error("Generator is already running");if(n===E){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=R(c,r);if(s){if(s===_)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=E,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var i=l(e,t,r);if("normal"===i.type){if(n=r.done?E:d,i.arg===_)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n=E,r.method="throw",r.arg=i.arg)}}}(e,r,c),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",E="completed",_={};function S(){}function h(){}function O(){}var v={};v[a]=function(){return this};var T=Object.getPrototypeOf,m=T&&T(T(I([])));m&&m!==r&&n.call(m,a)&&(v=m);var g=O.prototype=S.prototype=Object.create(v);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(o,a,c,s){var i=l(e[o],e,a);if("throw"!==i.type){var u=i.arg,p=u.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(p).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(i.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return _;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,_;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,c=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}return{next:A}}function A(){return{value:t,done:!0}}return h.prototype=g.constructor=O,O.constructor=h,h.displayName=i(O,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,i(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),b.prototype[c]=function(){return this},e.AsyncIterator=b,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new b(u(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,s,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],s=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var i=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(i&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},327:e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,o=t;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},171:(e,t,r)=>{var n=r(217),o=r(327);e.exports=function(e,t,r){var a=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var c=(e=e||{}).random||(e.rng||n)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t)for(var s=0;s<16;++s)t[a+s]=c[s];return t||o(c)}},241:e=>{"use strict";e.exports=O},782:e=>{"use strict";e.exports=l},830:e=>{"use strict";e.exports=p},292:e=>{"use strict";e.exports=d},209:e=>{"use strict";e.exports=T},411:e=>{"use strict";e.exports=m},123:e=>{"use strict";e.exports=b},770:e=>{"use strict";e.exports=y},914:e=>{"use strict";e.exports=g},674:e=>{"use strict";e.exports=s},378:e=>{"use strict";e.exports=i},464:e=>{"use strict";e.exports=u},428:e=>{"use strict";e.exports=R},661:e=>{"use strict";e.exports=o},444:e=>{"use strict";e.exports=r},598:e=>{"use strict";e.exports=c},550:e=>{"use strict";e.exports=S},383:t=>{"use strict";t.exports=e},252:e=>{"use strict";e.exports=a},655:e=>{"use strict";e.exports=v},944:e=>{"use strict";e.exports=E},975:e=>{"use strict";e.exports=_},947:e=>{"use strict";e.exports=h},855:e=>{"use strict";e.exports=t},672:e=>{"use strict";e.exports=n},455:e=>{"use strict";e.exports=f}},D={};function P(e){var t=D[e];if(void 0!==t)return t.exports;var r=D[e]={exports:{}};return C[e](r,r.exports,P),r.exports}P.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return P.d(t,{a:t}),t},P.d=(e,t)=>{for(var r in t)P.o(t,r)&&!P.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},P.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),P.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var I={};return(()=>{"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}P.r(I),P.d(I,{$tracker:()=>wT,BadRequest:()=>$,Blacklist:()=>ce,CancelOrderWarning:()=>pe,ChatbotProvider:()=>Ch,CustomError:()=>ae,EventBus:()=>Iv,ExceptionName:()=>Et,FileReaderError:()=>fe,Forbidden:()=>ne,HTTPError:()=>Se,InternalServerError:()=>re,Limiting:()=>ue,LiveReportPoint:()=>et,LiveSecretKey:()=>rt,MarkName:()=>dt,NoLiveKeyMap:()=>lt,NoLiveReportPoint:()=>tt,NoLiveSecretKey:()=>nt,NotFound:()=>ee,ReportComponent:()=>ft,ReportPoint:()=>Ct,TemporyError:()=>_e,Unauthoried:()=>Z,UnprocessableEntity:()=>te,UntrustedNetwork:()=>le,UnverifiedPhoneNumber:()=>de,Webview:()=>ie,addMediaFile:()=>P_,addOnDealItemDetailCleaner:()=>US,addOnDealRuleCleaner:()=>LS,agentConversationEntitiesSelector:()=>Kt,agentConversationSchema:()=>S,allMessageIdsSelector:()=>yd,allProductsSearchStatusSelector:()=>gO,allProductsSelector:()=>AO,authorizedShopsCountSelector:()=>Ln,autoTranslation:()=>uf,batchRemoveDraft:()=>Kf,batchUpdateRecord:()=>Sr,blockUserRequested:()=>Yn,bundleDealItemDetailCleaner:()=>jS,bundleDealRuleCleaner:()=>GS,cancelReasonsSelector:()=>dO,captchaSignatureSelector:()=>fn,captchaVisibleSelector:()=>dn,changeConversationStatusRequested:()=>Qs,changeConversationStatusRequestedSaga:()=>bu,chatbotImageSelector:()=>sh,chatbotIntentsReportRequest:()=>Ah,chatbotReducer:()=>aO,checkUserPermissionRequested:()=>Fa,checkUserPermissionSucceeded:()=>Ha,clearApiCache:()=>L,clearMediaFile:()=>A_,clearReportRequested:()=>UO,closeChatbotMediaPreview:()=>Ih,closeMediaPreviewModalRequested:()=>G_,closeModal:()=>xr,collectAsyncTask:()=>It,collectChatbotReportTask:()=>UT,collectComponentTask:()=>Pt,collectLoadTask:()=>Dt,configTrackerUser:()=>RT,contactsEntitiesSelector:()=>or,contactsSchema:()=>h,conversationBeenDeletedSelector:()=>Ts,conversationDirectionSelector:()=>Yc,conversationEntitiesSelector:()=>Wt,conversationHttpStatusSelector:()=>Bc,conversationIdsSelector:()=>Mc,conversationLastMessageSelector:()=>gd,conversationOperateRequested:()=>Ws,conversationReducer:()=>Nl,conversationSchema:()=>s,conversationsLengthLevelSelector:()=>ar,conversationsSelector:()=>Qc,converstionSyncUpdatesSaga:()=>zu,copySucceedFeedback:()=>bp,csSocket:()=>Gv,csSocketConnectedSelector:()=>g_,csSocketLoginedSelector:()=>m_,curConvsMessageSelector:()=>Vd,curMessagesRelatedSelector:()=>hd,curTabFocusedSelector:()=>Pn,currentAllMessageShortcutsSelector:()=>nf,currentBuyerIdSelector:()=>rs,currentBuyerOffersSelector:()=>Ff,currentBuyerOrdersSelector:()=>hO,currentBuyerSelector:()=>Es,currentBuyerShopIdSelector:()=>_s,currentBuyerShopSelector:()=>Ml,currentConversationAutoTranslationSelectors:()=>is,currentConversationBuyerIdSelectors:()=>cs,currentConversationCanReadSelector:()=>Vc,currentConversationIdSelector:()=>Hc,currentConversationMaxOptionHideTimeSelectors:()=>us,currentConversationSelector:()=>ts,currentConversationShopIdSelectors:()=>as,currentConversationShopRegionSelectors:()=>os,currentConversationShopSelectors:()=>ns,currentConversationStatusSelectors:()=>ss,currentConversationToNameSelector:()=>ms,currentConversationTranslationAccessSelector:()=>Os,currentDraftSelector:()=>tE,currentFaqHistorySeletor:()=>id,currentFaqSessionInfoSelector:()=>uh,currentFetchResultSelector:()=>IO,currentGroupIdSelector:()=>Zd,currentGroupTypeSelector:()=>Jd,currentOfferPaginationSelector:()=>Gf,currentOffersFetchResultSelector:()=>jf,currentOrderFetchResultSelector:()=>_O,currentPendingOffersCountSelector:()=>xf,currentPreviewMediaIdSelector:()=>M_,currentShopIdSelector:()=>fs,currentUserDistributionStatusSelector:()=>Cn,currentUserIdSelector:()=>nn,currentUserRoleSelector:()=>Rn,currentUserSelector:()=>hn,currentUserShopIdSelector:()=>yn,currentUserShopSelector:()=>bn,defaultPagination:()=>Sp,degradeConversationIdsSelector:()=>Jc,deleteConfigDurationSelector:()=>ln,deleteConfigSelector:()=>pn,deleteConversationRequested:()=>Cs,deleteConversationSucceeded:()=>Ds,deleteMediaFile:()=>I_,deleteRecord:()=>_r,distributionAccountStatusSelector:()=>ff,draftHashSelector:()=>Zf,draftReducer:()=>$f,entitiesSelector:()=>Qt,entityReducer:()=>yr,entryPointSelector:()=>Id,failedMessageIdsSelector:()=>Rd,fakeConversationSucceeded:()=>Is,faqHistoryHashSelector:()=>cd,faqHistoryMessagesSelector:()=>Ud,faqHistoryhttpStatusSelector:()=>ad,faqIdSelector:()=>sd,faqSessionInfoSelector:()=>ih,feedStoryEntitiesSelector:()=>tr,feedStorySchema:()=>f,feedbackRequested:()=>CE,feedbackSelector:()=>O_,feedbackSucceeded:()=>DE,fetch:()=>$e,fetchConversationsRequested:()=>As,fetchConversationsRequestedSaga:()=>iu,fetchConversationsSucceeded:()=>ws,fetchDegradeConversationsDetail:()=>qs,fetchDegradeConversationsDetailSaga:()=>uu,fetchFaqSessionSucceed:()=>wh,fetchReferEntityRequested:()=>pv,fetchSettings:()=>yf,fetchSettingsRequested:()=>Sf,fetchSettingsStatusSelector:()=>B_,fetchShopAuth:()=>up,fetchShopAuthRequested:()=>Gl,fetchShopDetailInfo:()=>Yl,fetchShopSettings:()=>aS,fetchShopTranslationSettings:()=>eS,fetchShopsByIds:()=>ip,fetchShopsRequested:()=>jl,fetchUserOrderDetail:()=>Jo,fetchUserOrderDetailRequested:()=>jo,fetchUserOrderDetailSucceeded:()=>Go,fetchedShopIdsSelector:()=>kl,filterSelector:()=>$c,filteredConversationsSelector:()=>Zc,flashSaleItemDetailCleaner:()=>FS,forceLogoutRequested:()=>Ta,generatePersist:()=>Dv,getChatRoomRefer:()=>Td,getChatbotSdk:()=>bh,getConversation:()=>ls,getConversationDetailRequested:()=>Ps,getConversationIds:()=>bv,getConversationShopId:()=>ps,getConversations:()=>ds,getConvsMessagesRelatedSelector:()=>Od,getCurChatRoomRefer:()=>vd,getDraft:()=>eE,getGuide:()=>oo,getGuideFailed:()=>ro,getGuideRequested:()=>eo,getGuideSucceeded:()=>to,getMessageSelector:()=>_d,getMessagesSelector:()=>Sd,getRouterPath:()=>Vv,getShopUnreadCountByIds:()=>sp,getToastInformation:()=>gp,getTranslation:()=>Ht,handle401ErrorRequested:()=>ve,handleChatbotUrl:()=>MT,handleChatbotUrlKey:()=>jT,handleConnect:()=>dE,handleLoginSucceededLogic:()=>Ca,handleOrderForApi:()=>VT,handleUnreadCountChangeAction:()=>zr,handledOrderForRender:()=>HT,hasDeletePermissionSelector:()=>un,hasMoreLatestMessageSelector:()=>Dd,hasMoreOlderMessageSelector:()=>Cd,hasReplyPermissionSelector:()=>sn,hasVideoPermissionSelector:()=>cn,heartbeat:()=>Ge,history:()=>Hv,inScrollToMessageSelector:()=>Kd,initMDAPSdk:()=>Nt,inlocationSelector:()=>Gc,isCBSellerSelector:()=>Tn,isCSSocketShared:()=>jv,isError:()=>he,isMainPageSelector:()=>Dn,isNavigateToUnreadMessageSelector:()=>ys,isScChatSelector:()=>xn,isShared:()=>xe,isSubAccountSelector:()=>vn,itemDetailCleaner:()=>xS,itemListDetailCleaner:()=>kS,keywordSelector:()=>Xc,legacyMessageShortcutsCountSelector:()=>df,listsHashSelector:()=>vs,loadingSelector:()=>rn,localeSelector:()=>On,locationMessage:()=>Xs,login:()=>Da,loginCSSocket:()=>Fv,loginRequested:()=>Sa,loginSocket:()=>je,loginSucceeded:()=>ha,loginSuccessSelector:()=>kn,logout:()=>Pc,logoutHandler:()=>Dc,logoutRequested:()=>Oa,logoutSucceeded:()=>va,markMessagesRequested:()=>Ms,markMessagesRequestedSaga:()=>Ou,markMessagesSucceeded:()=>Ls,mdapConfig:()=>mt,mediaListSelector:()=>C_,mediaMapSelector:()=>R_,mediaMessagesSelector:()=>Md,mediaPreviewModalReducer:()=>H_,mediaPreviewerReducer:()=>N_,memoize:()=>WT,messageEntitiesSelector:()=>zt,messageFillStatusMapSelector:()=>md,messageHasNextSelector:()=>Pd,messageHttpStatusSelector:()=>ud,messageOffersSelector:()=>Hd,messageSchema:()=>c,messageShortcutGroupContentSelector:()=>Xd,messageShortcutGroupEntitiesSelector:()=>er,messageShortcutGroupHttpStatusSelector:()=>$d,messageShortcutGroupSelector:()=>zd,messageShortcutsSchema:()=>E,messageShortcutsSelector:()=>ef,messageShortcutsStatusSelector:()=>pf,messageSourceIdsSelector:()=>Fd,messageSourceSelector:()=>Gd,messageTimeStyleSelector:()=>lf,messagesLengthLevelSelector:()=>cr,messagesRelatedMapSelector:()=>ld,messagesSelector:()=>wd,missedReadNoticeCountSelector:()=>jc,modalReducer:()=>kr,modalSelector:()=>Cr,muteConversationRequested:()=>ai,myShopSelector:()=>Ul,navigateToUnreadMessageIdSelector:()=>bs,networkJudge:()=>Uv,networkStatusSelector:()=>an,newMessageFlagSelector:()=>_n,newbieSelector:()=>on,normalize:()=>T,noticesCountSelector:()=>T_,offerDetailCleaner:()=>VS,offerHttpStatusSelector:()=>Nf,offerSchema:()=>l,offerSelector:()=>Mf,offersSelector:()=>kf,offlineMessagesSelector:()=>pd,openedMenuSelector:()=>Nn,orderEntitiesSelector:()=>Xt,orderHttpStatusSelector:()=>fO,orderSchema:()=>i,orderSelector:()=>pO,personalMessageShortcutsSelector:()=>tf,pinConversationRequested:()=>Gs,previewMediasSelector:()=>Ld,productCleaner:()=>qT,productEntitiesSelector:()=>$t,productSchema:()=>u,productSelector:()=>OO,productsSelector:()=>vO,rateCardEntitiesSelector:()=>rr,rateCardSelector:()=>Bd,rateCardsSchema:()=>_,readMessage:()=>Xo,readRequestIdsSelector:()=>Lc,reconnectFlagSelector:()=>v_,redirectConversationRequested:()=>lv,reduxReset:()=>Hf,relatedOfferIdsSelector:()=>Uf,removeAllDraft:()=>Wf,removeSingleDraft:()=>qf,replyToMessageIdSelector:()=>Qd,replyToMessageSelector:()=>Wd,reportApiTime:()=>xt,reportArraySelector:()=>wO,reportReducer:()=>QO,reportRequested:()=>kO,resendMessagePayloadSelector:()=>En,resetConversationRequested:()=>Bs,resetNavigateToUnreadMessageId:()=>ni,resetSearchParams:()=>Fs,resultsSelector:()=>Ss,reverseMessagesSelector:()=>Nd,saveDraft:()=>zf,scrollToMessageIdSelector:()=>qd,searchConversationHttpStatusSelector:()=>hs,searchConversationsRequested:()=>il,searchConversationsSucceeded:()=>ul,searchMoreResults:()=>Ks,searchShopsRequested:()=>Bl,selectHydrated:()=>m,selectVideoInfoByKey:()=>fd,selectVideoInfoKeyByVid:()=>Ed,sellerRecommendGroupsFetchStatusSelector:()=>PO,sellerRecommendGroupsSelector:()=>RO,sellerRecommendProductFetchStatusSelector:()=>DO,sellerRecommendProductsSelector:()=>yO,sendingMessageIdsSelector:()=>bd,setChatSource:()=>Qo,setConversationBeenDeleted:()=>oi,setCurrentConversationCanRead:()=>Hs,setNavigateToUnreadMessage:()=>ti,setNavigateToUnreadMessageId:()=>ri,setTextBoxHeight:()=>Rc,setToastInformation:()=>Rp,setToastInformationSaga:()=>wp,settingsFetchStatusSelector:()=>sf,settingsNeedForceUpdateSelectors:()=>af,settingsReducer:()=>Af,settingsSelector:()=>of,settingsStatusSelector:()=>cf,shopAccessSelector:()=>gs,shopReducer:()=>vp,shopSchema:()=>d,shopSelector:()=>xl,shopService:()=>Re,shopStatisticsMapSelector:()=>mn,shopStatisticsSelector:()=>gn,shopTranslationSettingsSelector:()=>V_,shoppingCartItemDetailCleaner:()=>HS,shopsEntitiesSelector:()=>nr,shopsUnreadConversationCountSelector:()=>Ur,shouldPersistItem:()=>Pv,showCartReminder:()=>nh,showChatWindowSelector:()=>wn,showChatbotImage:()=>Ph,showConversationDetailSelector:()=>An,showConversationRequested:()=>Vs,showConversationSucceeded:()=>Ys,showEntrySelector:()=>Mn,showFaqHistory:()=>oh,showFeedStory:()=>rh,showMediaPreviewModalRequested:()=>j_,showMediaPreviewModalSelector:()=>U_,showModal:()=>Nr,showOffer:()=>eh,showOrder:()=>ZS,showProduct:()=>$S,showSearchedConversationRequested:()=>Js,showShop:()=>Wl,showUser:()=>Xa,showUserRequested:()=>Ja,showVoucher:()=>th,showWarningMessageIdsSelector:()=>xd,socket:()=>ke,socketReducer:()=>h_,socketSuccessSelector:()=>Un,sortedConversationsSelector:()=>es,stickerEntitiesSelector:()=>Jt,stickerSchema:()=>p,systemRecommendProductFetchStatusSelector:()=>CO,systemRecommendProductsSelector:()=>bO,takeEveryWithCancel:()=>vv,teamMessageShortcutsSelector:()=>rf,textBoxHeightSelector:()=>In,timerHandler:()=>FO,toBottomHasConflictSelector:()=>Ad,toMessageIdSelector:()=>Yd,toastReducer:()=>Hp,toastSelector:()=>Tp,totalUnreadConversationsCountSelector:()=>Mr,translatePreferenceReducer:()=>iS,unreadCountActions:()=>Lr,unreadCountReducer:()=>tn,unreadMessageIdsSelector:()=>jd,unreadMessagesSelector:()=>kd,updateCSSocketStatus:()=>a_,updateCaptchaSignature:()=>Oc,updateCaptchaSignatureSaga:()=>Tc,updateCaptchaSignatureSucceeded:()=>vc,updateCaptchaVisible:()=>hc,updateChatEntryStatus:()=>Ko,updateChatWindowStatus:()=>Fo,updateChatWindowStatusSaga:()=>Zo,updateChatWindowStatusSucceeded:()=>Ho,updateChatbotFrom:()=>Rh,updateConversationDetailStatus:()=>Vo,updateConversationDetailStatusSaga:()=>ea,updateConversationDetailStatusSucceeded:()=>Bo,updateConversationFilter:()=>Us,updateConversationListsHash:()=>Te,updateConversationTimestamp:()=>ks,updateCurTabFocused:()=>ac,updateCurTabFocusedSaga:()=>sc,updateCurTabFocusedSucceeded:()=>cc,updateDelPermission:()=>Va,updateEntities:()=>fr,updateFetchConversationsDirection:()=>xs,updateFetchStatus:()=>rS,updateFetchedShopIds:()=>Fl,updateGuide:()=>Oo,updateGuideRequested:()=>_o,updateGuideSucceeded:()=>So,updateIsMainPage:()=>oc,updateLocationMode:()=>$s,updateLoginSuccessStatus:()=>qo,updateNetworkStatus:()=>Lo,updateNoticesCount:()=>KE,updateOpenedMenu:()=>Yo,updateOrReplaceAction:()=>yv,updateReadRequestData:()=>js,updateReconnectFlag:()=>OE,updateRecord:()=>Er,updateSearchParams:()=>ll,updateSettingPreferenceStatus:()=>nS,updateShopFilter:()=>Hl,updateShopTranslationSettings:()=>tS,updateShopTranslationSettingsRecord:()=>oS,updateSocketSuccessStatus:()=>Wo,updateStatusSelector:()=>Y_,updateTimeNowSelector:()=>Fc,updateTotalUnreadConversationsCount:()=>qr,updateUnreadCount:()=>Qr,updateUser:()=>zo,updateUserRequested:()=>Mo,userEntitiesSelector:()=>qt,userReducer:()=>Uc,userSchema:()=>a,userSelector:()=>Sn,videoMapSelector:()=>dd,visitShopSellerCenterRequested:()=>Vl,voucherEntitiesSelector:()=>Zt,voucherHttpStatusSelector:()=>sO,voucherSelector:()=>uO,vouchersSchema:()=>O,vouchersSelector:()=>iO,watchBlock:()=>Kn,watchCSChatChannel:()=>i_,watchCSChatReconnect:()=>u_,watchCaptcha:()=>mc,watchChannel:()=>XE,watchChatbotSagas:()=>cO,watchCheck:()=>Ya,watchConversationSagas:()=>Al,watchFeedback:()=>IE,watchGuides:()=>ao,watchLogin:()=>Pa,watchReportSagas:()=>YO,watchSearch:()=>dl,watchSettingsSagas:()=>If,watchShopSagas:()=>hp,watchShow:()=>$a,watchSocketSagas:()=>S_,watchTab:()=>ic,watchToastSagas:()=>Fp,watchTranslationSagas:()=>uS,watchTranslationSettings:()=>sS,watchUncontrolledSagas:()=>hv,watchUnreadSagas:()=>en,watchUpdate:()=>ta,watchUpdateGuides:()=>vo,watchUserSagas:()=>xc});var t=P(383);function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(r){e(t,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var o=function(e,r,o){return new t.schema.Entity(e,n({},r),n({},o))},a=o("users"),c=o("messages"),s=o("conversations"),i=o("orders"),u=o("products"),l=o("offers",{product:u}),p=o("stickers"),d=o("shops"),f=o("feedStories"),E=o("messageShortcuts"),_=o("rateCards"),S=o("agentConversations"),h=o("contacts",{},{idAttribute:"account_id"}),O=o("vouchers"),v={users:a,messages:c,conversations:s,orders:i,offers:l,products:u,stickers:p,shops:d,feedStories:f,messageShortcuts:E,rateCards:_,agentConversations:S,contacts:h,vouchers:O};const T=function(e,r){var n=v[e]||o(e);return r instanceof Array?(0,t.normalize)(r,[n]):(0,t.normalize)(r,n)};var m=function(e,r,n){try{var o=v[e];return r instanceof Array?(0,t.denormalize)(r,[o],n.entityReducer):null==r?void 0:(0,t.denormalize)(r,o,n.entityReducer)}catch(e){return}};function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,s=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(s)throw o}}return a}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=P(855);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function D(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function A(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){D(a,n,o,c,s,"next",e)}function s(e){D(a,n,o,c,s,"throw",e)}c(void 0)}))}}var w=P(757),N=P.n(w);function x(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k=P(444),U=P.n(k);window.__CHANGE_FETCH__||(window.fetch=U(),window.__CHANGE_FETCH__=!0);var M="CHAT_API",L=function(){window.caches&&window.caches.delete(M)};function j(e,t){return G.apply(this,arguments)}function G(){return(G=A(N().mark((function e(t,r){var n,o,a,c,s,i,u,l,p,d,f,E,_,S,h,O,v,T,m,g;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=new URL(t),o=n.searchParams,a=o.get("need_cache"),c=o.get("force_update"),s=o.get("_ts"),i=r.method&&"get"===r.method.toLowerCase(),u="&csrf_token=".concat(encodeURIComponent(o.get("csrf_token")||"")),l="&force_update=".concat(String(c)),p=t.replace(u,"").replace(l,"").replace(s||"",""),!(i&&a&&window.caches)){e.next=44;break}return e.next=13,window.caches.open(M);case 13:return d=e.sent,e.next=16,d.match(p);case 16:if(f=e.sent,E=Date.now(),!f){e.next=25;break}if(!(E<Number(f.headers.get("cache-expires")))||c){e.next=23;break}return e.abrupt("return",f);case 23:return e.next=25,d.delete(p);case 25:return e.next=27,window.fetch(t,r);case 27:if(_=e.sent,S=_.clone(),200!==_.status){e.next=41;break}return h=x(_.headers.entries()),O={},v=Number(o.get("cache_expires"))||3600,T=E+1e3*v,e.next=36,_.blob();case 36:m=e.sent,h.forEach((function(e){O[e[0]]=e[1]})),O["cache-expires"]=T,g=new Response(m,{headers:new Headers(O)});try{d.put(p,g)}catch(e){window.caches.delete(M)}case 41:return e.abrupt("return",S);case 44:return e.abrupt("return",window.fetch(t,r));case 45:e.next=50;break;case 47:return e.prev=47,e.t0=e.catch(0),e.abrupt("return",window.fetch(t,r));case 50:case"end":return e.stop()}}),e,null,[[0,47]])})))).apply(this,arguments)}var F=P(672);function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t,r){return t&&V(e.prototype,t),r&&V(e,r),e}function Y(e,t){return Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Y(e,t)}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?q(e):t}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function J(e,t,r){return J=z()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&Y(o,r.prototype),o},J.apply(null,arguments)}function X(e){var t="function"==typeof Map?new Map:void 0;return X=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return J(e,arguments,K(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Y(n,e)},X(e)}var $=function(e){Q(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}(r);function r(e){var n;return H(this,r),(n=t.call(this)).name=n.constructor.name,n.message=e,n}return B(r,[{key:"handler",value:function(){}}]),r}(X(Error)),Z=function(e){Q(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}(r);function r(e,n){var o;return H(this,r),(o=t.call(this,e)).name=o.constructor.name,o}return B(r,[{key:"handler",value:function(){(0,R.removeItem)("mini-session"),R.LS.removeItem("mini-session")}}]),r}(X(Error));const ee=function(e){Q(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}(r);function r(e){var n;return H(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(X(Error));var te=function(e){Q(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}(r);function r(e,n){var o;return H(this,r),(o=t.call(this,e)).name=o.constructor.name,o.errors=n,o}return r}(X(Error)),re=function(e){Q(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}(r);function r(e){var n;return H(this,r),(n=t.call(this,e)).name=n.constructor.name,n.handler=n.handler.bind(q(n)),n}return B(r,[{key:"handler",value:function(){}}]),r}(X(Error)),ne=function(e){Q(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}(r);function r(e,n){var o;return H(this,r),(o=t.call(this,e)).name=o.constructor.name,o}return B(r,[{key:"handler",value:function(){}}]),r}(X(Error)),oe=P(439).t,ae=function(e){Q(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}(r);function r(e){var n;return H(this,r),(n=t.call(this)).name=n.constructor.name,n.error=e,n.handler=n.handler.bind(q(n)),n}return B(r,[{key:"handler",value:function(){var e="";switch(this.error.error_code){case"unauthorized_for_shop":e="forward.error.unauthorized_for_shop";break;case"target_subaccount_unauthorized_for_shop":e="forward.error.target_subaccount_unauthorized_for_shop";break;case"target_group_unauthorized_for_shop":e="forward.error.target_group_unauthorized_for_shop";break;case"conversation_not_belong_to_you":e="forward.error.conversation_not_belong_to_you";break;case"conversation_not_dispatch":e="forward.error.conversation_not_dispatch";break;case"cannot_move_conversation_to_yourself":e="forward.error.cannot_move_conversation_to_yourself";break;case"target_subaccount_not_online":e="forward.error.target_subaccount_not_online";break;case"subaccount_conversation_not_found":e="forward.error.subaccount_conversation_not_found";break;case"conversation_closed":e="forward.error.conversation_closed";break;case"user_have_delete_disable":e="forward.error.user_deleted";break;case"user_has_pending_order":e="conversation_detail.workstation.block_fail_modal.title"}return{show:!0,type:"fail",message:oe(e)}}}]),r}(X(Error)),ce=function(e){Q(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}(r);function r(e,n,o){var a;return H(this,r),(a=t.call(this,e)).name=a.constructor.name,a}return r}(X(Error)),se=P(439).t,ie=function(e){Q(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}(r);function r(e){var n;return H(this,r),(n=t.call(this)).name=n.constructor.name,n.error=e,n}return B(r,[{key:"handler",value:function(){var e;switch(this.error.error_code){case"send_rating_card_too_frequently":e="conversation_detail.message_list.rating_card_duplicate";break;case"rating_card_rated":case"rating_card_expired":e="rate_card.submit.fail";break;default:e="common.server_error.warning_tips"}return{message:se(e),show:!0,type:"fail"}}}]),r}(X(Error)),ue=function(e){Q(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}(r);function r(e){var n;return H(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(X(Error)),le=function(e){Q(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}(r);function r(e){var n;return H(this,r),(n=t.call(this,e.message)).name=n.constructor.name,n.message=e.message,n}return r}(X(Error)),pe=function(e){Q(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}(r);function r(e){var n;return H(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(X(Error));const de=function(e){Q(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}(r);function r(e,n,o){var a;return H(this,r),(a=t.call(this,e)).name=a.constructor.name,a.errors=n,a.data=o,a}return r}(X(Error)),fe=function(e){Q(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}(r);function r(e){var n;return H(this,r),(n=t.call(this,e)).name=n.constructor.name,n.message=e,n}return r}(X(Error));var Ee,_e=function(e){Q(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}(r);function r(e){var n;return H(this,r),(n=t.call(this)).message=e,n}return r}(X(Error)),Se=function(e){switch(e){case 400:return $;case 401:return Z;case 403:return ne;case 404:return ee;case 422:return te;case 429:return ue;case 451:return le;case 452:return _e;case 491:return ae;case 492:return ce;case 493:return ie;case 494:return pe;case 495:return de;case 500:return re;default:return Error}},he=function(e){return"".concat(e).startsWith("4")||"".concat(e).startsWith("5")},Oe=P(252);!function(e){e.HANDLE_401_ERROR_REQUESTED="HANDLE_401_ERROR_REQUESTED",e.UPDATE_CONVERSATION_LISTS_HASH="UPDATE_CONVERSATION_LISTS_HASH"}(Ee||(Ee={}));var ve=(0,Oe.createActions)(e({},Ee.HANDLE_401_ERROR_REQUESTED,(function(e){return{resource:e.resource}}))).handle401ErrorRequested,Te=(0,Oe.createActions)(e({},Ee.UPDATE_CONVERSATION_LISTS_HASH,(function(){return{}}))).updateConversationListsHash,me=P(598),ge=P.n(me);function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ye(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Re=new(function(){function t(){H(this,t),this.shopsMap={}}var r;return B(t,[{key:"updateShopMap",value:function(e){this.shopsMap=be(be({},this.shopsMap),e)}},{key:"getRegion",value:(r=A(N().mark((function t(r){var n,o,a,c;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=11;break}if(o=null===(n=this.shopsMap[r])||void 0===n?void 0:n.country){t.next=8;break}return t.next=5,$e({resource:"shop",id:r,params:{need_cache:1,cache_expires:600}});case 5:return a=t.sent,this.updateShopMap(e({},a.id,a)),t.abrupt("return",a.country);case 8:return t.abrupt("return",o);case 11:if(c=(0,R.getRuntimeRegion)().toUpperCase(),!["KR","CN"].includes(c)){t.next=14;break}return t.abrupt("return","GLOBAL");case 14:return t.abrupt("return",c);case 15:case"end":return t.stop()}}),t,this)}))),function(e){return r.apply(this,arguments)})}]),t}());"live"!==(0,R.getRuntimeServer)()&&(window.shopService=Re);var Ce,De=P(674),Pe=P.n(De);function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ie(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var we=(0,R.checkIsScChat)();Ce=we?"scminichat":"pmminichat";var Ne=new(Pe())({shouldShared:we,name:"".concat((0,R.getRuntimeRegion)(),"_").concat((0,R.getRuntimeServer)(),"_seller-push-ws")}),xe=Ne.isShared,ke=Ne.socket;ke.dispatch||(ke.dispatch=function(){return{}});var Ue,Me,Le,je=function(e){return xe?ke.emit("login",Ae(Ae({},e),{},{app_id:Ce}),!0):new Promise((function(t){ke.emit("login",Ae(Ae({},e),{},{app_id:Ce}),(function(e){return t(JSON.parse(e))}))}))},Ge=function(e){var t=e.noticesCount,r=e.readMissedCount,n=e.csSocketLogined,o=e.csSocketConnected,a={app_id:Ce,noticesCount:t,readMissedCount:r,csSocketLogined:n,csSocketConnected:o},c="".concat(Ce,"|").concat(t,"|").concat(r,"|").concat(n,"|").concat(o);return xe?ke.heartbeat({emitEvent:"heartbeat",args:a,pollingTime:6e4,remedyTime:9e4,separator:"|"}):ke.emit("heartbeat",c)},Fe=P(378),He=P.n(Fe),Ve=P(464),Be=P.n(Ve);!function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR"}(Le||(Le={}));var Ye=(e(Ue={},Le.ONE,"70c74f4e-dcda-483e-826b-19dd2c42e799"),e(Ue,Le.TWO,"29ffec18-c614-4645-8f1c-686e22d2e26a"),e(Ue,Le.THREE,"04229e76-1ba3-4ac9-8a4e-68d46a3881a2"),e(Ue,Le.FOUR,"a3769a87-35cf-45e9-a5a7-2b4016c52e92"),Ue),Qe=(e(Me={},Le.ONE,"396c15ad-6d3e-4018-98be-cef58cb45cd0"),e(Me,Le.TWO,"607c871d-b766-4c6f-ba89-b6c6ca32b156"),e(Me,Le.THREE,"42990074-9a73-4459-b749-f3110d222a72"),e(Me,Le.FOUR,"5702b6f3-62a3-44d2-abe8-fece100a8bf4"),Me);function qe(e,t){var r=t.url,n=t.method,o=t.token,a=t.ctoken,c=t.extra,s=function(e){return"live"===(0,R.getRuntimeServer)()?Qe[e]:Ye[e]}(e);switch(e){case 1:return function(e,t,r){if(r){var n=r.plat,o=r.fromID,a=r.reqID,c=r.toID,s=r.timestamp,i=r.type,u=r.strinput,l="key=".concat(t,"&plat=").concat(n,"&ver=v1.2&fromID=").concat(o,"&reqID=").concat(a,"&toID=").concat(c,"&timestamp=").concat(s,"&type=").concat(i,"&strinput=").concat(u);return Be()(l).toString()}return He()(e+t).toString()}(r,s,c);case 2:return function(e,t,r){return He()(e+t+r).toString()}(r,s,n);case 3:return function(e,t,r){return He()(e+t+r).toString()}(r,s,o);case 4:return function(e,t,r){return He()(e+t+r).toString()}(r,s,a);default:return""}}var We=function(e){var t=e.url,r=e.method,n=e.token,o=e.ctoken,a=void 0===o?"":o,c=e.version,s=e.fromID,i=e.payload,u=void 0===i?"{}":i,l=e.timestamp,p=JSON.parse(u),d=p.to_id,f=p.request_id,E=p.type,_=p.content,S=void 0===_?{}:_;return{url:t,method:r,token:n,ctoken:a,extra:{plat:c,fromID:s,reqID:f,toID:d,timestamp:l,type:E,strinput:"text"===E&&S.text?S.text:""}}};function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ze(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ke(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Je=(0,R.checkIsScChat)(),Xe=(0,R.getRuntimeVersion)();function $e(e){return Ze.apply(this,arguments)}function Ze(){return Ze=A(N().mark((function t(r){var n,o,a,c,s,i,u,l,p,d,f,E,_,S,h,O,v,T,m,g,y,D,P,I,w,x,k,U,M,L,G,H,V,B;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.shared,o=void 0!==n&&n,a=r.url,c=r.ssl,s=void 0===c||c,i=r.server,u=r.subServer,l=r.version,p=void 0===l?"v1.2":l,d=r.parent,f=r.parentId,E=r.resource,_=r.id,S=r.suffix,h=r.method,O=void 0===h?"GET":h,v=r.credentials,T=void 0===v?"include":v,m=r.extension,g=r.params,y=void 0===g?{}:g,D=r.payload,P=r.headers,I=void 0===P?{}:P,w=r.namespace,x=void 0===w?"mini":w,k=r.cleaner,U=void 0===k?function(e){return e}:k,M="mini-session",L="mini-session",G=function(){return!!xe&&F.store.getState().userReducer.isMainPage},H=function(){if("sc"===S)return _;if("auth"===E)return f;if(y.shop_id)return y.shop_id;if(D)try{return JSON.parse(D).shop_id}catch(e){}},V=function(){var t=A(N().mark((function t(r){var n,c,l,h,v,g,P,A,w,k,M,L,V,B,Y,Q,q,W,K,z,J,X,$,Z,ee,te,re,ne,oe,ae,ce,se,ie;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=ge().get("CTOKEN"),l=(c=r||{}).token,h=c.version,v=c.user,g=(v=void 0===v?{}:v).id,P=0,A=0,w=0,V="",B={},t.next=11,Re.getRegion(H());case 11:if(Y=t.sent,Q=l&&"include"===T||!i?{Authorization:"Bearer ".concat(l),"x-shop-region":Y}:{},!i&&(i=(0,R.getApiServer)()),a?M=a:(q=[s?"https:/":"http:/",i,u,p,x,d,f,E,_,S].filter(Boolean).join("/"),W=m?"".concat(q,".").concat(m):q,(K=r&&r.user&&r.user.uid)&&(y._uid=K),Xe&&(y._v=Xe),n&&(y.csrf_token=n),y._api_source=Je?"sc":"pcmall",L=Object.entries(y).filter((function(e){var t=b(e,2),r=(t[0],t[1]);return r||0===r})).map((function(e){var t=b(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&"),M=[W,L].filter(Boolean).join("?"),z=[x,d,f,E,_,S].filter(Boolean).join("/"),J=m?"/".concat(z,".").concat(m):"/".concat(z),B._uid=K||"",B._v=Xe||"",X=Object.entries(B).map((function(e){var t=b(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&"),V=[J,X].join("?")),t.prev=15,!(void 0!==_&&parseInt(_)<=0&&!M.includes("message_shortcuts/group")||void 0!==f&&parseInt(f)<=0)){t.next=19;break}throw new Error;case 19:return $={},Z=Date.now(),(ee="POST"===O&&"messages"===E&&!S)&&(te=We({url:V,method:O,version:Xe,token:Q.Authorization||"",fromID:g,payload:D,timestamp:Z}),$={ts:Z,"x-v":h||"","x-s":qe(h,te)}),re={method:O,credentials:T,headers:ze(ze(ze({},Q),$),I),body:D},t.next=27,j(M,re);case 27:ne=t.sent,P=ne.status,t.t0=P,t.next=204===t.t0?32:404===t.t0?34:452===t.t0?36:500===t.t0?38:502===t.t0?40:42;break;case 32:return oe=null,t.abrupt("break",46);case 34:return oe={message:"Resource not found"},t.abrupt("break",46);case 36:return oe={message:"Tempory Error"},t.abrupt("break",46);case 38:return oe={message:"Internal server error"},t.abrupt("break",46);case 40:return oe={message:"Bad Gateway"},t.abrupt("break",46);case 42:return 200===P&&(A=parseInt(ne.headers.get("total")),w=parseInt(ne.headers.get("per-page"))),t.next=45,ne.json();case 45:oe=t.sent;case 46:if([200,204].includes(P)&&"report_upload"===E&&D&&(ae=JSON.parse(D),ce=ae.vid,performance.mark("REPORT_UPLOAD_".concat(ce))),200!==P){t.next=52;break}return se=oe instanceof Array?e({total:A,perPage:w},E,oe.map((function(e){return U(e,Je)}))):U(oe,Je),o&&G()&&ke.dispatch(R.CustomShareEvent.SHARE_API_DATA,ze({type:R.ShareDataType.UNREAD},"object"===C(se)?se:{res:se})),ee&&D&&(k=JSON.parse(D).request_id,(0,R.setItem)(k,Z)),t.abrupt("return",se);case 52:if(204!==P){t.next=54;break}return t.abrupt("return",null);case 54:if(!he(P)){t.next=68;break}if([400,404].includes(P),![429,451,491,493].includes(P)){t.next=61;break}throw new(Se(P))(oe);case 61:if(401!==P){t.next=65;break}F.store.dispatch(ve({resource:E})),t.next=68;break;case 65:throw(ie=new(Se(P))(oe.message,oe.errors||oe.error_code||oe.errcode,oe.data))&&400===P&&(ie._type_="client"),ie;case 68:t.next=74;break;case 70:throw t.prev=70,t.t1=t.catch(15),P||(t.t1.offlineError=!0),t.t1;case 74:case"end":return t.stop()}}),t,null,[[15,70]])})));return function(e){return t.apply(this,arguments)}}(),!o||G()){t.next=8;break}return t.abrupt("return");case 8:B=null;try{B=R.LS.getItem(L,!0)}catch(e){B=null}if(B){t.next=14;break}return t.next=13,(0,R.getItem)(M);case 13:B=t.sent;case 14:return t.abrupt("return",V(B));case 15:case"end":return t.stop()}}),t)}))),Ze.apply(this,arguments)}var et,tt,rt,nt,ot=function(e,t){if(window.requestIdleCallback)return window.requestIdleCallback(e,t);var r=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-r))}})}),1)},at=P(782),ct=P(830),st=P.n(ct),it=P(292),ut=P.n(it),lt={"18a6f08d7326025b60ded61f60c9ea20":"LOAD_HTML","0d2968a6996a60fee2db1270a70ef563":"LOAD_STATIC",ea02fc90bd3663f3179be7a1b7847a83:"APP_PREPARE","4e0b71ed91b3eacb1dfc4ec7f63b2966":"LOGIN_API","9d4a48b69fed6d1001e63ee668a05488":"LOGIN_SUCCEEDED","84fcedc144bfce212ae8db9f6ebb84ec":"SHOW_WEBCHAT"};et={LOAD_HTML:"31b7f223943eee895738ce50e49a359a",LOAD_STATIC:"0ec7c5189cc4ada79908cfe5d6bd97ca",APP_PREPARE:"a61675f22b23600e51007c24a9b8aaf2",LOGIN_API:"75cbf76696b4f8d988de72cdfeb1877c",LOGIN_SUCCEEDED:"05c0e68ee42384c7e07e47fec4400e28",SHOW_WEBCHAT:"1b16553696a08e9f016235005a5a0678",VIDEO_UPLOAD:"334a26e8a6dc82c95a47430f8af2e198",SERVICE_DONE:"19f2ea17be2d1d80257667787e54c882",MESSAGE_SOCKET:"f76ebd29ea3ed4571c9ea48ca893ac14",READ_SOCKET:"37e5b36437f0166056d3312fcea2b592",LOGIN_FAILED:"df8a83f83c949bb6a2b84c6f0048e203",SOCKET_FAILED:"13ddf42d9169b2ce05feb84224d79057",SHARED_TABS:"94e8d83005c95982268ff1c8b036313e",CHATWS_SOCKET_FAILED:"9034ae776ecbdc29ec67fb0edf78011f"},tt={LOAD_HTML:"18a6f08d7326025b60ded61f60c9ea20",LOAD_STATIC:"0d2968a6996a60fee2db1270a70ef563",APP_PREPARE:"ea02fc90bd3663f3179be7a1b7847a83",LOGIN_API:"4e0b71ed91b3eacb1dfc4ec7f63b2966",LOGIN_SUCCEEDED:"9d4a48b69fed6d1001e63ee668a05488",SHOW_WEBCHAT:"84fcedc144bfce212ae8db9f6ebb84ec",VIDEO_UPLOAD:"cc0dbd7370b7ade934cfe7c01bbd4ae9",SERVICE_DONE:"26ba92fb54150fe3bd6f827bb08ce8c9",MESSAGE_SOCKET:"a01882e94fde5237ca815e13b0e2a88b",READ_SOCKET:"e46fdcb42cae43a7e6f49213f150fa8e",LOGIN_FAILED:"87df9f73fb8b93629ae8a08822cfcf77",SOCKET_FAILED:"3a74221d64cf853a5c3ca65c3c3339eb",SHARED_TABS:"22557ca0a2caca6bae43f1932f088d47",CHATWS_SOCKET_FAILED:"f729b9774aef5b67bfd37afc711bdd3f"},rt="b23651c629e54c7bc1c9a743f25dbb5825cb1ed4e7bb7f8a78cd788dfc769127",nt="2b74d02be173856bde260473166da16b83fcc18d18057ce8b4a73eab5f1c7280";var pt,dt={HTML_LOADED:"HTML_LOADED",STATIC_LOADED:"STATIC_LOADED",APP_PREPARED:"APP_PREPARED",LOGIN_API_RESPONSED:"LOGIN_API_RESPONSED",APP_RENDERING:"APP_RENDERING",RENDER_CONVERSATION_LIST:"RENDER_CONVERSATION_LIST",RENDER_MESSAGE_LIST:"RENDER_MESSAGE_LIST",RENDER_WELCOME_PAGE:"RENDER_WELCOME_PAGE"},ft={WELCOME_PAGE:"WELCOME_PAGE",MESSAGE_LIST:"MESSAGE_LIST",CONVERSATION_LIST:"CONVERSATION_LIST",APP:"APP"},Et={TYPE_ERROR:"TypeError",RANGE_ERROR:"RangeError",SYNTAX_ERROR:"SyntaxError",REFERENCE_ERROR:"ReferenceError",SAGA_ERROR:"Saga Error",ERROR_BOUNDARY:"Error Boundary",LOAD_ORDER_ERROR:"Load Order Error",PRELOAD_ERROR:"Preload Error",SOCKET_LOGIN_FAILED:"Socket Login Failed",LOGIN_ERROR:"Login Error",PARAMETER_ERROR:"Parameter Error",API_UNCAUGHT_ERROR:"Api Uncaught Error",API_CLIENT_ERROR:"Api Client Error"};function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function St(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?_t(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}window.__CHANGE_FETCH__||(window.fetch=U(),window.__CHANGE_FETCH__=!0);var ht,Ot,vt,Tt,mt=function(e){pt=e},gt=!1,yt=location.host.includes("shopee.cn"),bt=(0,R.checkIsScChat)(),Rt=[],Ct="live"===(0,R.getRuntimeServer)()?et:tt,Dt=function(){try{var e=performance.getEntriesByName(dt.HTML_LOADED,"mark")[0].startTime,t=performance.getEntriesByName(dt.STATIC_LOADED,"mark")[0].startTime,r=performance.getEntriesByName(dt.APP_PREPARED,"mark")[0].startTime,n=performance.getEntriesByName(dt.LOGIN_API_RESPONSED,"mark")[0].startTime,o=performance.getEntriesByName(dt.APP_RENDERING,"mark")[0].startTime;Rt.push({id:Ct.LOAD_HTML,duration:window.__INDEX_HTML_LOADED__},{id:Ct.LOAD_STATIC,duration:Math.floor(t-e)},{id:Ct.APP_PREPARE,duration:Math.floor(r-t)},{id:Ct.LOGIN_API,duration:Math.floor(n-r)},{id:Ct.LOGIN_SUCCEEDED,duration:Math.floor(o-n)})}catch(e){}},Pt=function(e,t){try{var r=null,n=performance.getEntriesByName(dt.APP_RENDERING,"mark")[0].startTime;switch(e){case ft.WELCOME_PAGE:r=performance.getEntriesByName(dt.RENDER_WELCOME_PAGE,"mark")[0].startTime,Rt.push({id:Ct.RENDER_WELCOME_PAGE,duration:Math.floor(r-n)});break;case ft.MESSAGE_LIST:r=performance.getEntriesByName(dt.RENDER_MESSAGE_LIST,"mark")[0].startTime,Rt.push({id:Ct.RENDER_MESSAGE_LIST,duration:Math.floor(r-n)});break;case ft.CONVERSATION_LIST:r=performance.getEntriesByName(dt.RENDER_CONVERSATION_LIST,"mark")[0].startTime,Rt.push({id:Ct.RENDER_CONVERSATION_LIST,duration:Math.floor(r-n)})}Rt.push(t),ot(At,{timeout:2e3})}catch(e){}},It=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Rt.push({id:e,duration:t,extra:r}),ot(At,{timeout:2e3})};function At(e){for(;(e.timeRemaining()>5||e.didTimeout)&&Rt.length;){var t=Rt.shift(),r=t.id,n=t.duration,o=t.extra;r&&xt(r,n,o),"live"!==(0,R.getRuntimeServer)()&&lt[r]&&console.log("|-- : ",lt[r],", : ".concat(n))}Rt.length&&ot(At,{timeout:2e3})}var wt,Nt=function(){if(!gt){var e=(0,R.getRuntimeServer)(),t="live"===e,r=(0,R.getRuntimeRegion)(),n=(0,R.getRuntimeVersion)();ht=new at.MdapSdk({app_name:"minichat",secret_key:t?rt:nt,environment:e,region:r,app_version:n,sample:t?.2:1}),Ot=new(st())({path:[/[\\/]webchat[\\/]api[\\/].*[\\/](login|(conversations[\\/](\d+)[\\/]messages)|conversations|orders_by_buyer_id|vouchers|products|items|(offer[\\/]given)|read|(video[\\/](in_whitelist|preupload|report_upload|upload_status)))[\\?]/,"/webchat/api/v1.2/messages"]}),vt=new(ut())({path:[/.*[\\/]chateasy[\\/].*\.(js|css)/]}),Tt=new at.CustomPlugin({}),ht.use(Ot),ht.use(vt),ht.use(Tt),gt=!0}};function xt(e,t,r){gt||Nt();var n={point_id:e,data:{userType:pt,localOrCn:void 0!==wt?wt:wt=yt&&"CN"!==(0,R.getRuntimeRegion)().toUpperCase()?"cn":"local",chatHost:bt?"seller":"pcmall"}};t&&(n=St(St({},n),{},{duration:t})),r&&(n.data=St(St({},n.data),r)),Tt.sendData(n)}var kt,Ut=P(455),Mt=P.n(Ut),Lt=P(944),jt=N().mark(Ht),Gt=[];kt=[202,215];var Ft=function(e,t){var r=kt.includes(e)?"c":"r",n=(t||"").toLocaleLowerCase(),o="".concat((0,R.getCDNUrl)(),"shopee-seller-live-sg/tsp/api/").concat(r,"_").concat(e,"_").concat(n,".json");return U()(o).then(function(){var e=A(N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};function Ht(e){var t,r,n,o,a,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.locale,r="live"===(0,R.getRuntimeServer)()||"live-test"===(0,R.getRuntimeServer)(),n=new(Mt())({name:"webchat"}),o={},s.next=6,n.create({locale:t,env:r?"live":"non-live",translation:{resources:Gt,collections:kt}});case 6:if(a=s.sent,o=a.translation,!(0,R.checkEmptyObject)(o)){s.next=15;break}return c=[],kt.concat(Gt).forEach((function(e){c.push(Ft(e,t))})),s.next=13,(0,Lt.all)(c);case 13:s.sent.forEach((function(e){Object.assign(o,e)}));case 15:return s.abrupt("return",o);case 16:case"end":return s.stop()}}),jt)}var Vt,Bt=P(975),Yt=function(e){return e<=100?1:e<=500?2:e<=1e3?3:4},Qt=function(e){return e.entityReducer},qt=(0,Bt.createSelector)(Qt,(function(e){return e.users})),Wt=(0,Bt.createSelector)(Qt,(function(e){return e.conversations})),Kt=(0,Bt.createSelector)(Qt,(function(e){return e.agentConversations})),zt=(0,Bt.createSelector)(Qt,(function(e){return function(e){return(0,R.checkEmptyObject)(e)?{}:e}(e.messages)})),Jt=(0,Bt.createSelector)(Qt,(function(e){return e.stickers})),Xt=(0,Bt.createSelector)(Qt,(function(e){return e.orders})),$t=(0,Bt.createSelector)(Qt,(function(e){return e.products})),Zt=(0,Bt.createSelector)(Qt,(function(e){return e.vouchers})),er=(0,Bt.createSelector)(Qt,(function(e){return e.messageShortcutsGroups})),tr=(0,Bt.createSelector)(Qt,(function(e){return e.feedStories})),rr=(0,Bt.createSelector)(Qt,(function(e){return e.rateCards})),nr=(0,Bt.createSelector)(Qt,(function(e){return e.shops})),or=(0,Bt.createSelector)(Qt,(function(e){return e.contacts})),ar=(0,Bt.createSelector)(Wt,Kt,(function(e,t){var r=Object.keys(e).length+Object.keys(t).length;return Yt(r)})),cr=(0,Bt.createSelector)(zt,(function(e){return Yt(Object.keys(e).length)}));function sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ir(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?sr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.UPDATE_ENTITIES="UPDATE_ENTITIES",e.UPDATE_RECORD="UPDATE_RECORD",e.DELETE_RECORD="DELETE_RECORD",e.BATCH_UPDATE_RECORD="BATCH_UPDATE_RECORD"}(Vt||(Vt={}));const ur=e({},Vt.UPDATE_ENTITIES,(function(t,r){var n=r.payload.entities;return Object.entries(n).reduce((function(t,r){var n=b(r,2),o=n[0],a=n[1];return"persist"!==o?("shops"===o&&Re.updateShopMap(a),ir(ir({},t),{},e({},o,ir(ir({},t[o]),a)))):ir(ir({},t),{},e({},o,a))}),t)}));var lr,pr,dr=(0,Oe.createActions)((e(lr={},Vt.UPDATE_ENTITIES,(function(e){return{entities:e.entities}})),e(lr,Vt.UPDATE_RECORD,(function(e){return{name:e.name,id:e.id,record:e.record}})),e(lr,Vt.DELETE_RECORD,(function(e){return{name:e.name,id:e.id}})),e(lr,Vt.BATCH_UPDATE_RECORD,(function(e){return{name:e.name,records:e.records,checkProp:e.checkProp}})),lr)),fr=dr.updateEntities,Er=dr.updateRecord,_r=dr.deleteRecord,Sr=dr.batchUpdateRecord;function hr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Or(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?hr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const vr=(e(pr={},Vt.UPDATE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.id,c=n.record;return Or(Or({},t),{},e({},o,Or(Or({},t[o]),{},e({},a,Or(Or({},t[o][a]),c)))))})),e(pr,Vt.DELETE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.id,c=t[o];return delete c[a],Or(Or({},t),{},e({},o,c))})),e(pr,Vt.BATCH_UPDATE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.records,c=n.checkProp,s=Or({},t[o]);return Object.keys(a).forEach((function(e){(!c||c&&a[e][c]>s[e][c])&&(s[e]=Or(Or({},s[e]),a[e]))})),Or(Or({},t),{},e({},o,s))})),pr);function Tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Tr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var gr,yr=(0,Oe.handleActions)(mr(mr({},ur),vr),{users:{},messages:{},conversations:{},agentConversations:{},stickers:{},orders:{},offers:{},products:{},shops:{},rateCards:{},feedStories:{},persist:null,vouchers:{},messageShortcuts:{}});!function(e){e.SHOW_MODAL="SHOW_MODAL",e.CLOSE_MODAL="CLOSE_MODAL"}(gr||(gr={}));var br,Rr,Cr=(0,Bt.createSelector)((function(e){return e.modalReducer.show}),(function(e){return e.modalReducer.type}),(function(e,t){return{show:e,type:t}}));function Dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Dr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ir,Ar,wr=(0,Oe.createActions)((e(br={},gr.SHOW_MODAL,(function(e){var t=e.type,r=e.title,n=void 0===r?"":r,o=e.content,a=e.actions,c=void 0===a?{}:a,s=e.additions;return{type:t,title:n,content:o,actions:c,additions:void 0===s?{}:s}})),e(br,gr.CLOSE_MODAL,(function(){return{}})),br)),Nr=wr.showModal,xr=wr.closeModal,kr=(0,Oe.handleActions)((e(Rr={},gr.SHOW_MODAL,(function(e,t){var r=t.payload,n=r.type,o=r.title;return{show:!0,type:n,content:r.content,title:o,actions:r.actions,additions:r.additions}})),e(Rr,gr.CLOSE_MODAL,(function(e){return Pr(Pr({},e),{},{show:!1})})),Rr),{show:!1,type:"",title:"",content:"",actions:{},additions:{}}),Ur=function(e){return e.unreadCountReducer.shopsUnreadConversationCount},Mr=function(e){return e.unreadCountReducer.totalUnreadConversationsCount},Lr={MARK_AS_READ:"markAsRead",MARK_AS_UNREAD:"markASUnread",CLOSE_CONVERSATION:"closeConversation",RESTART_CONVERSATION:"restartConversation",DELETE_CONVERSATION:"deleteConversation",FORWARD_CONVERSATION:"forwardConversation",RECEIVE_UNREADABLE_MESSAGE:"receiveUnreadableMessage",REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT:"refreshTotalUnreadConversationCount",REFRESH_SHOPS_UNREAD_CONVERSATIONS_COUNT:"refreshShopsUnreadConversationsCount",REFRESH_SINGLE_SHOP_UNREAD_CONVERSATION_COUNT:"refreshSingleShopUnreadConversationCount",UPDATE_CONVERSATION:"updateConversation",MESSAGE_QUEUE_UPDATE:"messageQueueUpdate",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_CLOSE:"mass_close",ACTIVE_CONVERSATION:"activeConversation",CLEAR_CONVERSATION_COUNT:"clearConversationCount"};function jr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?jr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.UPDATE_UNREAD_COUNT="UPDATE_UNREAD_COUNT",e.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT="UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT",e.UPDATE_SINGLE_SHOP_UNREAD_COUNT="UPDATE_SINGLE_SHOP_UNREAD_COUNT",e.UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT="UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT",e.UPDATE_REGION_UNREAD_COUNT="UPDATE_REGION_UNREAD_COUNT"}(Ir||(Ir={}));var Fr=N().mark(Wr),Hr=N().mark(Kr),Vr=N().mark(zr),Br=N().mark(Jr),Yr=(0,Oe.createActions)((e(Ar={},Ir.UPDATE_UNREAD_COUNT,(function(e){return{type:e.type,conversation:e.conversation,messageQueueUpdate:e.messageQueueUpdate,shopId:e.shopId,shopIds:e.shopIds,source:e.source,count:e.count}})),e(Ar,Ir.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT,(function(e){return{count:e.count}})),e(Ar,Ir.UPDATE_SINGLE_SHOP_UNREAD_COUNT,(function(e){return{shopId:e.shopId,num:e.num,action:e.action}})),e(Ar,Ir.UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT,(function(e){return{shopUnreadCounts:e.shopUnreadCounts}})),Ar)),Qr=Yr.updateUnreadCount,qr=Yr.updateTotalUnreadConversationsCount;function Wr(e,t){return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,Lt.put)(Er({name:"conversations",id:e,record:{unread_count:t}}));case 2:case"end":return r.stop()}}),Fr)}function Kr(e){var t,r,n,o,a,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.source,s.prev=1,r=t===R.UnreadSource.PRELOAD,n=t?{_s:t}:{},s.next=6,(0,Lt.call)($e,{shared:!r,parent:"conversation",resource:"unread-count",params:n});case 6:return o=s.sent,a=o.total_unread_count,s.next=10,(0,Lt.put)(qr({count:a}));case 10:return s.next=12,(0,Lt.select)(xn);case 12:c=s.sent,r&&wT({operation:R.TrackerOperation.IMPRESSION,trackerName:"impressionChatIcon",data:{ctx_url:window.location.href,has_unread_convo:!!a,unread_convo_cnt:a},page:c?"seller_center_chat":"minichat_page"}),s.next=18;break;case 16:s.prev=16,s.t0=s.catch(1);case 18:case"end":return s.stop()}}),Hr,null,[[1,16]])}function zr(e){var t,r,n,o,a,c,s,i,u,l,p,d;return N().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,r=t.type,n=t.conversation,o=void 0===n?{}:n,t.shopId,t.shopIds,a=t.messageQueueUpdate,c=t.source,s=t.count,i=o.id,u=o.unread_count,o.shop_id,f.next=4,(0,Lt.select)(Mr);case 4:l=f.sent,f.t0=r,f.next=f.t0===Lr.FORWARD_CONVERSATION||f.t0===Lr.CLOSE_CONVERSATION||f.t0===Lr.DELETE_CONVERSATION||f.t0===Lr.UPDATE_CONVERSATION?8:f.t0===Lr.CLEAR_CONVERSATION_COUNT||f.t0===Lr.MARK_AS_READ?14:f.t0===Lr.ACTIVE_CONVERSATION?20:f.t0===Lr.MARK_AS_UNREAD?23:f.t0===Lr.RECEIVE_UNREADABLE_MESSAGE?28:f.t0===Lr.RESTART_CONVERSATION||f.t0===Lr.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT?34:f.t0===Lr.MESSAGE_QUEUE_UPDATE?37:f.t0===Lr.MASS_READ?41:f.t0===Lr.MASS_UNREAD?44:f.t0===Lr.MASS_CLOSE?47:50;break;case 8:if(0===u){f.next=13;break}return f.next=11,(0,Lt.put)(qr({count:l-1}));case 11:return f.next=13,(0,Lt.call)(Wr,i,0);case 13:case 19:case 22:case 27:case 33:case 36:case 40:case 43:case 46:case 49:case 50:return f.abrupt("break",51);case 14:if(!(u>0)){f.next=19;break}return f.next=17,(0,Lt.put)(qr({count:l-1}));case 17:return f.next=19,(0,Lt.call)(Wr,i,0);case 20:return f.next=22,(0,Lt.put)(qr({count:l+1}));case 23:return f.next=25,(0,Lt.put)(qr({count:l+1}));case 25:return f.next=27,(0,Lt.call)(Wr,i,u+1);case 28:if(0!==u){f.next=31;break}return f.next=31,(0,Lt.put)(qr({count:l+1}));case 31:return f.next=33,(0,Lt.call)(Wr,i,u+1);case 34:return f.next=36,(0,Lt.call)(Kr,{source:c});case 37:return d=(p=a).totalIncrease,p.shopsIncrease,f.next=40,(0,Lt.put)(qr({count:l+d}));case 41:return f.next=43,(0,Lt.put)(qr({count:l-s}));case 44:return f.next=46,(0,Lt.put)(qr({count:l+s}));case 47:return f.next=49,(0,Lt.put)(qr({count:l-s}));case 51:case"end":return f.stop()}}),Vr)}function Jr(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Qr,zr);case 2:case"end":return e.stop()}}),Br)}Yr.updateSingleShopUnreadCount,Yr.updateShopsUnreadConversationsCount;const Xr=e({},Ir.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT,(function(e,t){var r=t.payload.count;return Gr(Gr({},e),{},{totalUnreadConversationsCount:r<0?0:r})}));function $r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Zr,en=[Jr],tn=(0,Oe.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?$r(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Xr),{totalUnreadConversationsCount:0}),rn=function(e){return e.userReducer.loading},nn=function(e){return e.userReducer.currentUserId},on=function(e){return e.userReducer.newbie},an=function(e){return e.userReducer.networkStatus},cn=function(e){return e.userReducer.hasVideoPermission},sn=function(e){return e.userReducer.hasReplyPermission},un=function(e){return e.userReducer.hasDeletePermission},ln=function(e){return e.userReducer.deleteConfigDuration},pn=function(e){var t=e.userReducer;return{hasDeletePermission:t.hasDeletePermission,deleteConfigVersion:t.deleteConfigVersion,deleteConfigDuration:t.deleteConfigDuration}},dn=function(e){return e.userReducer.captchaVisible},fn=function(e){return e.userReducer.captchaSignature},En=function(e){return e.userReducer.resendMessagePayload},_n=function(e){return e.userReducer.newMessageFlag},Sn=function(e){return(0,Bt.createSelector)(Qt,(function(r){return(0,t.denormalize)(e,a,{users:r})}))},hn=(0,Bt.createSelector)(qt,nn,(function(e,r){return(0,t.denormalize)(r,a,{users:e})||{}})),On=(0,Bt.createSelector)(hn,(function(e){return e&&e.locale})),vn=(0,Bt.createSelector)(hn,(function(e){return!(0,R.checkEmptyObject)(e)&&e.type===R.AccountType.SUBACCOUNT})),Tn=(0,Bt.createSelector)(hn,(function(e){return!(0,R.checkEmptyObject)(e)&&e.is_cb})),mn=function(e){return e.userReducer.shopStatisticsMap},gn=function(e,t){return(0,Bt.createSelector)(mn,(function(r){return r["".concat(e,"-").concat(t)]||{}}))},yn=(0,Bt.createSelector)(hn,vn,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t?void 0:e.shop_id})),bn=(0,Bt.createSelector)(hn,vn,nr,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return r?void 0:(0,t.denormalize)(e.shop_id,d,{shops:n})||{}})),Rn=(0,Bt.createSelector)(hn,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.role||""})),Cn=(0,Bt.createSelector)(hn,(function(e){return e&&e.distribution_status||""})),Dn=function(e){return e.userReducer.isMainPage},Pn=function(e){return e.userReducer.curTabFocused},In=function(e){return e.userReducer.textBoxHeight},An=function(e){return e.userReducer.showConversationDetail},wn=function(e){return e.userReducer.showChatWindow},Nn=function(e){return e.userReducer.openedMenu},xn=function(e){return e.userReducer.isScChat},kn=function(e){return e.userReducer.loginSuccess},Un=function(e){return e.userReducer.socketSuccess},Mn=function(e){return e.userReducer.showEntry},Ln=(0,Bt.createSelector)(hn,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.authorizedShopsCount||0}));!function(e){e.BLOCK_USER_REQUESTED="BLOCK_USER_REQUESTED",e.CHECK_USER_PERMISSION_REQUESTED="CHECK_USER_PERMISSION_REQUESTED",e.CHECK_USER_PERMISSION_SUCCEEDED="CHECK_USER_PERMISSION_SUCCEEDED",e.CLOSE_HANGUP_TIPS_REQUESTED="CLOSE_HANGUP_TIPS_REQUESTED",e.SEND_FEEDBACK_REQUESTED="SEND_FEEDBACK_REQUESTED",e.GET_GUIDE_REQUESTED="GET_GUIDE_REQUESTED",e.GET_GUIDE_SUCCEEDED="GET_GUIDE_SUCCEEDED",e.GET_GUIDE_FAILED="GET_GUIDE_FAILED",e.SHOW_LOADING_SUCCEEDED="SHOW_LOADING_SUCCEEDED",e.SET_HAS_SESSION="SET_HAS_SESSION",e.SHOW_USER_REQUESTED="SHOW_USER_REQUESTED",e.FETCH_USER_ORDER_DETAIL_REQUESTED="FETCH_USER_ORDER_DETAIL_REQUESTED",e.FETCH_USER_ORDER_DETAIL_SUCCEEDED="FETCH_USER_ORDER_DETAIL_SUCCEEDED",e.FETCH_USER_PERFORMANCE_REQUESTED="FETCH_USER_PERFORMANCE_REQUESTED",e.FETCH_USER_PERFORMANCE_SUCCEED="FETCH_USER_PERFORMANCE_SUCCEED",e.UPDATE_USER_REQUESTED="UPDATE_USER_REQUESTED",e.UPDATE_NETWORK_STATUS="UPDATE_NETWORK_STATUS",e.UPDATE_CUR_TAB_FOCUSED="UPDATE_CUR_TAB_FOCUSED",e.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED="UPDATE_CUR_TAB_FOCUSED_SUCCEEDED",e.UPDATE_WORKSTATION_PANEL="UPDATE_WORKSTATION_PANEL",e.UPDATE_NEW_MESSAGE_FLAG="UPDATE_NEW_MESSAGE_FLAG",e.UPDATE_CHAT_WINDOW_STATUS="UPDATE_CHAT_WINDOW_STATUS",e.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED="UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED",e.UPDATE_CONVERSATION_DETAIL_STATUS="UPDATE_CONVERSATION_DETAIL_STATUS",e.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED="UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED",e.UPDATE_OPENED_MENU="UPDATE_OPENED_MENU",e.SET_CHAT_SOURCE="SET_CHAT_SOURCE",e.UPDATE_LOGIN_SUCCESS_STATUS="UPDATE_LOGIN_SUCCESS_STATUS",e.UPDATE_SOCKET_SUCCESS_STATUS="UPDATE_SOCKET_SUCCESS_STATUS",e.UPDATE_CHAT_ENTRY_STATUS="UPDATE_CHAT_ENTRY_STATUS",e.UPDATE_GUIDE_REQUESTED="UPDATE_GUIDE_REQUESTED",e.UPDATE_GUIDE_SUCCEEDED="UPDATE_GUIDE_SUCCEEDED",e.LOGIN_REQUESTED="LOGIN_REQUESTED",e.LOGIN_SUCCEEDED="LOGIN_SUCCEEDED",e.LOGOUT_REQUESTED="LOGOUT_REQUESTED",e.LOGOUT_SUCCEEDED="LOGOUT_SUCCEEDED",e.UPDATE_LOGIN_STATUS="UPDATE_LOGIN_STATUS",e.SHOW_TRANSLATION_GUIDE="SHOW_TRANSLATION_GUIDE",e.SHOW_REGION_FILTER_GUIDE="SHOW_REGION_FILTER_GUIDE",e.FORCE_LOGOUT_REQUESTED="FORCE_LOGOUT_REQUESTED",e.CONNECT_SOCKET="CONNECT_SOCKET",e.REPORT_ASYNC_TASK="REPORT_ASYNC_TASK",e.UPLOAD_FEEDBACK_VIDEO_REQUESTED="UPLOAD_FEEDBACK_VIDEO_REQUESTED",e.UPLOAD_FEEDBACK_VIDEO_STATUS="UPLOAD_FEEDBACK_VIDEO_STATUS",e.UPDATE_CAPTCHA_VISIBLE="UPDATE_CAPTCHA_VISIBLE",e.UPDATE_CAPTCHA_SIGNATURE="UPDATE_CAPTCHA_SIGNATURE",e.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED="UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED",e.SET_TEXT_BOX_HEIGHT="SET_TEXT_BOX_HEIGHT",e.UPDATE_RELATED_CAPACITY="UPDATE_RELATED_CAPACITY",e.UPDATE_IS_MAIN_PAGE="UPDATE_IS_MAIN_PAGE",e.UPDATE_DEL_PERMISSION="UPDATE_DEL_PERMISSION",e.GET_FEEDBACK_CLASSIFICATION_REQUESTED="GET_FEEDBACK_CLASSIFICATION_REQUESTED",e.GET_CLASSIFICATION_SUCCEED="GET_CLASSIFICATION_SUCCEED"}(Zr||(Zr={}));var jn,Gn,Fn=P(439).t,Hn=N().mark(Wn),Vn=N().mark(Kn),Bn=(0,Oe.createActions)(e({},Zr.BLOCK_USER_REQUESTED,(function(e){var t=e.buyerName,r=e.buyerId,n=e.block;return{buyerName:t,buyerId:r,block:void 0===n||n,shopId:e.shopId,conversationId:e.conversationId}}))),Yn=Bn.blockUserRequested,Qn=function(e){return{type:"CONFIRM_MODAL",title:{key:"conversation_detail.workstation.block_fail_modal.title",vars:{username:e}},actions:{confirm:{label:{key:"common.confirm"}}}}},qn=function(e,t,r){return{toast:{show:!0,type:e?"fail":"warn",message:e?Fn("common.server_error.warning_tips"):Fn("conversation_detail.".concat(t?"blocked":"unblocked"),{username:r})}}};function Wn(e){var t,r,n,o,a,c,s;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.buyerName,n=t.buyerId,o=t.block,a=t.shopId,c=t.conversationId,i.prev=1,s=o?"PUT":"DELETE",i.next=5,(0,Lt.call)($e,{method:s,parent:"user",resource:"blocks",id:n,params:{shop_id:a}});case 5:return i.next=7,(0,Lt.put)(Rp(qn(!1,o,r)));case 7:return i.next=9,(0,Lt.put)(Er({name:"users",id:n,record:{is_blocked:o}}));case 9:return i.next=11,(0,Lt.put)(Er({name:"conversations",id:c,record:{is_blocked:o}}));case 11:case 18:i.next=22;break;case 13:if(i.prev=13,i.t0=i.catch(1),!(i.t0 instanceof ae&&o&&i.t0.handler().message)){i.next=20;break}return i.next=18,(0,Lt.put)(Nr(Qn(r)));case 20:return i.next=22,(0,Lt.put)(Rp(qn(!0)));case 22:case"end":return i.stop()}}),Hn,null,[[1,13]])}function Kn(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Yn,Wn);case 2:case"end":return e.stop()}}),Vn)}function zn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jn(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?zn(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Xn=N().mark(oo),$n=N().mark(ao),Zn=(0,Oe.createActions)((e(jn={},Zr.GET_GUIDE_REQUESTED,(function(e){return{userId:e.userId,version:e.version}})),e(jn,Zr.GET_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),e(jn,Zr.GET_GUIDE_FAILED,(function(){return{}})),jn)),eo=Zn.getGuideRequested,to=Zn.getGuideSucceeded,ro=Zn.getGuideFailed,no="newbie-completed-info";function oo(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.userId,n=t.version,c.prev=1,c.next=4,(0,R.getItem)(no);case 4:if(c.sent!=="".concat(r,"-").concat(n)){c.next=7;break}return c.abrupt("return",[]);case 7:return c.next=9,(0,Lt.call)($e,{resource:"newbie",suffix:"uncompleted"});case 9:return o=c.sent,a=o.newbie,c.next=13,(0,Lt.put)(to({newbie:a}));case 13:if(!(a.findIndex((function(e){return(e.name||"").toLocaleLowerCase().includes("mini")}))<0)){c.next=17;break}return c.next=17,(0,R.setItem)(no,"".concat(r,"-").concat(n));case 17:return c.abrupt("return",a);case 20:return c.prev=20,c.t0=c.catch(1),c.next=24,(0,Lt.put)(ro());case 24:return c.abrupt("return",[]);case 25:case"end":return c.stop()}}),Xn,null,[[1,20]])}function ao(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(eo,oo);case 2:case"end":return e.stop()}}),$n)}const co=(e(Gn={},Zr.GET_GUIDE_SUCCEEDED,(function(e,t){var r=t.payload.newbie;return Jn(Jn({},e),{},{newbie:r})})),e(Gn,Zr.GET_GUIDE_FAILED,(function(e){return Jn(Jn({},e),{},{newbie:[]})})),Gn);var so;function io(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function uo(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?io(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):io(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var lo=N().mark(Oo),po=N().mark(vo);function fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Eo=(0,Oe.createActions)((e(so={},Zr.UPDATE_GUIDE_REQUESTED,(function(e){return{newbieId:e.newbieId}})),e(so,Zr.UPDATE_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),so)),_o=Eo.updateGuideRequested,So=Eo.updateGuideSucceeded;function ho(e,t){var r,n=x(e),o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return fo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fo(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}(n);try{for(o.s();!(r=o.n()).done;){var a=r.value,c=a.children.findIndex((function(e){return e.id===t}));if(-1!==c){a.children.splice(c,1);break}}}catch(e){o.e(e)}finally{o.f()}return n}function Oo(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.newbieId,o.next=3,(0,Lt.select)(on);case 3:return r=o.sent,n=ho(r,t),o.next=7,(0,Lt.put)(So({newbie:n}));case 7:return o.prev=7,o.next=10,(0,Lt.call)($e,{method:"PUT",resource:"newbie",id:t});case 10:o.next=14;break;case 12:o.prev=12,o.t0=o.catch(7);case 14:case"end":return o.stop()}}),lo,null,[[7,12]])}function vo(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(_o,Oo);case 2:case"end":return e.stop()}}),po)}const To=e({},Zr.UPDATE_GUIDE_SUCCEEDED,(function(e,t){var r=t.payload.newbie;return uo(uo({},e),{},{newbie:r})}));var mo,go,yo=P(550),bo=P.n(yo),Ro=P(947),Co=P.n(Ro);function Do(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Po(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Do(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Do(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Io=N().mark(zo),Ao=N().mark(Jo),wo=N().mark(Xo),No=N().mark(Zo),xo=N().mark(ea),ko=N().mark(ta),Uo=(0,Oe.createActions)((e(mo={},Zr.UPDATE_USER_REQUESTED,(function(e){return{status:e.status}})),e(mo,Zr.UPDATE_NETWORK_STATUS,(function(e){return{networkStatus:e.networkStatus}})),e(mo,Zr.FETCH_USER_ORDER_DETAIL_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId}})),e(mo,Zr.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(e){return{userId:e.userId,shopId:e.shopId,data:e.data}})),e(mo,Zr.UPDATE_CHAT_WINDOW_STATUS,(function(e){return{shouldShowWindow:e.shouldShowWindow}})),e(mo,Zr.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED,(function(e){return{shouldShowWindow:e.shouldShowWindow}})),e(mo,Zr.UPDATE_CONVERSATION_DETAIL_STATUS,(function(e){var t=e.shouldShowConversationDetail,r=e.needMark;return{shouldShowConversationDetail:t,needMark:void 0!==r&&r}})),e(mo,Zr.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED,(function(e){return{shouldShowConversationDetail:e.shouldShowConversationDetail}})),e(mo,Zr.UPDATE_OPENED_MENU,(function(e){return{openedMenu:e}})),e(mo,Zr.SET_CHAT_SOURCE,(function(e){return{isScChat:e.isScChat}})),e(mo,Zr.UPDATE_LOGIN_SUCCESS_STATUS,(function(e){return{loginSuccess:e.loginSuccess}})),e(mo,Zr.UPDATE_SOCKET_SUCCESS_STATUS,(function(e){return{socketSuccess:e.socketSuccess}})),e(mo,Zr.UPDATE_CHAT_ENTRY_STATUS,(function(e){return{showEntry:e.showEntry}})),mo)),Mo=Uo.updateUserRequested,Lo=Uo.updateNetworkStatus,jo=Uo.fetchUserOrderDetailRequested,Go=Uo.fetchUserOrderDetailSucceeded,Fo=Uo.updateChatWindowStatus,Ho=Uo.updateChatWindowStatusSucceeded,Vo=Uo.updateConversationDetailStatus,Bo=Uo.updateConversationDetailStatusSucceeded,Yo=Uo.updateOpenedMenu,Qo=Uo.setChatSource,qo=Uo.updateLoginSuccessStatus,Wo=Uo.updateSocketSuccessStatus,Ko=Uo.updateChatEntryStatus;function zo(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.status,r.prev=1,r.next=4,(0,Lt.call)($e,{method:"PUT",resource:"user",payload:JSON.stringify({distribution_status:t})});case 4:if(!(0,R.checkIsScChat)()||"working"!==t){r.next=9;break}return r.next=9,(0,Lt.put)(kO({event_time:(Date.parse(new Date+"")/1e3).toString(),url:window.location.href}));case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(1),r.next=15,(0,Lt.put)(Rp({error:r.t0}));case 15:case"end":return r.stop()}}),Io,null,[[1,11]])}function Jo(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,a.prev=1,a.next=4,(0,Lt.call)($e,{parent:"users",parentId:r,resource:"get_user_shop_statistics_info",params:{shop_id:n}});case 4:return o=a.sent,a.next=7,(0,Lt.put)(Go({userId:r,shopId:n,data:o}));case 7:a.next=11;break;case 9:a.prev=9,a.t0=a.catch(1);case 11:case"end":return a.stop()}}),Ao,null,[[1,9]])}function Xo(){var e,t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,Lt.select)(ts);case 2:if(!(e=a.sent)){a.next=8;break}if(t=e.status,r=e.id,n=e.unread_count,o=e.latest_message_id,!("closed"!==t&&n>0)){a.next=8;break}return a.next=8,(0,Lt.put)(Ms({conversationId:r,isRead:!0,latestMessageId:o}));case 8:case"end":return a.stop()}}),wo)}var $o=!0;function Zo(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.shouldShowWindow,r.next=3,(0,Lt.put)(Ho({shouldShowWindow:t}));case 3:if(!t){r.next=15;break}return window.CsChat&&window.CsChat.minimizeCsChatWindow&&window.CsChat.minimizeCsChatWindow(),r.next=7,(0,Lt.call)(Xo);case 7:if(!$o){r.next=13;break}return r.next=10,(0,Lt.spawn)(yf);case 10:return r.next=12,(0,Lt.call)(iu,{payload:{direction:"reset"}});case 12:$o=!1;case 13:return r.next=15,bo().call(Co().handleNewConversationMessageQueue());case 15:case"end":return r.stop()}}),No)}function ea(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.shouldShowConversationDetail,n=t.needMark,o.next=3,(0,Lt.put)(Bo({shouldShowConversationDetail:r}));case 3:if(!n||!r){o.next=6;break}return o.next=6,(0,Lt.call)(Xo);case 6:case"end":return o.stop()}}),xo)}function ta(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Mo,zo);case 2:return e.next=4,(0,Lt.takeEvery)(jo,Jo);case 4:return e.next=6,(0,Lt.takeEvery)(Fo,Zo);case 6:return e.next=8,(0,Lt.takeEvery)(Vo,ea);case 8:case"end":return e.stop()}}),ko)}const ra=(e(go={},Zr.UPDATE_NETWORK_STATUS,(function(e,t){var r=t.payload.networkStatus;return Po(Po({},e),{},{networkStatus:r})})),e(go,Zr.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(t,r){var n=r.payload,o=n.userId,a=n.shopId,c=n.data,s="".concat(o,"-").concat(a),i=t.shopStatisticsMap;return Po(Po({},t),{},{shopStatisticsMap:Po(Po({},i),{},e({},s,c))})})),e(go,Zr.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED,(function(e,t){var r=t.payload.shouldShowWindow;return Po(Po({},e),{},{showChatWindow:r})})),e(go,Zr.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED,(function(e,t){var r=t.payload.shouldShowConversationDetail;return Po(Po({},e),{},{showConversationDetail:r})})),e(go,Zr.UPDATE_OPENED_MENU,(function(e,t){var r=t.payload.openedMenu;return Po(Po({},e),{},{openedMenu:r})})),e(go,Zr.SET_CHAT_SOURCE,(function(e,t){var r=t.payload.isScChat;return Po(Po({},e),{},{isScChat:r})})),e(go,Zr.UPDATE_LOGIN_SUCCESS_STATUS,(function(e,t){var r=t.payload.loginSuccess;return Po(Po({},e),{},{loginSuccess:r})})),e(go,Zr.UPDATE_SOCKET_SUCCESS_STATUS,(function(e,t){var r=t.payload.socketSuccess;return Po(Po({},e),{},{socketSuccess:r})})),e(go,Zr.UPDATE_CHAT_ENTRY_STATUS,(function(e,t){var r=t.payload.showEntry;return Po(Po({},e),{},{showEntry:r})})),go);var na,oa,aa=P(171),ca=P.n(aa);function sa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ia(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?sa(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ua,la=N().mark(ma),pa=N().mark(ya),da=N().mark(Ca),fa=N().mark(Da),Ea=N().mark(Pa);ua=(0,R.checkIsScChat)();var _a=(0,Oe.createActions)((e(na={},Zr.LOGIN_REQUESTED,(function(){return{}})),e(na,Zr.LOGIN_SUCCEEDED,(function(e){return{currentUserId:e.currentUserId,status:e.status}})),e(na,Zr.LOGOUT_REQUESTED,(function(){return{}})),e(na,Zr.LOGOUT_SUCCEEDED,(function(){return{}})),e(na,Zr.FORCE_LOGOUT_REQUESTED,(function(){return{}})),na)),Sa=_a.loginRequested,ha=_a.loginSucceeded,Oa=_a.logoutRequested,va=_a.logoutSucceeded,Ta=_a.forceLogoutRequested;function ma(e){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Lt.call)(R.getItem,e);case 2:if(t.sent){t.next=6;break}return t.next=6,(0,Lt.call)(R.setItem,e,ca()());case 6:case"end":return t.stop()}}),la)}var ga=function(e){return e instanceof re?"InternalServerError":e instanceof ne?"Forbidden":e instanceof Z?"Unauthoried":"Other"};function ya(){var e,t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=(0,R.getTranslationLocale)((0,R.getRuntimeLocale)()),r.next=3,(0,Lt.call)(Ht,{locale:e});case 3:return t=r.sent,r.next=6,(0,Lt.call)(R.changeLanguage,e,t);case 6:case"end":return r.stop()}}),pa)}var ba=N().mark((function e(t){var r,n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,R.getTranslationLocale)(t),e.prev=1,e.next=4,(0,Lt.call)(Ht,{locale:n});case 4:r=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,(0,Lt.call)(Ht,{locale:(0,R.getTranslationLocale)((0,R.getRuntimeLocale)())});case 11:r=e.sent;case 12:return console.log("resources",r),e.next=15,(0,Lt.call)(R.changeLanguage,n,r);case 15:return e.next=17,(0,Lt.call)(R.updateTimeLocale,(0,R.getServiceLocale)(t));case 17:case"end":return e.stop()}}),e,null,[[1,7]])})),Ra=N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.call)(ya);case 2:return e.next=4,(0,Lt.put)(Ko({showEntry:!0}));case 4:return e.next=6,(0,Lt.put)(qo({loginSuccess:!1}));case 6:It(Ct.LOGIN_FAILED,0,{type:ga(t)});case 7:case"end":return e.stop()}}),e)}));function Ca(e,t){var r,n,o,a,c,s,i,u,l,p;return N().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,r=t.godToken,n=e.user,o=e.is_ccu_grey,a=n.id,c=n.type,s=n.locale,i=n.distribution_status,u=c===R.AccountType.SUBACCOUNT,window.__WEBCHAT_LOGIN__||u&&"working"===i&&(window.__WEBCHAT_LOGIN__=!0),d.next=8,(0,Lt.call)(ba,s||"en");case 8:return performance.mark("APP_RENDERING"),Dt(),mt(c),RT(n),d.next=14,(0,Lt.put)(Lo({networkStatus:"online"}));case 14:return window.addEventListener("online",(function(){F.store.dispatch(Lo({networkStatus:"online"}))})),window.addEventListener("offline",(function(){F.store.dispatch(Lo({networkStatus:"offline"}))})),d.next=18,(0,Lt.put)(qo({loginSuccess:!0}));case 18:return d.next=20,(0,Lt.put)(Ko({showEntry:!0}));case 20:return l=T("users",n),p=l.entities,d.next=23,(0,Lt.put)(fr({entities:p}));case 23:return!r&&ke.connect(),ua&&ke.dispatch(R.CustomShareEvent.CALC_CONNECTIONS),d.next=27,(0,Lt.put)(ha({currentUserId:a}));case 27:return u||!r&&!o&&Gv.connect(),d.next=30,(0,Lt.put)(Fa());case 30:return d.next=32,(0,Lt.spawn)(ma,"device_id");case 32:if(u){d.next=35;break}return d.next=35,(0,Lt.call)(aS,eS({shopId:n.shop_id}));case 35:d.next=41;break;case 37:return d.prev=37,d.t0=d.catch(0),d.next=41,(0,Lt.call)(Ra,d.t0);case 41:return d.prev=41,d.finish(41);case 43:case"end":return d.stop()}}),da,null,[[0,37,41,43]])}function Da(){var e,t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,performance.mark("APP_PREPARED"),e="",(t={method:"POST",subServer:"coreapi",resource:"login"}).params={source:ua?"sc":"pcmall"},((0,R.isVisitingCNSC)()||(0,R.isVisitingKRSC)())&&(t.parent="cbsc"),n.next=8,(0,Lt.call)($e,t);case 8:return r=n.sent,performance.mark("LOGIN_API_RESPONSED"),n.next=12,(0,R.setItem)("mini-session",r);case 12:return R.LS.setItem("mini-session",JSON.stringify(r)),n.abrupt("return",{session:r,params:{godToken:e}});case 16:return n.prev=16,n.t0=n.catch(0),n.next=20,(0,Lt.call)(Ra,n.t0);case 20:return n.prev=20,n.finish(20);case 22:case"end":return n.stop()}}),fa,null,[[0,16,20,22]])}function Pa(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeLatest)(Sa,Da);case 2:return e.next=4,(0,Lt.takeLatest)(Oa,Pc);case 4:return e.next=6,(0,Lt.takeLatest)(Ta,Dc);case 6:case"end":return e.stop()}}),Ea)}const Ia=(e(oa={},Zr.LOGIN_SUCCEEDED,(function(e,t){var r=t.payload.currentUserId;return ia(ia({},e),{},{currentUserId:r})})),e(oa,Zr.LOGOUT_SUCCEEDED,(function(e){return ia(ia({},e),{},{currentUserId:null,performance:{},closeHangupTips:!1,hasVideoPermission:!1,captchaVisible:!1,curTabFocused:!0})})),oa);var Aa,wa,Na,xa=P(241),ka=P.n(xa),Ua=N().mark(Ba),Ma=N().mark(Ya);function La(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ja(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?La(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Na=(0,R.checkIsScChat)();var Ga=(0,Oe.createActions)((e(Aa={},Zr.CHECK_USER_PERMISSION_REQUESTED,(function(){return{}})),e(Aa,Zr.CHECK_USER_PERMISSION_SUCCEEDED,(function(e){return{hasVideoPermission:e.hasVideoPermission,hasReplyPermission:e.hasReplyPermission,hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion}})),e(Aa,Zr.UPDATE_DEL_PERMISSION,(function(e){return{hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion}})),Aa)),Fa=Ga.checkUserPermissionRequested,Ha=Ga.checkUserPermissionSucceeded,Va=Ga.updateDelPermission;function Ba(){var e,t,r,n,o,a,c,s,i,u;return N().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return e={hasVideoPermission:!1,hasReplyPermission:!1,hasDeletePermission:!1,deleteConfigDuration:0,deleteConfigVersion:0},l.prev=1,l.next=4,(0,Lt.call)($e,{subServer:"coreapi",parent:"user",resource:"global_config"});case 4:return t=l.sent,l.next=7,(0,Lt.select)(hn);case 7:r=l.sent,n=r.id,o=r.type,a=r.country,e.hasVideoPermission=t.video,e.hasReplyPermission=t.reply,"seller"===o&&(c=t.delete_msg||{},e.deleteConfigVersion=c.config_version,s=(c.region_config||[]).find((function(e){return e.region===a})),s&&s.duration&&(e.hasDeletePermission=!0,e.deleteConfigDuration=s.duration)),i=null,u="live"===(0,R.getRuntimeServer)(),(t.privacy&&Na||!u)&&(i=new(ka())({projectId:"983743070955270818",env:"live",uid:n})),u||(window.CreateNewFullStorySdk=function(){return[n,i]},window.GetNecessaryInfo=function(){return{user:r}}),l.next=20;break;case 18:l.prev=18,l.t0=l.catch(1);case 20:return l.next=22,(0,Lt.put)(Ha(ja({},e)));case 22:case"end":return l.stop()}}),Ua,null,[[1,18]])}function Ya(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Fa,Ba);case 2:case"end":return e.stop()}}),Ma)}const Qa=(e(wa={},Zr.CHECK_USER_PERMISSION_SUCCEEDED,(function(e,t){var r=t.payload,n=r.hasVideoPermission,o=r.hasReplyPermission,a=r.hasDeletePermission,c=r.deleteConfigDuration,s=r.deleteConfigVersion;return ja(ja({},e),{},{hasVideoPermission:n,hasReplyPermission:o,hasDeletePermission:a,deleteConfigDuration:c,deleteConfigVersion:s})})),e(wa,Zr.UPDATE_DEL_PERMISSION,(function(e,t){var r=t.payload,n=r.hasDeletePermission,o=r.deleteConfigDuration,a=r.deleteConfigVersion;return ja(ja({},e),{},{hasDeletePermission:n,deleteConfigDuration:o,deleteConfigVersion:a})})),wa);var qa,Wa,Ka=N().mark(Xa),za=N().mark($a),Ja=(0,Oe.createActions)(e({},Zr.SHOW_USER_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId,buyerShopId:e.buyerShopId}}))).showUserRequested;function Xa(e){var t,r,n,o,a,c,s;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,o=t.buyerShopId,i.prev=1,i.next=4,(0,Lt.call)($e,{resource:"users",id:r,params:{shop_id:n,need_cache:1,cache_expires:1800}});case 4:a=i.sent,i.next=10;break;case 7:i.prev=7,i.t0=i.catch(1),a={id:r,shop_id:o};case 10:return c=T("users",a),s=c.entities,i.next=13,(0,Lt.put)(fr({entities:s}));case 13:return i.next=15,(0,Lt.put)(jo({userId:r,shopId:n}));case 15:case"end":return i.stop()}}),Ka,null,[[1,7]])}function $a(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Ja,Xa);case 2:case"end":return e.stop()}}),za)}function Za(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ec(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Za(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Za(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var tc=N().mark(sc),rc=N().mark(ic),nc=(0,Oe.createActions)((e(qa={},Zr.UPDATE_IS_MAIN_PAGE,(function(e){return{isMainPage:e.isMainPage}})),e(qa,Zr.UPDATE_CUR_TAB_FOCUSED,(function(e){return{focused:e.focused}})),e(qa,Zr.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e){return{focused:e.focused}})),qa)),oc=nc.updateIsMainPage,ac=nc.updateCurTabFocused,cc=nc.updateCurTabFocusedSucceeded;function sc(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=e.payload.focused)){r.next=5;break}return ke.dispatch(R.CustomShareEvent.TAB_FOCUSED),r.next=5,(0,Lt.put)(oc({isMainPage:!0}));case 5:return r.next=7,(0,Lt.put)(cc({focused:t}));case 7:case"end":return r.stop()}}),tc)}function ic(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(ac,sc);case 2:case"end":return e.stop()}}),rc)}const uc=(e(Wa={},Zr.UPDATE_IS_MAIN_PAGE,(function(e,t){var r=t.payload.isMainPage;return ec(ec({},e),{},{isMainPage:r})})),e(Wa,Zr.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e,t){var r=t.payload.focused;return ec(ec({},e),{},{curTabFocused:r})})),Wa);var lc,pc;function dc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?dc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ec=N().mark(Tc),_c=N().mark(mc),Sc=(0,Oe.createActions)((e(lc={},Zr.UPDATE_CAPTCHA_VISIBLE,(function(e){return{visible:e.visible,resendMessagePayload:e.resendMessagePayload}})),e(lc,Zr.UPDATE_CAPTCHA_SIGNATURE,(function(e){var t=e.signature;return{signature:void 0===t?"":t}})),e(lc,Zr.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,(function(e){var t=e.signature;return{signature:void 0===t?"":t}})),lc)),hc=Sc.updateCaptchaVisible,Oc=Sc.updateCaptchaSignature,vc=Sc.updateCaptchaSignatureSucceeded;function Tc(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t=e.payload.signature)){a.next=12;break}return a.next=4,(0,Lt.select)(En);case 4:if(!(r=a.sent)){a.next=12;break}return a.next=8,(0,Lt.select)(_d(r.messageId));case 8:return n=a.sent,o={message:n,conversationId:r.conversationId},a.next=12,bo().put(Co().resendMessageRequested({payload:o}));case 12:return a.next=14,(0,Lt.put)(vc({signature:t}));case 14:case"end":return a.stop()}}),Ec)}function mc(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Oc,Tc);case 2:case"end":return e.stop()}}),_c)}const gc=(e(pc={},Zr.UPDATE_CAPTCHA_VISIBLE,(function(e,t){var r=t.payload,n=r.visible,o=r.resendMessagePayload;return fc(fc({},e),{},{captchaVisible:n,resendMessagePayload:o})})),e(pc,Zr.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,(function(e,t){var r=t.payload.signature;return fc(fc({},e),{},{captchaSignature:r})})),pc);function yc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?yc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Rc=(0,Oe.createActions)(e({},Zr.SET_TEXT_BOX_HEIGHT,(function(e){return e}))).setTextBoxHeight;const Cc=e({},Zr.SET_TEXT_BOX_HEIGHT,(function(e,t){var r=t.payload;return bc(bc({},e),{},{textBoxHeight:r})}));var Dc=N().mark((function e(){var t=arguments;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(!(t.length>0&&void 0!==t[0])||t[0])&&ke.close(),e.next=4,(0,Lt.put)(va());case 4:return e.next=6,(0,Lt.put)(Hf());case 6:(0,R.removeItem)("mini-session"),(0,R.removeItem)("mini-sc_redirect");case 8:case"end":return e.stop()}}),e)})),Pc=N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={server:(0,R.getSCApiServer)(),namespace:"",resource:"logout",suffixSlash:!0,params:{SPC_CDS:ge().get("SPC_CDS"),SPC_CDS_VER:2}},(0,R.isVisitingCNSC)()||(0,R.isVisitingKRSC)()?(t.version="cnsc",t.parent="selleraccount"):t.version="v1",e.next=5,(0,Lt.call)($e,t);case 5:return document.location.replace("https://".concat((0,R.getSellerCenterUrl)(),"/account/signin")),window.removeEventListener("online",(function(){F.store.dispatch(Lo({networkStatus:"online"}))})),window.removeEventListener("offline",(function(){F.store.dispatch(Lo({networkStatus:"offline"}))})),L(),e.next=11,(0,Lt.call)(Dc);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.handler?(0,Lt.call)(e.t0.handler):console.error("[Logout Failed] ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}));function Ic(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ac(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ic(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ic(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var wc,Nc,xc=[Kn,ao,vo,ta,Pa,$a,Ya,mc,ic],kc={newbie:[],networkStatus:"online",hasVideoPermission:!1,currentUserId:null,currentUser:{},hasReplyPermission:!1,hasDeletePermission:!1,deleteConfigVersion:0,deleteConfigDuration:0,captchaVisible:!1,captchaSignature:"",resendMessagePayload:void 0,curTabFocused:!0,isMainPage:!0,shopStatisticsMap:{},textBoxHeight:R.MINI_MIN_TEXT_BOX_HEIGHT,isScChat:!0,openedMenus:"",loginSuccess:!0,socketSuccess:!0,showChatWindow:!1,showConversationDetail:!0,showEntry:!1},Uc=(0,Oe.handleActions)(Ac(Ac(Ac(Ac(Ac(Ac(Ac(Ac(Ac({},{}),Qa),gc),uc),Cc),co),To),ra),Ia),kc),Mc=function(e){return e.conversationReducer.conversationIds},Lc=function(e){return e.conversationReducer.readRequestIds},jc=function(e){return e.conversationReducer.missedReadNoticeCount},Gc=function(e){return e.conversationReducer.inlocation},Fc=function(e){return e.conversationReducer.updateTimeNow},Hc=function(e){return e.conversationReducer.currentConversationId},Vc=function(e){return e.conversationReducer.currentConversationCanRead},Bc=function(e){return e.conversationReducer.status},Yc=function(e){return e.conversationReducer.direction},Qc=(0,Bt.createSelector)(Wt,Mc,(function(e,r){return((0,t.denormalize)(r,[s],{conversations:e})||[]).filter(Boolean)})),qc=(0,Bt.createSelector)(Qc,Hc,(function(e,t){return e.filter((function(e){var r=e.id,n=e.unread_count;return e&&(n>0||r===t)}))})),Wc=(0,Bt.createSelector)(Qc,(function(e){return e.filter((function(e){return e.pinned}))})),Kc=(0,Bt.createSelector)(Qc,(function(e){return e.filter((function(e){return e.status&&"closed"===e.status}))})),zc=(0,Bt.createSelector)(Qc,Hc,(function(e,t){return e.filter((function(e){var r=e.unreplied,n=e.id;return void 0===r||r||!r&&n===t}))})),Jc=(0,Bt.createSelector)(Qc,(function(e){return e.filter((function(e){return e.lack})).map((function(e){return e.id}))||[]})),Xc=function(e){return e.conversationReducer.keyword},$c=function(e){return e.conversationReducer.filter},Zc=(0,Bt.createSelector)($c,Qc,qc,Wc,Kc,zc,(function(e,t,r,n,o,a){return{All:t,Unread:r,Pinned:n,Closed:o,Unreplied:a}[e]})),es=(0,Bt.createSelector)(Zc,(function(e){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)})).filter((function(e){return void 0===e.faking}))})),ts=(0,Bt.createSelector)(Qc,Hc,vn,Gc,qt,Wt,(function(e,r,n,o,c,i){var u=e.find((function(e){return e.id===r}))||{};if(o&&!u.id&&(u=(0,t.denormalize)(r,s,{conversations:i})||{}),!n&&u.lack){var l=u.to_id,p=(0,t.denormalize)(l,a,{users:c})||{},d={to_shop_id:p.shop_id,to_status:p.status,to_name:p.name||"-",to_avatar:p.avatar};return Object.assign(u,d)}return u})),rs=(0,Bt.createSelector)(ts,(function(e){return(e||{}).to_id||null})),ns=(0,Bt.createSelector)(ts,nr,(function(e,r){return(0,t.denormalize)(e.shop_id,d,{shops:r})||{}})),os=(0,Bt.createSelector)(ns,(function(e){return(null==e?void 0:e.country)||"SG"})),as=(0,Bt.createSelector)(ts,(function(e){return e.shop_id})),cs=(0,Bt.createSelector)(ts,(function(e){return e.to_id})),ss=(0,Bt.createSelector)(ts,(function(e){return e.status})),is=(0,Bt.createSelector)(ts,(function(e){return e.auto_translation})),us=(0,Bt.createSelector)(ts,(function(e){return e.max_general_option_hide_time})),ls=function(e){return(0,Bt.createSelector)(Wt,(function(r){return(0,t.denormalize)(e,s,{conversations:r})||{}}))},ps=function(e){return(0,Bt.createSelector)(ls(e),(function(e){return e.shop_id}))},ds=function(e){return(0,Bt.createSelector)(Qc,(function(t){return e.map((function(e){return t.find((function(t){return t.id===e}))})).filter(Boolean)}))},fs=(0,Bt.createSelector)(ts,(function(e){return(e||{}).shop_id||null})),Es=(0,Bt.createSelector)(qt,ts,(function(e,r){return r?(0,t.denormalize)(r.to_id,a,{users:e}):{}})),_s=(0,Bt.createSelector)(ts,(function(e){return(e||{}).to_shop_id||null})),Ss=function(e){return e.conversationReducer.results},hs=function(e){return e.conversationReducer.searchStatus},Os=(0,Bt.createSelector)(ts,(function(e){return e.translationAccess})),vs=function(e){return e.conversationReducer.listsHash},Ts=function(e){return e.conversationReducer.conversationBeenDeleted},ms=(0,Bt.createSelector)(ts,(function(e){return(e||{}).to_name})),gs=function(e){return e.conversationReducer.access},ys=function(e){return e.conversationReducer.isNavigateToUnreadMessage},bs=function(e){return e.conversationReducer.navigateToUnreadMessageId};!function(e){e.DELETE_CONVERSATION_REQUESTED="DELETE_CONVERSATION_REQUESTED",e.DELETE_CONVERSATION_SUCCEEDED="DELETE_CONVERSATION_SUCCEEDED",e.GET_CONVERSATION_DETAIL_REQUESTED="GET_CONVERSATION_DETAIL_REQUESTED",e.FAKE_CONVERSATION_SUCCEEDED="FAKE_CONVERSATION_SUCCEEDED",e.FETCH_CONVERSATIONS_REQUESTED="FETCH_CONVERSATIONS_REQUESTED",e.FETCH_CONVERSATIONS_SUCCEEDED="FETCH_CONVERSATIONS_SUCCEEDED",e.UPDATE_FETCH_CONVERSATIONS_STATUS="UPDATE_FETCH_CONVERSATIONS_STATUS",e.UPDATE_FETCH_CONVERSATIONS_DIRECTION="UPDATE_FETCH_CONVERSATIONS_DIRECTION",e.UPDATE_CONVERSATION_TIMESTAMP="UPDATE_CONVERSATION_TIMESTAMP",e.UPDATE_CONVERSATION_FILTER="UPDATE_CONVERSATION_FILTER",e.FORWARD_CONVERSATION_REQUESTED="FORWARD_CONVERSATION_REQUESTED",e.MASS_FORWARD_CONVERSATION_REQUESTED="MASS_FORWARD_CONVERSATION_REQUESTED",e.MARK_MESSAGES_REQUESTED="MARK_MESSAGES_REQUESTED",e.MARK_MESSAGES_SUCCEEDED="MARK_MESSAGES_SUCCEEDED",e.UPDATE_READ_REQUEST_DATA="UPDATE_READ_REQUEST_DATA",e.PIN_CONVERSATION_REQUESTED="PIN_CONVERSATION_REQUESTED",e.SEARCH_CONVERSATIONS_REQUESTED="SEARCH_CONVERSATIONS_REQUESTED",e.SEARCH_CONVERSATIONS_SUCCEEDED="SEARCH_CONVERSATIONS_SUCCEEDED",e.RESET_SEARCH_PARAMS="RESET_SEARCH_PARAMS",e.UPDATE_EXISTED_RESULT_ID_MAP="UPDATE_EXISTED_RESULT_ID_MAP",e.UPDATE_CURRENT_CONVERSATION_MODE="UPDATE_CURRENT_CONVERSATION_MODE",e.SET_CURRENT_CONVERSATION_MODE="SET_CURRENT_CONVERSATION_MODE",e.SEARCH_BY_COMBINED_API="SEARCH_BY_COMBINED_API",e.TOGGLE_MULTIPLE_SELECTION_MODE="TOGGLE_MULTIPLE_SELECTION_MODE",e.SET_SELECTED_CONVERSATION_LIST="SET_SELECTED_CONVERSATION_LIST",e.UPDATE_SELECTED_CONVERSATION_ID="UPDATE_SELECTED_CONVERSATION_ID",e.SELECTED_CONVERSATIONS_REQUESTED="SELECTED_CONVERSATIONS_REQUESTED",e.CONVERSATION_BATCH_OPERATE_REQUESTED="CONVERSATION_BATCH_OPERATE_REQUESTED",e.SET_CURRENT_CONVERSATION_CAN_READ="SET_CURRENT_CONVERSATION_CAN_READ",e.UPDATE_PREVIOUS_CONVERSATION_ID="UPDATE_PREVIOUS_CONVERSATION_ID",e.CLOSE_CONVERSATION_REQUESTED="CLOSE_CONVERSATION_REQUESTED",e.FETCH_GROUPS_REQUESTED="FETCH_GROUPS_REQUESTED",e.FETCH_MASS_GROUPS_REQUESTED="FETCH_MASS_GROUPS_REQUESTED",e.SHOW_CONVERSATION_REQUESTED="SHOW_CONVERSATION_REQUESTED",e.RESET_CONVERSATION_REQUESTED="RESET_CONVERSATION_REQUESTED",e.SHOW_CONVERSATION_SUCCEEDED="SHOW_CONVERSATION_SUCCEEDED",e.SHOW_NORMAL_CONVERSATION_SUCCEEDED="SHOW_NORMAL_CONVERSATION_SUCCEEDED",e.CHANGE_CONVERSATION_STATUS_REQUESTED="CHANGE_CONVERSATION_STATUS_REQUESTED",e.FETCH_DEGRADE_CONVERSATIONS_DETAIL="FETCH_DEGRADE_CONVERSATIONS_DETAIL",e.CONVERSATION_OPERATE_REQUESTED="CONVERSATION_OPERATE_REQUESTED",e.SEARCH_MORE_RESULTS="SEARCH_MORE_RESULTS",e.SEARCH_MORE_SUCCEED="SEARCH_MORE_SUCCEED",e.SET_SEARCH_STATUS="SET_SEARCH_STATUS",e.UPDATE_ACCESS="UPDATE_ACCESS",e.SHOW_SEARCHED_CONVERSATION_REQUESTED="SHOW_SEARCHED_CONVERSATION_REQUESTED",e.UPDATE_SEARCH_PARAMS="UPDATE_SEARCH_PARAMS",e.LOCATION_MESSAGE="LOCATION_MESSAGE",e.UPDATE_LOCATION_MODE="UPDATE_LOCATION_MODE",e.UPDATE_SYNC_TIME_NOW="UPDATE_SYNC_TIME_NOW",e.SET_CURRENT_CONVERSATION_TYPE="SET_CURRENT_CONVERSATION_TYPE",e.SET_CONVERSATION_BEEN_DELETED="SET_CONVERSATION_BEEN_DELETED",e.MUTE_CONVERSATION_REQUESTED="MUTE_CONVERSATION_REQUESTED",e.SET_NAVIGATE_TO_UNREAD_MESSAGE="SET_NAVIGATE_TO_UNREAD_MESSAGE",e.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID="SET_NAVIGATE_TO_UNREAD_MESSAGE_ID",e.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID="RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID"}(wc||(wc={}));var Rs=(0,Oe.createActions)((e(Nc={},wc.DELETE_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(Nc,wc.DELETE_CONVERSATION_SUCCEEDED,(function(e){return{conversationId:e.conversationId}})),e(Nc,wc.GET_CONVERSATION_DETAIL_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(Nc,wc.FAKE_CONVERSATION_SUCCEEDED,(function(e){return{conversationId:e.conversationId}})),e(Nc,wc.FETCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.direction,r=void 0===t?"reset":t,n=e.noPending;return{direction:r,noPending:void 0!==n&&n,source:e.source}})),e(Nc,wc.FETCH_CONVERSATIONS_SUCCEEDED,(function(e){var t=e.conversationIds,r=e.conversationIdsMap,n=e.oldestReceivedMessageId,o=e.latestReceivedMessageId,a=e.oldestTimestampNano,c=e.latestTimestampNano,s=e.direction;return{conversationIds:t,conversationIdsMap:r,oldestReceivedMessageId:n,latestReceivedMessageId:o,direction:void 0===s?"reset":s,status:e.status,hasMore:e.hasMore,latestTimestampNano:c,oldestTimestampNano:a,persist:e.persist,shouldFetchByTimestamp:e.shouldFetchByTimestamp,maxLatestTimestampNano:e.maxLatestTimestampNano,maxLatestReceivedMessageId:e.maxLatestReceivedMessageId,syncFetchException:e.syncFetchException}})),e(Nc,wc.UPDATE_FETCH_CONVERSATIONS_STATUS,(function(e){return{status:e.status}})),e(Nc,wc.UPDATE_FETCH_CONVERSATIONS_DIRECTION,(function(e){return{direction:e.direction}})),e(Nc,wc.UPDATE_CONVERSATION_TIMESTAMP,(function(e){return{latestTimestampNano:e.latestTimestampNano,oldestTimestampNano:e.oldestTimestampNano}})),e(Nc,wc.UPDATE_CONVERSATION_FILTER,(function(e){return{filter:e.filter}})),e(Nc,wc.FORWARD_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId,type:e.type,forwardId:e.forwardId}})),e(Nc,wc.MASS_FORWARD_CONVERSATION_REQUESTED,(function(e){return{type:e.type,forwardId:e.forwardId,conversationIds:e.conversationIds}})),e(Nc,wc.MARK_MESSAGES_REQUESTED,(function(e){return{conversationId:e.conversationId,isRead:e.isRead,latestMessageId:e.latestMessageId}})),e(Nc,wc.MARK_MESSAGES_SUCCEEDED,(function(e){return{conversationId:e.conversationId,markType:e.markType}})),e(Nc,wc.UPDATE_READ_REQUEST_DATA,(function(e){return{requestId:e.requestId,requestIds:e.requestIds,count:e.count}})),e(Nc,wc.PIN_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(Nc,wc.SEARCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.keyword,r=void 0===t?"":t,n=e.filter;return{keyword:r,filter:void 0===n?"all":n}})),e(Nc,wc.RESET_SEARCH_PARAMS,(function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchFilter:e.searchFilter}})),e(Nc,wc.UPDATE_EXISTED_RESULT_ID_MAP,(function(e){return{addedMap:e.addedMap}})),e(Nc,wc.UPDATE_CURRENT_CONVERSATION_MODE,(function(e){return{mode:e.mode,conversationId:e.conversationId}})),e(Nc,wc.SET_CURRENT_CONVERSATION_MODE,(function(e){return{mode:e.mode}})),e(Nc,wc.SEARCH_BY_COMBINED_API,(function(){return{}})),e(Nc,wc.TOGGLE_MULTIPLE_SELECTION_MODE,(function(e){return{mode:e.mode}})),e(Nc,wc.SET_SELECTED_CONVERSATION_LIST,(function(e){return{list:e.list}})),e(Nc,wc.UPDATE_SELECTED_CONVERSATION_ID,(function(e){return{id:e.id,selected:e.selected}})),e(Nc,wc.SELECTED_CONVERSATIONS_REQUESTED,(function(e){return{type:e.type,id:e.id}})),e(Nc,wc.CONVERSATION_BATCH_OPERATE_REQUESTED,(function(e){return{type:e.type}})),e(Nc,wc.SET_CURRENT_CONVERSATION_CAN_READ,(function(e){return{canRead:e.canRead}})),e(Nc,wc.SHOW_CONVERSATION_REQUESTED,(function(e){return{conversation:e.conversation,previousId:e.previousId,messageId:e.messageId,sourceInfo:e.sourceInfo}})),e(Nc,wc.RESET_CONVERSATION_REQUESTED,(function(){return{}})),e(Nc,wc.SHOW_NORMAL_CONVERSATION_SUCCEEDED,(function(e){var t=e.conversationId,r=e.previousId;return{conversationId:t,previousId:void 0===r?null:r}})),e(Nc,wc.CHANGE_CONVERSATION_STATUS_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(Nc,wc.FETCH_DEGRADE_CONVERSATIONS_DETAIL,(function(e){return{conversationIds:e.conversationIds}})),e(Nc,wc.CONVERSATION_OPERATE_REQUESTED,(function(e){return{type:e.type,extra:e.extra}})),e(Nc,wc.SEARCH_MORE_RESULTS,(function(e){return{type:e.type,reset:e.reset}})),e(Nc,wc.SEARCH_MORE_SUCCEED,(function(e){return{type:e.type,total:e.total,results:e.results,isFromCache:e.isFromCache,hasMore:e.hasMore,nextOffset:e.nextOffset}})),e(Nc,wc.SET_SEARCH_STATUS,(function(e){return{type:e.type,status:e.status}})),e(Nc,wc.UPDATE_ACCESS,(function(e){return{access:e.access}})),e(Nc,wc.SHOW_SEARCHED_CONVERSATION_REQUESTED,(function(e){return{conversation:e.conversation}})),e(Nc,wc.LOCATION_MESSAGE,(function(e){return{msgId:e.msgId,shopId:e.shopId}})),e(Nc,wc.UPDATE_LOCATION_MODE,(function(e){return{inlocation:e.inlocation}})),e(Nc,wc.UPDATE_SYNC_TIME_NOW,(function(e){return{timeNow:e.timeNow}})),e(Nc,wc.SHOW_CONVERSATION_SUCCEEDED,(function(e){var t=e.conversationId,r=e.previousId,n=void 0===r?null:r,o=e.type;return{conversationId:t,previousId:n,type:void 0===o?R.ConversationTypeEnum.Normal:o}})),e(Nc,wc.SET_CURRENT_CONVERSATION_TYPE,(function(e){var t=e.type;return{type:void 0===t?R.ConversationTypeEnum.Normal:t}})),e(Nc,wc.SET_NAVIGATE_TO_UNREAD_MESSAGE,(function(e){return{isNavigateToUnreadMessage:e.isNavigateToUnreadMessage}})),e(Nc,wc.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e){return{navigateToUnreadMessageId:e.navigateToUnreadMessageId}})),e(Nc,wc.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(){})),e(Nc,wc.SET_CONVERSATION_BEEN_DELETED,(function(e){return{conversationBeenDeleted:e.conversationBeenDeleted}})),e(Nc,wc.MUTE_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),Nc)),Cs=Rs.deleteConversationRequested,Ds=Rs.deleteConversationSucceeded,Ps=Rs.getConversationDetailRequested,Is=Rs.fakeConversationSucceeded,As=Rs.fetchConversationsRequested,ws=Rs.fetchConversationsSucceeded,Ns=Rs.updateFetchConversationsStatus,xs=Rs.updateFetchConversationsDirection,ks=Rs.updateConversationTimestamp,Us=Rs.updateConversationFilter,Ms=(Rs.forwardConversationRequested,Rs.massForwardConversationRequested,Rs.markMessagesRequested),Ls=Rs.markMessagesSucceeded,js=Rs.updateReadRequestData,Gs=Rs.pinConversationRequested,Fs=(Rs.searchConversationsRequested,Rs.resetSearchParams),Hs=(Rs.updateExistedResultIdMap,Rs.updateCurrentConversationMode,Rs.setCurrentConversationMode,Rs.searchByCombinedApi,Rs.toggleMultipleSelectionMode,Rs.setSelectedConversationList,Rs.updateSelectedConversationId,Rs.selectedConversationsRequested,Rs.conversationBatchOperateRequested,Rs.setCurrentConversationCanRead),Vs=Rs.showConversationRequested,Bs=Rs.resetConversationRequested,Ys=Rs.showConversationSucceeded,Qs=Rs.changeConversationStatusRequested,qs=Rs.fetchDegradeConversationsDetail,Ws=Rs.conversationOperateRequested,Ks=Rs.searchMoreResults,zs=(Rs.searchMoreSucceed,Rs.setSearchStatus,Rs.updateAccess),Js=Rs.showSearchedConversationRequested,Xs=Rs.locationMessage,$s=Rs.updateLocationMode,Zs=Rs.updateSyncTimeNow,ei=Rs.showNormalConversationSucceeded,ti=Rs.setNavigateToUnreadMessage,ri=Rs.setNavigateToUnreadMessageId,ni=Rs.resetNavigateToUnreadMessageId,oi=Rs.setConversationBeenDeleted,ai=Rs.muteConversationRequested,ci=N().mark(ii),si=N().mark(ui);function ii(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.conversationId,c.prev=1,c.next=4,(0,Lt.select)(ls(t));case 4:return r=c.sent,n=r.shop_id,o=r.pinned,a={method:"PUT",parent:"conversations",parentId:t,resource:o?"unpin":"pin"},n&&(a.payload=JSON.stringify({shop_id:n})),c.next=11,(0,Lt.call)($e,a);case 11:c.next=17;break;case 13:return c.prev=13,c.t0=c.catch(1),c.next=17,(0,Lt.put)(Rp({error:c.t0}));case 17:case"end":return c.stop()}}),ci,null,[[1,13]])}function ui(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Gs,ii);case 2:case"end":return e.stop()}}),si)}function li(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pi(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?li(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):li(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function di(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fi(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?di(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):di(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ei,_i=N().mark(hi),Si=(e(Ei={},R.ConversationTypeEnum.Agent,"receiveAgentMessageRequested"),e(Ei,R.ConversationTypeEnum.Normal,"receiveMessageRequested"),Ei);function hi(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=e.type,n=Si[r],o.next=4,(0,Lt.spawn)(yi,t.request_id);case 4:return o.next=6,bo().put(Co()[n]({payload:{message:t}}));case 6:case"end":return o.stop()}}),_i)}function Oi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vi(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Oi(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ti=function(e){e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))},mi=function(e,t){var r=e.last_message_time_nano,n=e.next_timestamp_nano;return t&&!n&&(n=t.next_message_time_nano),{nextTimestampNano:n,oldestTimestampNano:n,latestTimestampNano:r}},gi=N().mark(yi);function yi(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,R.getItem)(e);case 2:(t=o.sent)&&(r=new Date,n=+r-+t,It(Ct.MESSAGE_SOCKET,n),(0,R.removeItem)(e));case 4:case"end":return o.stop()}}),gi)}var bi=P(439).t,Ri=R.MessageTypes.MSG_TYPE_TEXT,Ci="mark_as_unreplied",Di=N().mark(Ii),Pi=N().mark(Ai);function Ii(e){var t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.conversationId,n.prev=1,n.next=4,(0,Lt.select)(ps(t));case 4:return r=n.sent,n.next=7,(0,Lt.call)($e,{method:"DELETE",resource:"conversations",id:t,params:{shop_id:r}});case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,(0,Lt.put)(Rp({error:n.t0}));case 13:case"end":return n.stop()}}),Di,null,[[1,9]])}function Ai(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Cs,Ii);case 2:case"end":return e.stop()}}),Pi)}const wi=e({},wc.DELETE_CONVERSATION_SUCCEEDED,(function(t,r){var n=r.payload.conversationId,o=pi(pi({},t.conversationIdsMap),{},e({},n,!1)),a=new Set(t.conversationIds);a.delete(n);var c=Array.from(a),s=t.currentConversationId;return pi(pi({},t),{},{currentConversationId:s===n?null:s,conversationIds:c,conversationIdsMap:o})}));var Ni,xi=N().mark(Gi),ki=N().mark(Fi),Ui=N().mark(Hi),Mi=N().mark(Vi);function Li(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ji(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Li(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Li(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Gi(e){var t,r,n,o,a,c,s;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.conversation,r=e.sourceInfo,i.prev=1,n=t.id,o=t.to_id,i.next=5,(0,Lt.call)($e,{method:"POST",parent:"conversation",resource:"enter",payload:JSON.stringify(ji({conversation_id:n,to_id:o},r))});case 5:return a=i.sent,c=a.faq_session_id,s=a.session_expiry_timestamp,i.next=10,(0,Lt.put)(wh({conversationId:n,faqSessionId:c,sessionExpiryTime:s}));case 10:i.next=14;break;case 12:i.prev=12,i.t0=i.catch(1);case 14:case"end":return i.stop()}}),xi,null,[[1,12]])}function Fi(e){var t,r,n,o,a,c,s,i,u,l,p,d,f,E,_,S,h,O,v,T,m,g,y,b,C,D,P,I,A,w,x,k;return N().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return t=e.payload,r=t.conversation,n=t.previousId,o=t.messageId,a=t.messageList,t.sourceInfo,N.prev=1,N.next=4,(0,Lt.select)(vn);case 4:if(c=N.sent,i=(s=r).id,u=s.lack,c||!u){N.next=12;break}return N.next=9,(0,Lt.call)(uu,{payload:{conversationIds:[i]}});case 9:return N.next=11,(0,Lt.select)(ls(i));case 11:r=N.sent;case 12:if(p=(l=r).faking,d=l.status,f=l.to_id,E=l.shop_id,_=l.latest_message_id,S=l.to_shop_id,h=l.unread_count,O=l.last_read_message_id,c){N.next=21;break}return N.next=16,(0,Lt.call)(R.getItem,"mini-sc_redirect");case 16:return v=N.sent,T={},v&&(m=v.orderId,g=v.productId,y=v.conversationId,b=v.shopId,parseInt(i)===parseInt(y)&&(m?T={order_id:parseInt(m)}:g?T={product_id:parseInt(g)}:b&&(T={shop_id:parseInt(b)}))),N.next=21,(0,Lt.spawn)(Gi,{conversation:r,sourceInfo:T});case 21:return N.next=23,(0,Lt.select)(V_);case 23:if((C=N.sent)&&C[E]||!c){N.next=28;break}return N.next=28,(0,Lt.call)(aS,eS({shopId:E}));case 28:return N.next=30,(0,Lt.put)(Ja({userId:f,shopId:E,buyerShopId:S}));case 30:return N.next=32,(0,Lt.put)(Ys({conversationId:i,previousId:n}));case 32:return N.next=34,(0,Lt.put)(ni());case 34:return D="number"==typeof h&&h>0&&!o,N.next=37,(0,Lt.put)(ti({isNavigateToUnreadMessage:D}));case 37:return N.next=39,bo().put(Co().fetchMessagesRequested({payload:{conversationId:i,messageId:o||(D?O:void 0),direction:o||D?"around":"older",messageList:a,reset:!0}}));case 39:return N.next=41,bo().call(Co().handleCurrentConversationChange({payload:i}));case 41:if(P=N.sent,!(!p&&"closed"!==d&&h>0||P)){N.next=47;break}return I=P||_,N.next=47,(0,Lt.put)(Ms({conversationId:i,isRead:!0,latestMessageId:I}));case 47:if(A={},!c){N.next=56;break}return N.next=51,(0,Lt.call)(up,{payload:{shopId:E}});case 51:return w=N.sent,x=w.auth_names,k=void 0===x?[]:x,N.next=56,(0,Lt.put)(zs({access:k}));case 56:return N.next=58,(0,Lt.select)(xl(E));case 58:if(A=N.sent){N.next=63;break}return N.next=62,(0,Lt.call)(Wl,{payload:{shopId:E}});case 62:A=N.sent;case 63:return N.next=65,(0,Lt.put)(Er({name:"shops",id:E,record:ji({},A)}));case 65:return N.next=69,bo().put(Co().messageSyncUpdate({payload:{conversation:r}}));case 69:return N.next=71,(0,Lt.put)(oi({conversationBeenDeleted:!1}));case 71:N.next=76;break;case 73:N.prev=73,N.t0=N.catch(1),console.log("*** Show Conversation Failed: ",N.t0);case 76:case"end":return N.stop()}}),ki,null,[[1,73]])}function Hi(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return(t=e.payload).type,r=t.conversationId,n=t.previousId,o.next=4,(0,Lt.put)(ei({conversationId:r,previousId:n}));case 4:case"end":return o.stop()}}),Ui)}function Vi(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeLatest)(Vs,Fi);case 2:return e.next=4,(0,Lt.takeEvery)(Ys,Hi);case 4:case"end":return e.stop()}}),Mi)}const Bi=(e(Ni={},wc.SHOW_NORMAL_CONVERSATION_SUCCEEDED,(function(e,t){var r=t.payload,n=r.conversationId;return r.previousId,ji(ji({},e),{},{currentConversationId:n})})),e(Ni,wc.RESET_CONVERSATION_REQUESTED,(function(e){return ji(ji({},e),{},{currentConversationId:null})})),e(Ni,wc.SET_NAVIGATE_TO_UNREAD_MESSAGE,(function(e,t){var r=t.payload.isNavigateToUnreadMessage;return ji(ji({},e),{},{isNavigateToUnreadMessage:r})})),e(Ni,wc.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e,t){var r=t.payload.navigateToUnreadMessageId;return ji(ji({},e),{},{navigateToUnreadMessageId:r})})),e(Ni,wc.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e){return ji(ji({},e),{},{navigateToUnreadMessageId:""})})),Ni),Yi=e({},wc.UPDATE_CONVERSATION_FILTER,(R.ConversationTypeEnum.Normal,function(e,t){var r=t.payload.filter;return pi(pi({},e),{},{filter:r})}));function Qi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qi(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Qi(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Wi,Ki=N().mark(Ji),zi=N().mark(Xi);function Ji(e,t,r,n,o){var a,c,s,i,u,l,p,d,f,E,_,S,h,O,v;return N().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return a=T("conversations",e),m.next=3,(0,Lt.select)(ts);case 3:return c=m.sent,m.next=6,(0,Lt.select)((function(e){return e.entityReducer}));case 6:return s=m.sent,i=s.conversations,u=void 0===i?{}:i,l=s.shops,p=void 0===l?{}:l,d=[],c&&c.faking?(f=c.id,d=bv(t,a.result,n,f)):d=bv(t,a.result,n),E=d.length<R.persistLimit?null:x(d).splice(0,R.persistLimit),m.next=16,(0,Lt.put)(fr({entities:{persist:E}}));case 16:return m.next=18,(0,Lt.call)(yv,u,e,"conversations");case 18:return m.next=20,(0,Lt.spawn)(Xi,e);case 20:if(!(_=o&&o.length)){m.next=26;break}return m.next=24,(0,Lt.call)(yv,p,o,"shops");case 24:return m.next=26,(0,Lt.put)(Fl({shopIds:o.map((function(e){return e.id}))}));case 26:return m.next=28,(0,Lt.put)(Te());case 28:if(!(S=Dv(E,r,t))||!S.changed){m.next=40;break}if(O=S.lastConversationId,"older"!==n&&"reset"!==n){m.next=35;break}h=a.entities.conversations&&a.entities.conversations[O],m.next=39;break;case 35:return m.next=37,(0,Lt.select)(Qc);case 37:v=m.sent,h=v.find((function(e){return e.id===O}));case 39:h&&(_?S.oldestReceivedMessageId=h.latest_message_id:S.oldestTimestampNano=h.last_msg_time_nano);case 40:return m.abrupt("return",{persistObj:S,resultConversationIds:d});case 41:case"end":return m.stop()}}),Ki)}function Xi(e){var t,r,n,o,a,c,s,i,u,l,p,d,f,E;return N().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:if(t=[],e.forEach((function(e){(0,R.hasTargetMessageOption)(e.last_message_option,R.MessageOption.MSG_OPT_RECALL)&&t.push({conversation_id:e.id,shop_id:e.shop_id})})),!t.length){_.next=27;break}return _.next=5,(0,Lt.call)($e,{method:"POST",parent:"conversation",resource:"last_msg_in_conversation_batch",payload:JSON.stringify({pairs:t})});case 5:if(r=_.sent,!(n=Object.keys(r)).length){_.next=27;break}o={};case 9:if(!n.length){_.next=24;break}if(!(a=n.shift())){_.next=22;break}return _.next=14,(0,Lt.select)(ls(a));case 14:if(c=_.sent,(0,R.hasTargetMessageOption)(c.last_message_option,R.MessageOption.MSG_OPT_RECALL)){_.next=17;break}return _.abrupt("continue",9);case 17:s=r[a],i=s.id,u=s.type,l=s.content,p=s.to_shop_id,d=s.created_at,f=(0,R.getChatBotParams)(s,{updateMaxGeneralOptionHideTime:c.shop_id!==p}),E=(0,R.getCrmPreviewParams)(s),o[a]=qi(qi({latest_message_id:i,latest_message_type:u,latest_message_content:l,last_message_time:d},f),E);case 22:_.next=9;break;case 24:if((0,R.checkEmptyObject)(o)){_.next=27;break}return _.next=27,(0,Lt.put)(Sr({name:"conversations",records:o}));case 27:case"end":return _.stop()}}),zi)}var $i=N().mark(iu),Zi=N().mark(uu),eu=N().mark(lu);function tu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ru(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?tu(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var nu=["pinned","unreplied"],ou=function(e,t,r,n,o){var a={},c="older"===e?t:"latest"===e?r:"",s=nu.includes(n);return a.resource=s?"conversation/list":"conversations",a.params={next_timestamp_nano:c,direction:"latest"===e&&c?"latest":"older"},"unread"===n&&(a.params.unread_only=!0),s&&(a.params.type=n),new Promise((function(e,t){$e(a).then((function(t){var r=t.conversations,n=void 0===r?[]:r,o=t.page_result;e([n,void 0===o?{}:o])})).catch((function(e){t(e)}))}))},au=function(e,t,r,n,o,a,c){var s="older"===t?r:"latest"===t?n:"",i={direction:"latest"===t?"latest":"older"};if(s&&(i.last_received_message_id=s),a)return e&&(i.shop_id=e),o&&["unread","pinned"].includes(o)&&(i.type=o),new Promise((function(e,t){$e({parent:"subaccount",resource:"conversations",params:i}).then((function(t){var r=t.conversations;e(void 0===r?[]:r)})).catch((function(e){t(e)}))}))},cu=function(e){return new Promise((function(t,r){$e({subServer:"coreapi",parent:"conversation_list_by_ids",params:{conversation_ids:JSON.stringify(e)}}).then((function(e){var r=e.conversations;t(void 0===r?[]:r)})).catch((function(e){r(e)}))}))},su=function(e){return e=e.filter((function(e){return e})),new Promise((function(t){$e({parent:"setting",resource:"auto_translations",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e.auto_translations;t(void 0===r?[]:r)})).catch((function(){t([])}))}))};function iu(e){var t,r,n,o,a,c,s,i,u,l,p,d,f,E,_,S,h,O,v,T,m,g,y,C,D,P,I,A,w,k,U,M,L,j,G,F,H,V,B,Y,Q,q,W,K,z,J,X,$,Z,te,re,ne,oe,ae,ce,se,ie,ue,le,pe,de;return N().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return t=e.payload,r=t.direction,n=t.noPending,o=t.source,a="latest"===r,c=null,N.next=5,(0,Lt.select)(xn);case 5:return s=N.sent,N.next=8,(0,Lt.select)(vn);case 8:return i=N.sent,N.next=11,(0,Lt.select)($c);case 11:if(u=N.sent.toLowerCase(),l=!i,p=o===R.ConversationSource.SYNC,"reset"!==r){N.next=19;break}return N.next=17,bo().put(Co().resetConversationQueue({isLazy:!0}));case 17:return N.next=19,(0,Lt.put)(ws({conversationIds:[],oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",oldestTimestampNano:"",latestTimestampNano:"",maxLatestTimestampNano:"",direction:"reset",hasMore:!0,status:R.DataFetchStatus.SUCCEED,persist:null,shouldFetchByTimestamp:l}));case 19:return N.next=21,(0,Lt.select)((function(e){return e.conversationReducer}));case 21:if(d=N.sent,f=d.oldestTimestampNano,E=d.latestTimestampNano,_=d.maxLatestTimestampNano,S=d.oldestReceivedMessageId,h=d.latestReceivedMessageId,O=d.maxLatestReceivedMessageId,v=d.hasMore,T=d.persist,m=d.conversationIds,g=d.status,y=d.syncFetchException,C=d.currentConversationId,D="reset"===r||(l?!f:!S)&&"older"===r,N.prev=35,"older"===r&&(l?"0"===f:!v)){N.next=154;break}if(n){N.next=40;break}return N.next=40,(0,Lt.put)(Ns({status:D?R.DataFetchStatus.INIT_PENDING:R.DataFetchStatus.PENDING}));case 40:if(P=[],I={},!l){N.next=51;break}return N.next=45,(0,Lt.call)(ou,r,f,E,u,o);case 45:A=N.sent,w=b(A,2),P=w[0],I=w[1],N.next=54;break;case 51:return N.next=53,(0,Lt.call)(au,c,r,S,h,u,i,o);case 53:P=N.sent;case 54:if(!(k=P.length)){N.next=150;break}if("reset"===r&&(!l||nu.includes(u))){N.next=66;break}if(U=P[k-1],M="older"===r,l?(L=M?f:E,j=M?U.next_timestamp_nano:U.last_message_time_nano):(L=M?S:h,j=U.latest_message_id),!L||!j){N.next=66;break}if(M?j<L:j>L){N.next=66;break}return N.next=65,(0,Lt.put)(ws({direction:r,status:R.DataFetchStatus.SUCCEED,hasMore:a,persist:T,oldestReceivedMessageId:S,latestReceivedMessageId:h,maxLatestReceivedMessageId:h,conversationIds:m,oldestTimestampNano:f,latestTimestampNano:E,maxLatestTimestampNano:E,shouldFetchByTimestamp:l}));case 65:return N.abrupt("return");case 66:if(s||i){N.next=76;break}return N.next=69,(0,Lt.select)(uf);case 69:if("enabled"===N.sent){N.next=76;break}return G=Array.from(new Set(P.map((function(e){return e.to_shop_id})))),N.next=74,(0,Lt.call)(su,G);case 74:F=N.sent,P=P.map((function(e){var t=F.find((function(t){return t.shop_id===e.to_shop_id}));return ru(ru({},e),{},{translationAccess:!!t&&t.is_auto_translation})}));case 76:if(H={},P.forEach((function(e){H[e.id]=!0})),Ti(P),V=P[0],B=mi(V,I.next_cursor),Y=V.latest_message_id,Q={status:R.DataFetchStatus.SUCCEED,direction:r,conversationIdsMap:H,shouldFetchByTimestamp:l,maxLatestReceivedMessageId:!O||O<Y?Y:O},!l){N.next=98;break}return q=B.oldestTimestampNano,W=B.latestTimestampNano,N.next=87,(0,Lt.select)((function(e){return e.conversationReducer}));case 87:return K=N.sent,z=K.conversationIds,J=K.persist,N.next=92,(0,Lt.call)(Ji,P,z,J,r);case 92:X=N.sent,$=X.persistObj,Z=X.resultConversationIds,Q=Object.assign({},Q,{oldestTimestampNano:q,latestTimestampNano:W,persist:$,conversationIds:Z,maxLatestTimestampNano:!_||_<W?W:_}),N.next=118;break;case 98:return te=[],re=[],N.next=102,(0,Lt.select)(kl);case 102:if(ne=N.sent,P.forEach((function(e){!ne.includes(e.shop_id)&&re.push(e.shop_id)})),!re.length){N.next=108;break}return N.next=107,(0,Lt.call)(ip,{shopIds:x(new Set(re))});case 107:te=N.sent;case 108:return N.next=110,(0,Lt.select)((function(e){return e.conversationReducer}));case 110:return oe=N.sent,ae=oe.conversationIds,ce=oe.persist,N.next=115,(0,Lt.call)(Ji,P,ae,ce,r,te);case 115:se=N.sent,ie=P[k-1].latest_message_id,Q=Object.assign({},Q,{hasMore:!0,conversationIdsMap:H,persist:se.persistObj,oldestReceivedMessageId:ie,latestReceivedMessageId:Y,conversationIds:se.resultConversationIds});case 118:if(!p){N.next=130;break}if(!C||!H[C]){N.next=130;break}return ue=P.find((function(e){return e.id===C})),le=(ue||{}).latest_message_id,N.next=124,(0,Lt.select)(Vd);case 124:if(pe=N.sent,de=pe.length?pe[pe.length-1].id:"",le===de){N.next=130;break}return N.next=130,bo().put(Co().fetchMessagesRequested({payload:{conversationId:null==ue?void 0:ue.id,reset:!0},isLazy:!0}));case 130:return N.next=132,(0,Lt.put)(ws(Q));case 132:if(!a){N.next=145;break}if(!l){N.next=141;break}if("0"===B.nextTimestampNano){N.next=139;break}return N.next=137,(0,Lt.put)(As({direction:r,noPending:!0}));case 137:N.next=139;break;case 139:N.next=143;break;case 141:return N.next=143,(0,Lt.put)(As({direction:r,noPending:!0}));case 143:N.next=148;break;case 145:if(!(Q.conversationIds.length<=20)){N.next=148;break}return N.next=148,(0,Lt.put)(As({direction:"older",noPending:!0}));case 148:N.next=152;break;case 150:return N.next=152,(0,Lt.put)(ws({direction:r,status:R.DataFetchStatus.SUCCEED,hasMore:a,persist:T,oldestReceivedMessageId:S,latestReceivedMessageId:h,maxLatestReceivedMessageId:O,oldestTimestampNano:f,latestTimestampNano:E,maxLatestTimestampNano:_,shouldFetchByTimestamp:l,syncFetchException:p?y+1:0}));case 152:N.next=157;break;case 154:if(g===R.DataFetchStatus.INIT_FAILED){N.next=157;break}return N.next=157,(0,Lt.put)(Ns({status:R.DataFetchStatus.SUCCEED}));case 157:N.next=168;break;case 159:if(N.prev=159,N.t0=N.catch(35),!(N.t0 instanceof _e||N.t0 instanceof ee)){N.next=166;break}return N.next=164,(0,Lt.put)(Ns({status:R.DataFetchStatus.TEMPORY_ERROR}));case 164:N.next=168;break;case 166:return N.next=168,(0,Lt.put)(Ns({status:D?R.DataFetchStatus.INIT_FAILED:R.DataFetchStatus.FAILED}));case 168:case"end":return N.stop()}}),$i,null,[[35,159]])}function uu(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.payload.conversationIds,r=void 0===t?[]:t,c.prev=1,r.length){c.next=6;break}return c.next=5,(0,Lt.select)(Jc);case 5:r=c.sent;case 6:if(!r.length){c.next=16;break}return c.next=9,(0,Lt.call)(cu,r.slice(0,20));case 9:if(n=c.sent,!(o=n.filter((function(e){return!e.lack}))).length){c.next=16;break}return a={},o.forEach((function(e){a[e.id]=e})),c.next=16,(0,Lt.put)(Sr({name:"conversations",records:a}));case 16:c.next=20;break;case 18:c.prev=18,c.t0=c.catch(1);case 20:case"end":return c.stop()}}),Zi,null,[[1,18]])}function lu(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(As,iu);case 2:return e.next=4,(0,Lt.takeEvery)(qs,uu);case 4:case"end":return e.stop()}}),eu)}const pu=(e(Wi={},wc.FETCH_CONVERSATIONS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.conversationIds,o=r.conversationIdsMap,a=void 0===o?{}:o,c=r.oldestReceivedMessageId,s=r.latestReceivedMessageId,i=r.direction,u=void 0===i?"reset":i,l=r.status,p=r.hasMore,d=r.oldestTimestampNano,f=r.latestTimestampNano,E=r.persist,_=r.shouldFetchByTimestamp,S=r.maxLatestReceivedMessageId,h=r.maxLatestTimestampNano,O=r.syncFetchException,v=void 0===O?0:O,T=ru(ru({},e),{},{status:l,hasMore:p,persist:E,conversationIds:n||e.conversationIds,conversationIdsMap:"reset"===u?a:ru(ru({},e.conversationIdsMap),a),direction:"latest"===u?u:"older",maxLatestReceivedMessageId:S,maxLatestTimestampNano:h,syncFetchException:v});switch(u){case"reset":_?(T.latestTimestampNano=f,T.oldestTimestampNano=d):(T.oldestReceivedMessageId=c,T.latestReceivedMessageId=s);break;case"latest":_?T.latestTimestampNano=f>e.latestTimestampNano?f:e.latestTimestampNano:T.latestReceivedMessageId=s;break;case"older":_?T.oldestTimestampNano=d:T.oldestReceivedMessageId=c}return T})),e(Wi,wc.UPDATE_FETCH_CONVERSATIONS_STATUS,(function(e,t){var r=t.payload.status;return pi(pi({},e),{},{status:r})})),e(Wi,wc.UPDATE_FETCH_CONVERSATIONS_DIRECTION,(function(e,t){var r=t.payload.direction;return pi(pi({},e),{},{direction:r})})),e(Wi,wc.UPDATE_CONVERSATION_TIMESTAMP,(function(e,t){var r=t.payload,n=r.latestTimestampNano,o=r.oldestTimestampNano;return ru(ru({},e),{},{latestTimestampNano:n,oldestTimestampNano:o})})),Wi),du=e({},wc.SET_CURRENT_CONVERSATION_CAN_READ,(function(e,t){var r=t.payload.canRead;return pi(pi({},e),{},{currentConversationCanRead:r})}));var fu,Eu=N().mark(Ou),_u=N().mark(vu);function Su(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hu(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Su(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Su(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ou(e){var t,r,n,o,a,c,s,i,u,l,p,d,f,E,_,S,h,O;return N().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,r=t.conversationId,n=t.isRead,o=t.latestMessageId,v.prev=1,a=Date.now()+"",c=n?"read":"unread",v.next=6,(0,Lt.select)(ls(r));case 6:if(s=v.sent,i=s.shop_id,u=s.last_read_message_id,!n){v.next=16;break}return v.next=12,(0,Lt.select)(ls(r));case 12:if(l=v.sent,p=l.unread_count,u!==o||p){v.next=16;break}return v.abrupt("return");case 16:if(d=n?{last_read_message_id:o}:{},i&&(d.shop_id=i),!n){v.next=21;break}return v.next=21,(0,Lt.put)(js({requestId:a}));case 21:return v.next=23,(0,Lt.call)($e,{method:"PUT",parent:"conversations",parentId:r,resource:c,params:{request_id:a},payload:JSON.stringify(hu({},d))});case 23:if(!n){v.next=41;break}return v.next=26,(0,Lt.select)((function(e){return e.conversationReducer}));case 26:return f=v.sent,E=f.conversationMark,_="socket"===E[r],v.next=31,(0,Lt.put)(Ls({conversationId:r,markType:_?"":"api"}));case 31:if(_){v.next=41;break}return v.next=34,(0,Lt.select)(ls(r));case 34:return S=v.sent,h=S.unread_count,O=S.shop_id,v.next=39,(0,Lt.put)(Er({name:"conversations",id:r,record:{last_read_message_id:o,unread_count:0}}));case 39:return v.next=41,(0,Lt.put)(Qr({type:Lr.MARK_AS_READ,conversation:{id:r,shop_id:O,unread_count:h}}));case 41:v.next=47;break;case 43:return v.prev=43,v.t0=v.catch(1),v.next=47,(0,Lt.put)(Rp({error:v.t0}));case 47:case"end":return v.stop()}}),Eu,null,[[1,43]])}function vu(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Ms,Ou);case 2:case"end":return e.stop()}}),_u)}const Tu=(e(fu={},wc.MARK_MESSAGES_SUCCEEDED,(function(t,r){var n=r.payload,o=n.conversationId,a=n.markType;return hu(hu({},t),{},{conversationMark:hu(hu({},t.conversationMark),{},e({},o,a))})})),e(fu,wc.UPDATE_READ_REQUEST_DATA,(function(e,t){var r=t.payload,n=r.requestId,o=r.requestIds,a=r.count,c=hu({},e);return n&&(c.readRequestIds=[n].concat(e.readRequestIds)),o&&(c.readRequestIds=o),a&&(c.missedReadNoticeCount=a),c})),fu);var mu,gu=N().mark(bu),yu=N().mark(Ru);function bu(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.conversationId,a.prev=1,a.next=5,(0,Lt.select)(xn);case 5:if(!a.sent){a.next=10;break}return a.next=10,(0,Lt.put)(kO({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 10:return a.next=12,(0,Lt.select)(ls(t));case 12:return r=a.sent,n=r.shop_id,o=r.status,a.next=17,(0,Lt.call)($e,{method:"PUT",resource:"conversations",id:t,suffix:"status",payload:JSON.stringify({shop_id:n,status:mu[o]})});case 17:a.next=23;break;case 19:return a.prev=19,a.t0=a.catch(1),a.next=23,(0,Lt.put)(Rp({error:a.t0}));case 23:case"end":return a.stop()}}),gu,null,[[1,19]])}function Ru(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Qs,bu);case 2:case"end":return e.stop()}}),yu)}!function(e){e.activated="closed",e.closed="activated"}(mu||(mu={}));var Cu=N().mark(Pu),Du=N().mark(Iu);function Pu(e){var t,r,n,o,a,c,s,i,u,l,p,d,f;return N().wrap((function(E){for(;;)switch(E.prev=E.next){case 0:return t=e.payload.conversationId,E.prev=1,E.next=4,(0,Lt.select)(ls(t));case 4:return r=E.sent,n=r.id,o=r.unread_count,a=r.shop_id,E.next=8,(0,Lt.select)(Hc);case 8:return c=E.sent,E.next=11,(0,Lt.call)($e,{resource:"conversations",id:t,params:{shop_id:a}});case 11:if(s=E.sent,i=s.flag,u=s.entry_point,l=s.unread_count,p=s.latest_message_id,n){E.next=19;break}return d=T("conversations",s),f=d.entities,E.next=17,(0,Lt.put)(fr({entities:f}));case 17:E.next=21;break;case 19:return E.next=21,(0,Lt.put)(Er({name:"conversations",id:t,record:{flag:i,entry_point:u,unread_count:l}}));case 21:if(o||o===s.unread_count){E.next=24;break}return E.next=24,(0,Lt.put)(Qr({conversation:s,type:Lr.ACTIVE_CONVERSATION}));case 24:if(t!==c){E.next=28;break}if(!(l>0)){E.next=28;break}return E.next=28,(0,Lt.put)(Ms({conversationId:t,isRead:!0,latestMessageId:p}));case 28:return E.abrupt("return",s);case 31:return E.prev=31,E.t0=E.catch(1),E.abrupt("return",{});case 34:case"end":return E.stop()}}),Cu,null,[[1,31]])}function Iu(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Ps,Pu);case 2:case"end":return e.stop()}}),Du)}function Au(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wu(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Au(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Au(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Nu=e({},wc.FAKE_CONVERSATION_SUCCEEDED,(function(e,t){var r=t.payload.conversationId;return wu(wu({},e),{},{conversationIds:[r].concat(e.conversationIds.filter((function(e){return r!==e})))})}));var xu=N().mark(ju),ku=N().mark(Gu);function Uu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mu(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Uu(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Lu={restart:Qs,delete:Cs,read:Ms,unread:Ms,pin:Gs,unpin:Gs,mute:ai,unmute:ai};function ju(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.type,n=t.extra,o=Lu[r],a.next=4,(0,Lt.put)(o(Mu({},n)));case 4:case"end":return a.stop()}}),xu)}function Gu(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Ws,ju);case 2:case"end":return e.stop()}}),ku)}function Fu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hu(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Fu(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Lu.close=Qs;var Vu={hasSCAccess:"login_sellercenter",hasEditOrderAccess:"webchat_order_edit",hasViewOrderAccess:"access_my_sale",hasViewProductAccess:"access_my_product",hasEditVoucherAccess:"my_marketing_voucher_edit",hasViewVoucherAccess:"my_marketing_voucher_access"},Bu=function(e){var t={},r=e.length;return Object.keys(Vu).forEach((function(n){t[n]=!r||e.includes(Vu[n])})),t};const Yu=e({},wc.UPDATE_ACCESS,(function(e,t){var r=Bu(t.payload.access);return Hu(Hu({},e),{},{access:r})}));var Qu=["combine","user","orderId","message","agent","agentMessage"];function qu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wu(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?qu(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ku=N().mark(zu);function zu(){var e,t,r,n,o,a,c,s;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,Lt.select)(Fc);case 2:return e=i.sent,i.prev=3,i.next=6,(0,Lt.call)($e,{subServer:"coreapi",parent:"conversation",resource:"updated_conversation_list",params:{last_update_time:e}});case 6:if(t=i.sent,r=t.conversations,n=t.page_result,!(r.length>0)){i.next=13;break}return o={},r.forEach((function(e){o[e.id]=e})),i.next=13,(0,Lt.put)(Sr({name:"conversations",records:o}));case 13:if(c=(a=n||{}).has_more,!(s=a.next_last_update_time)){i.next=17;break}return i.next=17,(0,Lt.put)(Zs({timeNow:s}));case 17:if(!(c&&r.length>0)){i.next=20;break}return i.next=20,(0,Lt.call)(zu);case 20:i.next=29;break;case 22:if(i.prev=22,i.t0=i.catch(3),!(i.t0 instanceof ae)){i.next=29;break}return i.next=27,(0,Lt.put)(Zs({timeNow:"0"}));case 27:return i.next=29,(0,Lt.call)(iu,{payload:{direction:"reset"}});case 29:case"end":return i.stop()}}),Ku,null,[[3,22]])}const Ju=e({},wc.UPDATE_SYNC_TIME_NOW,(function(e,t){var r=t.payload.timeNow;return Wu(Wu({},e),{},{updateTimeNow:r})}));var Xu,$u,Zu=N().mark(tl),el=N().mark(rl);function tl(e){var t,r,n,o,a,c,s;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.conversationId,i.prev=1,i.next=4,(0,Lt.select)(ls(t));case 4:return r=i.sent,n=r.shop_id,o=r.mute,i.next=9,(0,Lt.select)(vn);case 9:return a=i.sent,c={biz_type:a?2:0},n&&(c.shop_id=n),s={method:"PUT",parent:"conversations",parentId:t,resource:o?"unmute":"mute",payload:JSON.stringify(c)},i.next=15,(0,Lt.call)($e,s);case 15:i.next=21;break;case 17:return i.prev=17,i.t0=i.catch(1),i.next=21,(0,Lt.put)(Rp({error:i.t0}));case 21:case"end":return i.stop()}}),Zu,null,[[1,17]])}function rl(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(ai,tl);case 2:case"end":return e.stop()}}),el)}var nl=N().mark(pl),ol=N().mark(dl);function al(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?al(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):al(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var sl=(0,Oe.createActions)((e(Xu={},wc.SEARCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.keyword,r=void 0===t?"":t,n=e.shopId;return{keyword:r,shopId:void 0===n?"":n}})),e(Xu,wc.SEARCH_CONVERSATIONS_SUCCEEDED,(function(e){return{results:e.results,searchStatus:e.searchStatus}})),e(Xu,wc.UPDATE_SEARCH_PARAMS,(function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchStatus:e.searchStatus}})),Xu)),il=sl.searchConversationsRequested,ul=sl.searchConversationsSucceeded,ll=sl.updateSearchParams;function pl(e){var t,r,n,o,a,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.keyword,r=[],n=t.trim(),s.next=5,(0,Lt.put)(ll({keyword:n,searchStatus:R.DataFetchStatus.INIT_PENDING}));case 5:if(!n){s.next=15;break}return o=n.toLocaleLowerCase(),s.next=9,(0,Lt.select)((function(e){return e.entityReducer}));case 9:return a=s.sent,c=a.shops,s.next=13,(0,Lt.select)(Qc);case 13:s.sent.forEach((function(e){(e.to_name||"").toLocaleLowerCase().includes(o)&&!e.faking&&r.push(cl(cl({},e),{},{shop_name:(c[e.shop_id]||{}).name}))}));case 15:return s.next=17,(0,Lt.put)(ul({results:r,searchStatus:R.DataFetchStatus.SUCCEED}));case 17:case"end":return s.stop()}}),nl)}function dl(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeLatest)(il,pl);case 2:case"end":return e.stop()}}),ol)}const fl=(e($u={},wc.SEARCH_CONVERSATIONS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.results,o=r.searchStatus;return cl(cl({},e),{},{results:n,searchStatus:o})})),e($u,wc.UPDATE_SEARCH_PARAMS,(function(e,t){var r=t.payload,n=r.keyword,o=r.searchStatus;return cl(cl({},e),{},{keyword:n,searchStatus:o})})),$u);var El,_l=P(439).t;function Sl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Sl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ol=N().mark(ml),vl=N().mark(gl);function Tl(e,t){return $e({parent:"conversation",resource:"conversation_info",params:{shop_id:t,message_id:e}})}function ml(e){var t,r,n,o,a,c,s,i,u,l,p,d,f,E,_,S,h,O;return N().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,r=t.msgId,n=t.shopId,v.next=3,(0,Lt.select)(Vd);case 3:return o=v.sent,a={},c=o.find((function(e){return e.id===r})),v.next=8,(0,Lt.put)($s({inlocation:!0}));case 8:if(!c){v.next=16;break}return s=c.conversation_id,v.next=12,(0,Lt.select)(ls(s));case 12:return a=v.sent,v.next=15,(0,Lt.call)(Fi,{payload:{conversation:a,messageId:r,messageList:[]}});case 15:Iv.emit("scrollToMessage",r);case 16:if(a.id){v.next=58;break}return v.prev=17,v.next=20,(0,Lt.all)([(0,Lt.call)(Tl,r,n),bo().call(Co().fetchConversationMessagesSaga({payload:{msgId:r,shopId:n}}))]);case 20:if(i=v.sent,u=b(i,2),l=u[0],p=u[1],d=(l||{}).conversation_info,f=void 0===d?[]:d,E=(p||{}).get_messages,0!==(_=void 0===E?[]:E).length&&_.find((function(e){return e.id===r}))){v.next=28;break}throw new Error("message_not_found");case 28:if(!(a=f[0])){v.next=39;break}return S=T("conversations",a),h=S.entities,v.next=33,bo().put(Co().deleteConversationMessageHash({payload:{conversationId:a.id}}));case 33:return v.next=35,(0,Lt.put)(fr({entities:h}));case 35:return v.next=37,(0,Lt.delay)(300);case 37:return v.next=39,(0,Lt.call)(Fi,{payload:{conversation:a,messageId:r,messageList:_}});case 39:v.next=58;break;case 41:v.prev=41,v.t0=v.catch(17),O=_l("common.server_error.warning_tips"),v.t1=v.t0.message,v.next="message_not_found"===v.t1?47:"conversation_not_found"===v.t1?49:55;break;case 47:return O=_l("message.server_error.not_found"),v.abrupt("break",56);case 49:return O=_l("conversation.server_error.deleted"),v.next=52,(0,Lt.put)(oi({conversationBeenDeleted:!0}));case 52:return v.next=54,(0,Lt.put)(Bs());case 54:case 55:return v.abrupt("break",56);case 56:return v.next=58,(0,Lt.call)(wp,Rp({toast:{show:!0,type:"fail",message:O}}));case 58:case"end":return v.stop()}}),Ol,null,[[17,41]])}function gl(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeLatest)(Xs,ml);case 2:case"end":return e.stop()}}),vl)}const yl=(e(El={},wc.UPDATE_LOCATION_MODE,(function(e,t){var r=t.payload.inlocation;return hl(hl({},e),{},{inlocation:r})})),e(El,wc.SET_CONVERSATION_BEEN_DELETED,(function(e,t){var r=t.payload.conversationBeenDeleted;return hl(hl({},e),{},{conversationBeenDeleted:r})})),El);function bl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?bl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Cl,Dl,Pl,Il,Al=[Ai,Vi,ui,vu,Ru,lu,Iu,Gu,rl,dl,gl],wl=(Cl={},Qu.forEach((function(e){Cl[e]={pageIndex:1,pageSize:20,hasMore:!0,nextOffset:"0"}})),Dl={},Qu.forEach((function(e){Dl[e]={status:"",results:[],total:0}})),{conversationIds:[],conversationIdsMap:{},maxLatestTimestampNano:"",latestTimestampNano:"",oldestTimestampNano:"",oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",currentConversationId:null,currentConversationCanRead:!0,filter:"All",keyword:"",draftHash:{},status:"",hasMore:!0,persist:null,results:[],direction:"",searchStatus:"",inlocation:!1,conversationBeenDeleted:!1,syncFetchException:0,conversationMark:{},readRequestIds:[],missedReadNoticeCount:0,access:Bu([]),updateTimeNow:"0",isNavigateToUnreadMessage:!1,navigateToUnreadMessageId:""}),Nl=(0,Oe.handleActions)(Rl(Rl(Rl(Rl(Rl(Rl(Rl(Rl(Rl(Rl(Rl({},wi),Bi),Yi),du),pu),Nu),Tu),Yu),fl),yl),Ju),wl),xl=function(e){return(0,Bt.createSelector)(nr,(function(r){return(0,t.denormalize)(e,d,{shops:r})}))},kl=function(e){return e.shopReducer.fetchedShopIds},Ul=(0,Bt.createSelector)(ts,nr,(function(e,r){return(0,t.denormalize)(e.shop_id,d,{shops:r})||{}})),Ml=(0,Bt.createSelector)(_s,Qt,(function(e,r){return(0,t.denormalize)(e,d,r)||{}}));!function(e){e.FETCH_SHOPS_REQUESTED="FETCH_SHOPS_REQUESTED",e.FETCH_SHOPS_SUCCEED="FETCH_SHOPS_SUCCEED",e.UPDATE_FETCH_SHOPS_STATUS="UPDATE_FETCH_SHOPS_STATUS",e.FETCH_SHOP_AUTH_REQUESTED="FETCH_SHOP_AUTH_REQUESTED",e.UPDATE_FETCHED_SHOP_IDS="UPDATE_FETCHED_SHOP_IDS",e.UPDATE_SHOP_FILTER="UPDATE_SHOP_FILTER",e.VISIT_SHOP_SELLER_CENTER_REQUESTED="VISIT_SHOP_SELLER_CENTER_REQUESTED",e.VISIT_MALL_REQUESTED="VISIT_MALL_REQUESTED",e.SEARCH_SHOPS_REQUESTED="SEARCH_SHOPS_REQUESTED",e.SEARCH_SHOPS_SUCCEED="SEARCH_SHOPS_SUCCEED",e.UPDATE_SEARCH_SHOPS_STATUS="UPDATE_SEARCH_SHOPS_STATUS",e.FETCH_SHOP_DETAIL_INFO="FETCH_SHOP_DETAIL_INFO",e.UPDATE_CURRENT_FETCH_SHOP_IDS="UPDATE_CURRENT_FETCH_SHOP_IDS",e.RESET_CURRENT_FETCH_SHOPS="RESET_CURRENT_FETCH_SHOPS"}(Pl||(Pl={}));var Ll=(0,Oe.createActions)((e(Il={},Pl.FETCH_SHOPS_REQUESTED,(function(){return{}})),e(Il,Pl.FETCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result}})),e(Il,Pl.UPDATE_FETCH_SHOPS_STATUS,(function(e){return{status:e.status}})),e(Il,Pl.FETCH_SHOP_AUTH_REQUESTED,(function(e){return{shopId:e.shopId}})),e(Il,Pl.UPDATE_FETCHED_SHOP_IDS,(function(e){return{shopIds:e.shopIds}})),e(Il,Pl.UPDATE_SHOP_FILTER,(function(e){return{filter:e.filter}})),e(Il,Pl.VISIT_SHOP_SELLER_CENTER_REQUESTED,(function(e){return{url:e.url,shopId:e.shopId,orderId:e.orderId,itemId:e.itemId}})),e(Il,Pl.SEARCH_SHOPS_REQUESTED,(function(e){return{keyword:e.keyword}})),e(Il,Pl.SEARCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result,keyword:e.keyword}})),e(Il,Pl.UPDATE_SEARCH_SHOPS_STATUS,(function(e){return{status:e.status}})),e(Il,Pl.FETCH_SHOP_DETAIL_INFO,(function(e){return{shopId:e.shopId}})),Il)),jl=Ll.fetchShopsRequested,Gl=(Ll.fetchShopsSucceed,Ll.updateFetchShopsStatus,Ll.fetchShopAuthRequested),Fl=Ll.updateFetchedShopIds,Hl=Ll.updateShopFilter,Vl=Ll.visitShopSellerCenterRequested,Bl=Ll.searchShopsRequested,Yl=(Ll.searchShopsSucceed,Ll.updateSearchShopsStatus,Ll.fetchShopDetailInfo),Ql=N().mark(Wl),ql=N().mark(Kl);function Wl(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.shopId,a.prev=1,a.next=4,(0,Lt.select)(xl(t));case 4:return r=a.sent,a.next=7,(0,Lt.call)($e,{resource:"shop",id:t,params:{need_cache:1,cache_expires:600}});case 7:return r=a.sent,n=T("shops",r),o=n.entities,a.next=11,(0,Lt.put)(fr({entities:o}));case 11:return a.next=13,(0,Lt.put)(Fl({shopIds:[r.id]}));case 13:return a.abrupt("return",r);case 16:return a.prev=16,a.t0=a.catch(1),a.abrupt("return",{});case 19:case"end":return a.stop()}}),Ql,null,[[1,16]])}function Kl(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Yl,Wl);case 2:case"end":return e.stop()}}),ql)}function zl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?zl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Xl=e({},Pl.UPDATE_SHOP_FILTER,(function(e,t){var r=t.payload.filter;return Jl(Jl({},e),{},{shopFilter:r})}));var $l,Zl=N().mark(tp),ep=N().mark(rp);function tp(e){var t,r,n,o,a,c,s,i,u,l,p,d,f,E,_,S,h,O,v,T,m,g,y,b,C;return N().wrap((function(D){for(;;)switch(D.prev=D.next){case 0:return t=e.payload,r=t.url,n=t.shopId,o=t.orderId,a=t.itemId,D.prev=1,D.next=4,(0,Lt.call)($e,{resource:"shop",id:n,suffix:"sc"});case 4:if(c=D.sent,s=c.sc_url,i=c.upgraded,u=c.region,!i){D.next=12;break}return l=window.open(),r?((p=r.split("/"))[2]=(0,R.getSellerCenterUrl)(u),d=p.join("/"),l.location=d.includes("?")?"".concat(d,"&cnsc_shop_id=").concat(n):"".concat(d,"?cnsc_shop_id=").concat(n)):l.location=o?"https://".concat((0,R.getSellerCenterUrl)(u),"/portal/sale/").concat(o,"?cnsc_shop_id=").concat(n):a?"https://".concat((0,R.getSellerCenterUrl)(u),"/portal/product/").concat(a,"?cnsc_shop_id=").concat(n):"https://".concat((0,R.getSellerCenterUrl)(u),"?cnsc_shop_id=").concat(n),D.abrupt("return");case 12:if(!s){D.next=25;break}if(f=s.split("?"),E=f[1].split("&").find((function(e){return e.startsWith("sig=")})),_=E.substring(4),S=f[0].split("."),h=S[S.length-1],O=window.open(),!r){D.next=22;break}return O.location=r.includes("?")?"".concat(r,"&sig=").concat(_):"".concat(r,"?sig=").concat(_),D.abrupt("return");case 22:o||a?o?(v="https://".concat((0,R.getSellerCenterUrl)(h),"/portal/sale/").concat(o,"?sig=").concat(_),O.location=v):a&&(T="https://".concat((0,R.getSellerCenterUrl)(h),"/portal/product/").concat(a,"?sig=").concat(_),O.location=T):(m="https://".concat((0,R.getSellerCenterUrl)(h),"?sig=").concat(_),O.location=m),D.next=28;break;case 25:return g=gp(!1,{type:"permission-denied"}),D.next=28,(0,Lt.put)(Rp({toast:g}));case 28:D.next=38;break;case 30:return D.prev=30,D.t0=D.catch(1),D.next=34,(0,Lt.select)(xl(n));case 34:y=D.sent,b="https://".concat((0,R.getSellerCenterUrl)(y.country),"/portal/"),C=o?"sale/".concat(o):a?"product/".concat(a):"",window.open(b+C);case 38:case"end":return D.stop()}}),Zl,null,[[1,30]])}function rp(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Vl,tp);case 2:case"end":return e.stop()}}),ep)}function np(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function op(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?np(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):np(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ap=N().mark(up),cp=N().mark(lp),sp=function(e){return new Promise((function(t){$e({parent:"conversation",resource:"unread-counts",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e["unread-counts"];t(void 0===r?[]:r)})).catch((function(){t([])}))}))},ip=function(e){var t=e.shopIds,r={ids:JSON.stringify(t)};return new Promise((function(e){$e({resource:"shops",params:r}).then((function(t){var r=t.shops;e(void 0===r?[]:r)})).catch((function(){e([])}))}))};function up(e){var t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.shopId,n.prev=1,n.next=4,(0,Lt.call)($e,{parent:"shop",parentId:t,resource:"auth"});case 4:return r=n.sent,n.abrupt("return",r);case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",{});case 11:case"end":return n.stop()}}),ap,null,[[1,8]])}function lp(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Gl,up);case 2:case"end":return e.stop()}}),cp)}const pp=(e($l={},Pl.FETCH_SHOPS_SUCCEED,(function(e,t){var r=t.payload,n=r.pagination,o=r.result;return op(op({},e),{},{fetchResult:op(op({},e.fetchResult),{},{pagination:n,result:o})})})),e($l,Pl.SEARCH_SHOPS_SUCCEED,(function(e,t){var r=t.payload,n=r.pagination,o=r.result,a=r.keyword;return op(op({},e),{},{searchResult:op(op({},e.searchResult),{},{pagination:n,result:o,keyword:a})})})),e($l,Pl.UPDATE_FETCH_SHOPS_STATUS,(function(e,t){var r=t.payload.status;return op(op({},e),{},{status:r})})),e($l,Pl.UPDATE_SEARCH_SHOPS_STATUS,(function(e,t){var r=t.payload.status;return op(op({},e),{},{searchStatus:r})})),e($l,Pl.UPDATE_FETCHED_SHOP_IDS,(function(e,t){var r=t.payload.shopIds,n=e.fetchedShopIds;return op(op({},e),{},{fetchedShopIds:x(new Set(n.concat(r)))})})),$l);function dp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?dp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ep,_p,Sp={currentPage:0,perPage:20,hasMore:!0},hp=[Kl,lp,rp],Op={shopFilter:null,fetchedShopIds:[],fetchResult:{pagination:fp({},Sp),result:[]},status:"",searchResult:{pagination:fp({},Sp),result:[],keyword:""},searchStatus:""},vp=(0,Oe.handleActions)(fp(fp({},Xl),pp),Op),Tp=function(e){return e.toastReducer.toast},mp=P(439).t,gp=function(e,t){var r={};if(t){switch(t.type){case"auto-reply":e?t.first&&"enabled"===t.action?(r.message=mp("settings.enable_auto_reply_successfully"),r.show=!0):(r.message="",r.show=!1):(t.first&&"enabled"===t.action?r.message=mp("settings.failed_to_enable_auto_reply"):r.message="enabled"===t.action?mp("settings.failed_to_enable"):mp("settings.failed_to_disable"),r.show=!0);break;case"message":r.message=e?"save"===t.action?mp("settings.message.save_successfully"):"delete"===t.action?mp("settings.message.delete_successfully"):mp("settings.message.import_successfully"):"save"===t.action?mp("settings.message.failed_to_save"):"delete"===t.action?mp("settings.message.failed_to_delete"):mp("settings.message.failed_to_import"),r.show=!0;break;case"message-tips":e?(r.message="",r.show=!1):(r.message="enabled"===t.action?mp("settings.failed_to_enable"):mp("settings.failed_to_disable"),r.show=!0);break;case"forward":e||(r.message=403===t.status?mp("forward.exception",{forwardName:""}):mp("forward.server_error"),r.show=!0);break;case"send-feedback":r.message=mp("feedback_modal.error.failed_to_send"),r.show=!0;break;case"server-error-tips":r.message=mp("common.server_error.warning_tips"),r.show=!0;break;case"conversation-closed-tip":r.message=mp("conversation_detail.closed.warning_tips"),r.show=!0;break;case"permission-denied":r.message=mp("common.permission_denied"),r.show=!0;break;case"claim-voucher":r.message=mp(e?"voucher.claim.success":"voucher.claim.fail"),r.show=!0;break;case"private-image":r.message=mp("common.image.expired"),r.show=!0;break;case"operation":"save"===t.action&&(r.message=mp(e?"text.save_successfully":"text.save_failed")),r.show=!0;break;default:r.message=t.message,r.show=!0}r.type=e?"success":"fail"}return r};!function(e){e.COPY_SUCCEED_FEEDBACK="COPY_SUCCEED_FEEDBACK",e.SET_TOAST_INFORMATION="SET_TOAST_INFORMATION",e.SET_TOAST_INFORMATION_SUCCEEDED="SET_TOAST_INFORMATION_SUCCEEDED"}(Ep||(Ep={}));var yp=(0,Oe.createActions)((e(_p={},Ep.COPY_SUCCEED_FEEDBACK,(function(){return{}})),e(_p,Ep.SET_TOAST_INFORMATION,(function(e){return{type:e.type,error:e.error,toast:e.toast}})),e(_p,Ep.SET_TOAST_INFORMATION_SUCCEEDED,(function(e){return{toast:e.toast}})),_p)),bp=yp.copySucceedFeedback,Rp=yp.setToastInformation,Cp=yp.setToastInformationSucceeded;function Dp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Dp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ip=N().mark(wp),Ap=N().mark(Np);function wp(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.type,n=t.error,o=t.toast,c.next=3,(0,Lt.select)(An);case 3:if(!c.sent){c.next=11;break}return a=null,r&&(a=gp(!1,{type:r})),void 0!==n&&(a=n instanceof ae||n instanceof ie?n.handler():gp(!1,{type:"server-error-tips"})),o&&(a=o),c.next=11,(0,Lt.put)(Cp({toast:a}));case 11:case"end":return c.stop()}}),Ip)}function Np(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Rp,wp);case 2:case"end":return e.stop()}}),Ap)}const xp=e({},Ep.SET_TOAST_INFORMATION_SUCCEEDED,(function(e,t){var r=t.payload.toast;return Pp(Pp({},e),{},{toast:r})}));var kp=P(439).t,Up=N().mark(Lp),Mp=N().mark(jp);function Lp(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.put)(Rp({toast:gp(!0,{message:kp("common.successful_copied")})}));case 2:case"end":return e.stop()}}),Up)}function jp(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(bp,Lp);case 2:case"end":return e.stop()}}),Mp)}function Gp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Fp=[Np,jp],Hp=(0,Oe.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Gp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},xp),{toast:{type:"",message:"",show:!1}});function Vp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Vp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}R.MessageTypes.MSG_TYPE_TEXT;var Yp,Qp,qp=R.MessageTypes.MSG_TYPE_OFFER,Wp=R.MessageTypes.MSG_TYPE_ORDER,Kp=R.MessageTypes.MSG_TYPE_PRODUCT,zp=R.MessageTypes.MSG_TYPE_IMAGE,Jp=R.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED,Xp=R.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,$p=R.MessageTypes.MSG_TYPE_VIDEO,Zp=R.MessageTypes.MSG_TYPE_NOTIFICATION,ed=R.MessageTypes.MSG_TYPE_WEBVIEW,td=R.MessageTypes.MSG_TYPE_RATE_CARD,rd=R.MessageTypes.MSG_TYPE_RATE_CARDS,nd=R.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT,od=[Wp,Kp],ad=function(e){return(e.messageReducer||{}).faqHistoryStatus},cd=function(e){return(e.messageReducer||{}).faqHistoryHash},sd=function(e){return(e.messageReducer||{}).faqId},id=(0,Bt.createSelector)(cd,sd,(function(e,t){return e&&t&&e[t]||{all:[]}})),ud=function(e){return(e.messageReducer||{}).status},ld=(0,Bt.createSelector)((function(e){return e}),(function(e){return(e.messageReducer||{}).messagesRelatedMap||{}})),pd=function(e){return e.messageReducer.offlineMessages},dd=function(e){var t;return(null===(t=e.messageReducer)||void 0===t?void 0:t.videoMap)||{}},fd=function(e){return(0,Bt.createSelector)(dd,(function(t){return JSON.parse(JSON.stringify(t[e]||{}))}))},Ed=function(e){return(0,Bt.createSelector)(dd,(function(t){return Object.keys(t).find((function(r){return t[r].vid===e}))}))},_d=function(e){return(0,Bt.createSelector)(zt,(function(r){return(0,t.denormalize)(e,c,{messages:r})}))},Sd=function(e){return(0,Bt.createSelector)(zt,(function(r){return(0,t.denormalize)(e,[c],{messages:r})}))},hd=(0,Bt.createSelector)(Hc,ld,(function(e,t){return t[e]||{all:[]}})),Od=function(e){return(0,Bt.createSelector)(ld,(function(t){return t[e]||{all:[],sending:[],failed:[]}}))},vd=(0,Bt.createSelector)(hd,(function(e){return null==e?void 0:e.refer})),Td=function(e){return(0,Bt.createSelector)(Od(e),(function(e){return null==e?void 0:e.refer}))},md=function(e){return(e.messageReducer||{}).messageFillStatusMap||{}},gd=WT((function(e){return(0,Bt.createSelector)(Od(e),ls(e),zt,(function(e,r,n){return function(e,r,n){var o=e.all||[],a=e.sending||[],s=e.failed||[],i=o.length,u=null;if(i){for(var l=0,p=null;l<i&&!p;){var d=e.all[l];(p=(0,t.denormalize)(d,c,{messages:n}))&&p.type===R.MessageTypes.MSG_TYPE_SECURITY_TIPS&&(p=null),l++}p&&p.created_timestamp>new Date(r.last_message_time).getTime()/1e3&&(u=p)}if(!u){var f=r.latest_message_id,E=r.latest_message_content,_=r.latest_message_type,S=r.last_message_time,h=r.last_message_option,O=r.latest_message_source,v=r.last_message_time_nano;(u={id:f,content:E,type:_,message_option:h,source:O}).created_at=S||new Date(v/1e6)+""}var T=u,m=T.id,g=T.message_option,y=a.includes(m)?R.MessageSendStatus.SENDING:s.includes(m)?R.MessageSendStatus.FAILED:u.send_status?R.MessageSendStatus.SUCCEED:null;return(0,R.hasTargetMessageOption)(g,R.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(y=R.MessageSendStatus.FAILED,u.type=Ri,u.content={text:bi("common.blacklist.replaced_text")}),(0,R.hasTargetMessageOption)(g,R.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)&&(y=R.MessageSendStatus.FAILED),u.send_status=y,u}(e,r,n)}))})),yd=(0,Bt.createSelector)(hd,(function(e){var t=x(e.all||[]);return e.securityTipsMessageId&&t.push(e.securityTipsMessageId),t})),bd=(0,Bt.createSelector)(hd,(function(e){return e.sending||[]})),Rd=(0,Bt.createSelector)(hd,(function(e){return e.failed||[]})),Cd=(0,Bt.createSelector)(hd,(function(e){return e.hasMoreOlderMessage})),Dd=(0,Bt.createSelector)(hd,(function(e){return e.hasMoreLatestMessage})),Pd=(0,Bt.createSelector)(hd,(function(e){return e.hasNext})),Id=function(e){return e.messageReducer.entryPoint},Ad=function(e){return e.messageReducer.toBottomHasConflict},wd=(0,Bt.createSelector)(zt,yd,(function(e,r){return((0,t.denormalize)(r,[c],{messages:e})||[]).filter(Boolean)})),Nd=(0,Bt.createSelector)(wd,(function(e){return e.reverse()})),xd=(0,Bt.createSelector)(Nd,ts,(function(e,t){var r=0,n=[];return e.forEach((function(e,o){var a=(0,R.getMessageIsSend)(e,t);e.warning&&!a&&(o-r<10&&n.pop(),n.push(e.id),r=o)})),n})),kd=(0,Bt.createSelector)(ts,Nd,(function(e,t){if(!e)return[];var r=e.last_read_message_id;return t.filter((function(t){var n=(0,R.getMessageIsSend)(t,e);return t&&!n&&(0,R.greaterThan)(t.id,r)&&t.type!==Zp}))})),Ud=(0,Bt.createSelector)(Qt,id,(function(e,r){var n=r.all;return(0,t.denormalize)(n,[c],e)})),Md=(0,Bt.createSelector)(Ud,Nd,(function(e,t){return(e&&e.length?e:t).filter((function(e){var t=(e||{}).type;return!(0,R.isDeletedMessage)(e)&&[zp,$p,nd].includes(t)}))})),Ld=(0,Bt.createSelector)(Md,ts,ns,hn,fs,(function(e,t,r,n,o){var a=r&&r.country||"sg",c=(0,R.getVideoServer)(a);return e.map((function(e){var r="",a=!1,s=(0,R.getMessageIsSend)(e,t);switch(e.type){case zp:var i=e.content;r=1!==i.file_server_id&&i.url_hash?"".concat((0,R.getFileServer)()).concat(i.url_hash):i.url||i.localUrl,a=i.unknown_qr_code&&!s;break;case $p:var u=e.content;r=u.video_url?"".concat(c).concat(u.video_url):u.localVideoUrl;break;case nd:var l=e.content;r=l.thumb_url?"".concat((0,R.getFileServer)()).concat(l.thumb_url):l.image_url}var p=e.id,d=e.type,f=e.request_id,E=e.content;return{type:d,id:p,url:r,unknownQrCode:a,trackerData:{shopid:o,account_type:n.role||"shopee_user",message_id:p===f?0:p,conversation_id:t.id,account_id:n.id,is_sender:s,video_original_duration:E.duration_seconds}}}))})),jd=(0,Bt.createSelector)(kd,(function(e){return e.length?e.map((function(e){return e.id})):[]})),Gd=(0,Bt.createSelector)(ts,Nd,(function(e,t){return e?t.filter((function(e){return e})).reduce((function(t,r){var n=r.type,o=r.source_type,a=r.source_content,c=r.content;if(od.includes(n)&&a){var s="".concat(n,"_id");if(c[s]===a[s])return t}if(n===qp)return t;if(!o||e&&(0,R.getMessageIsSend)(r,e))return t;var i=t.lastSourceMessage,u=t.sourceList;if(!u.length)return{sourceList:u.concat(r),lastSourceMessage:r};if(o===Kp){var l=null==a?void 0:a.product_id,p=i.source_content&&i.source_content.product_id;if(!l||p===l)return t}else if(o===Wp){var d=null==a?void 0:a.order_id,f=i.source_content&&i.source_content.order_id;if(!d||[-1,0,f].includes(d))return t}return{sourceList:u.concat(r),lastSourceMessage:r}}),{sourceList:[],lastSourceMessage:null}).sourceList:[]})),Fd=(0,Bt.createSelector)(Gd,(function(e){return e.map((function(e){return e.id}))})),Hd=(0,Bt.createSelector)(Qt,wd,(function(e,r){var n=r.filter((function(e){return e&&e.type===qp})).map((function(e){return e.content.offer_id}));return(0,t.denormalize)(n,[l],e)})),Vd=(0,Bt.createSelector)(Nd,Fd,bd,Rd,ts,rr,Hd,(function(e,t,r,n,o,a,c){return o?e.filter((function(e){if(!e)return!1;var t=e.content,r=e.type;return!(![Jp,Xp].includes(r)&&(!t||t&&0===Object.keys(t).length))})).map((function(e){var o=r.includes(e.id)?R.MessageSendStatus.SENDING:n.includes(e.id)?R.MessageSendStatus.FAILED:e.send_status?R.MessageSendStatus.SUCCEED:null,s=t.includes(e.id),i=Object.assign({},e,{send_status:o,hasMessageSource:s}),u=i,l=u.type,p=u.content,d=void 0===p?{}:p,f=u.message_option;switch(l){case qp:var E=c.find((function(e){return e&&e.id===d.offer_id}));i=Object.assign({},i,{textContent:E});break;case td:var _=a[d.card_id];_&&(i=Object.assign({},i,{textContent:_}));break;case ed:var S=d,h=S.type,O=S.id,v=null;h===rd&&(v=a[O]),v&&(i=Object.assign({},i,{textContent:v}))}return(0,R.hasTargetMessageOption)(f,R.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(i=Bp(Bp({},i),{},{send_status:R.MessageSendStatus.FAILED,errorCode:R.MessageErrorCode.BLACKLIST})),i})):[]})),Bd=function(e){return(0,Bt.createSelector)(rr,(function(r){return(0,t.denormalize)(e,_,{rateCards:r})}))},Yd=(0,Bt.createSelector)((function(e){var t;return null==e||null===(t=e.messageReducer)||void 0===t?void 0:t.reply}),(function(e){return e?e.toMessageId:{}})),Qd=(0,Bt.createSelector)(Hc,Yd,(function(e,t){return t[e]||""})),qd=function(e){var t,r;return null===(t=e.messageReducer)||void 0===t||null===(r=t.reply)||void 0===r?void 0:r.scrollToMessageId},Wd=(0,Bt.createSelector)(Qd,zt,(function(e,r){return(0,t.denormalize)(e,c,{messages:r})})),Kd=function(e){var t,r;return null===(t=e.messageReducer)||void 0===t||null===(r=t.reply)||void 0===r?void 0:r.inScrollToMessage},zd=function(e){return e.messageShortcutGroupReducer},Jd=function(e){return e.messageShortcutGroupReducer&&e.messageShortcutGroupReducer.currentGroupType},Xd=(0,Bt.createSelector)(zd,Jd,(function(e,t){return e&&e[t]||{groups:[],status:""}})),$d=(0,Bt.createSelector)(Xd,(function(e){return e.status})),Zd=(0,Bt.createSelector)(Xd,(function(e){return e.currentGroupId})),ef=(0,Bt.createSelector)(Xd,(function(e){var t=e.groups,r=void 0===t?[]:t,n=e.currentGroupId,o=(r.find((function(e){return e.id===n}))||{}).message_shortcuts;return void 0===o?[]:o})),tf=(0,Bt.createSelector)(zd,(function(e){var t=(e&&e[R.MessageShortcutGroupType.PERSONAL]||{groups:[]}).groups;return(void 0===t?[]:t).reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),rf=(0,Bt.createSelector)(zd,(function(e){var t=(e&&e[R.MessageShortcutGroupType.TEAM]||{groups:[]}).groups;return(void 0===t?[]:t).reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),nf=(0,Bt.createSelector)(tf,rf,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(x(e),x(t))})),of=function(e){return e.settingsReducer.settings},af=function(e){return e.settingsReducer.needForceUpdate},cf=function(e){return e.settingsReducer.status},sf=function(e){return e.settingsReducer.fetchStatus},uf=(0,Bt.createSelector)(of,(function(e){return e.auto_translation_status||""})),lf=(0,Bt.createSelector)(of,(function(e){return e.show_msg_time||"enabled"})),pf=(0,Bt.createSelector)(of,(function(e){return e.message_shortcuts_status||""})),df=(0,Bt.createSelector)(of,(function(e){return e.legacy_message_shortcuts_count||0})),ff=(0,Bt.createSelector)(of,(function(e){return e.distribution_account_status||"enabled"}));!function(e){e.FETCH_SETTINGS_REQUESTED="FETCH_SETTINGS_REQUESTED",e.FETCH_SETTINGS_SUCCEEDED="FETCH_SETTINGS_SUCCEEDED",e.FETCH_SETTINGS_STATUS="FETCH_SETTINGS_STATUS",e.UPDATE_SETTING_STATUS="UPDATE_SETTING_STATUS",e.UPDATE_SETTINGS_REQUESTED_BY_TYPE="UPDATE_SETTINGS_REQUESTED_BY_TYPE",e.UPDATE_SETTINGS_REQUESTED="UPDATE_SETTINGS_REQUESTED",e.UPDATE_SETTINGS_SUCCEEDED="UPDATE_SETTINGS_SUCCEEDED"}(Yp||(Yp={}));var Ef,_f=(0,Oe.createActions)((e(Qp={},Yp.FETCH_SETTINGS_REQUESTED,(function(){return{}})),e(Qp,Yp.FETCH_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,fetchStatus:e.fetchStatus,timestamp:e.timestamp,needForceUpdate:e.needForceUpdate}})),e(Qp,Yp.FETCH_SETTINGS_STATUS,(function(e){return{fetchStatus:e.fetchStatus}})),e(Qp,Yp.UPDATE_SETTING_STATUS,(function(e){return{status:e.status}})),e(Qp,Yp.UPDATE_SETTINGS_REQUESTED_BY_TYPE,(function(e){return e})),e(Qp,Yp.UPDATE_SETTINGS_REQUESTED,(function(e){return{params:e.params}})),e(Qp,Yp.UPDATE_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,needForceUpdate:e.needForceUpdate}})),Qp)),Sf=_f.fetchSettingsRequested,hf=_f.fetchSettingsSucceeded,Of=_f.fetchSettingsStatus;function vf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tf(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?vf(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}_f.updateSettingStatus,_f.updateSettingsRequestedByType,_f.updateSettingsRequested,_f.updateSettingsSucceeded;var mf=N().mark(yf),gf=N().mark(bf);function yf(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,Lt.put)(Of({fetchStatus:R.DataFetchStatus.PENDING}));case 3:return t.next=5,(0,Lt.select)(af);case 5:return t.sent,t.next=8,(0,Lt.call)($e,{parent:"user",resource:"setting",params:{}});case 8:return e=t.sent,t.next=11,(0,Lt.put)(hf({settings:e,fetchStatus:R.DataFetchStatus.SUCCEED,timestamp:Date.now(),needForceUpdate:!1}));case 11:return t.abrupt("return",e);case 14:return t.prev=14,t.t0=t.catch(0),t.next=18,(0,Lt.put)(Of({fetchStatus:R.DataFetchStatus.FAILED}));case 18:return t.abrupt("return",{});case 19:case"end":return t.stop()}}),mf,null,[[0,14]])}function bf(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeLatest)([Sf],yf);case 2:case"end":return e.stop()}}),gf)}const Rf=(e(Ef={},Yp.FETCH_SETTINGS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.settings,o=r.fetchStatus,a=r.timestamp,c=r.needForceUpdate;return Tf(Tf({},e),{},{settings:n,fetchStatus:o,timestamp:a,needForceUpdate:c})})),e(Ef,Yp.FETCH_SETTINGS_STATUS,(function(e,t){var r=t.payload.fetchStatus;return Tf(Tf({},e),{},{fetchStatus:r})})),Ef);function Cf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Df,Pf,If=[bf],Af=(0,Oe.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Cf(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Rf),{settings:{},fetchStatus:""}),wf={currentPage:0,perPage:20,total:0,hasMore:!0},Nf=function(e){return e.offerReducer.status},xf=(0,Bt.createSelector)(ts,(function(e){return e.offerReducer.pendingOffersCount}),(function(e,t){var r=e.shop_id,n=e.to_id;return t["".concat(r,"_").concat(n)]||0})),kf=(0,Bt.createSelector)(Qt,(function(e){return e.offers||{}})),Uf=function(e,t,r,n){return(0,Bt.createSelector)(kf,(function(o){return Object.values(o).filter((function(o){return o.product_id===n&&o.model_id===t&&o.conversation_id===e&&o.id!==r&&o.status===R.OfferStatus.PENDING}))}))},Mf=function(e){return(0,Bt.createSelector)(Qt,(function(r){return(0,t.denormalize)(e,l,r)}))},Lf=function(e){return e.offerReducer.fetchResult},jf=function(e,t){return(0,Bt.createSelector)(Lf,(function(r){return r["".concat(e,"_").concat(t)]||{pagination:wf,result:[]}}))},Gf=(0,Bt.createSelector)(Lf,ts,(function(e,t){var r=t.shop_id,n=t.to_id,o=e["".concat(r,"_").concat(n)];return o?o.pagination:wf})),Ff=(0,Bt.createSelector)(Lf,ts,Qt,(function(e,r,n){var o=r.shop_id,a=r.to_id,c=e["".concat(o,"_").concat(a)];if(!c)return[];var s=c.result||[];return(0,t.denormalize)(s,[l],n).filter((function(e){return e}))})),Hf=(0,Oe.createActions)({REDUX_RESET:function(){return{}}}).reduxReset;!function(e){e.REMOVE_SINGLE_DRAFT="REMOVE_SINGLE_DRAFT",e.REMOVE_ALL_DRAFT="REMOVE_ALL_DRAFT",e.BATCH_REMOVE_DRAFT="BATCH_REMOVE_DRAFT",e.SAVE_DRAFT="SAVE_DRAFT"}(Df||(Df={}));const Vf=(e(Pf={},Df.REMOVE_SINGLE_DRAFT,(function(e,t){var r=t.payload.conversationId,n=fi({},e.draftHash);return delete n[r],fi(fi({},e),{},{draftHash:n})})),e(Pf,Df.REMOVE_ALL_DRAFT,(function(e){return fi(fi({},e),{},{draftHash:{}})})),e(Pf,Df.BATCH_REMOVE_DRAFT,(function(e,t){var r=t.payload.conversationIds,n=void 0===r?[]:r,o=fi({},e.draftHash);return n.forEach((function(e){delete o[e]})),fi(fi({},e),{},{draftHash:o})})),Pf),Bf=e({},Df.SAVE_DRAFT,(function(e,t){var r=t.payload,n=r.conversationId,o=r.draft,a=fi({},e.draftHash);return a[n]=o,fi(fi({},e),{},{draftHash:a})}));var Yf,Qf=(0,Oe.createActions)((e(Yf={},Df.REMOVE_SINGLE_DRAFT,(function(e){return{conversationId:e.conversationId}})),e(Yf,Df.REMOVE_ALL_DRAFT,(function(){return{}})),e(Yf,Df.BATCH_REMOVE_DRAFT,(function(e){return{conversationIds:e.conversationIds}})),e(Yf,Df.SAVE_DRAFT,(function(e){return{conversationId:e.conversationId,draft:e.draft}})),Yf)),qf=Qf.removeSingleDraft,Wf=Qf.removeAllDraft,Kf=Qf.batchRemoveDraft,zf=Qf.saveDraft;function Jf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xf(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Jf(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $f=(0,Oe.handleActions)(Xf(Xf({},Bf),Vf),{draftHash:{}}),Zf=function(e){return e.draftReducer.draftHash},eE=function(e){return(0,Bt.createSelector)(Zf,(function(t){return t[e]}))},tE=(0,Bt.createSelector)(Hc,Zf,(function(e,t){return e&&t[e]}));function rE(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function nE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?nE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var aE,cE=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=e.exceptionType,a=e.reconnectCount,c=void 0===a?0:a,s=e.exceptionReason,i=void 0===s?"":s,u={status:-1,userId:t,userType:r};if(o===R.SocketConnectionStatus.DISCONNECT){var l=c<=5?"s":c<=10?"m":"l";u=oE(oE({},u),{},{reconnectType:l,exceptionReason:i,exceptionType:o})}else u=oE(oE({},u),{},{exceptionType:o});It(Ct[n?"SOCKET_FAILED":"CHATWS_SOCKET_FAILED"],0,u)};!function(e){e.FEEDBACK_REQUESTED="FEEDBACK_REQUESTED",e.FEEDBACK_SUCCEEDED="FEEDBACK_SUCCEEDED",e.UPDATE_RECONNECT_FLAG="UPDATE_RECONNECT_FLAG",e.UPDATE_NOTICES_COUNT="UPDATE_NOTICES_COUNT",e.UPDATE_C_S_SOCKET_STATUS="UPDATE_C_S_SOCKET_STATUS"}(aE||(aE={}));var sE=P(439).t,iE=["type"];function uE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?uE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var pE,dE,fE=N().mark(SE),EE=N().mark(hE),_E=function(e){return CE({feedback:{status:e,network:!0,content:sE("common.toast.".concat(e))}})};function SE(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.__WEBCHAT_LOGIN__){e.next=19;break}return e.next=3,(0,Lt.select)(vn);case 3:if(!e.sent){e.next=19;break}return e.next=7,(0,Lt.select)(hn);case 7:if("working"!==(e.sent||{}).distribution_status){e.next=19;break}return e.prev=10,e.next=13,(0,Lt.call)($e,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_event",payload:JSON.stringify({event_type:"login"})});case 13:window.__WEBCHAT_LOGIN__=!1,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),window.__WEBCHAT_LOGIN__=!1;case 19:case"end":return e.stop()}}),fE,null,[[10,16]])}function hE(e,t){return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e,r.next=r.t0===R.ShareDataType.UNREAD?3:6;break;case 3:return r.next=5,(0,Lt.put)(qr({count:t.total_unread_count}));case 5:return r.abrupt("break",6);case 6:case"end":return r.stop()}}),EE)}var OE=(0,Oe.createActions)(e({},aE.UPDATE_RECONNECT_FLAG,(function(e){return{flag:e.flag}}))).updateReconnectFlag;pE=N().mark((function e(t){var r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==(r=t.status)){e.next=8;break}return e.next=4,(0,Lt.put)(Wo({socketSuccess:!0}));case 4:return e.next=6,(0,Lt.spawn)(SE);case 6:e.next=11;break;case 8:return It(Ct.SOCKET_FAILED,0,{status:r}),e.next=11,(0,Lt.put)(Wo({socketSuccess:!1}));case 11:case"end":return e.stop()}}),e)})),dE=N().mark((function e(t){var r,n,o,a,c,s,i,u,l,p,d,f,E,_,S,h,O,v,T,m;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.event,n=t.payload,"reportUPLPoint"!==r){e.next=9;break}return e.next=4,(0,R.getItem)("session");case 4:c=e.sent,s=c&&c.user,u=(i=s||{}).id,l=i.type,o=u,a=l;case 9:e.t0=r,e.next=e.t0===R.SocketConnectionStatus.CONNECT?12:e.t0===R.SocketConnectionStatus.DISCONNECT?38:e.t0===R.SocketConnectionStatus.RECONNECT_ERROR?43:e.t0===R.SocketConnectionStatus.RECONNECTING?49:e.t0===R.SocketConnectionStatus.RECONNECT?52:"emit"===e.t0?55:"close"===e.t0?60:"ack"===e.t0?63:"reportUPLPoint"===e.t0?65:"reportConnections"===e.t0?67:"setMainPage"===e.t0?69:"shareApiData"===e.t0?72:76;break;case 12:return e.next=14,(0,Lt.select)(v_);case 14:if(!e.sent){e.next=19;break}return p=1e3*Math.floor(30*Math.random()+1),e.next=19,(0,Lt.delay)(p);case 19:return e.next=21,(0,Lt.put)(DE({feedback:void 0}));case 21:return e.next=23,(0,R.getItem)("mini-session");case 23:if(d=e.sent,f=d&&d.p_token,E=d&&d.user,!f||!E){e.next=33;break}return e.next=29,(0,Lt.call)(je,{token:f,account_id:E.uid});case 29:if(_=e.sent,xe){e.next=33;break}return e.next=33,(0,Lt.call)(pE,_);case 33:return e.next=35,(0,Lt.put)(OE({flag:!1}));case 35:return e.next=37,(0,Lt.put)(Wo({socketSuccess:!0}));case 37:return e.abrupt("break",76);case 38:return e.next=40,(0,Lt.put)(OE({flag:!0}));case 40:return e.next=42,(0,Lt.put)(_E("error"));case 42:return e.abrupt("break",76);case 43:return e.next=45,(0,Lt.put)(_E("error"));case 45:return It(Ct.SOCKET_FAILED,0,{status:-1}),e.next=48,(0,Lt.put)(Wo({socketSuccess:!1}));case 48:return e.abrupt("break",76);case 49:return e.next=51,(0,Lt.put)(_E("pending"));case 51:return e.abrupt("break",76);case 52:return e.next=54,(0,Lt.put)(_E("resolved"));case 54:return e.abrupt("break",76);case 55:if(h=(S=n).type,O=S.response,"login"!==h){e.next=59;break}return e.next=59,(0,Lt.call)(pE,O);case 59:return e.abrupt("break",76);case 60:return e.next=62,(0,Lt.call)(Dc,!1);case 62:return e.abrupt("break",76);case 63:return ke.dispatch(R.CustomShareEvent.ACK),e.abrupt("break",76);case 65:return cE(n,o,a),e.abrupt("break",76);case 67:return It(Ct.SHARED_TABS,n),e.abrupt("break",76);case 69:return e.next=71,(0,Lt.put)(oc({isMainPage:n.isMainPage}));case 71:return e.abrupt("break",76);case 72:return T=(v=n).type,m=rE(v,iE),e.next=75,(0,Lt.call)(hE,T,m);case 75:return e.abrupt("break",76);case 76:case"end":return e.stop()}}),e)}));const vE=e({},aE.UPDATE_RECONNECT_FLAG,(function(e,t){var r=t.payload.flag;return lE(lE({},e),{},{reconnectFlag:r})}));var TE;function mE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?mE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var yE=N().mark(PE),bE=N().mark(IE),RE=(0,Oe.createActions)((e(TE={},aE.FEEDBACK_REQUESTED,(function(e){return{feedback:e.feedback}})),e(TE,aE.FEEDBACK_SUCCEEDED,(function(e){return{feedback:e.feedback}})),TE)),CE=RE.feedbackRequested,DE=RE.feedbackSucceeded;function PE(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.feedback,r.next=3,(0,Lt.put)(DE({feedback:t}));case 3:return r.next=5,(0,Lt.delay)(2500);case 5:return r.next=7,(0,Lt.put)(DE({feedback:void 0}));case 7:case"end":return r.stop()}}),yE)}function IE(){var e,t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Lt.actionChannel)(CE);case 2:e=n.sent;case 3:return n.next=6,(0,Lt.take)(e);case 6:return t=n.sent,r=t.payload,n.next=10,(0,Lt.call)(PE,{payload:r});case 10:n.next=3;break;case 12:case"end":return n.stop()}}),bE)}const AE=e({},aE.FEEDBACK_SUCCEEDED,(function(e,t){var r=t.payload.feedback;return gE(gE({},e),{},{feedback:r})}));var wE=P(655);function NE(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var xE=P(439).t,kE=N().mark(HE),UE=N().mark(VE);function ME(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function LE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ME(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ME(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function jE(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return GE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?GE(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function GE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var FE=function(e,t){var r,n,o=t.conversation,a=t.read,c=t.pinned,s=t.offer,i=t.status,u=t.userId,l=t.flag,p=t.cardId,d=t.mute;switch(e){case"conversations":r=l?{flag:l}:i?{status:i}:a?{last_read_message_id:o.latest_message_id,unread_count:0}:{unread_count:o.unread_count+1},void 0!==c&&(r={pinned:c}),void 0!==d&&(r={mute:d}),n=o.id;break;case"offers":r={status:i},n=s.id;break;case"users":r={distribution_status:i},n=u;break;case"rateCards":r={status:i},n=p}return Er({name:e,id:n,record:r})};function HE(e){var t,r,n,o,a,c,s,i,u,l,p,d,f,E,_,S,h,O,v,m,g,y,b,C,D,P,I,A,w,x,k,U,M,L,j,G,F,H,V,B,Y,Q,q,W,K,z,J,X,$,Z,ee,te,re,ne,oe,ae,ce,se,ie,ue,le,pe,de,fe;return N().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return t=e.type,r=e.payload,N.next=3,(0,Lt.select)(nn);case 3:return n=N.sent,N.next=6,(0,Lt.select)(Hc);case 6:if(o=N.sent,"notification"!==t){N.next=276;break}if(c=(a=r).type,s=a.user_id,i=a.from_id,u=a.content,l=u.flag,p=u.status,d=u.card_id,f=u.offer_id,E=u.shop_id,_=u.request_id,S=u.conversation_id,h=u.conversation_ids,O=void 0===h?[]:h,v=u.is_main_agent_change,m=u.msg_id,g=u.faq_session_id,y=u.expiry_time,b={},C={},!S){N.next=17;break}return N.next=14,(0,Lt.select)(ls(S));case 14:b=N.sent,N.next=22;break;case 17:if(!f){N.next=22;break}return N.next=20,(0,Lt.select)(kf);case 20:D=N.sent,C=D[f];case 22:return P=b&&n===s,N.next=25,(0,Lt.select)($c);case 25:I=N.sent,A="Unread"===I,N.t0=c,N.next="mark_as_read"===N.t0?30:"mark_as_unread"===N.t0?59:"delete_conversation"===N.t0?67:"update_offer_status"===N.t0?86:"update_conversation"===N.t0?90:"update_user_status"===N.t0?118:"update_conversation_flag"===N.t0?125:"force_logout"===N.t0?129:"update_rating_card_status"===N.t0?132:"pin_conversation"===N.t0?135:"unpin_conversation"===N.t0?138:"mass_read"===N.t0?144:"mass_unread"===N.t0?154:"mass_pin"===N.t0?164:"mass_unpin"===N.t0?170:"mass_activate"===N.t0?176:"mass_close"===N.t0?205:"video_upload"===N.t0?224:N.t0===Ci||"mark_as_replied"===N.t0?233:"chat_delete_msg"===N.t0?241:"faq_session_update"===N.t0?262:"mute_conversation"===N.t0?266:"unmute_conversation"===N.t0?270:274;break;case 30:if(!P){N.next=58;break}return N.next=33,(0,Lt.select)((function(e){return e.conversationReducer}));case 33:return w=N.sent,x=w.conversationMark,k="api"===x[S],N.next=38,(0,Lt.put)(Ls({conversationId:S,markType:k?"":"socket"}));case 38:return N.next=40,(0,Lt.select)(Lc);case 40:if(U=N.sent,M=U.findIndex((function(e){return e===_})),-1===M){N.next=51;break}return It(Ct.READ_SOCKET,Date.now()-_),N.next=46,(0,Lt.select)(jc);case 46:return L=N.sent,M>0&&(L+=M),U=U.slice(M+1),N.next=51,(0,Lt.put)(js({requestIds:U,count:L}));case 51:if(k){N.next=58;break}if(!b.unread_count){N.next=58;break}return N.next=56,(0,Lt.put)(FE("conversations",{conversation:b,read:!0}));case 56:return N.next=58,(0,Lt.put)(Qr({type:Lr.MARK_AS_READ,conversation:b}));case 58:return N.abrupt("break",274);case 59:if(A&&(P=b&&n===s),!P){N.next=66;break}if(0!==b.unread_count){N.next=64;break}return N.next=64,(0,Lt.put)(FE("conversations",{conversation:b,read:!1}));case 64:return N.next=66,(0,Lt.put)(Qr({type:Lr.MARK_AS_UNREAD,conversation:b}));case 66:return N.abrupt("break",274);case 67:return N.next=69,bo().put(Co().deleteConversationMessageHash({payload:{conversationId:S},isLazy:!0}));case 69:return N.next=71,(0,Lt.put)(qf({conversationId:S}));case 71:return N.next=73,(0,Lt.put)(Ds({conversationId:S}));case 73:return N.next=75,(0,Lt.put)(_r({name:"conversations",id:S}));case 75:return N.next=77,(0,Lt.select)(Mc);case 77:if(!(N.sent.length<20)){N.next=81;break}return N.next=81,(0,Lt.put)(As({direction:"older"}));case 81:if(!b){N.next=85;break}return N.next=85,(0,Lt.put)(Qr({type:Lr.DELETE_CONVERSATION,conversation:b}));case 85:return N.abrupt("break",274);case 86:if(!C||!p||p===R.OfferStatus.PENDING){N.next=89;break}return N.next=89,(0,Lt.put)(FE("offers",{offer:C,status:p}));case 89:return N.abrupt("break",274);case 90:if(!P){N.next=117;break}return NE(b),N.next=95,(0,Lt.put)(FE("conversations",{conversation:b,status:p}));case 95:if("closed"!==p){N.next=108;break}return N.next=98,(0,Lt.put)(A_({conversationId:S}));case 98:return N.next=100,(0,Lt.put)(qf({conversationId:S}));case 100:return N.next=102,bo().put(Co().clearChatRoomRefer({payload:{conversationId:S}}));case 102:return N.next=104,(0,Lt.put)(Qr({type:Lr.CLOSE_CONVERSATION,conversation:b}));case 104:return N.next=106,(0,Lt.put)(FE("conversations",{conversation:b,read:!0}));case 106:N.next=117;break;case 108:if("activated"!==p){N.next=117;break}return o===S&&bo().put(Co().fetchMessagesRequested({payload:{conversationId:S,reset:!0},isLazy:!0})),N.next=113,(0,Lt.select)(Mc);case 113:if(!N.sent.includes(S)){N.next=117;break}return N.next=117,(0,Lt.put)(Ps({conversationId:S}));case 117:return N.abrupt("break",274);case 118:if(n!==s){N.next=122;break}if(!v){N.next=122;break}return N.next=122,(0,Lt.put)(Nr({type:"CONFIRM_MODAL",title:xE("common.confirm"),additions:{content:{key:"modal.content.switch_status",vars:{status:xE("common.".concat("working"===p?"online":"offline"))}}},actions:{confirm:{label:xE("common.ok")}}}));case 122:return N.next=124,(0,Lt.put)(FE("users",{userId:s,status:p}));case 124:return N.abrupt("break",274);case 125:if(!P){N.next=128;break}return N.next=128,(0,Lt.put)(FE("conversations",{conversation:b,flag:l}));case 128:return N.abrupt("break",274);case 129:return N.next=131,(0,Lt.call)(Pc);case 131:return N.abrupt("break",274);case 132:return N.next=134,(0,Lt.put)(FE("rateCards",{cardId:d,status:p}));case 134:return N.abrupt("break",274);case 135:return N.next=137,(0,Lt.put)(FE("conversations",{conversation:b,pinned:!0}));case 137:return N.abrupt("break",274);case 138:return N.next=140,(0,Lt.put)(FE("conversations",{conversation:b,pinned:!1}));case 140:if(o!==S||"Pinned"!==I){N.next=143;break}return N.next=143,(0,Lt.put)(Bs());case 143:return N.abrupt("break",274);case 144:if(!(j=O.length)){N.next=153;break}return G={},O.forEach((function(e){G[e]={unread_count:0}})),N.next=150,(0,Lt.put)(Sr({name:"conversations",records:G}));case 150:return F=Object.assign({},{count:j,type:Lr.MASS_READ},E?{shopId:E}:{}),N.next=153,(0,Lt.put)(Qr(F));case 153:return N.abrupt("break",274);case 154:if(H=O.length,!O.length){N.next=163;break}return V={},O.forEach((function(e){V[e]={unread_count:1}})),N.next=160,(0,Lt.put)(Sr({name:"conversations",records:V}));case 160:return B=Object.assign({},{count:H,type:Lr.MASS_UNREAD},E?{shopId:E}:{}),N.next=163,(0,Lt.put)(Qr(B));case 163:return N.abrupt("break",274);case 164:if(!O.length){N.next=169;break}return Y={},O.forEach((function(e){Y[e]={pinned:!0}})),N.next=169,(0,Lt.put)(Sr({name:"conversations",records:Y}));case 169:return N.abrupt("break",274);case 170:if(!O.length){N.next=175;break}return Q={},O.forEach((function(e){Q[e]={pinned:!1}})),N.next=175,(0,Lt.put)(Sr({name:"conversations",records:Q}));case 175:return N.abrupt("break",274);case 176:return N.next=178,(0,Lt.put)(As({direction:"latest"}));case 178:if(!O.length){N.next=204;break}q={},W=jE(O),N.prev=182,W.s();case 184:if((K=W.n()).done){N.next=192;break}if(z=K.value,q[z]={status:"activated"},o!==z){N.next=190;break}return N.next=190,bo().put(Co().fetchMessagesRequested({payload:{conversationId:o,reset:!0},isLazy:!0}));case 190:N.next=184;break;case 192:N.next=197;break;case 194:N.prev=194,N.t1=N.catch(182),W.e(N.t1);case 197:return N.prev=197,W.f(),N.finish(197);case 200:return N.next=202,(0,Lt.put)(Sr({name:"conversations",records:q}));case 202:return N.next=204,(0,Lt.call)(handleNotifyBatchConversation);case 204:return N.abrupt("break",274);case 205:if(!O.length){N.next=223;break}return J={},X=[],N.next=211,(0,Lt.select)(ds(O));case 211:return $=N.sent,Z=$.filter((function(e){return(null==e?void 0:e.unread_count)>0})),O.forEach((function(e){J[e]={status:"closed",unread_count:0},bo().put(Co().clearChatRoomRefer({payload:{conversationId:e}})),X.push((0,Lt.put)(A_({conversationId:e})))})),N.next=216,(0,Lt.all)(X);case 216:return N.next=218,(0,Lt.put)(Sr({name:"conversations",records:J}));case 218:return ee=Object.assign({},{count:Z.length,type:Lr.MASS_CLOSE},E?{shopId:E}:{}),N.next=221,(0,Lt.put)(Qr(ee));case 221:return N.next=223,(0,Lt.put)(Kf({conversationIds:O}));case 223:return N.abrupt("break",274);case 224:return te=r.content,N.next=227,(0,Lt.select)(Ed(te.vid));case 227:return re=N.sent,N.next=230,(0,Lt.select)(fd(re));case 230:return N.sent.status||(ne=te.status,oe=te.vid,"successful"===ne&&(ae=performance.getEntriesByName("REPORT_UPLOAD_".concat(oe),"mark")[0])&&(performance.mark("SERVICE_DONE_".concat(oe)),ce=performance.getEntriesByName("SERVICE_DONE_".concat(oe))[0].startTime-ae.startTime,performance.clearMarks("REPORT_UPLOAD_".concat(oe)),performance.clearMarks("SERVICE_DONE_".concat(oe)),It(Ct.SERVICE_DONE,ce)),bo().put(Co().updateVideoInfo({payload:{id:re,info:{status:ne,uploadResult:te}}}))),N.abrupt("break",274);case 233:if("Unreplied"!==I){N.next=240;break}return N.next=236,(0,Lt.select)(Mc);case 236:if(!N.sent.includes(S)){N.next=240;break}return N.next=240,(0,Lt.put)(Er({name:"conversations",id:S,record:{unreplied:c===Ci}}));case 240:return N.abrupt("break",274);case 241:return N.next=243,(0,Lt.select)(_d(m));case 243:if(!(se=N.sent)){N.next=256;break}return ie=se.message_option|R.MessageOption.MSG_OPT_DELETE,ue=T("messages",LE(LE({},se),{},{message_option:ie})),le=ue.entities,N.next=249,(0,Lt.put)(fr({entities:le}));case 249:if(![R.MessageTypes.MSG_TYPE_VIDEO,R.MessageTypes.MSG_TYPE_IMAGE,R.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT].includes(se.type)){N.next=256;break}return N.next=252,(0,Lt.select)((function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.currentPreviewMediaId}));case 252:if(N.sent!==m){N.next=256;break}return N.next=256,(0,Lt.put)(G_());case 256:if(!b||b.latest_message_id!==m){N.next=261;break}return pe=b.last_message_option|R.MessageOption.MSG_OPT_DELETE,de=T("conversations",LE(LE({},b),{},{last_message_option:pe,latest_message_content:{text:""},latest_message_from_id:i})),fe=de.entities,N.next=261,(0,Lt.put)(fr({entities:fe}));case 261:return N.abrupt("break",274);case 262:if(!P){N.next=265;break}return N.next=265,(0,Lt.put)(wh({faqSessionId:g,sessionExpiryTime:y,conversationId:S}));case 265:return N.abrupt("break",274);case 266:if(!P){N.next=269;break}return N.next=269,(0,Lt.put)(FE("conversations",{conversation:b,mute:!0}));case 269:return N.abrupt("break",274);case 270:if(!P){N.next=273;break}return N.next=273,(0,Lt.put)(FE("conversations",{conversation:b,mute:!1}));case 273:return N.abrupt("break",274);case 274:N.next=279;break;case 276:if("message"!==t){N.next=279;break}return N.next=279,(0,Lt.call)(hi,{payload:r,type:R.ConversationTypeEnum.Normal});case 279:case"end":return N.stop()}}),kE,null,[[182,194,197,200]])}function VE(e){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Lt.call)(HE,e);case 2:case"end":return t.stop()}}),UE)}function BE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function YE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?BE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var QE=N().mark(JE),qE=N().mark(XE),WE=(0,Oe.createActions)(e({},aE.UPDATE_NOTICES_COUNT,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"add":t;return{type:r}}))),KE=WE.updateNoticesCount,zE=function(){return(0,wE.eventChannel)((function(e){return xe?ke.on("message",(function(t){var r=t.data,n=r.message_type,o=r.message_content,a=r.worker_event,c=r.payload;e(a?{event:a,payload:void 0===c?{}:c}:{pushedType:n,payload:JSON.parse(o)})})):(Object.values(R.SocketConnectionStatus).forEach((function(t){ke.on(t,(function(){return e({event:t})}))})),ke.on("message",(function(t){if(t){var r=t.message_type,n=t.message_content;e({pushedType:r,payload:JSON.parse(n)})}}))),function(){}}))};function JE(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.event,r=e.pushedType,n=e.payload,!t){o.next=6;break}return o.next=4,(0,Lt.call)(dE,{event:t,payload:n});case 4:o.next=11;break;case 6:if(!r){o.next=11;break}return o.next=9,(0,Lt.put)(KE());case 9:return o.next=11,(0,Lt.call)(VE,{type:r,payload:n});case 11:case"end":return o.stop()}}),QE)}function XE(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Lt.call)(zE);case 2:return e=t.sent,t.next=5,(0,Lt.takeEvery)(e,JE);case 5:case"end":return t.stop()}}),qE)}const $E=e({},aE.UPDATE_NOTICES_COUNT,(function(e,t){var r=t.payload.type;return YE(YE({},e),{},{noticesCount:"add"===r?e.noticesCount+1:0})}));function ZE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function e_(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ZE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var t_=N().mark(s_),r_=N().mark(i_),n_=N().mark(u_),o_=!1,a_=(0,Oe.createActions)(e({},aE.UPDATE_C_S_SOCKET_STATUS,(function(e){return{csSocketLogined:e.csSocketLogined,csSocketConnected:e.csSocketConnected}}))).updateCSSocketStatus,c_=function(e){return(0,wE.eventChannel)((function(t){return jv?e.on("message",(function(e){var r=e.data,n=r.worker_event,o=r.payload;n&&t({event:n,payload:void 0===o?{}:o})})):(Object.values(R.SocketConnectionStatus).forEach((function(r){e.on(r,(function(e){return t({event:r,payload:e})}))})),e.on("message",(function(e){e&&t({event:"message",payload:e})}))),function(){}}))};function s_(e){var t,r,n,o,a,c,s,i,u,l;return N().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(t=e.event,r=e.payload,!t){p.next=36;break}p.t0=t,p.next=p.t0===R.SocketConnectionStatus.CONNECT?5:p.t0===R.SocketConnectionStatus.DISCONNECT?9:"ack"===p.t0?19:"reportUPLPoint"===p.t0?21:"message"===p.t0?28:36;break;case 5:return p.next=7,(0,Lt.put)(a_({csSocketConnected:!0}));case 7:return Fv(),p.abrupt("break",36);case 9:return p.next=11,(0,Lt.put)(a_({csSocketConnected:!1}));case 11:if(o_){p.next=17;break}return p.next=14,(0,Lt.delay)(3e3);case 14:Gv.connect(),p.next=18;break;case 17:o_=!1;case 18:return p.abrupt("break",36);case 19:return Gv.dispatch("ack"),p.abrupt("break",36);case 21:return p.next=23,(0,R.getItem)("session");case 23:return n=p.sent,o=n&&n.user,c=(a=o||{}).id,s=a.type,cE(r,c,s,!1),p.abrupt("break",36);case 28:if("string"!=typeof r){p.next=36;break}if(i=r.indexOf("{"),"13"!==r.slice(0,i)){p.next=36;break}u=!1;try{l=JSON.parse(r.slice(i)),u=0===l.errcode}catch(e){}return p.next=36,(0,Lt.put)(a_({csSocketLogined:u}));case 36:case"end":return p.stop()}}),t_)}function i_(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Lt.call)(c_,Gv);case 2:return e=t.sent,t.next=5,(0,Lt.takeEvery)(e,s_);case 5:case"end":return t.stop()}}),r_)}function u_(){var e,t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e="mini-session";case 1:return t=60*Math.floor(10*Math.random()+20)*1e3,n.next=5,(0,Lt.delay)(t);case 5:return n.next=7,(0,R.getItem)(e);case 7:if(!(r=n.sent)||!r.user||r.user.type!==R.AccountType.SELLER){n.next=15;break}if(!Gv){n.next=15;break}return o_=!0,Gv.close(),n.next=14,(0,Lt.delay)(1e3);case 14:Gv.connect();case 15:n.next=1;break;case 17:case"end":return n.stop()}}),n_)}const l_=e({},aE.UPDATE_C_S_SOCKET_STATUS,(function(e,t){var r=t.payload,n=r.csSocketLogined,o=r.csSocketConnected,a={};return void 0!==n&&(a.csSocketLogined=n),void 0!==o&&(a.csSocketConnected=o),e_(e_({},e),a)}));var p_=N().mark(d_);function d_(){var e,t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:e="mini-session";case 1:return c.next=4,(0,Lt.delay)(6e4);case 4:return c.next=6,(0,R.getItem)(e);case 6:return t=c.sent,c.next=9,(0,Lt.select)(T_);case 9:return r=c.sent,c.next=12,(0,Lt.select)(jc);case 12:return n=c.sent,c.next=15,(0,Lt.select)(m_);case 15:return o=c.sent,c.next=18,(0,Lt.select)(g_);case 18:if(a=c.sent,!t||!t.token){c.next=25;break}return Ge({noticesCount:r,readMissedCount:n,csSocketLogined:o,csSocketConnected:a}),c.next=23,(0,Lt.put)(js({count:0}));case 23:return c.next=25,(0,Lt.put)(KE({type:"reset"}));case 25:c.next=1;break;case 27:case"end":return c.stop()}}),p_)}function f_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E_(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?f_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var __,S_=[IE,d_,XE,i_,u_],h_=(0,Oe.handleActions)(E_(E_(E_(E_({},vE),AE),$E),l_),{reconnectFlag:!1,feedback:null,noticesCount:0,csSocketLogined:!1,csSocketConnected:!1}),O_=function(e){return e.socketReducer.feedback},v_=function(e){return e.socketReducer.reconnectFlag},T_=function(e){return e.socketReducer.noticesCount},m_=function(e){return e.socketReducer.csSocketLogined},g_=function(e){return e.socketReducer.csSocketConnected};function y_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var b_,R_=function(e){return e.mediaPreviewerReducer.mediaMap},C_=(0,Bt.createSelector)(Hc,R_,(function(e,t){return t[e]||[]})),D_=(0,Oe.createActions)({ADD_MEDIA_FILE:function(e){return{medias:e.medias,conversationId:e.conversationId}},DELETE_MEDIA_FILE:function(e){return{id:e.id,conversationId:e.conversationId}},CLEAR_MEDIA_FILE:function(e){return{conversationId:e.conversationId}}}),P_=D_.addMediaFile,I_=D_.deleteMediaFile,A_=D_.clearMediaFile,w_=(e(__={},P_,(function(t,r){var n=r.payload,o=n.medias,a=n.conversationId,c=t.mediaMap,s=(c[a]||[]).concat(Array.isArray(o)?o:[o]);return vi(vi({},t),{},{mediaMap:vi(vi({},c),{},e({},a,s))})})),e(__,I_,(function(t,r){var n=r.payload,o=n.id,a=n.conversationId,c=t.mediaMap,s=x(c[a])||[];return s.splice(o,1),vi(vi({},t),{},{mediaMap:vi(vi({},c),{},e({},a,s))})})),e(__,A_,(function(t,r){var n=r.payload.conversationId,o=t.mediaMap;return vi(vi({},t),{},{mediaMap:vi(vi({},o),{},e({},n,[]))})})),__),N_=(0,Oe.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?y_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},w_),{mediaMap:{}});function x_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var k_,U_=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.showMediaPreviewModal},M_=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.currentPreviewMediaId},L_=(0,Oe.createActions)({SHOW_MEDIA_PREVIEW_MODAL_REQUESTED:function(e){return{messageId:e.messageId}},CLOSE_MEDIA_PREVIEW_MODAL_REQUESTED:function(){return{}}}),j_=L_.showMediaPreviewModalRequested,G_=L_.closeMediaPreviewModalRequested,F_=(e(b_={},j_,(function(e,t){return{showMediaPreviewModal:!0,currentPreviewMediaId:t.payload.messageId}})),e(b_,G_,(function(e){return{showMediaPreviewModal:!1,currentPreviewMediaId:null}})),b_),H_=(0,Oe.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?x_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},F_),{showMediaPreviewModal:!1,currentPreviewMediaId:null}),V_=function(e){return e.translatePreferenceReducer.translationSettings},B_=function(e){return e.translatePreferenceReducer.fetchSettingsStatus},Y_=function(e){return e.translatePreferenceReducer.updateStatus};!function(e){e.FETCH_SHOP_TRANSLATION_SETTINGS="FETCH_SHOP_TRANSLATION_SETTINGS",e.UPDATE_SHOP_TRANSLATION_SETTINGS="UPDATE_SHOP_TRANSLATION_SETTINGS",e.UPDATE_FETCH_STATUS="UPDATE_FETCH_STATUS",e.UPDATE_SETTING_PREFERENCE_STATUS="UPDATE_SETTING_PREFERENCE_STATUS",e.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD="UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD"}(k_||(k_={}));var Q_,q_,W_=P(439).t;function K_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z_(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?K_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var J_=N().mark(aS),X_=N().mark(cS),$_=N().mark(sS),Z_=(0,Oe.createActions)((e(Q_={},k_.FETCH_SHOP_TRANSLATION_SETTINGS,(function(e){return{shopId:e.shopId}})),e(Q_,k_.UPDATE_SHOP_TRANSLATION_SETTINGS,(function(e){return{settings:e.settings}})),e(Q_,k_.UPDATE_FETCH_STATUS,(function(e){return{status:e.status}})),e(Q_,k_.UPDATE_SETTING_PREFERENCE_STATUS,(function(e){return{status:e.status}})),e(Q_,k_.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e){return{shopId:e.shopId,source:e.source,translationPreference:e.translationPreference,autoTranslationStatus:e.autoTranslationStatus,inTranslationFeedbackWhitelist:e.inTranslationFeedbackWhitelist}})),Q_)),eS=Z_.fetchShopTranslationSettings,tS=Z_.updateShopTranslationSettings,rS=Z_.updateFetchStatus,nS=Z_.updateSettingPreferenceStatus,oS=Z_.updateShopTranslationSettingsRecord;function aS(e){var t,r,n,o,a,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.shopId,s.prev=1,s.next=4,(0,Lt.put)(rS({status:"loading"}));case 4:return s.next=6,(0,Lt.call)($e,{subServer:"workbenchapi",parent:"shop",resource:"setting",params:{shop_id:t}});case 6:return r=s.sent,n=r.source,o=r.translation_preference,a=r.auto_translation_status,c=r.in_translation_feedback_whitelist,s.next=13,(0,Lt.put)(rS({status:"succeed"}));case 13:return s.next=15,(0,Lt.put)(oS({shopId:t,source:n,translationPreference:o,autoTranslationStatus:a,inTranslationFeedbackWhitelist:c}));case 15:s.next=21;break;case 17:return s.prev=17,s.t0=s.catch(1),s.next=21,(0,Lt.put)(rS({status:"failed"}));case 21:case"end":return s.stop()}}),J_,null,[[1,17]])}function cS(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.settings,a.prev=1,a.next=4,(0,Lt.put)(kO({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 4:return a.next=6,(0,Lt.put)(nS({status:""}));case 6:return r=t.shop_id,n=t.auto_translation_status,o=t.translation_preference,a.next=9,(0,Lt.call)($e,{method:"PUT",subServer:"workbenchapi",parent:"shop",resource:"setting",payload:JSON.stringify(t)});case 9:return a.next=11,(0,Lt.put)(oS({shopId:r,translationPreference:o,autoTranslationStatus:n}));case 11:return a.next=13,(0,Lt.call)(wp,Rp({toast:{show:!0,type:"success",message:W_("tips.set_preference_succeed")}}));case 13:a.next=21;break;case 15:return a.prev=15,a.t0=a.catch(1),a.next=19,(0,Lt.put)(nS({status:"failed"}));case 19:return a.next=21,(0,Lt.call)(wp,Rp({toast:{show:!0,type:"fail",message:W_("tips.set_preference_failed")}}));case 21:case"end":return a.stop()}}),X_,null,[[1,15]])}function sS(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(eS,aS);case 2:return e.next=4,(0,Lt.takeEvery)(tS,cS);case 4:case"end":return e.stop()}}),$_)}var iS=(0,Oe.handleActions)((e(q_={},k_.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e,t){var r=t.payload,n=r.shopId,o=r.source,a=r.translationPreference,c=r.autoTranslationStatus,s=r.inTranslationFeedbackWhitelist,i=z_({},e.translationSettings),u=i[n]||{};return i[n]=z_(z_({},u),{},{translationPreference:a,autoTranslationStatus:c}),o&&(i[n].source=o),s&&(i[n].inTranslationFeedbackWhitelist=s),z_(z_({},e),{},{translationSettings:i})})),e(q_,k_.UPDATE_FETCH_STATUS,(function(e,t){var r=t.payload.status;return z_(z_({},e),{},{fetchSettingsStatus:r})})),e(q_,k_.UPDATE_SETTING_PREFERENCE_STATUS,(function(e,t){var r=t.payload.status;return z_(z_({},e),{},{updateStatus:r})})),q_),{translationSettings:{},fetchSettingsStatus:"",updateStatus:""}),uS=[sS];function lS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?lS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var dS,fS=["id","name","region","shop_id","sold","stock","status","original_price","actual_price","image","image_hash","promotion_label","raw_discount"],ES={region:"country",status:"status",original_price:"original_prices",actual_price:"actual_prices",promotion_label:"promotion_label"},_S={id:"item_id",region:"region",actual_price:"price"},SS=pS(pS({},_S),{},{original_price:"price_before_discount",image_hash:"thumb_url"}),hS=pS(pS({},_S),{},{original_price:"price_before_discount",shop_id:"shop_id"}),OS=pS(pS({},_S),{},{shop_id:"shop_id"}),vS=pS(pS({},_S),{},{shop_id:"shop_id",original_price:"hidden_price_display"}),TS={id:"item_id",name:"name",actual_price:"price"},mS=P(439).t,gS=R.ProductPromotionLabel.SHOW_DISCOUNT,yS=R.ProductPromotionLabel.FLASH_SALES,bS=R.ProductPromotionLabel.CAMPAIGN,RS=R.ProductPromotionLabel.BUNDLE_DEAL,CS=R.ProductPromotionLabel.ADD_ON_DEAL,DS=R.ProductPromotionLabel.GIFT_WITH_PURCHASE,PS=[gS,yS,bS,RS,CS,DS],IS=(e(dS={},R.ProductStatusUsingString.DELETED,R.ProductStatusUsingNumber.DELETED),e(dS,R.ProductStatusUsingString.NORMAL,R.ProductStatusUsingNumber.NORMAL),e(dS,R.ProductStatusUsingString.BANNED,R.ProductStatusUsingNumber.BANNED),e(dS,R.ProductStatusUsingString.SOLD_OUT,R.ProductStatusUsingNumber.SOLD_OUT),e(dS,R.ProductStatusUsingString.DELISTED,R.ProductStatusUsingNumber.DELISTED),dS),AS="???",wS=function(e,t){if(!e)return e;var r=(0,R.formatPrice)(e,t);return r.includes("NaN")&&(r=r.replace("NaN",AS)),r},NS=function(e){var t=e.original_price,r=e.actual_price;return(t===r||r.includes(AS))&&(e.original_price=""),e},xS=function(e){var t={};return fS.forEach((function(r){var n=ES[r];switch(n){case"country":t[r]=e[n];break;case"status":t[r]=IS[e[n]];break;case"original_prices":case"actual_prices":t[r]=function(e,t){var r=b(e,2),n=r[0],o=r[1];if(n===o)return wS(n,t);var a=wS(n,t),c=wS(o,t);return a.includes(AS)?a:c.includes(AS)?c:"".concat(a," - ").concat(c)}(e[n],e.country);break;case"promotion_label":t[r]=function(e){var t=[];return PS.forEach((function(r){if(e[r]){var n="common.label.".concat(r);r===gS?t.push({key:r,value:mS(n,{discount:(0,R.formatDiscount)(e[r])})}):t.push({key:r,value:mS(n)})}})),t}(e[n]);break;default:t[r]=e[r]}})),NS(t)},kS=function(e,t){var r={};return fS.forEach((function(n){var o=SS[n];switch(o){case"item_id":case"thumb_url":r[n]=e[o];break;case"region":r[n]=t;break;case"price_before_discount":case"price":r[n]=wS(e[o],t);break;default:r[n]=e[n]}})),NS(r)},US=function(e,t,r){var n={};return fS.forEach((function(o){var a=hS[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"price_before_discount":case"price":n[o]=wS(e[a],t);break;default:n[o]=e[o]}})),NS(n)},MS=1e5,LS=function(e,t){var r=e.amount_spent;return e.amount_spent=wS("".concat(r/MS),t),e},jS=function(e,t,r){var n={};return fS.forEach((function(o){var a=OS[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"price":n[o]=wS(e[a],t);break;default:n[o]=e[o]}})),NS(n)},GS=function(e,t){var r=e.rule_type,n=e.discount_percentage,o=e.discount_value,a=e.fix_price;if(1===r)e.fix_price=wS("".concat(a/MS),t);else if(2===r){var c=n/MS;"tw"===(t||"SG").toLowerCase()&&(c=10-c/10,Number.isInteger(c)||(c=c.toFixed(1))),e.discount_percentage=c}else e.discount_value=wS("".concat(o/MS),t);return e},FS=function(e,t,r){var n={};return fS.forEach((function(o){var a=vS[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"hidden_price_display":n[o]=(0,R.transPrice)(e[a],t);break;case"price":n[o]=wS("".concat(e[a]/MS),t);break;default:n[o]=e[o]}})),NS(n)},HS=function(e){var t={};return fS.forEach((function(r){var n,o=TS[r];switch(o){case"item_id":t[r]=e[o];break;case"name":t[r]=null!=e&&null!==(n=e.model)&&void 0!==n&&n.model_name?e.model.model_name:e[o];break;case"price":var a,c=null!=e&&null!==(a=e.model)&&void 0!==a&&a.price?e.model.price:e[o];t[r]=wS(c,e.region);break;default:t[r]=e[r]}})),NS(t)},VS=function(e){var t=e.model_name;return t&&t.includes(",")&&(e.model_name=t.replace(/,/g,"  ")),e};function BS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function YS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?BS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var QS=N().mark($S),qS=N().mark(ZS),WS=N().mark(eh),KS=N().mark(th),zS=N().mark(rh),JS=N().mark(nh),XS=N().mark(oh);function $S(e){var t,r,n,o,a,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.id,n=t.shopId,s.next=3,(0,Lt.call)($e,{resource:"products",id:r,params:{shop_id:n,need_cache:1,cache_expires:600},cleaner:qT});case 3:return o=s.sent,o=xS(o),a=T("products",o),c=a.entities,s.next=8,(0,Lt.put)(fr({entities:c}));case 8:return s.abrupt("return",o);case 9:case"end":return s.stop()}}),QS)}function ZS(e){var t,r,n,o,a,c,s,i,u,l,p;return N().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,r=t.id,n=t.shopId,o=t.isChatbotOrder,d.next=3,(0,Lt.select)(ns);case 3:return a=d.sent,d.next=6,(0,Lt.call)($e,{resource:"order",id:r,params:{shop_id:n}});case 6:return c=d.sent,d.next=9,(0,Lt.select)(xn);case 9:return i=d.sent,s=!i||o,u=(0,R.cleanOrder)(c,a,s),l=T("orders",u),p=l.entities,d.next=15,(0,Lt.put)(fr({entities:p}));case 15:return d.abrupt("return",u);case 16:case"end":return d.stop()}}),qS)}function eh(e){var t,r,n,o,a,c,s,i,u;return N().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,r=t.id,n=t.shopId,l.next=3,(0,Lt.select)(Mf(r));case 3:if(!(o=l.sent)){l.next=6;break}return l.abrupt("return",o);case 6:return l.next=8,(0,Lt.call)($e,{resource:"offers",id:r,params:{shop_id:n}});case 8:return a=l.sent,c=a.product_id,l.next=12,(0,Lt.select)(OO(c));case 12:if(l.sent){l.next=16;break}return l.next=16,(0,Lt.call)($S,{payload:{id:c,shopId:n}});case 16:return s=YS(YS({},a),{},{product:c}),i=T("offers",s),u=i.entities,l.next=20,(0,Lt.put)(fr({entities:u}));case 20:return l.abrupt("return",s);case 21:case"end":return l.stop()}}),WS)}function th(e){var t,r,n,o,a,c,s,i,u;return N().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.shopId,r=e.id,l.next=3,(0,Lt.select)(nn);case 3:return n=l.sent,l.next=6,(0,Lt.select)(vn);case 6:return o=l.sent,a="vouchers_by_ids",l.next=10,(0,Lt.call)($e,{parent:"vouchers",resource:a,params:{ids:JSON.stringify([parseInt(r)]),shop_id:t,buyer_id:o?0:n}});case 10:if(c=l.sent,!(s=c[a])||!s.length){l.next=17;break}return i=T("vouchers",s),u=i.entities,l.next=16,(0,Lt.put)(fr({entities:u}));case 16:return l.abrupt("return",s[0]);case 17:case"end":return l.stop()}}),KS)}function rh(e){var t,r,n,o,a,c,s,i,u;return N().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,r=t.id,n=t.creatorId,l.next=3,(0,Lt.select)(ts);case 3:return o=l.sent,a=o.shop_id,l.next=7,(0,Lt.call)($e,{parent:"feed",resource:"stories",params:{ids:JSON.stringify([r]),creator:n,shop_id:a,need_cache:1,cache_expire:1800}});case 7:return c=l.sent,s=c.stories[0],i=T("feedStories",s),u=i.entities,l.next=12,(0,Lt.put)(fr({entities:u}));case 12:return l.abrupt("return",s);case 13:case"end":return l.stop()}}),zS)}function nh(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.cartItems,r=e.shopId,c.next=3,(0,Lt.call)($e,{parent:"product",resource:"get",method:"POST",payload:JSON.stringify({shop_id:r,items:t.slice(0,4)})});case 3:return n=c.sent,o=n.get,a=void 0===o?[]:o,c.abrupt("return",a.map(HS));case 7:case"end":return c.stop()}}),JS)}function oh(e){var t,r,n,o,a,c,s;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.ids,n=t.id,i.next=3,(0,Lt.select)(ts);case 3:return o=i.sent,a=o.shop_id,i.next=7,(0,Lt.call)($e,{parent:"conversation",resource:"messages",params:{ids:"[".concat(r.join(","),"]"),shop_id:a}});case 7:return c=i.sent,s=c.messages,i.abrupt("return",{id:n,messages:s});case 10:case"end":return i.stop()}}),XS)}var ah,ch,sh=function(e){return e.chatbotReducer.imageUrl},ih=function(e){return e.chatbotReducer.faqSessions},uh=(0,Bt.createSelector)(Hc,ih,(function(e,t){return t[e]||{}}));function lh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ph(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?lh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.SHOW_CHATBOT_IMAGE="SHOW_CHATBOT_IMAGE",e.CLOSE_CHATBOT_MEDIA_PREVIEW="CLOSE_CHATBOT_MEDIA_PREVIEW",e.CHATBOT_INTENTS_REPORT_REQUEST="CHATBOT_INTENTS_REPORT_REQUEST",e.FETCH_FAQ_SESSION_SUCCEED="FETCH_FAQ_SESSION_SUCCEED"}(ah||(ah={}));const dh=(e(ch={},ah.SHOW_CHATBOT_IMAGE,(function(e,t){var r=t.payload;return ph(ph({},e),{},{imageUrl:r.url})})),e(ch,ah.CLOSE_CHATBOT_MEDIA_PREVIEW,(function(e){return ph(ph({},e),{},{imageUrl:""})})),ch);var fh,Eh=P(209),_h=P.n(Eh),Sh=P(411),hh=P(914),Oh=P(770),vh=P(123),Th=_h()(),mh=null,gh=function(){var e=A(N().mark((function e(t,r){var n,o,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.shopId,o=r.conversationId,e.next=3,$e({parent:"faqs",subServer:"workbenchapi",resource:"bot/orders",method:"POST",payload:JSON.stringify({data:JSON.stringify(t),shop_id:n,conversation_id:o})});case 3:return(a=e.sent).data=JSON.parse(a.data),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),yh={cid:(0,R.getRuntimeRegion)(),env:(0,R.getRuntimeServer)(),from:R.ChatbotFromType.LandingPage,initialization:1,auth:{accountType:1},getOrderList:gh},bh=function(){return mh||((mh=new Th.ChatbotSDK({root:"messageSection",config:yh})).use(Sh.Message),mh.use(hh.RelatedIntent),mh.use(Oh.OrderList),mh.use(vh.OptionSelector)),mh},Rh=function(e){bh().updateConfig({from:e})},Ch=Th.Provider,Dh=(0,Oe.createActions)((e(fh={},ah.SHOW_CHATBOT_IMAGE,(function(e){return{url:e.url}})),e(fh,ah.CLOSE_CHATBOT_MEDIA_PREVIEW,(function(){return{}})),e(fh,ah.CHATBOT_INTENTS_REPORT_REQUEST,(function(e){return{reportTask:e.reportTask}})),e(fh,ah.FETCH_FAQ_SESSION_SUCCEED,(function(e){return{conversationId:e.conversationId,faqSessionId:e.faqSessionId,sessionExpiryTime:e.sessionExpiryTime}})),fh)),Ph=Dh.showChatbotImage,Ih=Dh.closeChatbotMediaPreview,Ah=Dh.chatbotIntentsReportRequest,wh=Dh.fetchFaqSessionSucceed,Nh=N().mark(Bh),xh=N().mark(Yh),kh=N().mark(Qh),Uh=N().mark(qh),Mh=N().mark(Wh);function Lh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jh(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Lh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Gh,Fh=function(){return(0,wE.eventChannel)((function(e){var t=bh();return t.init().then((function(){t.on("userAction",(function(t){e(t)}))})),function(){}}))};!function(e){e[e.MESSAGE=1001]="MESSAGE",e[e.SOLUTION=1002]="SOLUTION",e[e.NOT_CHATBOT=0]="NOT_CHATBOT"}(Gh||(Gh={}));var Hh={message:Gh.MESSAGE,solution:Gh.SOLUTION},Vh=function(e){if(!e)return Gh.NOT_CHATBOT;var t=e.type;return Hh[t]};function Bh(e){var t,r,n,o,a,c,s,i,u,l;return N().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(t=e.api,r=e.chatbotUserMessage,n=e.passThroughData.faqSessionId,o=Vh(t),!r){p.next=14;break}return p.next=5,(0,Lt.select)(ts);case 5:return a=p.sent,c=r.type,s={interaction_type:o,bot_data:JSON.stringify(t?t.params:""),faq_session_id:n},"text"===c&&(u=r.text,s=jh(jh({},s),{},{text:u}),i=R.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE),"order"===c&&(s=jh(jh({},s),{},{bot_order_info:VT(r)}),i=R.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE),p.next=12,(0,Lt.select)(ns);case 12:l=p.sent,bo().put(Co().sendMessagesRequested({payload:{conversationId:a.id,conversationUserId:a.to_id,messages:[{type:i,content:s,textContent:HT(r,l)}]}}));case 14:case"end":return p.stop()}}),Nh)}function Yh(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(t=e.urlInfo)&&(r=t.url,n=t.uri_key,o=t.uri_extra,n?window.open(jT(n,o)):r&&window.open(MT(r))),a.next=4,(0,Lt.call)(Bh,e);case 4:case"end":return a.stop()}}),xh)}function Qh(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=e.image)){r.next=4;break}return r.next=4,(0,Lt.put)(Ph({url:t.url}));case 4:case"end":return r.stop()}}),kh)}function qh(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=e.actionType,r.t0=t,r.next="sendChatbotUserMessage"===r.t0?4:"redirect"===r.t0?7:"showImage"===r.t0?10:13;break;case 4:return r.next=6,(0,Lt.call)(Bh,e.data);case 6:case 9:case 12:return r.abrupt("break",13);case 7:return r.next=9,(0,Lt.call)(Yh,e.data);case 10:return r.next=12,(0,Lt.call)(Qh,e.data);case 13:case"end":return r.stop()}}),Uh)}function Wh(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Lt.call)(Fh);case 2:return e=t.sent,t.next=5,(0,Lt.takeEvery)(e,qh);case 5:case"end":return t.stop()}}),Mh)}var Kh=N().mark(Jh),zh=N().mark(Xh);function Jh(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.reportTask,o.next=3,(0,Lt.select)(Hc);case 3:return r=o.sent,o.next=6,(0,Lt.select)(_s);case 6:return n=o.sent,o.prev=7,o.next=10,(0,Lt.call)($e,{method:"POST",subServer:"workbenchapi",parent:"faqs",resource:"bot/report",payload:JSON.stringify({messages:t,conversation_id:r,shop_id:n})});case 10:o.next=14;break;case 12:o.prev=12,o.t0=o.catch(7);case 14:case"end":return o.stop()}}),Kh,null,[[7,12]])}function Xh(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(Ah,Jh);case 2:case"end":return e.stop()}}),zh)}function $h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zh(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?$h(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const eO=e({},ah.FETCH_FAQ_SESSION_SUCCEED,(function(t,r){var n=r.payload,o=n.conversationId,a=n.faqSessionId,c=n.sessionExpiryTime,s=t.faqSessions;return Zh(Zh({},t),{},{faqSessions:Zh(Zh({},s),{},e({},o,{faqSessionId:a,sessionExpiryTime:c}))})}));function tO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?tO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var nO,oO,aO=(0,Oe.handleActions)(rO(rO({},dh),eO),{imageUrl:"",faqSessions:{}}),cO=[Wh,Xh],sO=function(e){return e.voucherReducer.status},iO=(0,Bt.createSelector)(Zt,(function(e){return e.voucherReducer.voucherIds}),(function(e,r){return((0,t.denormalize)(r,[O],{vouchers:e})||[]).filter((function(e){return e}))})),uO=function(e){return(0,Bt.createSelector)(Zt,(function(r){return(0,t.denormalize)(e,O,{vouchers:r})}))},lO={currentPage:0,perPage:20,total:0,hasMore:!0},pO=function(e){return(0,Bt.createSelector)(Xt,(function(r){return(0,t.denormalize)(e,i,{orders:r})}))},dO=function(e){return(e.orderReducer||{}).cancelReasons},fO=function(e){return e.orderReducer.status},EO=function(e){return e.orderReducer.fetchResult},_O=function(e,t){return(0,Bt.createSelector)(EO,(function(r){return r["".concat(e,"_").concat(t)]||{pagination:lO,result:[]}}))},SO=(0,Bt.createSelectorCreator)(Bt.defaultMemoize,(function(e,t){return e.id===t.id}))(ts,(function(e){return e})),hO=(0,Bt.createSelector)(EO,SO,Xt,(function(e,r,n){var o=r.shop_id,a=r.to_id,c=e["".concat(o,"_").concat(a)];if(!c)return[];var s=c.result||[];return(0,t.denormalize)(s,[i],{orders:n})})),OO=function(e){return(0,Bt.createSelector)($t,(function(r){return(0,t.denormalize)(e,u,{products:r})}))},vO=function(e){return(0,Bt.createSelector)($t,(function(r){return(0,t.denormalize)(e,[u],{products:r})}))},TO={currentPage:0,perPage:20,total:0,hasMore:!0},mO=function(e){return e.productReducer.fetchResult},gO=function(e){return e.productReducer.allProductsSearchStatus},yO=function(e){return e.productReducer.sellerRecommendProducts},bO=function(e){return e.productReducer.systemRecommendProducts},RO=function(e){return e.productReducer.groups},CO=function(e){return e.productReducer.systemRecommendProductsFetchStatus},DO=function(e){return e.productReducer.sellerRecommendProductsFetchStatus},PO=function(e){return e.productReducer.fetchGroupsStatus},IO=function(e){return(0,Bt.createSelector)(mO,(function(t){return t[e]||{pagination:TO,result:[]}}))},AO=(0,Bt.createSelector)(mO,fs,$t,(function(e,r,n){var o=e[r];if(!o)return[];var a=o.result||[];return(0,t.denormalize)(a,[u],{products:n})})),wO=function(e){return e.reportReducer.beingReported};!function(e){e.REPORT_REQUESTED="REPORT_REQUESTED",e.CLEAR_REPORT_REQUESTED="CLEAR_REPORT_REQUESTED"}(nO||(nO={}));var NO,xO=(0,Oe.createActions)((e(oO={},nO.REPORT_REQUESTED,(function(e){return{event_time:e.event_time,url:e.url}})),e(oO,nO.CLEAR_REPORT_REQUESTED,(function(){return{}})),oO)),kO=xO.reportRequested,UO=xO.clearReportRequested,MO=N().mark(FO),LO=N().mark(HO);function jO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function GO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?jO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function FO(){var e,t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,Lt.select)(wO);case 2:if(!(e=r.sent).length){r.next=10;break}return t=x(e),r.next=7,(0,Lt.put)(UO());case 7:return t.sort((function(e,t){return Number(t.event_time)-Number(e.event_time)})),r.next=10,(0,Lt.call)($e,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_active",payload:JSON.stringify(GO(GO({},t[0]),{},{platform_id:(0,R.isVisitingCNSC)()||(0,R.isVisitingKRSC)()?2:1}))});case 10:case"end":return r.stop()}}),MO)}function HO(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,(0,Lt.delay)(6e4);case 3:return e.next=5,FO();case 5:e.next=0;break;case 7:case"end":return e.stop()}}),LO)}const VO=(e(NO={},nO.REPORT_REQUESTED,(function(e,t){var r=t.payload,n=r.event_time,o=r.url;return{beingReported:[].concat(x(e.beingReported),[{event_time:n,url:o}])}})),e(NO,nO.CLEAR_REPORT_REQUESTED,(function(e){return{beingReported:[]}})),NO);function BO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var YO=[HO],QO=(0,Oe.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?BO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},VO),{beingReported:[]}),qO=N().mark(tv);function WO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function KO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?WO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var zO,JO,XO=48e4,$O=6e4,ZO=!1,ev="9223372036854775807";function tv(){var e,t,r,n,o,a,c,s,i,u,l,p,d,f,E,_,S;return N().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=3,(0,Lt.delay)($O);case 3:return e=void 0,e="mini-session",h.next=7,(0,R.getItem)(e);case 7:if(!(t=h.sent)||!t.token){h.next=58;break}return h.prev=9,h.next=12,(0,Lt.select)((function(e){return e.conversationReducer}));case 12:return r=h.sent,n=r.maxLatestReceivedMessageId,o=r.maxLatestTimestampNano,h.next=17,(0,Lt.select)(vn);case 17:return a=h.sent,h.next=20,(0,Lt.select)($c);case 20:return c=h.sent.toLowerCase(),s=!a&&["all","unread"].includes(c),i=["pinned","unread"].includes(c),u={},s?u.last_timestamp_nano=o||ev:u.last_message_id=n||ev,u.last_unread_count_sync=ZO,h.next=28,(0,Lt.spawn)($e,{method:"POST",resource:"user",suffix:"sync",params:KO({},u)});case 28:return l=h.sent,h.next=31,(0,Lt.join)(l);case 31:if(p=h.sent,d=p.have_new_msg,f=p.unread_count,E=p.current_version,ZO=!1,!d){h.next=44;break}return h.next=39,(0,Lt.select)((function(e){return e.conversationReducer}));case 39:if(!(h.sent.syncFetchException<3)||i){h.next=44;break}return h.next=44,(0,Lt.put)(As({direction:"latest",source:R.ConversationSource.SYNC}));case 44:if(!(f>-1)){h.next=53;break}return h.next=47,(0,Lt.select)(Mr);case 47:if((_=h.sent)===f){h.next=52;break}return h.next=51,(0,Lt.put)(qr({count:f}));case 51:ZO=!0;case 52:a||($O=_!==f||d?6e4:$O>=XO?XO:2*$O);case 53:E&&E!==t.version&&(S=Object.assign({},t,{version:E}),(0,R.setItem)(e,S)),h.next=58;break;case 56:h.prev=56,h.t0=h.catch(9);case 58:h.next=0;break;case 60:case"end":return h.stop()}}),qO,null,[[9,56]])}function rv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nv(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?rv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.REDIRECT_CONVERSATION_REQUESTED="REDIRECT_CONVERSATION_REQUESTED",e.FETCH_REFER_ENTITY_REQUESTED="FETCH_REFER_ENTITY_REQUESTED"}(zO||(zO={}));var ov=N().mark(dv),av=N().mark(fv),cv=N().mark(Ev),sv=N().mark(_v),iv=N().mark(Sv),uv=(0,Oe.createActions)((e(JO={},zO.REDIRECT_CONVERSATION_REQUESTED,(function(e){var t=e.userId,r=e.shopId,n=e.orderId,o=e.productId,a=e.message;return{userId:t,shopId:r,orderId:n,productId:o,message:void 0===a?"":a,entryPointType:e.entryPointType}})),e(JO,zO.FETCH_REFER_ENTITY_REQUESTED,(function(e){return{conversationId:e.conversationId,type:e.type,id:e.id,shopId:e.shopId}})),JO)),lv=uv.redirectConversationRequested,pv=uv.fetchReferEntityRequested;function dv(e){var t,r,n,o,a,c,s,i;return N().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,r=t.conversationId,n=t.type,o=t.id,a=t.shopId,bo().put(Co().updateMessagesRelated({payload:{conversationId:r,updateKey:R.MessagesRelatedKey.REFER,updateValue:{status:R.MessageFillStatus.FILLING}}})),c={},u.prev=3,s="order"===n?ZS:$S,u.next=7,(0,Lt.call)(s,{payload:{id:o,shopId:a}});case 7:i=u.sent,c={status:"",entity:i},u.next=14;break;case 11:u.prev=11,u.t0=u.catch(3),c.status=R.MessageFillStatus.FAILED;case 14:return u.next=16,(0,Lt.select)(Td(r));case 16:u.sent&&bo().put(Co().updateMessagesRelated({payload:{conversationId:r,updateKey:R.MessagesRelatedKey.REFER,updateValue:c}}));case 18:case"end":return u.stop()}}),ov,null,[[3,11]])}function fv(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=T("conversations",e),r.next=3,(0,Lt.put)(fr({entities:t.entities}));case 3:case"end":return r.stop()}}),av)}function Ev(e,t){return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.status=R.MessageFillStatus.FILLING,r.next=3,bo().put(Co().updateMessagesRelated({payload:{conversationId:t,updateKey:R.MessagesRelatedKey.REFER,updateValue:e}}));case 3:return r.next=5,(0,Lt.fork)(dv,{payload:nv(nv({},e),{},{conversationId:t})});case 5:case"end":return r.stop()}}),cv)}function _v(e){var t,r,n,o,a,c,s,i,u,l,p,d,f,E,_,S,h,O;return N().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,o=t.orderId,a=t.productId,c=t.message,s=t.entryPointType,v.next=3,(0,Lt.select)(Mc);case 3:return i=v.sent,v.next=6,(0,Lt.call)($e,{method:"POST",resource:"conversation",suffix:"redirection",payload:JSON.stringify({user_id:parseInt(r),shop_id:n})});case 6:if(u=v.sent,l=u.id,p=u.faking,d=u.mask,f=u.to_name,_=nv(nv({userId:r,shopId:n},E={orderId:o,productId:a}),{},{conversationId:u.id}),S=i.length,h=p||!i.includes(l),O=null,o?O={id:o,type:"order"}:a&&(O={id:a,type:"product"}),!O){v.next=20;break}return O.shopId=n,v.next=18,(0,Lt.call)(Ev,O,l);case 18:v.next=24;break;case 20:return v.next=22,(0,Lt.select)(Td(l));case 22:v.sent&&bo().put(Co().clearChatRoomRefer({payload:{conversationId:l}}));case 24:if(s&&bo().put(Co().setEntryPoint({payload:{type:s,conversationId:l}})),!h){v.next=33;break}return v.next=28,(0,Lt.call)(fv,u);case 28:if(!S){v.next=31;break}return v.next=31,(0,Lt.put)(Is({conversationId:l}));case 31:v.next=35;break;case 33:return v.next=35,(0,Lt.put)(Er({name:"conversations",id:l,record:{to_name:f,mask:d}}));case 35:if(!c){v.next=38;break}return v.next=38,(0,Lt.put)(zf({draft:c,conversationId:l}));case 38:return v.next=40,(0,Lt.call)(R.setItem,"mini-sc_redirect",_);case 40:return v.next=42,(0,Lt.select)(Hc);case 42:if(v.sent===l&&!h){v.next=46;break}return v.next=46,(0,Lt.put)(Vs({conversation:u,sourceInfo:E}));case 46:return v.next=48,(0,Lt.select)(wn);case 48:if(v.sent){v.next=52;break}return v.next=52,(0,Lt.call)(Zo,{payload:{shouldShowWindow:!0}});case 52:if(S){v.next=55;break}return v.next=55,(0,Lt.put)(Is({conversationId:l}));case 55:return v.next=57,(0,Lt.put)(Vo({shouldShowConversationDetail:!0}));case 57:case"end":return v.stop()}}),sv)}function Sv(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Lt.takeEvery)(lv,_v);case 2:return e.next=4,(0,Lt.takeEvery)(pv,dv);case 4:case"end":return e.stop()}}),iv)}var hv=[tv,Sv],Ov=N().mark(vv);function vv(e,t,r){return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Lt.takeEvery)(e,N().mark((function e(n){var o;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.payload.id){e.next=5;break}return e.next=4,(0,Lt.call)(t,n);case 4:return e.abrupt("return");case 5:return e.next=7,(0,Lt.race)({task:(0,Lt.call)(t,n),cancel:(0,Lt.take)((function(e){return e.type===r.toString()&&e.payload.id===o}))});case 7:case"end":return e.stop()}}),e)})));case 2:case"end":return n.stop()}}),Ov)}var Tv=N().mark(yv);function mv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gv(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?mv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function yv(e,t,r){var n,o,a,c,s=arguments;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=s.length>3&&void 0!==s[3]?s[3]:[],o=e,a=[],c=[],Array.isArray(e)&&(o=(T(r,e).entities||{})[r]||{}),t.forEach((function(e){var t=e.id,s=o[t];s?["conversations","agentConversations"].includes(r)&&(void 0!==s.faking||s.latestMessageStatus||void 0!==s.unreplied)?(delete(e=gv(gv({},s),e)).faking,delete e.latestMessageStatus,delete e.unreplied,c.push(e)):(n.length&&n.forEach((function(t){e[t]=s[t]})),a.push((0,Lt.put)(Er({name:r,id:t,record:gv({},e)})))):c.push(e)})),c.length&&a.push((0,Lt.put)(fr({entities:T(r,c).entities}))),i.next=9,(0,Lt.all)(a);case 9:case"end":return i.stop()}}),Tv)}var bv=function(e,t,r,n){switch(r){case"reset":if(n){var o=Array.isArray(t)?x(t):[];return o.unshift(n),o}return t;case"latest":return t.concat(e.filter((function(e){return!t.includes(e)})));case"older":return e.concat(t.filter((function(t){return!e.includes(t)})));default:return t}};function Rv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cv(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Rv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Dv=function(e,t,r){if(e){var n={};return e.forEach((function(e){n[e]=!0})),(0,R.simpleEqualCheck)(r.slice(0,R.persistLimit),e)?Cv(Cv({},t),{},{changed:!1}):{changed:!0,conversationIds:e,conversationIdsMap:n,lastConversationId:e[e.length-1]}}return null},Pv=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||"number"!=typeof e.storedTimestamp)return!1;var r=18e4,n=18e5;return Date.now()<e.storedTimestamp+(t?r:n)},Iv=new(P(187).EventEmitter),Av=!1,wv=null,Nv=document.location,xv="".concat(Nv.protocol,"//").concat(Nv.host,"/favicon.ico");function kv(){var e="t=".concat(Date.now()),t=[xv,e].join("?");wv=setTimeout((function(){U()(t,{method:"GET"}).then((function(){clearTimeout(wv),Av=!1,window.dispatchEvent(new Event("judge-online"))})).catch((function(){kv()}))}),5e3)}function Uv(){if(Av)return null;Av=!0,kv()}var Mv=(0,R.checkIsScChat)(),Lv=new(Pe())({name:"".concat((0,R.getRuntimeRegion)(),"_").concat((0,R.getRuntimeServer)(),"_chat-ws"),shouldShared:Mv}),jv=Lv.isShared,Gv=Lv.socket,Fv=function(){return Gv.emit("message","13".concat(JSON.stringify({country:((0,R.getRuntimeRegion)()||"").toLocaleUpperCase(),source:"newwebchat"})))},Hv=(0,P(428).createBrowserHistory)({basename:"/chateasy"}),Vv=function(){var e=Hv.location,t=e&&e.pathname;return t&&t.startsWith("/")?t.split("/")[1]:t};function Bv(){return Bv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bv.apply(this,arguments)}var Yv=["SPC_U","SPC_F","SPC_T_ID","SPC_T_IV"];function Qv(e){var t={};if("function"==typeof e)for(var r=e(),n=0,o=Yv;n<o.length;n++){var a=o[n];t[a]=r[a]}return t}const qv=JSON.parse('{"OB":{"test":"test.","stable":"test-stable.","staging":"staging.","liveish":"live-test.","live":"","sandbox":"sandbox.","uat":"uat."}}');var Wv=[],Kv=function(){function e(e,t){var r=this;this.context=e,this.methodName=t,this.originalMethodReference=e[t],this.methodChain=[],this.boundMethodChain=[],this.wrappedMethod=function(){var e=r.boundMethodChain[r.boundMethodChain.length-1];return e.apply(void 0,arguments)},e[t]=this.wrappedMethod}e.add=function(e,t,r){(function(e,t){var r=zv(e,t);return r||(r=new Kv(e,t),Wv.push(r)),r})(e,t).add(r)},e.remove=function(e,t,r){var n=zv(e,t);n&&n.remove(r)};var t=e.prototype;return t.add=function(e){this.methodChain.push(e),this.rebindMethodChain()},t.remove=function(e){var t=this.methodChain.indexOf(e);t>-1&&(this.methodChain.splice(t,1),this.methodChain.length>0?this.rebindMethodChain():this.destory())},t.rebindMethodChain=function(){this.boundMethodChain=[];for(var e,t=0;e=this.methodChain[t];t++){var r=this.boundMethodChain[t-1]||this.originalMethodReference.bind(this.context);this.boundMethodChain.push(e(r))}},t.destory=function(){var e=Wv.indexOf(this);e>-1&&(Wv.splice(e,-1),this.context[this.methodName]=this.originalMethodReference)},e}();function zv(e,t){return Wv.filter((function(r){return r.context===e&&r.methodName===t}))[0]}var Jv=function(){function e(){}var t=e.prototype;return t.upgrade=function(t,r){if(r.oldVersion<e.DATABASE_VERSION&&(t.objectStoreNames.contains(e.OBJECT_STORE_EVENTS_V1)&&t.deleteObjectStore(e.OBJECT_STORE_EVENTS_V1),t.objectStoreNames.contains(e.OBJECT_STORE_SESSIONS_V1)&&t.deleteObjectStore(e.OBJECT_STORE_SESSIONS_V1)),!t.objectStoreNames.contains(e.OBJECT_STORE_EVENTS)){var n=t.createObjectStore(e.OBJECT_STORE_EVENTS,{autoIncrement:!0});n.createIndex(e.INDEX_EVENTS_FETCHED,e.INDEX_EVENTS_FETCHED,{unique:!1}),n.createIndex(e.INDEX_EVENT_TIMESTAMP,e.INDEX_EVENT_TIMESTAMP,{unique:!1})}t.objectStoreNames.contains(e.OBJECT_STORE_SESSIONS)||t.createObjectStore(e.OBJECT_STORE_SESSIONS)},t.init=function(){var t=A(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.openDB(e.DATABASE_NAME,e.DATABASE_VERSION);case 3:return this.idb=t.sent,t.abrupt("return",!0);case 7:return t.prev=7,t.t0=t.catch(0),console.warn("[IndexedDBStorage]",t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),t.openDB=function(t,r){var n=this;return new Promise((function(o,a){var c=self.window.indexedDB.open(t,r);c.onblocked=function(){console.warn("[IndexedDBStorage] Upgrade is blocked since connection to old version exists.")},c.onerror=function(e){try{e.preventDefault()}catch(e){}a(e)},c.onsuccess=function(t){var r=t.target.result;r.objectStoreNames.contains(e.OBJECT_STORE_EVENTS)&&r.objectStoreNames.contains(e.OBJECT_STORE_SESSIONS)?(r.onerror=function(e){console.warn("[IndexedDBStorage]",e.target.errorCode)},r.onversionchange=function(){r.close(),console.warn("[IndexedDBStorage] A new version of indexedDB is ready.")},o(r)):a("Required ObjectStore cannot be found.")},c.onupgradeneeded=function(e){var t=e.target.result;try{n.upgrade(t,e)}catch(e){a(e)}}}))},t.addEvent=function(t){var r=this;return new Promise((function(n,o){var a=r.idb.transaction(e.OBJECT_STORE_EVENTS,"readwrite");a.oncomplete=function(){n(!0)},a.onerror=function(e){o(e)},a.onabort=function(e){o(e)},a.objectStore(e.OBJECT_STORE_EVENTS).add({data:JSON.stringify(t),timestamp:Date.now(),fetched:"f"})}))},t.getEvents=function(t){var r=this,n=[],o=[];return new Promise((function(a,c){var s=r.idb.transaction(e.OBJECT_STORE_EVENTS,"readwrite");s.oncomplete=function(){a({keys:n,data:o})},s.onerror=function(e){c(e)},s.onabort=function(e){c(e)};var i=IDBKeyRange.only("f");s.objectStore(e.OBJECT_STORE_EVENTS).index(e.INDEX_EVENTS_FETCHED).openCursor(i).onsuccess=function(e){var r=e.target.result;r&&(n.push(r.primaryKey),o.push(JSON.parse(r.value.data)),r.update(Bv({},r.value,{fetched:"t"})),(-1===t||t-- >1)&&r.continue())}}))},t.resetEvents=function(t,r){var n=this;return!t||t.length<=0?Promise.resolve(!0):new Promise((function(r,o){var a=n.idb.transaction(e.OBJECT_STORE_EVENTS,"readwrite");a.oncomplete=function(){r(!0)},a.onerror=function(e){o(e)},a.onabort=function(e){o(e)};var c=IDBKeyRange.bound(t[0],t[t.length-1]);a.objectStore(e.OBJECT_STORE_EVENTS).openCursor(c).onsuccess=function(e){var t=e.target.result;t&&(t.update(Bv({},t.value,{fetched:"f"})),t.continue())}}))},t.removeEvents=function(t){var r=this;return!t||t.length<=0?Promise.resolve(!0):new Promise((function(n,o){var a=r.idb.transaction(e.OBJECT_STORE_EVENTS,"readwrite");a.oncomplete=function(){n(!0)},a.onerror=function(e){o(e)},a.onabort=function(e){o(e)};var c=IDBKeyRange.bound(t[0],t[t.length-1]);a.objectStore(e.OBJECT_STORE_EVENTS).delete(c)}))},t.getSession=function(t){var r=this;return new Promise((function(n,o){var a={},c=r.idb.transaction(e.OBJECT_STORE_SESSIONS,"readwrite");c.oncomplete=function(){n(a)},c.onerror=function(e){o(e)},c.onabort=function(e){o(e)};var s=c.objectStore(e.OBJECT_STORE_SESSIONS);s.get(e.KEY_SESSION).onsuccess=function(r){a=t(r.target.result),s.put(a,e.KEY_SESSION)}}))},t.getCurrentSessionId=function(){var t=this;return new Promise((function(r,n){var o={},a=t.idb.transaction(e.OBJECT_STORE_SESSIONS,"readwrite");a.oncomplete=function(){r(o.sessionId)},a.onerror=function(e){n(e)},a.onabort=function(e){n(e)},a.objectStore(e.OBJECT_STORE_SESSIONS).get(e.KEY_SESSION).onsuccess=function(e){o=e.target.result}}))},t.removeExpiredEvents=function(){var t=this;return new Promise((function(r,n){var o=t.idb.transaction(e.OBJECT_STORE_EVENTS,"readwrite");o.oncomplete=function(){r(!0)},o.onerror=function(e){n(e)},o.onabort=function(e){n(e)};var a=IDBKeyRange.upperBound(Date.now()-e.RETENTION);o.objectStore(e.OBJECT_STORE_EVENTS).index(e.INDEX_EVENT_TIMESTAMP).openCursor(a).onsuccess=function(e){var t=e.target.result;t&&(t.delete(),t.continue())}}))},e}();Jv.DATABASE_NAME="data-tracking",Jv.DATABASE_VERSION=3,Jv.OBJECT_STORE_EVENTS_V1="events",Jv.OBJECT_STORE_EVENTS="events_v2",Jv.OBJECT_STORE_SESSIONS_V1="sessions",Jv.OBJECT_STORE_SESSIONS="session_v2",Jv.INDEX_EVENTS_FETCHED="fetched",Jv.INDEX_EVENT_TIMESTAMP="timestamp",Jv.KEY_SESSION="current_session",Jv.RETENTION=1728e5;var Xv=function(){function e(e,t){this.storage=e,this.storageKey=t}var t=e.prototype;return t.get=function(){return this.storage.get(this.storageKey)||[]},t.set=function(e){return e=e||[],this.storage.set(this.storageKey,e)},t.enqueue=function(e){var t=this.get();t.push(e),this.set(t)},t.batchDequeue=function(e){var t=this.get(),r=t.slice(0,e),n=t.slice(e);return this.set(n),r},t.putBackBatchToQueue=function(e){return this.set(e.concat(this.get()))},e}(),$v=function(){function e(){var t=this;e.supportsLocalStorage()?this.storage={get:function(e){var t=self.window.localStorage.getItem(e);return t?JSON.parse(t):void 0},set:function(e,t){var r=JSON.stringify(t);self.window.localStorage.setItem(e,r)}}:(this.backStore={},this.storage={get:function(e){return t.backStore[e]},set:function(e,r){t.backStore[e]=r}}),this.queue=new Xv(this.storage,e.QUEUE_STORAGE_KEY)}e.supportsLocalStorage=function(){if(!self.window)return!1;try{return self.window.localStorage.setItem(e.CHECK_STORAGE_KEY,e.CHECK_STORAGE_KEY),self.window.localStorage.removeItem(e.CHECK_STORAGE_KEY),!0}catch(e){return!1}};var t=e.prototype;return t.addEvent=function(e){return this.queue.enqueue(e),Promise.resolve(!0)},t.getEvents=function(e){var t=-1===e?this.queue.get():this.queue.batchDequeue(e);return Promise.resolve({data:t})},t.resetEvents=function(e,t){return this.queue.putBackBatchToQueue(t),Promise.resolve(!0)},t.removeEvents=function(e){return Promise.resolve(!0)},t.getSession=function(t){var r=this.storage.get(e.SESSION_STORAGE_KEY);return r=t(r=r&&"sessionId"in r&&"sequenceId"in r&&"timestamp"in r?r:null),this.storage.set(e.SESSION_STORAGE_KEY,r),Promise.resolve(r)},t.getCurrentSessionId=function(){var t=this.storage.get(e.SESSION_STORAGE_KEY),r=t&&"sessionId"in t?t.sessionId:ca()();return Promise.resolve(r)},e}();$v.QUEUE_STORAGE_KEY="bi-tracking::events",$v.SESSION_STORAGE_KEY="bi-tracking::session",$v.CHECK_STORAGE_KEY="bi-tracking::check";var Zv=null,eT=function(){function e(){}return e.initIndexedDB=function(){var e=A(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!self.window||!self.window.indexedDB){e.next=8;break}return t=new Jv,e.next=4,t.init();case 4:if(!e.sent){e.next=8;break}try{t.removeExpiredEvents()}catch(e){console.warn("[TrackerStorage]",e)}return e.abrupt("return",t);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.get=(t=A(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Zv){t.next=5;break}return t.next=3,e.initIndexedDB();case 3:(Zv=t.sent)||(Zv=new $v);case 5:return t.abrupt("return",Zv);case 6:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)}),e;var t}(),tT="",rT="",nT=function(){function e(){}return e.getSession=function(){var t=A(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,eT.get();case 2:return r=t.sent,t.next=5,r.getSession((function(t){var r=Date.now();return null==t||r-t.timestamp>e.SESSION_DURATION?t={sessionId:ca()(),timestamp:r,sequenceId:0}:(t.sequenceId+=1,t.timestamp=r),t}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e.GetSessionId=function(){var e=A(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eT.get();case 2:return t=e.sent,e.next=5,t.getCurrentSessionId();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.setLatestEventId=function(e){tT=e},e.getLatestEventId=function(){return tT},e.setLatestViewPageType=function(e){rT=e},e.getLatestViewPageType=function(){return rT},e}();function oT(e){var t={},r=(e=e||"").indexOf("?");if(-1!==r){var n=e.substring(r+1);(n=n.split("#")[0]).split("&").forEach((function(e){if(e){var r=e.indexOf("="),n=r>-1?e.substring(0,r):e,o=r>-1?decodeURIComponent(e.substring(r+1)):"";t[n]=o}}))}return t}function aT(e){return Object.keys(e).length<=0}function cT(e,t){return!!e&&e.split("/")[2]===t}function sT(e){var t={};return e.hasOwnProperty("affiliate_trackid")&&(t.affiliate_trackid=e.affiliate_trackid),e.hasOwnProperty("utm_source")&&(t.utm_source=e.utm_source),e.hasOwnProperty("utm_medium")&&(t.utm_medium=e.utm_medium),e.hasOwnProperty("utm_campaign")&&(t.utm_campaign=e.utm_campaign),e.hasOwnProperty("utm_term")&&(t.utm_term=e.utm_term),e.hasOwnProperty("utm_content")&&(t.utm_content=e.utm_content),t}function iT(e){var t={};return e.hasOwnProperty("event_source")&&(t.event_source=e.event_source),t}function uT(e){if(!self.document||!self.location)return null;var t=null;try{t=oT(self.location.href)}catch(e){console.warn("[getParams]",e)}if(!t||aT(t))return null;var r={},n=cT(self.document.referrer,self.location.hostname);return(e&&n||!e)&&(r=iT(t)),e&&!n&&(r=sT(t)),aT(r)?null:r}function lT(e){if(e.hash&&e.hash.startsWith("#/")){var t=e.hash.lastIndexOf("#");return 0===t?e.hash.substring(1):e.hash.substring(1,t)}return e.pathname}function pT(){return location.pathname+location.hash+location.search}function dT(){return location.host+location.pathname+location.hash}nT.SESSION_DURATION=18e5;var fT=function(){function e(e){if(self.window&&self.window.addEventListener){var t={shouldTrackHistoryChange:this.shouldTrackHistoryChange,trackReplaceState:!1};this.opts=Bv({},t,e),this.path=pT(),this.pathname=lT(location),this.eventId=ca()(),nT.setLatestEventId(this.eventId),this.pushStateOverride=this.pushStateOverride.bind(this),this.replaceStateOverride=this.replaceStateOverride.bind(this),this.handlePopState=this.handlePopState.bind(this),this.handleHashChange=this.handleHashChange.bind(this),this.handleLoad=this.handleLoad.bind(this),self.history&&self.history.pushState?(Kv.add(history,"pushState",this.pushStateOverride),Kv.add(history,"replaceState",this.replaceStateOverride),window.addEventListener("popstate",this.handlePopState)):window.addEventListener("hashchange",this.handleHashChange),this.handleLoad()}else console.warn("[AutoTracker]","not work unsupporting browser")}var t,r=e.prototype;return r.pushStateOverride=function(e){var t=this;return function(){e.apply(void 0,arguments),t.handleHistoryChange(!0)}},r.replaceStateOverride=function(e){var t=this;return function(){e.apply(void 0,arguments),t.handleHistoryChange(!1)}},r.handlePopState=function(){this.handleHistoryChange(!0)},r.handleHashChange=function(){this.handleHistoryChange(!0)},r.handleLoad=function(){var e=this,t={isOnload:!0,referrer:self.document.referrer,eventId:this.eventId,href:self.location.href,hostname:self.location.hostname,pathname:this.pathname,absolutePath:dT()};setTimeout((function(){try{e.sendPageview(t)}catch(e){console.warn("[AutoTracker]",e)}}),300)},r.sendPageview=(t=A(regeneratorRuntime.mark((function e(t){var r,n,o,a,c,s,i,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nT.getSession();case 2:return r=e.sent,n=Date.now(),o=oT(t.href),a={auto_mapped_view:nT.getLatestViewPageType(),auto_refer:t.referrer,auto_pathname:t.pathname,auto_url:t.href,start_time:n},aT(o)||(a.param_string=JSON.stringify(o)),c=cT(t.referrer,t.hostname),(t.isOnload&&c||!t.isOnload)&&!aT(s=iT(o))&&(a=Bv({},a,s)),t.isOnload&&!c&&!aT(i=sT(o))&&(a=Bv({},a,i)),u={civ_id:t.eventId,info:{auto_view_id:"browser-abs|"+t.absolutePath,data:{auto_pv_common:a},operation:"auto_view",usage_id:0},sequence_id:r.sequenceId,session_id:r.sessionId,timestamp:n,type:"v3"},e.next=13,eT.get();case 13:return l=e.sent,e.next=16,l.addEvent(u);case 16:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),r.shouldTrackHistoryChange=function(e,t){return!(!e||!t)},r.handleHistoryChange=function(e){var t,r=this,n=this.path,o=this.pathname,a=pT(),c=lT(location);if(n!==a&&this.opts.shouldTrackHistoryChange.call(this,a,n)&&(this.path=a,this.pathname=c,e||this.opts.trackReplaceState)){this.eventId=ca()(),t=function(){nT.setLatestEventId(r.eventId)},"function"==typeof requestIdleCallback?requestIdleCallback((function(){return t()})):t();var s={isOnload:!1,referrer:o,eventId:this.eventId,href:self.location.href,hostname:self.location.hostname,pathname:this.pathname,absolutePath:dT()};setTimeout((function(){try{r.sendPageview(s)}catch(e){console.warn("[AutoTracker]",e)}}),300)}},e}(),ET=function(){function e(t){this.backoff=e.BACKOFF_PERIOD,this.isSyncing=!1,this.makePromise=t,this.sync=this.sync.bind(this)}return e.prototype.sync=(t=A(regeneratorRuntime.mark((function t(){var r,n,o,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isSyncing){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,eT.get();case 5:return r=t.sent,t.next=8,r.getEvents(-1);case 8:if(!((n=t.sent).data.length<=0)){t.next=11;break}return t.abrupt("return");case 11:return this.isSyncing=!0,t.next=14,this.makePromise(n.data).catch((function(e){console.warn("[Sender]",e)}));case 14:if(!(o=t.sent)||200!==o.status){t.next=22;break}return t.next=18,r.removeEvents(n.keys);case 18:this.backoff=e.BACKOFF_PERIOD,this.isSyncing=!1,t.next=26;break;case 22:return t.next=24,r.resetEvents(n.keys,n.data);case 24:this.backoff*=2,setTimeout((function(){a.isSyncing=!1,a.sync()}),this.backoff);case 26:t.next=32;break;case 28:t.prev=28,t.t0=t.catch(0),console.warn("[Sender]",t.t0),this.isSyncing=!1;case 32:case"end":return t.stop()}}),t,this,[[0,28]])}))),function(){return t.apply(this,arguments)}),e;var t}();ET.BACKOFF_PERIOD=200;var _T=function(){function e(t){this.syncPeriod=e.SYNC_PERIOD,this.isSyncing=!1,this.makePromise=t,this.sync=this.sync.bind(this),this.syncWhenIdle=this.syncWhenIdle.bind(this),this.setSyncThreadId=this.setSyncThreadId.bind(this),this.syncThreadId=setInterval(this.syncWhenIdle,this.syncPeriod)}var t=e.prototype;return t.setSyncThreadId=function(){this.syncThreadId&&clearInterval(this.syncThreadId),this.syncThreadId=setInterval(this.syncWhenIdle,this.syncPeriod)},t.syncWhenIdle=function(){window&&window.requestIdleCallback?window.requestIdleCallback(this.sync,{timeout:1e3}):this.sync()},t.sync=function(){var t=A(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isSyncing){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,eT.get();case 5:return r=t.sent,t.next=8,r.getEvents(e.BATCH_SIZE);case 8:if(!((n=t.sent).data.length<=0)){t.next=11;break}return t.abrupt("return");case 11:return this.isSyncing=!0,t.next=14,this.makePromise(n.data).catch((function(e){console.warn("[SenderWithInterval]",e)}));case 14:if(!(o=t.sent)||200!==o.status){t.next=21;break}return t.next=18,r.removeEvents(n.keys);case 18:this.syncPeriod>e.SYNC_PERIOD&&(this.syncPeriod=e.SYNC_PERIOD,this.setSyncThreadId()),t.next=25;break;case 21:return t.next=23,r.resetEvents(n.keys,n.data);case 23:this.syncPeriod*=2,this.setSyncThreadId();case 25:this.isSyncing=!1,t.next=32;break;case 28:t.prev=28,t.t0=t.catch(0),console.warn("[SenderWithInterval]",t.t0),this.isSyncing=!1;case 32:case"end":return t.stop()}}),t,this,[[0,28]])})));return function(){return t.apply(this,arguments)}}(),e}();_T.SYNC_PERIOD=2e3,_T.BATCH_SIZE=20;var ST=Bv({},qv.OB,{liveish:""}),hT=function(){function e(e){var t,r;this.options=e,this.endpoint=e.endpoint||(t=e.env.toLowerCase(),r=e.locale.toLowerCase(),"https://c-api-bit."+ST[t]+"shopeemobile.com/"+r+"/tr"),this.pageId=ca()(),this.isOnload=!0,void 0===e.appId&&(this.options.appId=0),(void 0===e.enableAutoTrack||e.enableAutoTrack)&&(this.autoTracker=new fT),e.sendEventByInterval?this.sender=new _T(this.post.bind(this)):this.sender=new ET(this.post.bind(this))}var t,r=e.prototype;return r.updatePageId=function(){this.pageId=ca()()},r.track=function(e,t){console.warn("[TrackingV3SDK] TrackingV3SDK.track is deprecated"),this.sync({data:{type:e,timestamp:Date.now(),info:t}})},r.sync=function(){var e=A(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,e.prev=1,e.next=4,this.preProcess(r);case 4:return n=e.sent,e.next=7,eT.get();case 7:return o=e.sent,e.next=10,o.addEvent(n);case 10:if(this.options.sendEventByInterval){e.next=13;break}return e.next=13,this.sender.sync();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.warn("[TrackingV3SDK]",e.t0);case 18:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),r.post=function(){var e=A(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.convertEvents(t);case 2:if(!((r=e.sent).length>0)){e.next=8;break}return e.next=6,this.addMeta(r);case 6:return n=e.sent,e.abrupt("return",this.options.fetch(this.endpoint,{method:"POST",headers:{"X-SPC-DF":n.uuid},body:JSON.stringify(n)}));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.addMeta=(t=A(regeneratorRuntime.mark((function e(t){var r,n,o,a,c,s,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.options,n=r.platform,o=r.ua,a=r.source,c=r.meta,s=r.getCookies,!(i=Qv(s)).SPC_F){e.next=6;break}e.t0=i.SPC_F,e.next=9;break;case 6:return e.next=8,nT.GetSessionId();case 8:e.t0=e.sent;case 9:return u=e.t0,e.abrupt("return",{uuid:u,events:t,meta:Bv({},c,{platform:n,ua:o,source:a,locale:this.options.locale.toLowerCase(),cookies:i,userid:i.SPC_U&&"-"!==i.SPC_U?parseInt(i.SPC_U,10):null,pageid:this.pageId,app_id:this.options.appId})});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)}),r.convertEvents=function(){var e=A(regeneratorRuntime.mark((function e(t){var r,n,o,a,c,s,i,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.options.v2ToV3ConverterPromise;case 2:r=e.sent,n=[],o=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=6;break}if(!(s>=a.length)){e.next=3;break}return e.abrupt("return","break");case 3:i=a[s++],e.next=10;break;case 6:if(!(s=a.next()).done){e.next=9;break}return e.abrupt("return","break");case 9:i=s.value;case 10:return t=i,e.next=13,r(t);case 13:e.sent.forEach((function(e){e.error||(u.postProcess(t,e),n.push(e))}));case 15:case"end":return e.stop()}}),e)})),a=t,c=Array.isArray(a),s=0,a=c?a:a[Symbol.iterator]();case 6:return e.delegateYield(o(),"t0",7);case 7:if("break"!==e.t0){e.next=10;break}return e.abrupt("break",12);case 10:e.next=6;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.preProcess=function(){var e=A(regeneratorRuntime.mark((function e(t){var r,n,o,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nT.getLatestEventId(),n=this.options.preProcess(this,t),e.next=4,nT.getSession();case 4:return o=e.sent,n=Bv({},n,{session_id:o.sessionId,sequence_id:o.sequenceId,civ_id:r}),"v3"===t.type?t.info&&"view"===t.info.operation&&(a=t.info.page_type||"",nT.setLatestViewPageType(a),n.params=uT(this.isOnload),this.isOnload=!1):"pageState"===t.type&&t.info&&(c=t.info.pageType||"",nT.setLatestViewPageType(c),n.params=uT(this.isOnload),this.isOnload=!1),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.postProcess=function(e,t){if(t.info&&void 0===t.info.usage_id&&(t.info.usage_id=0),t.session_id=e.session_id,t.sequence_id=e.sequence_id,t.civ_id=e.civ_id,t.info&&"auto_view"===t.info.operation&&this.options.matchRoutes){var r=this.options.matchRoutes,n=r(t.info.data.auto_pv_common.auto_pathname);n&&(t.info.auto_view_id="browser|"+n);var o=t.info.data.auto_pv_common.auto_refer;if(o&&o.startsWith("/")){var a=r(o);a&&(t.info.data.auto_pv_common.auto_refer="browser|"+a)}}if(e.params&&t.info.data){var c=t.info.data.view_common||{};c=Bv({},c,e.params),t.info.data.view_common=c}return t},e}();function OT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?OT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var TT=function(t){var r={};for(var n in t)for(var o in t[n])r=vT(vT({},r),{},e({},o,{section:n,type:t[n][o]}));return r}({buyer_information_dropdown:{clickViewProfile:"more_view_profile",clickMoreReport:"more_report",clickBlockInProfile:"more_block"},buyer_information:{clickProfileMenus:"username_more_button",impressionProfileMenus:""},chat_more_dropdown:{clickClosedInProfile:"chat_more_close",markAsPinned:"pin_chat",markAsUnpinned:"unpin_chat",markAsRead:"mark_as_read",markAsUnread:"mark_as_unread",markAsDelete:"delete",markAsClose:"close",markAsRestart:"restart",markAsMute:"mute",markAsUnmute:"unmute"},conversation_window:{replyIcon:"reply_icon",deleteIcon:"delete_icon",repliedMessageBar:"replied_message_bar",repliedMessageBarCloseButton:"replied_message_bar_close_button",actionDragVideoInMediaPreivew:"",deletePreviewMediaInMediaPreivew:"",closePreviewMediaInMediaPreivew:"",impressionMediaInMediaPreivew:"preview_media",clickAddMediaInMediaPreivew:"preview_add_media",clickResendVideo:"resend_video",impressionVideoMessage:"video_play_thumbnail",impressionImageMessage:"qrcode_alert",clickCancelVideo:"cancel_video",clickAcceptOffer:"accept_offer",clickRejectOffer:"reject_offer",clickViewProductInMall:"view_in_mall",clickViewProductInSellerCenter:"view_in_seller_center",clickViewDetailInSellerCenter:"order_view_detail_button",clickHandleStoryMessage:"story",clickPlayInVideoMessage:"video_play_thumbnail",impressionResendVideo:"resend_video",clickPreviewQrcode:"open_qrcode_alert",clickOrderMessage:"order_message",clickProductMessage:"product_message",clickProductItemMessage:"item_collection_message",clickClaimVoucher:"voucher_claim",impressionPopupOrderCard:"popup_order_card",impressionOrderMessage:"order_message",impressionProductMessage:"product_message",impressionBundleDealCard:"bundle_deal_card",impressionVoucherCard:"claim_card",impressionProductListCard:"product_list_card",impressionCartCard:"cart_card",impressionRateCard:"rate_card",impressionProductCategoryCard:"product_category_card",impressionFlashSaleCard:"flash_sale_card",impressionOrderFromSourceInSpecialMessage:"order_message_source",impressionProductFromSourceInSpecialMessage:"product_message_source",clickVisitProductInSellerCenter:"product_message_source",clickVisitOrderInSellerCenter:"order_message_source",impressionOrClickUnreadBriefMessage:"latest_message",clickFlashSaleItemsDetail:"flash_sale_items",clickViewFlashSaleInMall:"flash_sale_button",clickViewBundleDealInMall:"bundle_deal_button",clickBundleDealDetail:"bundle_deal_items",clickCartButton:"cart_button",clickCartProduct:"cart_product",clickProductListMessage:"product_list_items",clickRateButton:"rate_button",clickRateProduct:"rate_product",impressionVoucherForReceiverInMinichat:"claim_card",impressionPopupProductCard:"popup_product_card"},conversation_window_pop_up:{clickCloseMediaPreviewModalFromX:"close_pop_up",clickCloseMediaPreviewModalFromBackground:"close_pop_up_background",clickPreviewLeftMedia:"left",clickPreviewRightMedia:"right",impressionAfterSwipeMedia:""},conversation_window_qrcode_pop_up:{impressionUnknowQrcode:"qrcode_alert",clickQrcodeToLearnMore:"learn_more",clickBackToChat:"back_to_chat",clickOpenQrcode:"open_image",impressionQrcode:""},conversation_window_video_pop_up:{actionFinishVideo:"video_end",clickSlideBar:"slide_bar",clickDownloadVideo:"download",clickVideoMinimize:"minimize",clickVideoExpand:"expand",impressionReloadVideoError:"reload_video",clickReloadVideo:"reload_video",clickStopVideo:"stop_video",clickRestartVideo:"restart_video"},voucher_information_tab:{impressionVoucherInWorkStation:"voucher_card"},order_information_tab:{clickViewOrderDetail:"order_view_detail",clickSendOrderLink:"order_sendlink"},chat_list_dropdown:{clickFilter:"filter",clickFilterAll:"filter_all",clickFilterUnreplied:"filter_unreplied",clickFilterUnread:"filter_unread",clickFilterPinned:"filter_pinned",clickFilterClosed:"filter_closed"},chat_list:{clickChatMore:"chat_more",clickChatUser:"chat_user"},shop_head_status_dropdown:{clickStatusOnlineButton:"status_online_button",clickStatusHangup:"status_hangup"},delete_confirmation_popup:{deleteConfirm:"delete_confirmation",cancelConfirm:"cancel_confirmation"},error_popup:{error:"error_popup"},product_card_pop_up:{clickSendPopupProductCard:"send",clickClosePopupProductCard:"close"},order_card_pop_up:{clickSendPopupOrderCard:"send",clickClosePopupOrderCard:"close"},order_card:{clickCopyOrderSN:"copy"}}),mT=(["message_shortcuts","auto_reply","notification","translation_assistant","timestamp","performance_data","login_status","faq_assistant","seller_recom"].reduce((function(t,r){return vT(vT({},t),{},e({},"click_".concat(r),{section:"",type:r}))}),{}),vT(vT({},TT),{},{clickMuteInProfile:{section:"personal_information_dropdown",type:"mute"},clickUnmuteInProfile:{section:"personal_information_dropdown",type:"unmute"},impressionMuteInProfile:{section:"personal_information_dropdown",type:"mute"},impressionUnmuteInProfile:{section:"personal_information_dropdown",type:"unmute"},impressionSafetyTip:{section:"conversation_window",type:"safety_tip"},clickSafetyTipLearnMore:{section:"safety_tip",type:"learn_more"},clickAddFromTemplate:{section:"message_shortcuts_detail_tab",type:"add_message_template"},actionAdjustMessageShortcuts:{section:"message_shortcuts_tab",type:""},actionAdjustMessageShortcutsDetail:{section:"message_shortcuts_detail_tab",type:""},impressionClickableCard:{section:"conversation_window",type:"clickable_message"},clickClickableCard:{section:"conversation_window",type:"clickable_message"},clickRateCardSubmit:{section:"evaluation_card",type:"evaluation_submit_button"},impressionRateCard:{section:"evaluation_card",type:""},impressionRateCardFeedback:{section:"evaluation_card_feedback",type:""},clickTranslationFeedback:{section:"",type:"translation_feedback"},impressionFeedbackPopup:{section:"feedback_popup_window",type:"translation_feedback"},clickFeedbackSubmit:{section:"feedback_popup_window",type:"feedback_submit_button"},impressionFeedbackMore:{section:"feedback_popup_window",type:"feedback_tell_us_more"},clickSendMessageButton:{section:"",type:"send_message_button"},clickRestartButton:{section:"",type:"restart_conversation"},clickStickerInToolbar:{section:"",type:"sticker_button"},clickImageInToolbar:{section:"",type:"image_button"},clickVideoInToolbar:{section:"",type:"video_button"},clickSendRatingCard:{section:"",type:"appraise_button"},clickVisitSellerCenterFromShopList:{section:"",type:"visit_seller_center"},clickBackChatFromShopList:{section:"",type:"view_message"},clickShopHeadStatus:{section:"",type:"shop_head_status"},viewPage:{section:"",type:""},translationShowOriginal:{section:"",type:"show_original"},translationTryAgain:{section:"",type:"try_again"},clickOrdersInToolbar:{section:"",type:"orders_button"},clickProductsInToolbar:{section:"",type:"products_button"},clickMessageShotrtcutsInToolbar:{section:"",type:"message_shortcuts_button"},clickSearchNameResult:{section:"",type:"search_name_result"},clickSearchName:{type:"search_name"},impressionChatIcon:{type:"chat_icon"},clickChatIcon:{type:"chat_icon"},clickToWebchatButton:{type:"to_webchat_button"},clickFoldButton:{type:"fold_button"},clickUnFoldButton:{type:"unfold_button"},clickCloseButton:{type:"close_button"}}));function gT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var yT,bT=null,RT=function(e){e&&(bT=e)},CT=null,DT=function(){var t,r;if(t=(0,R.checkIsScChat)(),window.BITrack)CT=window.BITrack;else{var n={appId:t?1:0,fetch:U(),source:"pc",platform:"pc",ua:navigator?navigator.userAgent||navigator.vendor:"",getCookies:ge().get,sendEventByInterval:!0,enableAutoTrack:!1};r=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?gT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({locale:(0,R.getRuntimeRegion)(),env:(0,R.getRuntimeServer)()},n),yT=new hT(Bv({},r,{v2ToV3ConverterPromise:function(e){return[e]},preProcess:function(e,t){return t}})),CT=yT.sync.bind(yT)}},PT=function(e){var t=e.trackerName,r=e.data,n=e.operation,o=void 0===n?R.TrackerOperation.CLICK:n,a=e.page,c=e.shopId;CT||DT();var s=function(e){var t=e.data,r=e.operation,n=e.page,o=e.shopId,a=mT[e.trackerName],c=a.section,s=void 0===c?"":c,i=a.type,u=void 0===i?"":i,l=bT||{},p=l.shop_id,d=void 0===p?"":p,f=l.role,E=void 0===f?"":f,_=l.id,S=void 0===_?"":_,h=Object.assign({},{shopid:d||o,account_type:E||"shopee_user",account_id:S},t);return{operation:r,page_section:s,target_type:u,page_type:n||"minichat_page",data:r===R.TrackerOperation.IMPRESSION?{viewed_objects:[h]}:h}}({trackerName:t,data:r,operation:o,page:a,shopId:c});CT({data:{type:"v3",timestamp:Date.now(),info:s}})},IT=[],AT=function e(t){for(;(t.timeRemaining()>5||t.didTimeout)&&IT.length;){var r=IT.shift();PT(r)}IT.length&&ot(e,{timeout:200})},wT=function(e){IT.push(e),ot(AT,{timeout:200})},NT=[];function xT(e){if((e.timeRemaining()>5||e.didTimeout)&&NT.length){var t=x(NT);NT=[],F.store.dispatch(Ah({reportTask:t}))}NT.length&&ot(xT,{timeout:200})}var kT,UT=function(e){var t;(t=NT).push.apply(t,x(e)),ot(xT,{timeout:200})},MT=function(e){return e.startsWith("https://")||e.startsWith("http://")?e:"https://".concat(e)},LT=function(e){return"https://".concat((0,R.getMallUrl)((0,R.getRuntimeRegion)())).concat(e)},jT=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.order_id,n=t.return_id;switch(e){case"order_detail_page":case"shipping_info_page":case"spl_landing_page":return LT("/user/purchase/order/".concat(r));case"my_voucher_page":return LT("/user/voucher-wallet");case"topay_order_detail_page":return LT("/user/purchase?type=9");case"drc_discuss_page":return"https://".concat((0,R.getSellerCenterUrl)((0,R.getRuntimeRegion)()),"/portal/sale/return/").concat(n);case"change_mobile_number_page":return LT("/user/account/profile");case"request_order_return_page":case"buyer_order_return_page":case"upload_evidence_page":return LT("/user/purchase?type=8");case"return_refund_detail_page":return LT("/return/detail/orderid/".concat(r,"?__mobile__=1"))}};function GT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function FT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?GT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e[e.unpaid=1]="unpaid",e[e.to_ship=2]="to_ship",e[e.shipping=3]="shipping",e[e.completed=4]="completed",e[e.cancelled=5]="cancelled"}(kT||(kT={}));var HT=function(e,t){return(0,R.cleanOrder)(FT(FT({},e),{},{status:kT[e.order_status],products_count:e.item_count,created_at:1e3*e.create_time,serial_number:e.order_sn,estimated_escrow:e.seller_estimated_escrow/1e5,total_price:e.buyer_pay_amount/1e5}),t,!0)},VT=function(e){var t;return{checkout_id:e.checkout_id,order_sn:e.order_sn,total_price:e.default_price,currency:e.currency,order_status:String(e.order_status),item_image:(null===(t=e.items)||void 0===t?void 0:t.map((function(e){return null==e?void 0:e.image[0]})))||[e.image],list_type:e.list_type,has_request_refund:e.has_request_refund,buyer_pay_amount:e.buyer_pay_amount,seller_estimated_escrow:e.seller_estimated_escrow,shop_id:e.shop_id,order_id:e.order_id}};function BT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function YT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?BT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var QT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SG",t=arguments.length>1?arguments[1]:void 0,r=void 0!==t&&!t;return"TW"!==e||r?R.Currencies[e]:"NT$"},qT=function(e,t){return YT(YT({},e),function(e,t){var r=e.original_prices,n=e.actual_prices,o=b(r.map((function(r){return(0,R.formatPrice)(r,e.country,{},t)})),2),a=o[0],c=o[1],s=b(n.map((function(r){return(0,R.formatPrice)(r,e.country,{},t)})),2),i=s[0],u=s[1],l=a===c?a:"".concat(a," - ").concat(c),p=i===u?i:"".concat(i," - ").concat(u),d=a.includes("NaN")||i.includes("NaN");return{original_price_string:d||l===p?"":l,actual_price_string:d?"".concat(QT(e.country,t),"???"):p,storedTimestamp:Date.now()}}(e,t))};function WT(e){return function(){var t=Array.prototype.slice.call(arguments);return e.memoize=e.memoize||{},t in e.memoize?e.memoize[t]:e.memoize[t]=e.apply(this,t)}}})(),I})(),e.exports=n(r(82677),r(26842),r(94301),r(28366),r(58518),r(53053),r(36808),r(6222),r(68214),r(52153),r(59065),r(67677),r(58397),r(98282),r(34857),r(20573),r(847),r(17311),r(46583),r(46811),r(31479),r(16392),r(94633),r(77217),r(87766),r(47190))},26842:function(e,t,r){var n;n=(e,t,r,n)=>(()=>{var o={757:(e,t,r)=>{e.exports=r(666)},470:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,t:()=>u});var n=r(661),o=r.n(n),a=r(547),c=!1,s=function(e,t){c=!0;var r=t||(0,a.CE)();o().init({lng:r,fallbackLng:r,defaultNS:"common",keySeparator:!1,debug:!1,resources:e&&e.resources||{},interpolation:{prefix:"{",suffix:"}",escapeValue:!1},react:{wait:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"}})},i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common";c||s({resources:{}},e),o().changeLanguage(e),o().addResourceBundle(e,r,t,!0,!0)},u=o().t.bind(o())},547:(e,t,r)=>{"use strict";r.d(t,{An:()=>F,CE:()=>K,Db:()=>z,E3:()=>D,Ey:()=>P,Fy:()=>V,Ht:()=>R,I7:()=>U,I9:()=>J,IE:()=>Q,Jy:()=>N,L6:()=>W,Ll:()=>k,Od:()=>M,S1:()=>i,S8:()=>b,Vm:()=>C,X7:()=>q,Y8:()=>h,YH:()=>j,dV:()=>x,jz:()=>X,k2:()=>G,nr:()=>m,qk:()=>y,r:()=>Y,u7:()=>A,wK:()=>I,xC:()=>L,z$:()=>S});var n,o,a,c,s={sg:"en",ph:"en",tw:"zh-Hant",my:"ms-MY",th:"th-TH",vn:"vi-VN",id:"id-ID",br:"pt-BR",in:"hi",cn:"zh-CN",mx:"es-MX",co:"es-CO",cl:"es-CL",ar:"es-AR",pl:"pl",es:"es-ES",fr:"fr",us:"en",kr:"en"},i=function(e,t,r){n=e.toLowerCase(),o="liveish"===t?"live-test":"stable"===t?"test-stable":t,a=r,c=s[n]||"en"},u=["my","br","mx","co","ar"],l=["id","th"],p=["us"],d=function(e){return u.includes(e)?"com.".concat(e):l.includes(e)?"co.".concat(e):p.includes(e)?"com":e},f=function(e){return"tw"===e?"xiapi":e.toLowerCase()},E=function(e){return d(e)},_=function(){return"live"===o?"shopee":"".concat(o,".shopee")},S=function(){return"cn"===n},h=function(){return"kr"===n};function O(){return v()&&!S()}function v(){var e=window.location.hostname;return e&&e.includes("cn")}var T=function(e,t){return"seller"===e?"vn"!==t||O()?"seller":"banhang":e},m=function(e,t){var r=t?t.toLowerCase():n;return"".concat(T(e,r),".").concat(f(r),".").concat(_(),".").concat("cn")},g=function(e,t){var r,a=t?t.toLowerCase():n;return O()?m(e,a):"".concat(T(e,a),".").concat((r=window.location.hostname,r&&r.includes("shopeebrasil")?"live"===o?"shopeebrasil":"".concat(o,".shopeebrasil"):_()),".").concat(E(a))},y=function(e){return g("seller",e)},b=function(){return"live"===o?"seller.shopee.cn":"seller.".concat(o,".shopee.cn")},R=function(){return"live"===o?"seller.shopee.kr":"seller.".concat(o,".shopee.kr")},C=function(){return"".concat(y(),"/webchat/api")},D=function(){return"".concat(y(),"/api")},P=function(){return g("seller-push-ws")},I=function(){return g("chat-ws")},A=function(e){var t=e?e.toLowerCase():n;return"cn"!==t&&"kr"!==t||(t="my"),v()?"".concat(f(t),".").concat("live"===o?"":"".concat(o,".")).concat("xiapibuy.com"):"".concat(_(),".").concat(E(t))},w=["sg","my","th","ph","vn","id","tw","br"],N=function(e){var t=e?e.toLowerCase():n;if(S())return"https://s-cf-sg.shopeesz.com/file/";if(h())return"https://cf.shopee.sg/file/";var r=w.includes(t);return O()&&r?"https://s-cf-".concat(t,".shopeesz.com/file/"):"https://cf.shopee.".concat(d(t),"/file/")},x=function(e){var t=e?e.toLowerCase():n;return"tw"===t&&v()?"https://cvf.shopee.cn/file/":"https://cvf.shopee.".concat(d(t),"/file/")},k=function(e){var t=e?e.toLowerCase():n,r="test-stable"===o?"staging":o;return"".concat(v()?"deo.shopeesz.com":"deo.shopeemobile.com","/shopee").concat("live"===o?"":"/test","/shopee-sticker-").concat(r,"-").concat(t)},U=function(){return"https://subaccount.".concat(_(),".com/")},M=function(){return"https://deo.shopeemobile.com/shopee/shopee-seller-live-".concat(S()||h()?"sg":n,"/downloads/")},L=function(){return"https://".concat(g("seller"),"/webchat/conversations")},j=function(){return"https://".concat(g("seller"),"/webchat")},G=function(){var e="test-stable"===o?"stable":o;return"https://deo.".concat(O()?"shopeesz":"shopeemobile",".com/shopee/shopee-seller-").concat(e,"-").concat(n,"/")},F={sg:"https://help.shopee.sg/sg/s/article/What-happens-if-I-ve-accumulated-Penalty-Points-1542975961836",my:"https://help.shopee.com.my/my/s/article/What-is-Shopee-s-Seller-Penalty-Points-system-1542971633226",th:"https://help.shopee.co.th/th/s/article/%E0%B8%A3%E0%B8%B0%E0%B8%9A%E0%B8%9A%E0%B8%84%E0%B8%B0%E0%B9%81%E0%B8%99%E0%B8%99%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%9B%E0%B8%A3%E0%B8%B0%E0%B8%9E%E0%B8%A4%E0%B8%95%E0%B8%B4%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%99%E0%B8%84%E0%B9%89%E0%B8%B2%E0%B8%84%E0%B8%B7%E0%B8%AD%E0%B8%AD%E0%B8%B0%E0%B9%84%E0%B8%A3-1542967300368",tw:"https://help.shopee.tw/tw/s/article/%E5%A6%82%E6%9E%9C%E7%B4%AF%E7%A9%8D%E4%BA%86%E8%A8%88%E5%88%86-%E8%B3%A3%E5%AE%B6%E6%9C%83%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2%E7%9A%84%E9%99%90%E5%88%B6-1542986467060",vn:"https://banhang.shopee.vn/edu/article/237",ph:"https://help.shopee.ph/ph/s/article/How-does-the-Seller-Penalty-Points-system-work-1542963021404",id:"https://seller.shopee.co.id/edu/article/1762",in:"https://seller.shopee.in/edu/courseDetail/482"},H={sg:"7a48024995c847d9a4586bab9fde57a7",id:"888adc066bf3426a8c70227470281818",mx:"e58cb9c620f54aec9e18a01632c35c05",br:"d75e2dbb49594bd19d1ea83485339a45",co:"a503e7f7bc4849c0824985ddd9659d33",cl:"5484e709da71430cb8980abc5cef14f0",my:"b7a7ff2afd484f1dbddb3a922c7e90e7",th:"38e4b86fd0c04ae3b2c9200c7ea9c89e",ph:"bafd4812311d417c981d2690cda870bf",vn:"9e0e87184cf14246aabe6af0d78b2aa9",tw:"1bfa4a9834204eccb62858d0e2d9e083",pl:"3e8f2872acee4938951fa12e61f5b3f6",es:"756295fca7a04f0cb25cf51821ced04f"},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sg",t=H[e];return t?"https://help.shopee.".concat(d(e),"/portal/webform/").concat(t):"https://help.shopee.".concat(d(e),"/s/contactusform")},B={sg:"cc5c96e6af6140b6920f13c6fa67ddd1",my:"2e11e4a4fd554f4aaba90814987e8d3f",th:"fab4029ae0614fdd96021ba21bdd5d56",tw:"6331df0cc3e5409c85b5f3331e385a5c",vn:"1214504dda894592a1c7ef4236912f4d",ph:"bafd4812311d417c981d2690cda870bf",id:"13a6214dacf54eeb83cea7110c6adde6",br:"23b02efbc1254721ab69549e442a6466",mx:"e58cb9c620f54aec9e18a01632c35c05",co:"a503e7f7bc4849c0824985ddd9659d33",cl:"5484e709da71430cb8980abc5cef14f0",ar:"16e6e483bc5244d9946daf570c954dc3",pl:"3e8f2872acee4938951fa12e61f5b3f6",es:"756295fca7a04f0cb25cf51821ced04f"},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sg",t="";return t=["tw","vn"].includes(e)?"https://cs.shopee.".concat(d(e)):"https://help.shopee.".concat(d(e)),"".concat(t,"/portal/webform/").concat(B[e])},Q=function(){return o},q=function(){return n},W=function(){return a},K=function(){return c},z=function(e,t,r){var n=e||{},o=n.status,a=n.checkout_id,c=n.order_id,s=n.id,i=n.shop_id;return"unpaid"===o?"https://".concat(A(r),"/user/purchase/checkout/").concat(a,"/?shopid=").concat(i||t):"https://".concat(A(r),"/user/purchase/order/").concat(c||s,"/?shopid=").concat(i||t)},J=function(e,t,r,n){window.open("https://".concat(e?A(t):A(),"/product/").concat(n,"/").concat(r,"/"))},X=function(){return v()?"https://deo.shopeesz.com/shopee/":"https://deo.shopeemobile.com/shopee/"}},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof S?t:S,a=Object.create(o.prototype),c=new P(n||[]);return a._invoke=function(e,t,r){var n=p;return function(o,a){if(n===f)throw new Error("Generator is already running");if(n===E){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=R(c,r);if(s){if(s===_)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=E,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var i=l(e,t,r);if("normal"===i.type){if(n=r.done?E:d,i.arg===_)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n=E,r.method="throw",r.arg=i.arg)}}}(e,r,c),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",E="completed",_={};function S(){}function h(){}function O(){}var v={};v[a]=function(){return this};var T=Object.getPrototypeOf,m=T&&T(T(I([])));m&&m!==r&&n.call(m,a)&&(v=m);var g=O.prototype=S.prototype=Object.create(v);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(o,a,c,s){var i=l(e[o],e,a);if("throw"!==i.type){var u=i.arg,p=u.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(p).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(i.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return _;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,_;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,c=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}return{next:A}}function A(){return{value:t,done:!0}}return h.prototype=g.constructor=O,O.constructor=h,h.displayName=i(O,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,i(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),b.prototype[c]=function(){return this},e.AsyncIterator=b,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new b(u(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,s,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],s=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var i=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(i&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},994:t=>{"use strict";t.exports=e},602:e=>{"use strict";e.exports=t},661:e=>{"use strict";e.exports=r},349:e=>{"use strict";e.exports=n}},a={};function c(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return o[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{"use strict";c.r(s),c.d(s,{AVAILABLE_IMAGE_TYPE:()=>Re,AVAILABLE_VIDEO_EXT:()=>De,AVAILABLE_VIDEO_TYPE:()=>Ce,AccountType:()=>pe,AgentOnlineStatus:()=>b,AlertType:()=>Me,AllProductFilters:()=>oe,ApiMessageTypes:()=>qn,BATCH_OPERATE_MAX_SELECTION:()=>Q,BatchOperates:()=>q,CHAT_MIN_TEXT_BOX_HEIGHT:()=>S,ChatBotInteractionType:()=>ke,ChatBotMessageContentSource:()=>Ue,ChatbotFromType:()=>W,ConversationSource:()=>X,ConversationTab:()=>J,ConversationTypeEnum:()=>U,Currencies:()=>r,CustomShareEvent:()=>He,DataFetchStatus:()=>D,DiscountType:()=>M,EvaluationErrorCode:()=>u,EvaluationStatus:()=>i,FeedbackInfo:()=>_,FetchMessageStatus:()=>v,HALF_HOUR:()=>ua,INVALID_PRICE:()=>ft,LS:()=>dr,LogisticsLog:()=>me,LogisticsStatus:()=>ge,MAX_IMAGE_SIZE:()=>Ie,MAX_MEDIA_NUM:()=>d,MAX_SHOWING_ITEM_COUNT:()=>ce,MAX_VIDEO_SIZE:()=>Ae,MINI_MIN_TEXT_BOX_HEIGHT:()=>h,MessageErrorCode:()=>a,MessageFillStatus:()=>O,MessageOption:()=>e,MessageSendStatus:()=>o,MessageShortcutGroupType:()=>f,MessageSource:()=>$,MessageStatus:()=>p,MessageTypes:()=>n,MessagesRelatedKey:()=>T,NO_ACCESS_KEY:()=>we,ONE_DAY:()=>la,OfferStatus:()=>N,OperationStatus:()=>P,OrderCancelReason:()=>he,OrderItemStatus:()=>Ee,OrderListTabs:()=>ee,OrderListType:()=>ve,OrderPayMethod:()=>_e,OrderStatusExt:()=>Oe,OrderTabStatus:()=>de,OrderTabStatusIndex:()=>fe,OrderType:()=>Te,PERMISSION_DELETE_MESSAGE:()=>E,PredictionType:()=>K,ProductFiltersMap:()=>ne,ProductPromotionLabel:()=>se,ProductStatusUsingNumber:()=>te,ProductStatusUsingString:()=>re,PromotionStatus:()=>l,ReportType:()=>z,RewardType:()=>L,SECOND_TO_MILLISECOND:()=>ia,SERVER_ERROR_CAPACITY:()=>be,SERVER_ERROR_VALID_CONV_COUNT:()=>ye,SPECIAL_VIDEO_MIME_TYPE:()=>Pe,SellerCancelOrderReason:()=>Se,ShareDataType:()=>Ve,SocketConnectionStatus:()=>Y,SocketToAlertType:()=>Le,StorageKey:()=>Fe,SubAccountRole:()=>le,SubAccountShopStatus:()=>ue,SwitchStatus:()=>A,SystemProductFilters:()=>ae,TrackerOperation:()=>xe,TranslationFeedbackQuality:()=>t,TranslationStatus:()=>w,UnreadSource:()=>Z,UserLoginStatus:()=>I,VIEW_DETAIL_KEY:()=>Ne,VoucherOperateType:()=>B,VoucherStamp:()=>H,VoucherStatus:()=>F,VoucherTab:()=>j,VoucherTabIndex:()=>G,VoucherType:()=>V,WorkstationCommonKey:()=>je,WorkstationProductCommonKey:()=>Ge,WorkstationProductPanel:()=>ie,camelCase:()=>nt,cancelOrderPolicy:()=>Fn.An,capitalizeFirstLetter:()=>Bt,changeLanguage:()=>Da.D,checkEmptyObject:()=>Ye,checkEntryGuide:()=>ur,checkHeaderGuide:()=>ir,checkIsScChat:()=>Ke,checkMassToolGuide:()=>or,checkObjectId:()=>Qe,checkProductDeleted:()=>oa,checkProductInvalid:()=>sa,checkRegionFilterGuide:()=>sr,checkReplyGuide:()=>cr,checkSearchGuilde:()=>ar,checkTranslationGuilde:()=>rr,checkTranslationSettingsGuide:()=>nr,cleanOrder:()=>ta,convertBase64ToBlob:()=>ot,countingDown:()=>da,customizeTime:()=>yt,debounce:()=>Jt,deepMerge:()=>at,downloadVideoWithBlob:()=>Gn,encode:()=>Ze,escapeRegex:()=>co,fillWithZero:()=>fa,formatDiscount:()=>Sa,formatMessageTime:()=>Dt,formatPrice:()=>Et,formatTransifyKeyWithNumber:()=>Mt,getApiServer:()=>Fn.Vm,getBrowserInfo:()=>jt,getCDNUrl:()=>Fn.jz,getCNSCSellerCenterUrl:()=>Fn.S8,getCSChatServer:()=>Fn.wK,getCancelOrderDisplayStatus:()=>Yo,getCancelReason:()=>Bo,getChatBotParams:()=>Tn,getCrmPreviewParams:()=>mn,getCurrentTimestampString:()=>Ea,getCustomMessageText:()=>on,getFileServer:()=>Fn.Jy,getFormattedData:()=>Mn,getFormattedTime:()=>Rt,getHasSameSourceAndTarget:()=>On,getIsMessageShortcutKeywordValid:()=>no,getIsMessageValidToDelete:()=>zn,getItem:()=>fr,getKRSCSellerCenterUrl:()=>Fn.Ht,getLocaleText:()=>hn,getLogisticsLog:()=>Xo,getMallOrderUrl:()=>Fn.Db,getMallUrl:()=>Fn.u7,getMediaData:()=>Nn,getMessageIsRatecard:()=>Sn,getMessageIsSend:()=>Jn,getMessageShortcutsKeywords:()=>oo,getOrderPayment:()=>fo,getOrderStatusTransifyKey:()=>po,getPayMethod:()=>No,getProductStatusTransifyKey:()=>na,getPushServer:()=>Fn.Ey,getReplyTrackerMessageType:()=>Wn,getRuntimeLocale:()=>Fn.CE,getRuntimeRegion:()=>Fn.X7,getRuntimeServer:()=>Fn.IE,getRuntimeVersion:()=>Fn.L6,getSCApiServer:()=>Fn.E3,getSellerCenterUrl:()=>Fn.qk,getServiceLocale:()=>Kt,getShopeeCNUrl:()=>Fn.nr,getShopeeCustomerService:()=>Fn.Fy,getSpammerPolicyUrl:()=>Fn.r,getTranslateFileServer:()=>Fn.k2,getTranslationLocale:()=>qt,getUrlParam:()=>Lt,getVideoServer:()=>Fn.dV,getVoucherCondition:()=>ma,getVoucherTimeText:()=>ga,getWebChatPureUrl:()=>Fn.YH,getWebChatUrl:()=>Fn.xC,goToPcMall:()=>Fn.I9,greaterThan:()=>We,handleBigNumber:()=>ct,handleDisplayTranslation:()=>ha,handleReportItem:()=>Ca,handleReportItems:()=>Ra,hasSelectShop:()=>Je,hasTargetMessageOption:()=>fn,hasTargetMessageOptions:()=>_n,init:()=>Fn.S1,isAbnormalProduct:()=>aa,isDeletedMessage:()=>En,isProductSoldout:()=>ca,isValidBrowser:()=>ze,isValidMessageStatusToReply:()=>Qn,isValidMessageTypeToReply:()=>Vn,isVisitingCNSC:()=>Fn.z$,isVisitingKRSC:()=>Fn.Y8,makeSecurityTipsMessage:()=>vn,memFn:()=>$t,persistLimit:()=>Sr,previewMessage:()=>dn,previewWebview:()=>an,redirectionWithAccess:()=>zt,removeItem:()=>_r,removeItemFromArray:()=>st,searchMessageShortcuts:()=>ao,setItem:()=>Er,simpleEqualCheck:()=>qe,stickersURI:()=>Fn.Ll,subAccountURL:()=>Fn.I7,throttle:()=>Xt,transPrice:()=>_t,transformVideoTime:()=>Ct,unifyLocale:()=>Qt,updateTimeLocale:()=>Tt,validateDuration:()=>In,validateMediaDuration:()=>Pn,validateTypeAndSize:()=>jn,videoURL:()=>Fn.Od,voucherIsExpired:()=>va,voucherIsStockout:()=>Ta});var e,t,r={SG:"$",TH:"",VN:"",ID:"Rp",TW:"$",MY:"RM",PH:"",BR:"R$",IN:"",CN:"",MX:"$",CO:"$",CL:"$",AR:"$",PL:"z",ES:"",FR:"",KR:"",US:"$"},n={MSG_TYPE_TEXT:"text",MSG_TYPE_IMAGE:"image",MSG_TYPE_OFFER:"offer",MSG_TYPE_PRODUCT:"product",MSG_TYPE_ORDER:"order",MSG_TYPE_STICKER:"sticker",MSG_TYPE_NOTIFICATION:"notification",MSG_TYPE_WEBVIEW:"webview",MSG_TYPE_RATE_CARDS:"rate_cards",MSG_TYPE_VOUCHER:"voucher",MSG_TYPE_FEED_STORY:"feed_story",MSG_TYPE_ITEM_LIST:"item_list",MSG_TYPE_SHOPPING_CART:"shopping_cart",MSG_TYPE_FAQ:"faq",MSG_TYPE_FAQ_QUESTION:"faq_question",MSG_TYPE_FAQ_FEEDBACK:"faq_feedback",MSG_TYPE_FAQ_LIVEAGENT:"faq_liveagent",MSG_TYPE_FAQ_UNSUPPORTED:"faq_unsupported",MSG_TYPE_FAQ_FEEDBACK_PROMPT:"faq_feedback_prompt",MSG_TYPE_FAQ_LIVEAGENT_PROMPT:"faq_liveagent_prompt",MSG_TYPE_UNTATED_ORDER_REMINDER:"unrated_order_reminder",MSG_TYPE_FLASH_SALE:"flash_sale",MSG_TYPE_BUNDLE_DEAL:"bundle_deal",MSG_TYPE_BUNDLE_MESSAGE:"bundle_message",MSG_TYPE_OPTION_PACK:"option_pack",MSG_TYPE_SELECTED_OPTION:"selected_option",MSG_TYPE_ADD_ON_DEAL:"add_on_deal",MSG_TYPE_VIDEO:"video",MSG_TYPE_IMAGE_WITH_TEXT:"image_with_text",MSG_TYPE_RATE_CARD:"rating_card",MSG_TYPE_NEW_FAQ:"new_faq",MSG_TYPE_FAQ_CATEGORY_CHOICE:"faq_category_choice",MSG_TYPE_FAQ_QUESTION_LIST:"faq_question_list",MSG_TYPE_FAQ_TYPE_CHOICE:"faq_type_choice",MSG_TYPE_FAQ_CATEGORY_LIST:"faq_category_list",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE:"faq_bot_request_text",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE:"faq_bot_request_order",FAQ_TYPE_BOT_RESPONSE_MESSAGE:"faq_bot_response",MSG_TYPE_SECURITY_TIPS:"security_tips"},o={SENDING:1,FAILED:2,SUCCEED:3},a={FORBIDDEN:28,LIMITING:29,CUSTOM_ERROR:42,BLACKLIST:43,CANCEL_ORDER:44,UNVERIFIED_PHONE_NUMBER:45,EXCEED_DAILY_LIMIT:26,UNTRUSTED_NETWORK:46,NEED_CAPTCHA:47,DFP_ERROR:48,SPAMMER:49,FAQ_EXPIRED:50,FAQ_SESSION_OLD:51,DEFAULT:-1},i={UNRATED:"unrated",RATED:"rated",EXPIRED:"expired",INVALID:"invalid"},u={RATED:"rating_card_rated",EXPIRED:"rating_card_expired"},l={UPCOMING:"upcoming",ONGOING:"ongoing",EXPIRED:"expired"},p={CENSORED_BLACKLIST:"censored_blacklist",NORMAL:"normal"},d=9,f={PERSONAL:1,TEAM:2},E=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER,n.MSG_TYPE_ORDER,n.MSG_TYPE_PRODUCT];!function(e){e[e.MSG_OPT_NORMAL=0]="MSG_OPT_NORMAL",e[e.MSG_OPT_AUTO_REPLY=1]="MSG_OPT_AUTO_REPLY",e[e.MSG_OPT_BLOCKED=2]="MSG_OPT_BLOCKED",e[e.MSG_OPT_CENSORED_BLACKLIST=16]="MSG_OPT_CENSORED_BLACKLIST",e[e.MSG_OPT_CENSORED_WHITELIST=32]="MSG_OPT_CENSORED_WHITELIST",e[e.MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER=64]="MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER",e[e.MSG_OPT_IGNORE_UNREAD_FOR_SENDER=128]="MSG_OPT_IGNORE_UNREAD_FOR_SENDER",e[e.MSG_OPT_INVISIBLE_FOR_RECEIVER=256]="MSG_OPT_INVISIBLE_FOR_RECEIVER",e[e.MSG_OPT_INVISIBLE_FOR_SENDER=512]="MSG_OPT_INVISIBLE_FOR_SENDER",e[e.MSG_OPT_ADS=1024]="MSG_OPT_ADS",e[e.MSG_OPT_FAQ_SESSION=2048]="MSG_OPT_FAQ_SESSION",e[e.MSG_OPT_TRIGGER_FAQ=4096]="MSG_OPT_TRIGGER_FAQ",e[e.MSG_OPT_SOCIAL_MESSAGE=8192]="MSG_OPT_SOCIAL_MESSAGE",e[e.MSG_OPT_OFFWORK_AUTOREPLY=16384]="MSG_OPT_OFFWORK_AUTOREPLY",e[e.MSG_OPT_CANCELORDER_WARNING_SENT=32768]="MSG_OPT_CANCELORDER_WARNING_SENT",e[e.MSG_OPT_CANCELORDER_WARNING_RETRACT=65536]="MSG_OPT_CANCELORDER_WARNING_RETRACT",e[e.MSG_OPT_CANCELORDER_WARNING_NOT_SEND=66496]="MSG_OPT_CANCELORDER_WARNING_NOT_SEND",e[e.MSG_OPT_CHATBOT_SESSION=131072]="MSG_OPT_CHATBOT_SESSION",e[e.MSG_OPT_TRIGGER_CHATBOT=262144]="MSG_OPT_TRIGGER_CHATBOT",e[e.MSG_OPT_PRIVATE_MESSAGE=524288]="MSG_OPT_PRIVATE_MESSAGE",e[e.MSG_OPT_SILENT_FOR_SENDER=1048576]="MSG_OPT_SILENT_FOR_SENDER",e[e.MSG_OPT_DELETE=2097152]="MSG_OPT_DELETE",e[e.MSG_OPT_RECALL=8388608]="MSG_OPT_RECALL"}(e||(e={})),function(e){e[e.bad=1]="bad",e[e.average=2]="average",e[e.good=3]="good"}(t||(t={}));var _={IMPROVED:1,WRONG:2,OFFENSIVE:4},S=156,h=88,O={FILLED:"filled",FILLING:"filling",FAILED:"failed"},v={PRELOADING:"preloading",FETCHING:"fetching"},T={REFER:"refer",TIME_NOW:"timeNow",PRELOADED:"preloaded"};function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b,R,C={NORMAL:"normal",PENDING:"pending",SUCCEED:"succeed",FAILED:"failed"},D=y(y({},C),{},{INIT_PENDING:"pendingInit",INIT_FAILED:"failedInit",TEMPORY_ERROR:"temporyError"}),P=y(y({},C),{},{BLACKLIST_ERROR:"blacklistError",INTERNAL_SERVER_ERROR:"internalServerError"}),I={SUCCEED:"succeed",FORBIDDEN_ERROR:"forbidden",INTERNAL_SERVER_ERROR:"internalServerError",LOGOUT:"logout"},A={ENABLED:"enabled",DISABLED:"disabled",NO_PERSSION:"no_permission"},w={SUCCEED:"succeed",FAILED:"failed",HISTORY:"history",SHOW:"show",PENDING:"pending"},N={PENDING:"pending",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled"};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e[e.OFFLINE=-1]="OFFLINE",e[e.ONLINE=0]="ONLINE",e[e.HANGUP=1]="HANGUP"}(b||(b={}));var U,M={AMOUNT:"amount",PERCENTAGE:"percentage"},L={DISCOUNT:"discount",COIN_CASHBACK:"coin_cashback"},j={ONGOING:"ongoing",SCHEDULED:"scheduled"},G=(m(R={},j.ONGOING,0),m(R,j.SCHEDULED,1),R),F=k(k({},j),{},{FINISHED:"finished"}),H={USED:"used",EXPIRED:"expired",REDEEM:"redeem"},V={ITEM:"item",SHOP:"shop"},B={DETAILS:"details",CLAIM:"claim",USE:"use"},Y={CONNECT:"connect",CONNECT_ERROR:"connect_error",DISCONNECT:"disconnect",RECONNECT_ATTEMPT:"reconnect_attempt",RECONNECT_ERROR:"reconnect_error",RECONNECTING:"reconnecting",RECONNECT:"reconnect"},Q=50,q={PIN:"pin",UNPIN:"unpin",MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",FORWARD:"forward"};!function(e){e[e.Normal=0]="Normal",e[e.Agent=1]="Agent"}(U||(U={}));var W,K,z,J={CUSTOMER:"customer",AGENT:"agent"},X={FILTER:1,SHOP:2,SHOP_LIST:3,SYNC:4,QUEUE:5,FAKING:6,LATEST:7,OLDER:8,DELETE:9,LOAD_MORE:10,SOCKET:11,PRELOAD:12},$={VIEW:1,FETCH:2,CLEAR_SEARCH:3,SHOW:4,SYNC:5,AUTO:6,SEND:7,UPDATE:8,CATCH:9},Z={PRELOAD:1,QUEUE:2,RECEIVE_TOTAL:3,RECEIVE_SINGLE:4,SYNC:5},ee={MINE:"mine",HIS:"his"},te={SOLD_OUT:-1,DELETED:0,NORMAL:1,REVIEWING:2,BANNED:3,INVALID:4,INVALID_HIDE:5,OFFENSIVE_HIDE:6,AUDITING:7,NORMAL_UNLIST:8,DELISTED:9},re={DELETED:"deleted",BANNED:"banned",NORMAL:"normal",SOLD_OUT:"sold_out",DELISTED:"delisted"},ne={sales:"sold",recent:"mtime"},oe={SALES:"sales",RECENT:"recent"},ae={RELATED:"related",TOP_RATED:"top_rated",FREQUENTLY_BOUGHT_TOGETHER:"frequently_bought_together"},ce=4,se={ADD_ON_DEAL:"add_on_deal",BUNDLE_DEAL:"bundle_deal",CAMPAIGN:"campaign",FLASH_SALES:"flash_sales",GIFT_WITH_PURCHASE:"gift_with_purchase",SHOW_DISCOUNT:"show_discount"},ie={ALL:"All",SELLER_RECOMMENDATION:"Seller_Recommendation",SYSTEM_RECOMMENDATION:"System_Recommendation"},ue={UNACCESSIBLE:"unaccessible",NONE:"none",UNALLOCATED:"unallocated"},le={MAIN_SUBACCOUNT:"main_subaccount",ADMIN_SUBACCOUNT:"admin_subaccount",NORMAL_SUBACCOUNT:"normal_subaccount"},pe={SELLER:"seller",SUBACCOUNT:"subaccount"},de={ALL:"all",UNPAID:"unpaid",TO_SHIP:"to_ship",SHIPPING:"shipping",COMPLETED:"completed",CANCELLED:"cancelled",REFUND:"refund"},fe={all:0,unpaid:1,to_ship:2,shipping:3,completed:4,cancelled:5,refund:6},Ee={DELETE:0,UNRATED:1,RATED:2,RETURNED:3,RETURN_RATED:4,CANCEL:5},_e={PAY_CREDIT_CARD:1,PAY_BANK_TRANSFER:2,PAY_OFFLINE_PAYMENT:3,PAY_IPAY88:4,PAY_FREE:5,PAY_COD:6,PAY_ESUN:7,PAY_BILL_PAYMENT:8,PAY_INDOMARET:13,PAY_KREDIVO:14,PAY_NICEPAY_CC:15,PAY_AIRPAY:18,PAY_SHOPEE_WALLET:20,PAY_SHOPEE_WALLET_V2:27,PAY_AKULAKU:21,PAY_INSTALLMENT:23,PAY_IBANKING:29},Se=[{cancel_reason_code:1,transify_key:"common.order.cancel_reason.out_of_stock"},{cancel_reason_code:3,transify_key:"common.order.cancel_reason.undeliverable_area"}],he={NONE:0,OUT_OF_STOCK:1,CUSTOMER_REQUEST:2,UNDELIVERABLE_AREA:3,CANNOT_SUPPORT_COD:4,LOST_PARCEL:5,SYSTEM_UNPAID:100,SYSTEM_UNDERPAID:101,SYSTEM_PAYMENT_REJECTED:102,LOGISTICS_REQUEST_CANCELED:200,LOGISTICS_PICKUP_FAILED:201,LOGISTICS_DELIVERY_FAILED:202,LOGISTICS_COD_REJECTED:203,BACKEND_LOGISTICS_NOT_STARTED:204,BACKEND_ESCROW_TERMINATED:300,BACKEND_INACTIVE_SELLER:301,BACKEND_SELLER_DID_NOT_SHIP:302,RULE_ENGINE_AUTO_CANCEL:400},Oe={ORDER_EXT_DELETE:0,ORDER_EXT_UNPAID:1,ORDER_EXT_PAID:2,ORDER_EXT_SHIPPED:3,ORDER_EXT_COMPLETED:4,ORDER_EXT_INVALID:6,ORDER_EXT_CANCEL_PROCESSING:7,ORDER_EXT_CANCEL_COMPLETED:8,ORDER_EXT_RETURN_PROCESSING:9,ORDER_EXT_RETURN_COMPLETED:10,ORDER_EXT_ESCROW_PAID:11,ORDER_EXT_ESCROW_CREATED:12,ORDER_EXT_ESCROW_PENDING:13,ORDER_EXT_ESCROW_VERIFIED:14,ORDER_EXT_ESCROW_PAYOUT:15,ORDER_EXT_CANCEL_PENDING:16},ve={PAID:1,UNPAID:2,COMPLETED:3,CANCELLED:4,SHIPPED:5,ALL:6,TOSHIP:7,TORECEIVE:8,TOPAY:9,TOSHIP_UNPROCESSED:10,TOSHIP_PROCESSED:11,RETURN:12,GROUP_BUY_ALL:13,GROUP_BUY_ONGOING:14,GROUP_BUY_COMPLETED:15,GROUP_BUY_INVALID:16},Te={UNKNOWN:0,SIMPLE:1,ESCROW:2},me={ORDER_DETAIL_SHIPPING_CONFIRMED:2,ORDER_DETAIL_SHIPPED:4,ORDER_DETAIL_RECEIVED:5,ORDER_DETAIL_CANCELED:6,ORDER_DETAIL_NOTIFY_SHIP:7},ge={LOGISTICS_NOT_STARTED:0,LOGISTICS_REQUEST_CREATED:1,LOGISTICS_PICKUP_DONE:2,LOGISTICS_PICKUP_RETRY:3,LOGISTICS_PICKUP_FAILED:4,LOGISTICS_DELIVERY_DONE:5,LOGISTICS_DELIVERY_FAILED:6,LOGISTICS_REQUEST_CANCELED:7,LOGISTICS_COD_REJECTED:8,LOGISTICS_READY:9,LOGISTICS_INVALID:10,LOGISTICS_LOST:11,LOGISTICS_PENDING_ARRANGE:12},ye=-1,be=0,Re=["image/png","image/jpeg","image/jpg"],Ce=["video/*",".flv",".3gp",".rm",".rmvb",".asf",".mp4",".webm"],De=["MP4","TS","FLV","WMV","ASF","RM","RMVB","MPG","MPEG","3GP","MOV","WEBM","AVI"],Pe=["application/vnd.rn-realmedia","application/vnd.rn-realmedia-vbr"],Ie=2097152,Ae=31457280,we="common.no_sc_access",Ne="conversation_detail.workstation.order_panel.manage",xe={CLICK:"click",IMPRESSION:"impression",ACTION_DRAG_VIDEO:"action_drag_video",DELETE_PREVIEW_MEDIA:"delete_preview_media",CLOSE_PREVIEW_MEDIA:"close_preview_media",ACTION_FINISH_VIDEO:"action_finish_video",VIEW:"view",ACTION_ADJUST_MESSAGE_SHORTCUT:"action_adjust_message_shortcut"},ke={MESSAGE:1001,SOLUTION:1002},Ue={HEAD_HOTQUESTION_SOURCE:1,SHORTCUT_SOURCE:2,CATEGORY_HOTQUESTION_SOURCE:3,FAQ_RECOMMEND_SOURCE:4,KB_INTENT_SOURCE:5,LIVEAGENT_RECOMMENDER_SOURCE:6};!function(e){e.LandingPage="SIPDirectChatFromChatLandingPage",e.ProductPage="SIPProductPage",e.OrderPage="SIPOrderPageFromBuyer",e.ShopPage="SIPShopPage"}(W||(W={})),function(e){e[e.Faq=0]="Faq",e[e.Intent=1]="Intent"}(K||(K={})),function(e){e[e.Categories=0]="Categories",e[e.OtherFaqType=1]="OtherFaqType",e[e.Intent=2]="Intent",e[e.Question=3]="Question",e[e.ChatWithSeller=4]="ChatWithSeller"}(z||(z={}));var Me={error:"error",success:"success",normal:"normal",warn:"warn",info:"info"},Le={pending:Me.warn,error:Me.error,resolved:Me.success},je="conversation_detail.workstation.panel",Ge="".concat(je,".product"),Fe={USERID:"__chat_userid__",LAST_ACTIVE:"last-active-time",MINI_ALERT:"mini-should-show-alert"},He={ACK:"ack",TAB_FOCUSED:"tabFocused",CALC_CONNECTIONS:"calcConnections",CLOSE_CONNECTION:"closeConnection",SHARE_API_DATA:"shareApiData"},Ve={UNREAD:"unread",UPDATE_SETTING:"updateSetting",UPDATE_OFFLINE_SETTING:"updateOfflineSetting"};function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}var Ye=function(e){return!e||0===Object.keys(e).length},Qe=function(e,t){return null===e&&null===t||(null==e?void 0:e.id)===(null==t?void 0:t.id)},qe=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},We=function(e,t){if(!e)return!1;if(!t)return!0;var r=(e+="").length,n=(t+="").length;if(r!==n)return r>n;var o=e.split(""),a=null;return o.forEach((function(e,r){"boolean"!=typeof a&&(a=parseInt(e)>parseInt(t[r])||parseInt(e)===parseInt(t[r])&&null)})),!!a},Ke=function(){var e=window.location.hostname;return["seller","banhang","localhost"].some((function(t){return e.includes(t)}))},ze=function(){try{return!("undefined"!=typeof window&&"object"===Be(window.process)&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"===Be(process.versions)&&process.versions.electron||"object"===("undefined"==typeof navigator?"undefined":Be(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}catch(e){return!0}}(),Je=function(e){return!(null==e||!e.id)};function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $e(e){return function(e){if(Array.isArray(e))return Xe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Xe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e){var t=new Uint16Array(e.length);return Array.prototype.forEach.call(t,(function(t,r,n){n[r]=e.charCodeAt(r)})),window.encodeURIComponent(window.btoa(String.fromCharCode.apply(null,new Uint8Array(t.buffer))))}var et,tt,rt,nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()}))},ot=function(e){for(var t=window.atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),o=new Uint8Array(n),a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return new window.Blob([o],{type:r})},at=function e(t,r){var n=JSON.parse(JSON.stringify(t));for(var o in r)n[o]=n[o]&&"[object Object]"===n[o].toString()?e(n[o],r[o]):r[o];return n},ct=function(e){return e>=1e3?"999+":e},st=function(e,t){var r=$e(e),n=r.indexOf(t);return n>-1&&r.splice(n,1),r},it=c(994),ut=["PL","ES","FR"],lt=function(e){return e?e.toUpperCase():"SG"},pt=function(e){var t=e.price,r=e.country,n=function(e,t){return"TW"!==e||void 0!==t&&!t?"CL"===e?"$":(0,it.getCurrencyConfig)(e).symbol||"":"NT$"}(r,e.isSCChat);if(ut.includes(r))return"".concat(n).concat(t).concat(n);var o=(0,it.getCurrencyConfig)(r).symbolPosition===it.SYMBOL_POSITION.BACK?"".concat(t).concat(n):"".concat(n).concat(t);return"MX"===r?"".concat(o," MXN"):o},dt=function(e){for(var t="",r=+e,n=["K","M","B"];r>1e3&&(t=n.shift()||"");)r/=1e3;var o=parseInt(100*+r+"")/100;return{value:r=Number.isInteger(o)?o:o.toFixed(2),unit:t}},ft="NaN",Et=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=r.withSpaces,a=void 0!==o&&o,c=r.withMinus,s=void 0!==c&&c,i=r.withUnit,u=void 0!==i&&i,l=r.withComma,p=void 0===l||l,d=lt(t),f=Number(e);if(Number.isNaN(f))return pt({price:ft,country:d,isSCChat:n});var E="",_="";if(u){var S=dt(f);E=S.unit,f=S.value}return s&&(_="-"),f=(0,it.formatCurrency)(d,f,{symbol:"",spaceBetweenSymbol:a,noSeparator:!p}),f=pt({price:f,country:d,isSCChat:n}),"".concat(_).concat(f).concat(E)},_t=function(e,t,r){return t=lt(t),pt({price:e,country:t,isSCChat:r})},St=c(602),ht=c.n(St),Ot=c(470).t,vt=new(ht()),Tt=function(e){return vt.locale.set(e)};!function(e){e.Today="today",e.Yesterday="yesterday"}(et||(et={})),function(e){e[e.Time=0]="Time"}(tt||(tt={})),function(e){e[e.sunday=0]="sunday",e[e.monday=1]="monday",e[e.tuesday=2]="tuesday",e[e.wednesday=3]="wednesday",e[e.thursday=4]="thursday",e[e.friday=5]="friday",e[e.saturday=6]="saturday"}(rt||(rt={}));var mt,gt=function(e){var t=e.value,r=e.date,n=e.suffix,o=e.prefix,a="",c="";if(o&&(a=Ot("conversation_detail.message_list.".concat(o.type))+(void 0===o.separator?"  ":o.separator)),n){var s=n.type===tt.Time?function(e){return e.format("hh:mm")}(r):"";c=(void 0===n.separator?", ":n.separator)+s}return a+t+c};!function(e){e[e.Yesterday=0]="Yesterday",e[e.Today=1]="Today",e[e.ThisMonth=2]="ThisMonth",e[e.ThisYear=3]="ThisYear",e[e.ThisWeek=4]="ThisWeek",e[e.NONE=5]="NONE"}(mt||(mt={}));var yt=function(e,t){var r=t||{},n=r.noTodayFlag,o=r.noTimeFlag,a=r.needFullFormat,c=r.onlyKeepDate,s=r.isConvPreview,i=vt.create(e);if(a)return gt({value:i.format("LHD"),date:i,suffix:{type:tt.Time}});if(c)return i.format("LHD");var u=["tw","cn"].includes(vt.locale.current),l=function(e,t){var r=new Date,n=new Date(e);if(t){var o=r-n,a=(new Date).setHours(0,0,0,0);if(o<=6048e5&&o>=r.getTime()-a+864e5)return mt.ThisWeek}if(r.getFullYear()===n.getFullYear()){if(r.getMonth()===n.getMonth()){var c=r.getDate(),s=n.getDate();return c===s?mt.Today:c-1===s?mt.Yesterday:mt.ThisMonth}return mt.ThisYear}return mt.NONE}(e,s);switch(l){case mt.Today:var p=n?void 0:{type:et.Today},d={type:tt.Time,separator:""};return gt({value:"",date:i,prefix:p,suffix:d});case mt.Yesterday:var f={type:et.Yesterday},E=o?void 0:{type:tt.Time,separator:""};return gt({value:"",date:i,prefix:f,suffix:E});case mt.ThisWeek:return Ot("common.".concat(rt[new Date(e).getDay()]));case mt.ThisMonth:case mt.ThisYear:var _=o?void 0:{type:tt.Time};return gt({value:i.format(s?u?"MM/DD":"DD/MM":"LHDS"),date:i,suffix:_});default:var S=o?void 0:{type:tt.Time};return gt({value:i.format(s?u?"YY/MM/DD":"DD/MM/YY":"LHD"),date:i,suffix:S})}},bt="YYYY-MM-DD hh:mm",Rt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=vt.create(e);return r.format(t||bt)},Ct=function(e){var t=Math.ceil(e),r=t/3600<10?"0"+Math.floor(t/3600):Math.floor(t/3600),n=t/60%60<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),o=t%60<10?"0"+t%60:t%60;return t>=3600?"".concat(r,":").concat(n,":").concat(o):"".concat(n,":").concat(o)},Dt=function(e){var t=e.created_at,r=e.created_timestamp;return yt(t||1e3*r,{noTodayFlag:!0,noTimeFlag:!0,isConvPreview:!0})},Pt=c(661),It=c.n(Pt),At=function(e){return 0===e||1===e?"one":e>=1e6?"many":"other"},wt=function(e){return 1===e?"one":Number.isInteger(e)?[2,3,4].includes(e%10)&&![12,13,14].includes(e%100)?"few":![2,3,4].includes(e%10)||[12,13,14].includes(e%100)?"many":"other":"other"},Nt=function(e){return e<=1?"one":"other"},xt={fr:At,pl:wt,default:Nt},kt={fr:function(e,t){return"".concat(At(e),".").concat(At(t))},pl:function(e,t){return"".concat(wt(e),".").concat(wt(t))},default:function(e,t){return"".concat(Nt(e),"_").concat(Nt(t))}},Ut=["fr","pl"],Mt=function(e,t,r){var n=It().language||"en",o=Ut.includes(n)?n:"default";return void 0!==r?"".concat(e,"_").concat(kt[o](t,r)):"".concat(e,"_").concat(xt[o](t))},Lt=function(e,t){var r=t||window.location.search,n=null;if(r){var o=r.indexOf("?")+1,a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");n=r.substr(o).match(a)}return n?unescape(n[2]):null},jt=function(){var e=navigator.userAgent.toLowerCase(),t=null;return e.indexOf("msie")>0&&(t=e.match(/msie [\d.]+;/gi)),e.indexOf("firefox")>0&&(t=e.match(/firefox\/[\d.]+/gi)),e.indexOf("safari")>0&&e.indexOf("chrome")<0&&(t=e.match(/safari\/[\d.]+/gi)),e.indexOf("chrome")>0&&(t=e.match(/chrome\/[\d.]+/gi)),t?t.toString():"unknown"};function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ft,Ht=["hans","hant"],Vt=["en","zh-hans","zh-hant","ms-my","th-th","vi-vn","id-id","zh-cn","pt-br","hi","es-mx","es-co","es-cl","es-es","es-ar","pl","fr"],Bt=function(e){return"".concat(e[0].toUpperCase()).concat(e.substring(1))},Yt=function(e){if(e.includes("-")){var t=e.split("-");return Ht.includes(t[1])?"".concat(t[0],"-").concat(Bt(t[1])):"".concat(t[0],"-").concat(t[1].toUpperCase())}return e},Qt=function(e){var t,r=(e||"en").toLowerCase(),n="en",o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}(Vt);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.includes(r)){n=Yt(a);break}}}catch(e){o.e(e)}finally{o.f()}return n},qt=function(e){var t=Qt(e);switch(t){case"th-TH":return"th";case"vi-VN":return"vi";case"id-ID":return"id";default:return t}},Wt={en:"default","ms-MY":"ms-my","th-TH":"th","zh-Hans":"tw","zh-Hant":"tw","vi-VN":"vn","id-ID":"id","zh-CN":"cn","pt-BR":"pt-br",hi:"hi","es-MX":"es-mx","es-CO":"es-co","es-CL":"es-cl",pl:"pl","es-ES":"es-es",fr:"fr","es-AR":"es-ar"},Kt=function(e){var t=Qt(e);return Wt[t]||"default"},zt=function(e){var t=e.access,r=e.isSubAccount,n=e.action,o=e.url,a=void 0===o?"":o;t&&(r?n():window.open().location=a)},Jt=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,o=Date.now();return function(){for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];t&&(clearTimeout(t),t=null);var i=Date.now();i-o>n?(e.apply(void 0,c),o=Date.now()):t=window.setTimeout((function(){e.apply(void 0,c),o=Date.now()}),r)}},Xt=function(e,t){var r,n,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=null,s=0,i=function(){s=!1===a.leading?0:(new Date).getTime(),c=null,o=e.apply(r,n),c||(r=n=null)},u=function(){var u=(new Date).getTime();s||!1!==a.leading||(s=u);var l=t-(u-s);r=this;for(var p=arguments.length,d=new Array(p),f=0;f<p;f++)d[f]=arguments[f];return n=d,l<=0||l>t?(c&&(clearTimeout(c),c=null),s=u,o=e.apply(r,n),c||(r=n=null)):c||!1===a.trailing||(c=window.setTimeout(i,l)),o};return u},$t=function(e,t){var r=0;return{check:function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e.apply(void 0,$e(o))?r+=1:this.reset(),r>=t&&(this.reset(),!0)},reset:function(){r=0}}},Zt="Auto-Translation",er="modal",tr=function(e,t){var r=t.superType,n=t.secondaryType,o=e.find((function(e){return e.name===r}));if(o){var a=o.children;if(a.length){var c=a.find((function(e){return e.name===n}));return c||!1}return!1}return!1},rr=function(e){return tr(e,{superType:Zt,secondaryType:er})},nr=function(e){return tr(e,{superType:Zt,secondaryType:"settings"})},or=function(e){return tr(e,{superType:"Mass-Tool",secondaryType:er})},ar=function(e){return tr(e,{superType:"SearchV3",secondaryType:er})},cr=function(e){return tr(e,{superType:"Reply",secondaryType:er})},sr=function(e){return tr(e,{superType:"Region-Filter",secondaryType:er})},ir=function(e){return tr(e,{superType:"MiniChat-Header",secondaryType:er})},ur=function(e){return tr(e,{superType:"MiniChat-Entry",secondaryType:er})},lr=c(349),pr=c.n(lr),dr={getItem:function(e,t){try{var r=window.localStorage.getItem(e);return null==r?r:t?JSON.parse(r):r}catch(e){console.warn("*** LocalStorage Error: Can not get LocalStorage *** \n".concat(e))}},setItem:function(e,t,r){try{var n=r?JSON.stringify(t):t;window.localStorage.setItem(e,n)}catch(e){console.warn("*** LocalStorage Error: Can not set LocalStorage *** \n".concat(e))}},removeItem:function(e){try{window.localStorage.removeItem(e)}catch(e){console.warn("*** LocalStorage Error: Can not remove LocalStorage *** \n".concat(e))}}},fr=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?dr.getItem(e):pr().getItem(e)},Er=function(e,t){return pr().setItem(e,t)},_r=function(e,t){return t?dr.removeItem(e):pr().removeItem(e)},Sr=pr().supports(pr().INDEXEDDB)||pr().supports(pr().WEBSQL)?1e3:100,hr=c(470).t;function Or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Or(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Tr=n.MSG_TYPE_TEXT,mr=n.MSG_TYPE_IMAGE,gr=n.MSG_TYPE_OFFER,yr=n.MSG_TYPE_PRODUCT,br=n.MSG_TYPE_ORDER,Rr=n.MSG_TYPE_STICKER,Cr=n.MSG_TYPE_NOTIFICATION,Dr=n.MSG_TYPE_WEBVIEW,Pr=n.MSG_TYPE_VOUCHER,Ir=n.MSG_TYPE_ITEM_LIST,Ar=n.MSG_TYPE_FAQ,wr=n.MSG_TYPE_FAQ_QUESTION,Nr=n.MSG_TYPE_FAQ_LIVEAGENT,xr=n.MSG_TYPE_FAQ_FEEDBACK,kr=n.MSG_TYPE_SHOPPING_CART,Ur=n.MSG_TYPE_FAQ_UNSUPPORTED,Mr=n.MSG_TYPE_FAQ_FEEDBACK_PROMPT,Lr=n.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,jr=n.MSG_TYPE_UNTATED_ORDER_REMINDER,Gr=n.MSG_TYPE_BUNDLE_MESSAGE,Fr=n.MSG_TYPE_BUNDLE_DEAL,Hr=n.MSG_TYPE_FLASH_SALE,Vr=n.MSG_TYPE_OPTION_PACK,Br=n.MSG_TYPE_SELECTED_OPTION,Yr=n.MSG_TYPE_VIDEO,Qr=n.MSG_TYPE_RATE_CARDS,qr=n.MSG_TYPE_IMAGE_WITH_TEXT,Wr=n.MSG_TYPE_RATE_CARD,Kr=n.MSG_TYPE_NEW_FAQ,zr=n.MSG_TYPE_FAQ_CATEGORY_CHOICE,Jr=n.MSG_TYPE_FAQ_QUESTION_LIST,Xr=n.MSG_TYPE_FAQ_TYPE_CHOICE,$r=n.MSG_TYPE_FAQ_CATEGORY_LIST,Zr=n.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,en=n.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,tn=n.FAQ_TYPE_BOT_RESPONSE_MESSAGE,rn="common.unsupported_message",nn=(m(Ft={},n.MSG_TYPE_FAQ_LIVEAGENT,"faq.live_agent"),m(Ft,n.MSG_TYPE_FAQ_UNSUPPORTED,"faq.new_unsupport_input"),m(Ft,n.MSG_TYPE_FAQ_FEEDBACK_PROMPT,"faq.feedback_prompt"),m(Ft,n.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,"faq.new_live_agent_prompt"),m(Ft,n.MSG_TYPE_VIDEO,"conversation_detail.input_field.toolbar.video.tip"),m(Ft,n.MSG_TYPE_IMAGE_WITH_TEXT,"conversation_list.conversation_cell.new_image_message"),Ft),on=function(e){return hr(nn[e]||rn)},an=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!0===e.includes(Qr)?"[".concat(hr("conversation_list.conversation_cell.new_evaluation_message"),"]"):hr(rn)},cn=[Tr,Nr,wr,xr,Br,Vr,zr,Zr],sn=[Ir],un=[Yr,Ur,Mr,Lr,qr],ln=[mr,gr,yr,br,Rr,Cr,Pr,kr,jr,Fr,Hr,Gr,Wr,en],pn=[Jr,Xr,$r],dn=function(t,r,n,o){if(!t)return hr(rn);var a=t.type,c=t.content,s=t.crm_message_preview,i=void 0===s?{}:s,u=t.message_option;if(i.text)return i.text;if(null!=c&&c.preview_text&&a===tn)return c.preview_text;if(fn(u,e.MSG_OPT_CENSORED_BLACKLIST))return hr("common.blacklist.replaced_text");if(!a)return hr(rn);var l=c||{},p=l.url,d=l.text,f=void 0===d?"":d,E=l.title,_=l.type,S=void 0===_?"":_,h=l.opening,O=l.live_agent_text,v=void 0===O?[]:O,T=l.caption;if(a===Ar||a===Kr)return h||hr("faq.no_set.chat_bot_title");if(a===Dr)return"".concat(an(S||p));if(cn.includes(a)){if(a===Tr){var m=t||{},g=m.source,y=m.message_option,b=m.send_status,R=m.request_id,C=On(c);if(!r||C||y===e.MSG_OPT_SOCIAL_MESSAGE||["crm","proactive_update"].includes(g)||2===b)return f;var D=(c||{}).translation;return D&&D.text?D.text:n?hr("chat_list.preview.translate_failed"):R?f:hr("chat_list.preview.translate_failed")}return f||E}if(!un.includes(a)){if(pn.includes(a)){var P=c||{},I=P.fixed_title,A=P.faq_type_choice_translation;return hn(a===Xr?A:I,o)}var w=ln.includes(a)?a:sn.includes(a)?"product":"",N=w&&"conversation_list.conversation_cell.new_".concat(w,"_message");return N?"[".concat(hr(N),"]"):hr(rn)}var x=v.length?hn(v,o):on(a);switch(a){case Yr:return"[".concat(x,"]");case qr:return"[".concat(x,"] ").concat(T||E||f);default:return x}},fn=function(e,t){return(e&t)===t},En=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fn(t.message_option,e.MSG_OPT_DELETE)},_n=function(e,t){return t.some((function(t){return fn(e,t)}))},Sn=function(e,t){return e===Dr&&t.type===Qr||e===Wr},hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=e.find((function(e){return qt(t).toLocaleLowerCase().includes(e.lang.toLocaleLowerCase())}))||e.find((function(e){return"en"===e.lang}));return(r||{}).text},On=function(e){var t=e||{},r=t.translation,n=t.mid;if(!r)return!0;var o=(void 0===n?{}:n).source_language,a=void 0===o?"":o,c=r||{},s=c.final,i=c.mid,u=c.target_language,l=void 0===u?"":u,p=c.source_language,d=void 0===p?"":p,f=s?s.target_language:l,E=s?s.source_language:d,_=i?i.source_language:a;return _?_===f:E===f&&"unknown"!==E},vn=function(e,t){return{type:n.MSG_TYPE_SECURITY_TIPS,content:{text:""},id:e,conversation_id:t,to_id:"",from_id:"",shop_id:"",created_timestamp:Math.floor((new Date).getTime()/1e3)}},Tn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.updateMaxGeneralOptionHideTime,n=void 0===r||r,o=t.updateMessageOption,a=void 0===o||o,c=e||{},s=c.created_timestamp,i=c.message_option,u=n?{max_general_option_hide_time:s}:{},l=a?{last_message_option:i}:{};return vr(vr({},u),l)},mn=function(e){var t=e.crm_message_preview,r=void 0===t?{}:t;return r.text?{crm_message_preview:r}:{crm_message_preview:{}}};function gn(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function yn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){gn(a,n,o,c,s,"next",e)}function s(e){gn(a,n,o,c,s,"throw",e)}c(void 0)}))}}var bn,Rn=c(757),Cn=c.n(Rn),Dn=c(470).t,Pn=function(e){return In(e)?Dn(Mt("label.exceed_media_limit.video_duration",180),{max:180}):null},In=function(e){var t=e.type,r=e.duration,n=void 0===r?0:r;return"video"===t&&(n<0||n>180)},An=function(){return window.createObjectURL||window.URL.createObjectURL},wn=function(e){return{type:"video",cover:"",file:e,duration:0}},Nn=function(e,t){return new Promise((function(r){"image"===t?function(e,t){var r=An()(e),n=new Image;n.onload=function(){var o=n.width,a=n.height;t({type:"image",cover:r,file:e,width:o,height:a})},n.src=r}(e,r):"video"===t&&function(e,t){var r;try{r=An()(e)}catch(r){return void t(wn(e))}var n=document.createElement("video");n.setAttribute("crossOrigin","anonymous"),n.setAttribute("autoplay","autoplay"),n.muted=!0,n.src=r,n.addEventListener("loadeddata",(function(){n?function(e,t,r,n){var o=document.createElement("canvas"),a=e,c=a.videoWidth,s=a.videoHeight,i=a.duration;o.width=c,o.height=s,o.getContext("2d").drawImage(e,0,0,c,s);var u={type:"video",file:t,duration:Math.ceil(i),width:c,height:s,videoUrl:r};o.toBlob?o.toBlob((function(t){u.cover=t?An()(t):"",n(u),e=null}),"image/png",.5):(u.cover=o.toDataURL?o.toDataURL("image/png"):"",n(u))}(n,e,r,t):t(wn(e))})),n.addEventListener("error",(function(){t(wn(e))}))}(e,r)}))},xn=function(e){return e.size},kn=function(e){return e.type},Un=function(e){var t=kn(e);return function(e){return e.includes("video")||Pe.includes(e)}(t)?"video":function(e){return e.includes("image")}(t)?"image":null},Mn=function(){var e=yn(Cn().mark((function e(t){var r;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map(function(){var e=yn(Cn().mark((function e(t){return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn(t,Un(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ln="common.toast.file_unsupport",jn=function(e,t,r,n){var o=Un(e);if("all"===r&&!o||"all"!==r&&o!==r)return Dn(Ln);if("video"===o){if(!t)return Dn(Ln);if(!function(e){return xn(e)<=Ae}(e))return Dn("label.exceed_media_limit.video_size",{max:30});if(!function(e){var t=function(e){return e.name}(e),r=(t.substr(t.lastIndexOf(".")+1)||"").toUpperCase();return De.includes(r)}(e))return Dn(Ln)}else if("image"===o){if(!function(e,t){return xn(e)<=(t||Ie)}(e,n))return n?Dn("ps_feedback_upload_img_size_error"):Dn("common.toast.file_size_exceeds",{maxFileSize:"2MB"});if(!function(e){return Re.includes(kn(e))}(e))return Dn("feedback_modal.error.upload_image_failed.format")}return null},Gn=function(e,t){var r=new XMLHttpRequest;r.open("get",e),r.responseType="blob",r.onload=function(){t(r.response)},r.send()},Fn=c(547),Hn=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER],Vn=function(e){return Hn.includes(e)},Bn=[e.MSG_OPT_TRIGGER_FAQ,e.MSG_OPT_FAQ_SESSION,e.MSG_OPT_CANCELORDER_WARNING_NOT_SEND],Yn=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER,n.MSG_TYPE_ITEM_LIST,n.MSG_TYPE_SHOPPING_CART,n.MSG_TYPE_UNTATED_ORDER_REMINDER,n.MSG_TYPE_ADD_ON_DEAL,n.MSG_TYPE_VOUCHER,n.MSG_TYPE_BUNDLE_DEAL,n.MSG_TYPE_FLASH_SALE,n.MSG_TYPE_OFFER,n.MSG_TYPE_ORDER,n.MSG_TYPE_PRODUCT,n.MSG_TYPE_IMAGE_WITH_TEXT],Qn=function(e,t){var r=e.type,c=e.send_status,s=e.errorCode,i=e.status,u=e.message_option;if(!t){var l=Yn.includes(r)&&!Bn.find((function(e){return fn(u,e)})),d=c!==o.SENDING&&c!==o.FAILED&&i!==p.CENSORED_BLACKLIST&&s!==a.BLACKLIST;if(l&&d){var f=(e||{}).textContent,E=void 0===f?{}:f;if(r===n.MSG_TYPE_ORDER)return!(!E||!E.id);if(r===n.MSG_TYPE_PRODUCT){var _=E,S=_.id,h=_.actual_price;return!(!S||!h)}return!0}}return!1},qn=(m(bn={},n.MSG_TYPE_TEXT,0),m(bn,n.MSG_TYPE_IMAGE,1),m(bn,n.MSG_TYPE_OFFER,3),m(bn,n.MSG_TYPE_PRODUCT,4),m(bn,n.MSG_TYPE_ORDER,5),m(bn,n.MSG_TYPE_STICKER,6),m(bn,n.MSG_TYPE_VIDEO,18),m(bn,n.MSG_TYPE_ITEM_LIST,1011),m(bn,n.MSG_TYPE_VOUCHER,1013),m(bn,n.MSG_TYPE_SHOPPING_CART,1014),m(bn,n.MSG_TYPE_UNTATED_ORDER_REMINDER,1015),m(bn,n.MSG_TYPE_BUNDLE_DEAL,1016),m(bn,n.MSG_TYPE_FLASH_SALE,1017),m(bn,n.MSG_TYPE_ADD_ON_DEAL,1018),bn),Wn=function(e){return void 0!==qn[e]?qn[e]:-1},Kn=[e.MSG_OPT_AUTO_REPLY,e.MSG_OPT_BLOCKED,e.MSG_OPT_CENSORED_BLACKLIST,e.MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER,e.MSG_OPT_IGNORE_UNREAD_FOR_SENDER,e.MSG_OPT_INVISIBLE_FOR_RECEIVER,e.MSG_OPT_INVISIBLE_FOR_SENDER,e.MSG_OPT_ADS,e.MSG_OPT_FAQ_SESSION,e.MSG_OPT_TRIGGER_FAQ,e.MSG_OPT_OFFWORK_AUTOREPLY,e.MSG_OPT_CANCELORDER_WARNING_RETRACT,e.MSG_OPT_CHATBOT_SESSION,e.MSG_OPT_TRIGGER_CHATBOT,e.MSG_OPT_PRIVATE_MESSAGE,e.MSG_OPT_SILENT_FOR_SENDER],zn=function(e,t,r){var n=e.type,a=e.send_status,c=e.created_timestamp,s=e.message_option,i=!0;return t&&E.includes(n)&&![o.SENDING,o.FAILED].includes(a)&&!_n(s,Kn)||(i=!1),(!r||Math.floor((new Date).getTime()/1e3)-c>=r)&&(i=!1),i},Jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.isAgent,n=t.to_tob_user_id,o=t.shop_id,a=e.from_id,c=e.to_shop_id;return r?a!==n:c!==o};function Xn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Zn,eo,to,ro=function(e,t){return t.map((function(t){return function(e,t){var r=function(e,t){var r=t.trim().toLocaleLowerCase();return e.filter((function(e){return e.trim().toLocaleLowerCase().startsWith(r)})).length}(e.tags,t),n=function(e,t){var r=co(t),n=new RegExp(r,"gi");return(e.match(n)||[]).length}(e.content,t);return 1e4*r+1*n}(e,t)})).reduce((function(e,t){return e+t}),0)},no=function(e){return e.trim().length>=1},oo=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return e.trim()?[e]:[];var r=e.split(",").filter((function(e){return e.trim()})),n=$e(new Set(r));return n.sort((function(e,t){return e.length>t.length?-1:1}))},ao=function(e,t){return t.length?function(e){return e.sort((function(e,t){return e.weight>t.weight?-1:1}))}(function(e){return e.filter((function(e){return e.weight}))}(e.map((function(e){return $n($n({},e),{},{weight:ro(e,t)})})))):e},co=function(e){return e.replace(/[.[\]{}()+?*^\\$?]/g,"\\$&")},so=c(470).t;function io(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function uo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?io(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):io(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var lo,po=function(e){return"common.order.status.".concat(e)},fo=function(e){var t,r=e.order,n=e.region,o=e.isOwnOrder,a=e.isNewPrice,c=r.products,s=void 0===c?[]:c,i=r.estimated_escrow,u=void 0===i?0:i,l=r.total_price,p=void 0===l?0:l,d=r.voucher_price,f=void 0===d?0:d,E=r.price_before_discount,_=void 0===E?0:E,S=r.credit_card_promotion,h=void 0===S?0:S,O=s.reduce((function(e,t){return e+(t.coin_offset||0)}),0);return a?(t=u||p?o?u:p:_||p,console.log("isNewPrice","price_before_discount:",_,"estimated_escrow:",u,"total_price:",p)):(t=_-f-h-O,console.log("isOldPrice","price_before_discount:",_,"voucher_price:",f,"credit_card_promotion:",h,"shopeeCoin",O)),{shopeeCoin:O,payment:Et(t,n)}},Eo=_e.PAY_CREDIT_CARD,_o=_e.PAY_BANK_TRANSFER,So=_e.PAY_OFFLINE_PAYMENT,ho=_e.PAY_IPAY88,Oo=_e.PAY_FREE,vo=_e.PAY_COD,To=_e.PAY_ESUN,mo=_e.PAY_BILL_PAYMENT,go=_e.PAY_INDOMARET,yo=_e.PAY_KREDIVO,bo=_e.PAY_NICEPAY_CC,Ro=_e.PAY_AIRPAY,Co=_e.PAY_SHOPEE_WALLET,Do=_e.PAY_SHOPEE_WALLET_V2,Po=_e.PAY_AKULAKU,Io=_e.PAY_INSTALLMENT,Ao=_e.PAY_IBANKING,wo=(m(Zn={},Eo,"cc"),m(Zn,_o,"bank_transfer"),m(Zn,So,"offline"),m(Zn,ho,"online"),m(Zn,Oo,"waived"),m(Zn,vo,"cod"),m(Zn,To,"esun"),m(Zn,mo,"bill_payment"),m(Zn,go,"indomaret"),m(Zn,yo,"kredivo"),m(Zn,bo,"cc_installment"),m(Zn,Ro,"airpay"),m(Zn,Co,"shopee_wallet"),m(Zn,Do,"shopee_wallet_v2"),m(Zn,Po,"akulaku"),m(Zn,Io,"installment"),m(Zn,Ao,"ibanking"),Zn),No=function(e){var t=wo[e];return t?so("common.order.pay_method.".concat(t)):""},xo=he.NONE,ko=he.OUT_OF_STOCK,Uo=he.CUSTOMER_REQUEST,Mo=he.UNDELIVERABLE_AREA,Lo=he.CANNOT_SUPPORT_COD,jo=he.LOST_PARCEL,Go=he.SYSTEM_UNPAID,Fo=he.SYSTEM_UNDERPAID,Ho=he.SYSTEM_PAYMENT_REJECTED,Vo=(m(eo={},xo,"none"),m(eo,ko,"out_of_stock"),m(eo,Uo,"customer_request"),m(eo,Mo,"undeliverable_area"),m(eo,Lo,"cannot_support_cod"),m(eo,jo,"lost_parcel"),m(eo,Go,"system_unpaid"),m(eo,Fo,"underpaid"),m(eo,Ho,"payment_rejected"),eo),Bo=function(e){return so("common.order.cancel_reason.".concat(Vo[e]||"system"))},Yo=function(e,t){var r=e.list_type,n=e.status_ext,o=e.order_type,a=e.payment_method,c=e.shipping_method,s=e.logistics_status,i=e.pickup_cutoff_time;if(n===Oe.ORDER_EXT_CANCEL_PENDING)return!1;var u=["MY","TW","VN","PH"].includes(t),l=!!i&&Date.now()>=new Date(i).getTime(),p=!0;switch(r){case ve.TOPAY:if(a===_e.PAY_OFFLINE_PAYMENT)return p;break;case ve.TOSHIP:return l&&u&&a===_e.PAY_COD&&s===ge.LOGISTICS_REQUEST_CREATED||(o===Te.ESCROW?(n===Oe.ORDER_EXT_RETURN_PROCESSING||c>0&&s===ge.LOGISTICS_REQUEST_CREATED&&l)&&(p=!1):o===Te.SIMPLE&&(p=!1)),p}},Qo=me.ORDER_DETAIL_SHIPPING_CONFIRMED,qo=me.ORDER_DETAIL_SHIPPED,Wo=me.ORDER_DETAIL_RECEIVED,Ko=me.ORDER_DETAIL_CANCELED,zo=me.ORDER_DETAIL_NOTIFY_SHIP,Jo=(m(to={},Qo,"detail_received"),m(to,qo,"shipped"),m(to,Wo,"received_by_buyer"),m(to,Ko,"cancelled"),m(to,zo,"notify_ship"),to),Xo=function(e,t,r){if(2===t)return r;var n=Jo[e];return n?so("common.order.logistics_log.".concat(n)):""},$o=["created_at","pay_time","delivery_time","complete_time","cancel_time"],Zo=["price_before_discount","receivables","amount","shipping_fee","tax_amount","credit_card_promotion","coin_offset","voucher_price","refund_amount","wallet_discount","local_shopee_coin"],ea=["coin_offset","voucher_price","wallet_discount","local_shopee_coin"],ta=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.id,o=t.country,a=uo({},e),c=n===e.id,s=fo({order:e,region:o,isOwnOrder:c,isNewPrice:r}),i=s.shopeeCoin,u=s.payment;return a.seller_note=(a.seller_note||"").trim(),a.local_shopee_coin=i,a.local_payment=u,a.local_amount_price=Et(e.price_before_discount-e.shipping_fee-e.tax_amount,o),a.local_ship_by_date=yt(e.ship_by_date,{needFullFormat:!0}),$o.forEach((function(e){var t=a[e];t&&(a[e]=yt(t,{needFullFormat:!0}))})),Zo.forEach((function(e){var t=a[e]||0;a[e]=Et(t,o,{withMinus:ea.includes(e)})})),a},ra=(m(lo={},te.DELETED,re.DELETED),m(lo,te.BANNED,re.BANNED),m(lo,te.SOLD_OUT,re.SOLD_OUT),m(lo,te.DELISTED,re.DELISTED),lo),na=function(e){return e===te.NORMAL?"conversation_detail.conversation_origin.product_origin.product_stock":"common.product.".concat(ra[e])},oa=function(e,t){return!(!e||t!==te.DELETED)},aa=function(e){return void 0!==e&&e!==te.NORMAL},ca=function(e){return void 0!==e&&e<=0},sa=function(e,t){return aa(e)||ca(t)},ia=1e3,ua=1800,la=86400,pa=[la,3600,60],da=function(e){var t=e,r=pa.map((function(e){var r=t>e?Math.floor(t/e):0;return t-=r*e,r}));return r.push(t),r},fa=function(e){return"".concat(e>=10?"":"0").concat(e)},Ea=function(){return Math.ceil(Date.now()/1e3).toString()},_a=["zh-CN","zh-Hant","zh-Hans"],Sa=function(e){var t=It().language||"en",r=Qt(t);return _a.includes(r)?((100-e)/10).toFixed(e%10?1:0):"".concat(e,"%")},ha=function(e,t,r,n,o){return n||t?e:e||o&&!!r},Oa=c(470).t,va=function(e){return e===F.FINISHED},Ta=function(e,t){return e===t},ma=function(e,t){return Et(e,t,{withUnit:e>=1e4})},ga=function(e,t,r,n){return Oa("conversation_detail.workstation.voucher_panel.".concat(n?F.ONGOING:e,"_time"),{time:e===F.SCHEDULED?Rt(t,"MM.DD.YYYY h:mm"):Rt(r,"MM.DD.YYYY")})};function ya(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ba(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ya(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ra=function(e,t,r){var n=e.categories,o=void 0===n?[]:n,a=e.other_faq_types,c=void 0===a?[]:a,s=e.intents,i=void 0===s?[]:s,u=e.questions,l=void 0===u?[]:u,p=[];return o.length&&o.forEach((function(e,r){p.push(Ca({item:e,index:r,type:z.Categories,isNewFaq:t}))})),c.length&&c.forEach((function(e,n){p.push(Ca({item:e,index:n+o.length,type:z.OtherFaqType,isNewFaq:t,locale:r}))})),i.length&&i.forEach((function(e,r){p.push(Ca({item:e,index:r+o.length+c.length,type:z.Intent,isNewFaq:t}))})),l.length&&l.forEach((function(e,r){p.push(Ca({item:e,index:r,type:z.Question,isNewFaq:t}))})),p},Ca=function(e){var t=e.item,r=e.index,n=e.type,o=e.isNewFaq,a=e.locale,c={};switch(n){case z.Categories:c={content:t.title,location:r};break;case z.OtherFaqType:c={content:hn(t.faq_type_choice_translation,a),location:r};break;case z.Intent:var s=t;c=ba(ba({},JSON.parse(s.pass_through_data)),{},{content:s.text,location:r});break;case z.Question:c={content:t.text,location:r};break;case z.ChatWithSeller:c={content:t.content}}return{data:JSON.stringify(ba(ba({},c),{},{is_intent_prediction:n===z.Intent?K.Intent:K.Faq,is_default_hq:o?1:0})),type:1}},Da=c(470)})(),s})(),e.exports=n(r(37725),r(14906),r(58518),r(69483))}}]);