(self.miniJsonp=self.miniJsonp||[]).push([[167],{67167:(e,t,n)=>{var r;self,r=(e,t,n,r,s,a,o,i,c,l,u,d,p,A,g,f,h,E,m,v,S,_,y,C,b,x,M,I,w,O,T,B,k,R,P,D,N,j,F,q,L)=>(()=>{var G={7757:(e,t,n)=>{e.exports=n(5666)},5945:(e,t,n)=>{"use strict";n.d(t,{default:()=>a});var r=n(885),s={};Object.entries({"input-field":["fetchMessageShortcutsGroupRequested","updateFetchMessageShortcutsGroupStatus","fetchMessageShortcutsGroupSucceeded","setCurrentGroupType","setCurrentGroupId","fetchOffersRequested","fetchOffersSucceed","updateFetchOffersRequestedStatus","getPendingOffersCountRequested","getPendingOffersCountSucceed","replyOfferRequested","fetchAllOrdersRequested","fetchOrdersRequested","fetchOrdersSucceed","updateFetchOrdersStatus","fetchAllOrders","fetchOrders","fetchProductsRequested","fetchMyShopProducts","fetchProductsSucceed","updateMyShopProductsRequestedStatus","updateOtherShopProductsRequestedStatus","updateAllShopProductsRequestedStatus","updateMyShopSearchKeyword","updateOtherShopSearchKeyword","updateSelectedProductTab","fetchAllProductsRequested","fetchAllShopProducts","fetchProducts","initPacks","initStickers","selectSticker","updateCurrentSticker","fetchSingleStickerRequested","fetchSingleStickerSucceeded","updateFetchPacksRequestedStatus","updateFetchStickersRequestedStatus","fetchStickersRequested","fetchStickersRequestedSaga","claimVoucherRequested","fetchVouchersRequested","fetchVouchersSucceeded","updateFetchVouchersRequestedStatus"],"message-section":["updateHasConflict","deleteConversationMessageHash","deleteMessageRequested","deleteMessagePostRequested","setEntryPoint","evaluationRequested","showMyRateCard","showRateCard","fetchFaqMessagesRequested","fetchFaqMessagesSucceeded","updateFetchFaqMessagesRequestedStatus","updateCurrentFaqId","showFaqHistoryModal","fetchMessagesRequested","fetchMessagesSucceeded","updateFetchMessagesRequestedStatus","setSecurityTipsMessage","fetchConversationMessagesSaga","fetchMessagesRequestedWithPreloadSaga","fetchMessagesRequestedSaga","updateMessageFillStatusMap","fillMessageRequested","fillMessageContent","handleSensitiveUrl","sendMessagesFailedByOffline","resetMessagesFailedByOffline","resendOfflineMessagesOnce","resendOfflineMessagesOnceSucceed","updateResendConversationMessage","receiveMessageRequested","receiveMessageSucceeded","resetNewConversationQueue","resetOldConversationQueue","resetConversationQueue","handleNewConversationMessageQueue","handleCurrentConversationChange","setReplyToMessage","resetReplyToMessage","scrollToMessage","setScrollToMessageId","resetScrollToMessageId","setInScrollToMessage","setCurrentConversationReplyToMessage","resetCurrentConversationReplyToMessage","resendMessageRequested","sendMessagesRequested","sendMessagesSucceeded","sendingMessages","sendMessagesToPending","sendMessagesFailed","abortAllSendingMessages","cancelSendingMessageRequested","cancelSendingMessageSucceeded","sendVideoMessageRequested","sendProductsMessageRequested","handleSendSucceededMessages","handleFaqExpiredMessage","sendMessages","messageSyncUpdate","translateMessagesRequested","changeTranslateStatus","showTranslateFeedback","sendTranslateFeedback","updateMessagesRelated","clearChatRoomRefer","updateVideoInfo","deleteVideoInfo","uploadVideoGetToken","uploadVideGetResult","uploadVideo"]}).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0];t[1].forEach((function(e){s[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.payload,s=t.isLazy;return{id:n,action:e,payload:r,isLazy:s}}}))}));const a=s},4323:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var r=n(8661),s=n.n(r),a=s().t.bind(s())},5668:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".xoYO4owojG {\n  color: #2673dd;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://./src/components/Common/CancelOrderHint/index.css"],names:[],mappings:"AAAA;EACE,cAAc;EACd,eAAe;AACjB",sourcesContent:[".policy {\n  color: #2673dd;\n  cursor: pointer;\n}\n"],sourceRoot:""}]),o.locals={policy:"xoYO4owojG"};const i=o},2147:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".ldGwUka16V {\n  height: 100%;\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  box-sizing: border-box;\n  overscroll-behavior: contain;\n}\n\n.PpPQNYTjzu {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  box-sizing: border-box;\n}\n","",{version:3,sources:["webpack://./src/components/Common/ScrollList/style.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,WAAW;EACX,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;EACtB,4BAA4B;AAC9B;;AAEA;EACE,MAAM;EACN,SAAS;EACT,OAAO;EACP,QAAQ;EACR,YAAY;EACZ,sBAAsB;AACxB",sourcesContent:[".root {\n  height: 100%;\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  box-sizing: border-box;\n  overscroll-behavior: contain;\n}\n\n.empty {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  box-sizing: border-box;\n}\n"],sourceRoot:""}]),o.locals={root:"ldGwUka16V",empty:"PpPQNYTjzu"};const i=o},1644:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".xvgXvQJfBg {\n  width: 100%;\n  font-size: 20px;\n  height: 1.1em;\n  text-align: left;\n  position: relative;\n}\n\n._louvguDj8 {\n  max-width: 100%;\n  height: 1.2em;\n  line-height: 1.1em;\n  font-weight: 500;\n}\n\n._louvguDj8.pcRh6o4FtL {\n    max-width: 80%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n.Gj6Kb_8akL {\n  height: 0.7em;\n  width: 0.7em;\n  color: #bbb;\n  position: absolute;\n  top: 0;\n  right: -0.2em;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://./src/components/UI/Modal/ModalHeader/index.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,eAAe;EACf,aAAa;EACb,gBAAgB;EAChB,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,aAAa;EACb,kBAAkB;EAClB,gBAAgB;AAQlB;;AANE;IACE,cAAc;IACd,gBAAgB;IAChB,uBAAuB;IACvB,mBAAmB;EACrB;;AAGF;EACE,aAAa;EACb,YAAY;EACZ,WAAW;EACX,kBAAkB;EAClB,MAAM;EACN,aAAa;EACb,eAAe;AACjB",sourcesContent:[".root {\n  width: 100%;\n  font-size: 20px;\n  height: 1.1em;\n  text-align: left;\n  position: relative;\n}\n\n.title {\n  max-width: 100%;\n  height: 1.2em;\n  line-height: 1.1em;\n  font-weight: 500;\n\n  &.has-cancel {\n    max-width: 80%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n}\n\n.cancel {\n  height: 0.7em;\n  width: 0.7em;\n  color: #bbb;\n  position: absolute;\n  top: 0;\n  right: -0.2em;\n  cursor: pointer;\n}\n"],sourceRoot:""}]),o.locals={root:"xvgXvQJfBg",title:"_louvguDj8","has-cancel":"pcRh6o4FtL",hasCancel:"pcRh6o4FtL",cancel:"Gj6Kb_8akL"};const i=o},5792:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".QOPArcVPa0 {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n}\n\n.e4rHNIVBIc {\n  padding: 1.5em;\n  border-radius: 3px;\n  background: #fff;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em 0 rgba(0, 0, 0, 0.05), 0 1em 1em 0 rgba(0, 0, 0, 0.09);\n}\n\n.e4rHNIVBIc:focus {\n  outline: none;\n}\n","",{version:3,sources:["webpack://./src/components/UI/Modal/index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,OAAO;EACP,QAAQ;EACR,MAAM;EACN,SAAS;EACT,8BAA8B;EAC9B,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,YAAY;AACd;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;EACtB,0EAA0E;AAC5E;;AAEA;EACE,aAAa;AACf",sourcesContent:[".overlay {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n}\n\n.content {\n  padding: 1.5em;\n  border-radius: 3px;\n  background: #fff;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em 0 rgba(0, 0, 0, 0.05), 0 1em 1em 0 rgba(0, 0, 0, 0.09);\n}\n\n.content:focus {\n  outline: none;\n}\n"],sourceRoot:""}]),o.locals={overlay:"QOPArcVPa0",content:"e4rHNIVBIc"};const i=o},1696:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".ICwdhNZt8D {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-right: 0.5em;\n  line-height: 0;\n}\n\n.LsH14oWYoo {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.B_39Xx2sa4 {\n}\n\n.B_39Xx2sa4:hover {\n    cursor: pointer;\n  }\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/ErrorContent/index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,mBAAmB;EACnB,mBAAmB;EACnB,cAAc;AAChB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,cAAc;EACd,cAAc;EACd,cAAc;AAChB;;AAEA;AAMA;;AAHE;IACE,eAAe;EACjB",sourcesContent:[".icon-wrap {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-right: 0.5em;\n  line-height: 0;\n}\n\n.icon-base {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.icon {\n  composes: icon-base;\n\n  &:hover {\n    cursor: pointer;\n  }\n}\n"],sourceRoot:""}]),o.locals={"icon-wrap":"ICwdhNZt8D",iconWrap:"ICwdhNZt8D","icon-base":"LsH14oWYoo",iconBase:"LsH14oWYoo",icon:"B_39Xx2sa4 LsH14oWYoo"};const i=o},7974:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".DbrHf3jB5r {\n  padding-top: 0.25em;\n  border-top: 1px dashed #f1f3f4;\n  display: flex;\n  margin-top: 0.5em;\n  justify-content: space-between;\n}\n\n.iQp1Rk4VR3,\n.JWiVpmZ1M7,\n.CNVED96Hw6 {\n  font-size: 12px;\n  line-height: 14px;\n  transform: scale(0.916);\n}\n\n.iQp1Rk4VR3 {\n  color: #555;\n}\n\n.tmx2p6yZcs {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.JWiVpmZ1M7 {\n  color: #888;\n  max-width: 120px;\n  white-space: nowrap;\n}\n\n.CNVED96Hw6 {\n  color: #395692;\n  cursor: pointer;\n  margin-left: 1.33em;\n}\n\n.s38hmczNZD {\n  color: #ccc;\n  cursor: default;\n}\n\n.QBe9aIOa3J {\n  display: flex;\n  align-items: center;\n  color: #888;\n  font-size: 11px;\n  transform: scale(0.9);\n}\n\n.NvZWhoqI62 {\n  width: 10px;\n  height: 10px;\n  color: #888;\n  line-height: 12px;\n  margin-right: 4px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MessageSource/Footer/index.css"],names:[],mappings:"AAAA;EACE,mBAAmB;EACnB,8BAA8B;EAC9B,aAAa;EACb,iBAAiB;EACjB,8BAA8B;AAChC;;AAEA;;;EAGE,eAAe;EACf,iBAAiB;EACjB,uBAAuB;AACzB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,yBAAyB;AAC3B;;AAEA;EACE,WAAW;EACX,gBAAgB;EAChB,mBAAmB;AACrB;;AAEA;EACE,cAAc;EACd,eAAe;EACf,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,WAAW;EACX,eAAe;EACf,qBAAqB;AACvB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,WAAW;EACX,iBAAiB;EACjB,iBAAiB;AACnB",sourcesContent:[".root {\n  padding-top: 0.25em;\n  border-top: 1px dashed #f1f3f4;\n  display: flex;\n  margin-top: 0.5em;\n  justify-content: space-between;\n}\n\n.label,\n.status-text,\n.link {\n  font-size: 12px;\n  line-height: 14px;\n  transform: scale(0.916);\n}\n\n.label {\n  color: #555;\n}\n\n.actions {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.status-text {\n  color: #888;\n  max-width: 120px;\n  white-space: nowrap;\n}\n\n.link {\n  color: #395692;\n  cursor: pointer;\n  margin-left: 1.33em;\n}\n\n.no-access {\n  color: #ccc;\n  cursor: default;\n}\n\n.send-status {\n  display: flex;\n  align-items: center;\n  color: #888;\n  font-size: 11px;\n  transform: scale(0.9);\n}\n\n.link-arrow {\n  width: 10px;\n  height: 10px;\n  color: #888;\n  line-height: 12px;\n  margin-right: 4px;\n}\n"],sourceRoot:""}]),o.locals={root:"DbrHf3jB5r",label:"iQp1Rk4VR3","status-text":"JWiVpmZ1M7",statusText:"JWiVpmZ1M7",link:"CNVED96Hw6",actions:"tmx2p6yZcs","no-access":"s38hmczNZD",noAccess:"s38hmczNZD","send-status":"QBe9aIOa3J",sendStatus:"QBe9aIOa3J","link-arrow":"NvZWhoqI62",linkArrow:"NvZWhoqI62"};const i=o},7370:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".XbX3ZBf4jg {\n  display: flex;\n  align-items: center;\n  margin-bottom: 2px;\n}\n\n.uEvA4mNGQx {\n  height: 0.875em;\n  width: 0.875em;\n  margin-right: 4px;\n}\n\n.uEvA4mNGQx.VUepz79yTX {\n    color: #f5a623;\n  }\n\n.uEvA4mNGQx.w_1Mz2drJ3 {\n    color: #4185f4;\n  }\n\n.uEvA4mNGQx.ERO7xN2qCk {\n    color: #4185f4;\n  }\n\n.uEvA4mNGQx.AY5A6sno68 {\n    color: #54cc77;\n  }\n\n.uEvA4mNGQx.aSD1Bohsxa {\n    color: #888;\n  }\n\n.uEvA4mNGQx.S2sPrrtGBA {\n    color: #888;\n  }\n\n.IHJrxJcGMD,\n.Nf5ty9fSwl,\n.TCYj2OeDZS {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.IHJrxJcGMD {\n  color: #333;\n  font-weight: 700;\n  max-width: 102px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.BBGELlMIR2 {\n  line-height: 16px;\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n}\n\n.Nf5ty9fSwl {\n  display: inline-block;\n  color: #333;\n  max-width: 136px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.gxzkMQHMb0 {\n  display: inline-block;\n  font-size: 12px;\n  max-width: 66px;\n  overflow: hidden;\n  margin-right: 4px;\n  color: #888;\n  text-overflow: ellipsis;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MessageSource/Order/index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,cAAc;EACd,iBAAiB;AAyBnB;;AAvBE;IACE,cAAc;EAChB;;AAEA;IACE,cAAc;EAChB;;AAEA;IACE,cAAc;EAChB;;AAEA;IACE,cAAc;EAChB;;AAEA;IACE,WAAW;EACb;;AAEA;IACE,WAAW;EACb;;AAGF;;;EAGE,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,WAAW;EACX,gBAAgB;EAChB,gBAAgB;EAChB,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,iBAAiB;EACjB,aAAa;EACb,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;EACE,qBAAqB;EACrB,WAAW;EACX,gBAAgB;EAChB,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,qBAAqB;EACrB,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,iBAAiB;EACjB,WAAW;EACX,uBAAuB;AACzB",sourcesContent:[".order-status {\n  display: flex;\n  align-items: center;\n  margin-bottom: 2px;\n}\n\n.status-icon {\n  height: 0.875em;\n  width: 0.875em;\n  margin-right: 4px;\n\n  &.unpaid {\n    color: #f5a623;\n  }\n\n  &.to_ship {\n    color: #4185f4;\n  }\n\n  &.shipping {\n    color: #4185f4;\n  }\n\n  &.completed {\n    color: #54cc77;\n  }\n\n  &.cancelled {\n    color: #888;\n  }\n\n  &.refund {\n    color: #888;\n  }\n}\n\n.status-text,\n.payment,\n.count {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.status-text {\n  color: #333;\n  font-weight: 700;\n  max-width: 102px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.detail {\n  line-height: 16px;\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n}\n\n.payment {\n  display: inline-block;\n  color: #333;\n  max-width: 136px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.source-count {\n  display: inline-block;\n  font-size: 12px;\n  max-width: 66px;\n  overflow: hidden;\n  margin-right: 4px;\n  color: #888;\n  text-overflow: ellipsis;\n}\n"],sourceRoot:""}]),o.locals={"order-status":"XbX3ZBf4jg",orderStatus:"XbX3ZBf4jg","status-icon":"uEvA4mNGQx",statusIcon:"uEvA4mNGQx",unpaid:"VUepz79yTX",to_ship:"w_1Mz2drJ3",toShip:"w_1Mz2drJ3",shipping:"ERO7xN2qCk",completed:"AY5A6sno68",cancelled:"aSD1Bohsxa",refund:"S2sPrrtGBA","status-text":"IHJrxJcGMD",statusText:"IHJrxJcGMD",payment:"Nf5ty9fSwl",count:"TCYj2OeDZS",detail:"BBGELlMIR2","source-count":"gxzkMQHMb0",sourceCount:"gxzkMQHMb0"};const i=o},7625:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".MArSWKlROx {\n  color: #bbb;\n  margin-right: 4px;\n  max-width: 44px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  text-decoration: line-through;\n}\n\n.GOtPqL29CJ {\n  color: #333;\n  max-width: 130px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.iTQsEeB_Ll {\n  font-size: 12px;\n  max-width: 72px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  transform: scale(0.91) translateX(-3px);\n}\n\n.iTQsEeB_Ll.nvxhYwnMRp {\n    color: #888;\n  }\n\n.iTQsEeB_Ll.BbiZLlMz2Q,\n  .iTQsEeB_Ll.MWZSSi11Xt {\n    border-radius: 1px;\n    padding: 0 0.33em;\n  }\n\n.iTQsEeB_Ll.BbiZLlMz2Q {\n    background-color: #fdecec;\n    color: #ef4747;\n  }\n\n.iTQsEeB_Ll.MWZSSi11Xt {\n    background-color: #e7e7e7;\n    color: #888;\n  }\n\n.DRIX6Ot6i5 .GOtPqL29CJ {\n    max-width: 82px;\n  }\n\n.rTSmTpTjPo > div {\n    background:#F7F8FB;\n  }\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MessageSource/Product/index.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,iBAAiB;EACjB,eAAe;EACf,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;EACvB,6BAA6B;AAC/B;;AAEA;EACE,WAAW;EACX,gBAAgB;EAChB,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;EACvB,uCAAuC;AAqBzC;;AAnBE;IACE,WAAW;EACb;;AAEA;;IAEE,kBAAkB;IAClB,iBAAiB;EACnB;;AAEA;IACE,yBAAyB;IACzB,cAAc;EAChB;;AAEA;IACE,yBAAyB;IACzB,WAAW;EACb;;AAIA;IACE,eAAe;EACjB;;AAIA;IACE,kBAAkB;EACpB",sourcesContent:[".original-price {\n  color: #bbb;\n  margin-right: 4px;\n  max-width: 44px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  text-decoration: line-through;\n}\n\n.price {\n  color: #333;\n  max-width: 130px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.status {\n  font-size: 12px;\n  max-width: 72px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  transform: scale(0.91) translateX(-3px);\n\n  &.normal {\n    color: #888;\n  }\n\n  &.invalid,\n  &.deleted {\n    border-radius: 1px;\n    padding: 0 0.33em;\n  }\n\n  &.invalid {\n    background-color: #fdecec;\n    color: #ef4747;\n  }\n\n  &.deleted {\n    background-color: #e7e7e7;\n    color: #888;\n  }\n}\n\n.origin {\n  & .price {\n    max-width: 82px;\n  }\n}\n\n.product-deleted {\n  & > div {\n    background:#F7F8FB;\n  }\n}\n"],sourceRoot:""}]),o.locals={"original-price":"MArSWKlROx",originalPrice:"MArSWKlROx",price:"GOtPqL29CJ",status:"iTQsEeB_Ll",normal:"nvxhYwnMRp",invalid:"BbiZLlMz2Q",deleted:"MWZSSi11Xt",origin:"DRIX6Ot6i5","product-deleted":"rTSmTpTjPo",productDeleted:"rTSmTpTjPo"};const i=o},1177:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".aPkxwEmpbc {\n  font-size: 16px;\n  width: calc(100% - 1em);\n  padding: 0.5em;\n  background-color: #f7f8fb;\n  height: 57px;\n  box-sizing: content-box;\n}\n\n.WqnxqWYEUe {\n  height: 2em;\n  width: 100%;\n  position: relative;\n}\n\n.g1RCCZAeWH {\n  height: 100%;\n  margin-left: 2em;\n  padding-left: 0.5em;\n}\n\n.g1RCCZAeWH._G6ZxA1qYO {\n    display: flex;\n    align-items: center;\n  }\n\n.cBomL4XnjJ {\n  font-size: 12px;\n  line-height: 15px;\n  color: #333;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.Mez5KPkh4d {\n  margin-bottom: 4px;\n}\n\n.RsTExA8pvG {\n  padding-top: 2px;\n}\n\n.JMr6x3BJJC {\n  margin-top: 0.125em;\n}\n\n.JFRlMYQSZi {\n  height: 10px;\n  padding-left: 4px;\n  border-left: 1px solid #ccc;\n  margin-left: 4px;\n}\n\n.UFWU17wVUx {\n  display: flex;\n  font-size: 12px;\n  white-space: nowrap;\n  align-items: center;\n}\n\n.UFWU17wVUx .JFRlMYQSZi {\n    margin-left: 4px;\n    padding-left: 4px;\n  }\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MessageSource/common.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,uBAAuB;EACvB,cAAc;EACd,yBAAyB;EACzB,YAAY;EACZ,uBAAuB;AACzB;;AAEA;EACE,WAAW;EACX,WAAW;EACX,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,gBAAgB;EAChB,mBAAmB;AAMrB;;AAJE;IACE,aAAa;IACb,mBAAmB;EACrB;;AAGF;EACE,eAAe;EACf,iBAAiB;EACjB,WAAW;EACX,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;AACzB;;AAEA;EAEE,kBAAkB;AACpB;;AAEA;EAEE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,2BAA2B;EAC3B,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,eAAe;EACf,mBAAmB;EACnB,mBAAmB;AAMrB;;AAJE;IACE,gBAAgB;IAChB,iBAAiB;EACnB",sourcesContent:[".root {\n  font-size: 16px;\n  width: calc(100% - 1em);\n  padding: 0.5em;\n  background-color: #f7f8fb;\n  height: 57px;\n  box-sizing: content-box;\n}\n\n.detail-block {\n  height: 2em;\n  width: 100%;\n  position: relative;\n}\n\n.content {\n  height: 100%;\n  margin-left: 2em;\n  padding-left: 0.5em;\n\n  &.no-model {\n    display: flex;\n    align-items: center;\n  }\n}\n\n.name {\n  font-size: 12px;\n  line-height: 15px;\n  color: #333;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.product-name {\n  composes: name;\n  margin-bottom: 4px;\n}\n\n.order-name {\n  composes: name;\n  padding-top: 2px;\n}\n\n.order-detail {\n  margin-top: 0.125em;\n}\n\n.divider {\n  height: 10px;\n  padding-left: 4px;\n  border-left: 1px solid #ccc;\n  margin-left: 4px;\n}\n\n.product-detail {\n  display: flex;\n  font-size: 12px;\n  white-space: nowrap;\n  align-items: center;\n\n  & .divider {\n    margin-left: 4px;\n    padding-left: 4px;\n  }\n}\n"],sourceRoot:""}]),o.locals={root:"aPkxwEmpbc","detail-block":"WqnxqWYEUe",detailBlock:"WqnxqWYEUe",content:"g1RCCZAeWH","no-model":"_G6ZxA1qYO",noModel:"_G6ZxA1qYO",name:"cBomL4XnjJ","product-name":"Mez5KPkh4d cBomL4XnjJ",productName:"Mez5KPkh4d cBomL4XnjJ","order-name":"RsTExA8pvG cBomL4XnjJ",orderName:"RsTExA8pvG cBomL4XnjJ","order-detail":"JMr6x3BJJC",orderDetail:"JMr6x3BJJC",divider:"JFRlMYQSZi","product-detail":"UFWU17wVUx",productDetail:"UFWU17wVUx"};const i=o},5522:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".YgwCAyD4Nu {\n  display: flex;\n  justify-content: center;\n  margin-top: 4px;\n}\n\n.qu7NqjdBtM {\n  width: 12px;\n  height: 14px;\n  margin-right: 6px;\n  vertical-align: middle;\n}\n\n.zjxBy6muI4 {\n  color: #eda500;\n}\n\n.r1mvfORZKY {\n  color: #30b566;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MetaInfo/index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,uBAAuB;EACvB,eAAe;AACjB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,sBAAsB;AACxB;;AAEA;EAEE,cAAc;AAChB;;AAEA;EAEE,cAAc;AAChB",sourcesContent:[".meta-content {\n  display: flex;\n  justify-content: center;\n  margin-top: 4px;\n}\n\n.icon {\n  width: 12px;\n  height: 14px;\n  margin-right: 6px;\n  vertical-align: middle;\n}\n\n.warn-icon {\n  composes: icon;\n  color: #eda500;\n}\n\n.success-icon {\n  composes: icon;\n  color: #30b566;\n}\n"],sourceRoot:""}]),o.locals={"meta-content":"YgwCAyD4Nu",metaContent:"YgwCAyD4Nu",icon:"qu7NqjdBtM","warn-icon":"zjxBy6muI4 qu7NqjdBtM",warnIcon:"zjxBy6muI4 qu7NqjdBtM","success-icon":"r1mvfORZKY qu7NqjdBtM",successIcon:"r1mvfORZKY qu7NqjdBtM"};const i=o},8733:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".giWDyn0pBc {\n  box-sizing: border-box;\n  background: #fafafa;\n  margin-top: 1em;\n  height: 28px;\n  color: #bbb;\n  font-size: 14px;\n  text-align: center;\n  padding: 6px 0;\n  margin-left: -7.5px;\n  margin-right: -7.5px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/NewMessageTip/index.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,mBAAmB;EACnB,eAAe;EACf,YAAY;EACZ,WAAW;EACX,eAAe;EACf,kBAAkB;EAClB,cAAc;EACd,mBAAmB;EACnB,oBAAoB;AACtB",sourcesContent:[".new-message-tip {\n  box-sizing: border-box;\n  background: #fafafa;\n  margin-top: 1em;\n  height: 28px;\n  color: #bbb;\n  font-size: 14px;\n  text-align: center;\n  padding: 6px 0;\n  margin-left: -7.5px;\n  margin-right: -7.5px;\n}\n"],sourceRoot:""}]),o.locals={"new-message-tip":"giWDyn0pBc",newMessageTip:"giWDyn0pBc"};const i=o},6322:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".ttPQqPfWBw {\n  margin-right: 0.5em;\n}\n\n.jfwEgZmTS8 {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.qLygjvHbi_ {\n}\n\n.qLygjvHbi_:hover {\n    cursor: pointer;\n  }\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/SendingStatus/index.css"],names:[],mappings:"AAAA;EACE,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,cAAc;EACd,cAAc;EACd,cAAc;AAChB;;AAEA;AAMA;;AAHE;IACE,eAAe;EACjB",sourcesContent:[".sending-wrap {\n  margin-right: 0.5em;\n}\n\n.icon-base {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.icon {\n  composes: icon-base;\n\n  &:hover {\n    cursor: pointer;\n  }\n}\n"],sourceRoot:""}]),o.locals={"sending-wrap":"ttPQqPfWBw",sendingWrap:"ttPQqPfWBw","icon-base":"jfwEgZmTS8",iconBase:"jfwEgZmTS8",icon:"qLygjvHbi_ jfwEgZmTS8"};const i=o},8304:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".lZX8jHufoA {\n  box-sizing: border-box;\n  padding: 0 7.5px;\n}\n\n.WTt5Zxu_wD {\n  padding-bottom: 0.75em;\n}\n\n.uAjc6BXz_7 {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n.n7tPV8kPwM {\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.qAGJYsVJQu {\n  justify-content: flex-start;\n}\n\n.P3ZdqDjG37 {\n  font-size: 12px;\n  margin-top: 12px;\n  line-height: 1.167em;\n  color: rgba(0, 0, 0, 0.4);\n  text-align: center;\n}\n\n.ABKca6B6Ht {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.uCUlXlm0QJ {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: row;\n}\n\n.z_Xhr9b5fr {\n  position: relative;\n}\n\n.GdJhfJ3Op6 {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 0.75em;\n  flex-shrink: 0;\n}\n\n.sNqF64S6Ls {\n  opacity: 0.6;\n  filter: grayscale(50%);\n}\n\n.bYxtrDTEPp {\n  background-color: rgba(0, 0, 0, 0.6);\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 1.2em 1.2em;\n}\n\n.DLvnpF6s13 {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n}\n\n.DLvnpF6s13:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n\n.DcB5O9mC5j {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n}\n\n.DcB5O9mC5j:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n\n.BeN6c_qwKf .DLvnpF6s13:hover {\n    color: #555;\n    cursor: not-allowed;\n  }\n\n.h0x92TVWo6 {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.24;\n  color: #333;\n  font-size: 14px;\n  font-weight: 500;\n  word-break: break-all;\n}\n\n.Prfii1SpEb {\n  margin-right: 0.25em;\n  position: relative;\n  color: #bbb;\n}\n\n.Prfii1SpEb::after {\n    content: '';\n    width: 100%;\n    height: 1px;\n    position: absolute;\n    left: 0;\n    top: 50%;\n    background-color: #bbb;\n  }\n\n.RjM9TcwKtg {\n  margin-top: 0.5em;\n  line-height: 1.16;\n  color: #555;\n  font-size: 12px;\n}\n\n.nLboISDstO {\n  margin-left: 0.5em;\n  color: #888;\n}\n\n.zIxwRJ1LdF {\n  font-size: 14px;\n  line-height: 1.36em;\n  color: #333;\n  display: flex;\n  align-items: center;\n}\n\n.PMSbyVSfsf {\n  color: #ff4742;\n}\n\n.fSRVoLiSel {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.y0mvzRsyQC {\n  width: 2.25em;\n  height: 2.25em;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.bCeP7O7kIU {\n  width: 100%;\n  height: 100%;\n}\n\n.qUVi9b0o_d {\n  width: 2.25em;\n  flex-shrink: 0;\n}\n\n.GmQ6XKEO1A {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.WZc6v51Ui3 {\n  flex-grow: 1;\n  overflow: hidden;\n}\n\n.dAcTlOVojQ {\n  display: flex;\n  flex-direction: row;\n}\n\n.V5XYcsiIjs {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 1em;\n  flex-shrink: 0;\n}\n\n.W5wfnXLeev {\n  margin-bottom: 0.428em;\n}\n\n.l9LJVab1Cf {\n  font-size: 14px;\n  color: #01bfa5;\n}\n\n.nA662Ba2GJ {\n  margin: 0 0.428em;\n  color: rgba(136, 136, 136, 0.4);\n}\n\n.XPgj2M188U {\n  line-height: 1.142;\n  font-size: 14px;\n  color: #555;\n  font-weight: bold;\n}\n\n.vCA0Qf4XEs {\n  line-height: 1.16em;\n  font-size: 12px;\n  color: #888;\n}\n\n.ZZd9f8t9vy {\n  margin-right: 1.333em;\n}\n\n.EPXlbwcmCC {\n  background-color: #f4f4f4;\n  font-size: 16px;\n  height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding-left: 0.75em;\n}\n\n.YcgygeHQkO {\n  height: 1em;\n  width: 1em;\n}\n\n.gOXjE4DJKC {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.42);\n  margin-left: 1em;\n}\n\n.aihhYFJGJZ {\n  font-size: 16px;\n  height: 3.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.ULipY89W0D {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.CpuhigVQTg {\n  height: 2.25em;\n  width: 2.25em;\n  margin: 0 0.75em;\n}\n\n.CpuhigVQTg > * {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n  }\n\n.CpuhigVQTg > div {\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: bold;\n  }\n\n.XzkgdAK3Dj {\n  font-size: 14px;\n  color: #555;\n}\n\n.fDWC8RPEk1 {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  margin: 0 0.75em;\n}\n\n@keyframes Sy68QEc9eS {\n  from {\n    transform: rotateZ(0);\n  }\n\n  to {\n    transform: rotateZ(360deg);\n  }\n}\n\n.ZbPw85eBry {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n\n.z_IvwASUPS {\n  padding: 0.667em 0.857em;\n  font-size: 14px;\n  line-height: 1.143em;\n  border-radius: 2px;\n  background-color: #d7e4ff;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/index.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,gBAAgB;AAClB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EAEE,mBAAmB;EACnB,yBAAyB;AAC3B;;AAEA;EAEE,2BAA2B;AAC7B;;AAEA;EACE,eAAe;EACf,gBAAgB;EAChB,oBAAoB;EACpB,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,oBAAoB;EACpB,cAAc;AAChB;;AAEA;EACE,YAAY;EACZ,sBAAsB;AACxB;;AAEA;EACE,oCAAoC;EACpC,4BAA4B;EAC5B,2BAA2B;EAC3B,4BAA4B;AAC9B;;AAEA;EACE,WAAW;EACX,eAAe;EACf,cAAc;EACd,qBAAqB;EACrB,4BAA4B;AAM9B;;AAJE;IACE,cAAc;IACd,eAAe;EACjB;;AAGF;EACE,WAAW;EACX,eAAe;EACf,cAAc;EACd,qBAAqB;EACrB,4BAA4B;AAM9B;;AAJE;IACE,cAAc;IACd,eAAe;EACjB;;AAIA;IACE,WAAW;IACX,mBAAmB;EACrB;;AAGF;EACE,gBAAgB;EAChB,uBAAuB;EACvB,iBAAiB;EACjB,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,qBAAqB;AACvB;;AAEA;EACE,oBAAoB;EACpB,kBAAkB;EAClB,WAAW;AAWb;;AATE;IACE,WAAW;IACX,WAAW;IACX,WAAW;IACX,kBAAkB;IAClB,OAAO;IACP,QAAQ;IACR,sBAAsB;EACxB;;AAGF;EACE,iBAAiB;EACjB,iBAAiB;EACjB,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE,eAAe;EACf,mBAAmB;EACnB,WAAW;EACX,aAAa;EACb,mBAAmB;AACrB;;AAEA;EAEE,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,kBAAkB;EAClB,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,YAAY;AACd;;AAEA;EACE,aAAa;EACb,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,iBAAiB;EACjB,cAAc;AAChB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,eAAe;EACf,cAAc;AAChB;;AAEA;EACE,iBAAiB;EACjB,+BAA+B;AACjC;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,WAAW;EACX,iBAAiB;AACnB;;AAEA;EACE,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,qBAAqB;AACvB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,WAAW;EACX,aAAa;EACb,mBAAmB;EACnB,2BAA2B;EAC3B,oBAAoB;AACtB;;AAEA;EACE,WAAW;EACX,UAAU;AACZ;;AAEA;EACE,eAAe;EACf,0BAA0B;EAC1B,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,cAAc;EACd,yBAAyB;EACzB,kBAAkB;EAClB,aAAa;EACb,mBAAmB;EACnB,8BAA8B;AAChC;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,mBAAmB;EACnB,2BAA2B;AAC7B;;AAEA;EACE,cAAc;EACd,aAAa;EACb,gBAAgB;AAelB;;AAbE;IACE,WAAW;IACX,YAAY;IACZ,kBAAkB;EACpB;;AAEA;IACE,WAAW;IACX,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,iBAAiB;EACnB;;AAGF;EACE,eAAe;EACf,WAAW;AACb;;AAEA;EACE,aAAa;EACb,cAAc;EACd,mBAAmB;EACnB,uBAAuB;EACvB,gBAAgB;AAClB;;AAEA;EACE;IACE,qBAAqB;EACvB;;EAEA;IACE,0BAA0B;EAC5B;AACF;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,wBAAwB;EACxB,eAAe;EACf,oBAAoB;EACpB,kBAAkB;EAClB,yBAAyB;AAC3B",sourcesContent:[".root {\n  box-sizing: border-box;\n  padding: 0 7.5px;\n}\n\n.last-message {\n  padding-bottom: 0.75em;\n}\n\n.message {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n.message-send {\n  composes: message;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.message-receive {\n  composes: message;\n  justify-content: flex-start;\n}\n\n.message-time {\n  font-size: 12px;\n  margin-top: 12px;\n  line-height: 1.167em;\n  color: rgba(0, 0, 0, 0.4);\n  text-align: center;\n}\n\n.product-origin {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.product-origin-info {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: row;\n}\n\n.image-wrapper {\n  position: relative;\n}\n\n.product-image {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 0.75em;\n  flex-shrink: 0;\n}\n\n.sold-out {\n  opacity: 0.6;\n  filter: grayscale(50%);\n}\n\n.background-settings {\n  background-color: rgba(0, 0, 0, 0.6);\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 1.2em 1.2em;\n}\n\n.view-link {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n\n  &:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n}\n\n.view-mall-link {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n\n  &:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n}\n\n.banned {\n  & .view-link:hover {\n    color: #555;\n    cursor: not-allowed;\n  }\n}\n\n.product-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.24;\n  color: #333;\n  font-size: 14px;\n  font-weight: 500;\n  word-break: break-all;\n}\n\n.origin-price {\n  margin-right: 0.25em;\n  position: relative;\n  color: #bbb;\n\n  &::after {\n    content: '';\n    width: 100%;\n    height: 1px;\n    position: absolute;\n    left: 0;\n    top: 50%;\n    background-color: #bbb;\n  }\n}\n\n.product-price {\n  margin-top: 0.5em;\n  line-height: 1.16;\n  color: #555;\n  font-size: 12px;\n}\n\n.product-stock {\n  margin-left: 0.5em;\n  color: #888;\n}\n\n.deleted-product {\n  font-size: 14px;\n  line-height: 1.36em;\n  color: #333;\n  display: flex;\n  align-items: center;\n}\n\n.banned-product {\n  composes: product-price;\n  color: #ff4742;\n}\n\n.view-product-block {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.avatar-wrap {\n  width: 2.25em;\n  height: 2.25em;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.avatar {\n  width: 100%;\n  height: 100%;\n}\n\n.avatar-placeholder {\n  width: 2.25em;\n  flex-shrink: 0;\n}\n\n.order-origin {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.order-origin-info {\n  flex-grow: 1;\n  overflow: hidden;\n}\n\n.order-info {\n  display: flex;\n  flex-direction: row;\n}\n\n.order-product-image {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 1em;\n  flex-shrink: 0;\n}\n\n.status-wrap {\n  margin-bottom: 0.428em;\n}\n\n.order-status {\n  font-size: 14px;\n  color: #01bfa5;\n}\n\n.pipe {\n  margin: 0 0.428em;\n  color: rgba(136, 136, 136, 0.4);\n}\n\n.order-product-name {\n  line-height: 1.142;\n  font-size: 14px;\n  color: #555;\n  font-weight: bold;\n}\n\n.order-detail {\n  line-height: 1.16em;\n  font-size: 12px;\n  color: #888;\n}\n\n.order-sn {\n  margin-right: 1.333em;\n}\n\n.shop-information {\n  background-color: #f4f4f4;\n  font-size: 16px;\n  height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding-left: 0.75em;\n}\n\n.shop-avatar {\n  height: 1em;\n  width: 1em;\n}\n\n.shop-name {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.42);\n  margin-left: 1em;\n}\n\n.shop-origin {\n  font-size: 16px;\n  height: 3.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.shop-origin-info {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.shop-origin-avatar {\n  height: 2.25em;\n  width: 2.25em;\n  margin: 0 0.75em;\n\n  & > * {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n  }\n\n  & > div {\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: bold;\n  }\n}\n\n.shop-origin-name {\n  font-size: 14px;\n  color: #555;\n}\n\n.view-shop-block {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  margin: 0 0.75em;\n}\n\n@keyframes rotate {\n  from {\n    transform: rotateZ(0);\n  }\n\n  to {\n    transform: rotateZ(360deg);\n  }\n}\n\n.bubble {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n\n.offer-tips {\n  padding: 0.667em 0.857em;\n  font-size: 14px;\n  line-height: 1.143em;\n  border-radius: 2px;\n  background-color: #d7e4ff;\n}\n"],sourceRoot:""}]),o.locals={root:"lZX8jHufoA","last-message":"WTt5Zxu_wD",lastMessage:"WTt5Zxu_wD",message:"uAjc6BXz_7","message-send":"n7tPV8kPwM uAjc6BXz_7",messageSend:"n7tPV8kPwM uAjc6BXz_7","message-receive":"qAGJYsVJQu uAjc6BXz_7",messageReceive:"qAGJYsVJQu uAjc6BXz_7","message-time":"P3ZdqDjG37",messageTime:"P3ZdqDjG37","product-origin":"ABKca6B6Ht",productOrigin:"ABKca6B6Ht","product-origin-info":"uCUlXlm0QJ",productOriginInfo:"uCUlXlm0QJ","image-wrapper":"z_Xhr9b5fr",imageWrapper:"z_Xhr9b5fr","product-image":"GdJhfJ3Op6",productImage:"GdJhfJ3Op6","sold-out":"sNqF64S6Ls",soldOut:"sNqF64S6Ls","background-settings":"bYxtrDTEPp",backgroundSettings:"bYxtrDTEPp","view-link":"DLvnpF6s13",viewLink:"DLvnpF6s13","view-mall-link":"DcB5O9mC5j",viewMallLink:"DcB5O9mC5j",banned:"BeN6c_qwKf","product-name":"h0x92TVWo6",productName:"h0x92TVWo6","origin-price":"Prfii1SpEb",originPrice:"Prfii1SpEb","product-price":"RjM9TcwKtg",productPrice:"RjM9TcwKtg","product-stock":"nLboISDstO",productStock:"nLboISDstO","deleted-product":"zIxwRJ1LdF",deletedProduct:"zIxwRJ1LdF","banned-product":"PMSbyVSfsf RjM9TcwKtg",bannedProduct:"PMSbyVSfsf RjM9TcwKtg","view-product-block":"fSRVoLiSel",viewProductBlock:"fSRVoLiSel","avatar-wrap":"y0mvzRsyQC",avatarWrap:"y0mvzRsyQC",avatar:"bCeP7O7kIU","avatar-placeholder":"qUVi9b0o_d",avatarPlaceholder:"qUVi9b0o_d","order-origin":"GmQ6XKEO1A",orderOrigin:"GmQ6XKEO1A","order-origin-info":"WZc6v51Ui3",orderOriginInfo:"WZc6v51Ui3","order-info":"dAcTlOVojQ",orderInfo:"dAcTlOVojQ","order-product-image":"V5XYcsiIjs",orderProductImage:"V5XYcsiIjs","status-wrap":"W5wfnXLeev",statusWrap:"W5wfnXLeev","order-status":"l9LJVab1Cf",orderStatus:"l9LJVab1Cf",pipe:"nA662Ba2GJ","order-product-name":"XPgj2M188U",orderProductName:"XPgj2M188U","order-detail":"vCA0Qf4XEs",orderDetail:"vCA0Qf4XEs","order-sn":"ZZd9f8t9vy",orderSn:"ZZd9f8t9vy","shop-information":"EPXlbwcmCC",shopInformation:"EPXlbwcmCC","shop-avatar":"YcgygeHQkO",shopAvatar:"YcgygeHQkO","shop-name":"gOXjE4DJKC",shopName:"gOXjE4DJKC","shop-origin":"aihhYFJGJZ",shopOrigin:"aihhYFJGJZ","shop-origin-info":"ULipY89W0D",shopOriginInfo:"ULipY89W0D","shop-origin-avatar":"CpuhigVQTg",shopOriginAvatar:"CpuhigVQTg","shop-origin-name":"XzkgdAK3Dj",shopOriginName:"XzkgdAK3Dj","view-shop-block":"fDWC8RPEk1",viewShopBlock:"fDWC8RPEk1",bubble:"ZbPw85eBry","offer-tips":"z_IvwASUPS",offerTips:"z_IvwASUPS",rotate:"Sy68QEc9eS"};const i=o},8674:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".xQ_ZVDDSL5 {\n  margin: 0;\n  box-sizing: border-box;\n  max-width: 29.5em;\n  padding: 8px;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  border-radius: 2px;\n  color: #333;\n  font-size: 14px;\n  background-color: #f5f6f8;\n}.xQ_ZVDDSL5.sXjBJZAZ93 {\n    background-color: #d7e4ff;\n    color: #333;\n  }\n\n.YDdA3QTCvb {\n  max-width: 240px;\n  line-height: 21px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/CustomMessage/index.css"],names:[],mappings:"AAAA;EACE,SAAS;EACT,sBAAsB;EACtB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,qBAAqB;EACrB,kBAAkB;EAClB,WAAW;EACX,eAAe;EACf,yBAAyB;AAM3B,CAJE;IACE,yBAAyB;IACzB,WAAW;EACb;;AAGF;EACE,gBAAgB;EAChB,iBAAiB;AACnB",sourcesContent:[".message {\n  margin: 0;\n  box-sizing: border-box;\n  max-width: 29.5em;\n  padding: 8px;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  border-radius: 2px;\n  color: #333;\n  font-size: 14px;\n  background-color: #f5f6f8;\n\n  &.send {\n    background-color: #d7e4ff;\n    color: #333;\n  }\n}\n\n.unsupport-faq {\n  max-width: 240px;\n  line-height: 21px;\n}\n"],sourceRoot:""}]),o.locals={message:"xQ_ZVDDSL5",send:"sXjBJZAZ93","unsupport-faq":"YDdA3QTCvb",unsupportFaq:"YDdA3QTCvb"};const i=o},699:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".zMhG2GcJB5 {\n  height: 645px;\n  margin-top: 24px;\n  margin-right: -21px;\n  margin-bottom: -24px;\n}\n\n.vruaYFWPIz {\n  font-size: 12px;\n  color: #bbb;\n  padding-right: 16px;\n  margin-bottom: 8px;\n}\n\n.rHWU4R6moI {\n  padding: 0;\n  margin-bottom: 16px;\n  padding-right: 16px;\n  margin-top: -4px;\n}\n\n.UdG8ieRpin {\n  text-align: right;\n}\n\n.WA7EkEk7KY {\n  color: #888;\n}\n\n.VsOdpRSHy9 {\n  color: #bbb;\n}\n\n.Mseg1zlntD {\n  display: inline-block;\n  width: 0;\n  margin-left: 8px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/FAQHistoryMessage/HistoryList/index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,gBAAgB;EAChB,mBAAmB;EACnB,oBAAoB;AACtB;;AAEA;EACE,eAAe;EACf,WAAW;EACX,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,UAAU;EACV,mBAAmB;EACnB,mBAAmB;EACnB,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,qBAAqB;EACrB,QAAQ;EACR,gBAAgB;AAClB",sourcesContent:[".list {\n  height: 645px;\n  margin-top: 24px;\n  margin-right: -21px;\n  margin-bottom: -24px;\n}\n\n.header {\n  font-size: 12px;\n  color: #bbb;\n  padding-right: 16px;\n  margin-bottom: 8px;\n}\n\n.message {\n  padding: 0;\n  margin-bottom: 16px;\n  padding-right: 16px;\n  margin-top: -4px;\n}\n\n.right {\n  text-align: right;\n}\n\n.username {\n  color: #888;\n}\n\n.stamp {\n  color: #bbb;\n}\n\n.split {\n  display: inline-block;\n  width: 0;\n  margin-left: 8px;\n}\n"],sourceRoot:""}]),o.locals={list:"zMhG2GcJB5",header:"vruaYFWPIz",message:"rHWU4R6moI",right:"UdG8ieRpin",username:"WA7EkEk7KY",stamp:"VsOdpRSHy9",split:"Mseg1zlntD"};const i=o},7539:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".IFFE2hRR3g {\n  width: 240px;\n  padding: 8px;\n  background-color: #fff;\n  border-radius: 2px;\n  box-sizing: border-box;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}.IFFE2hRR3g.Eev1E6LFhB {\n    border: 0.25em solid #d7e4ff;\n  }.IFFE2hRR3g.Kv35x4rdMm {\n    border: 0.25em solid #f1f3f4;\n  }\n\n.P387dp5Goh {\n  width: 600px;\n  height: 672px;\n}\n\n.eefwgb8vaR {\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 12px;\n  line-height: 14px;\n  margin-bottom: 16px;\n  color: #555;\n}\n\n.nCqHkv5xsO {\n  font-size: 12px;\n  line-height: 14px;\n  text-align: right;\n  padding-top: 8px;\n  border-top: 1px dashed #f1f3f4;\n  color: #395692;\n  margin-top: 8px;\n}\n\n.KXHfh5bou2 {\n  font-size: 12px;\n  color: #888;\n  line-height: 18px;\n  width: 220px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n  white-space: nowrap;\n  height: 18px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/FAQHistoryMessage/index.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,YAAY;EACZ,sBAAsB;EACtB,kBAAkB;EAClB,sBAAsB;EACtB,eAAe;EACf,yBAAyB;AAS3B,CAPE;IACE,4BAA4B;EAC9B,CAEA;IACE,4BAA4B;EAC9B;;AAGF;EACE,YAAY;EACZ,aAAa;AACf;;AAEA;EACE,WAAW;EACX,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;EACvB,eAAe;EACf,iBAAiB;EACjB,mBAAmB;EACnB,WAAW;AACb;;AAEA;EACE,eAAe;EACf,iBAAiB;EACjB,iBAAiB;EACjB,gBAAgB;EAChB,8BAA8B;EAC9B,cAAc;EACd,eAAe;AACjB;;AAEA;EACE,eAAe;EACf,WAAW;EACX,iBAAiB;EACjB,YAAY;EACZ,uBAAuB;EACvB,gBAAgB;EAChB,qBAAqB;EACrB,mBAAmB;EACnB,YAAY;AACd",sourcesContent:[".root {\n  width: 240px;\n  padding: 8px;\n  background-color: #fff;\n  border-radius: 2px;\n  box-sizing: border-box;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &.send {\n    border: 0.25em solid #d7e4ff;\n  }\n\n  &.receive {\n    border: 0.25em solid #f1f3f4;\n  }\n}\n\n.container {\n  width: 600px;\n  height: 672px;\n}\n\n.header {\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 12px;\n  line-height: 14px;\n  margin-bottom: 16px;\n  color: #555;\n}\n\n.footer {\n  font-size: 12px;\n  line-height: 14px;\n  text-align: right;\n  padding-top: 8px;\n  border-top: 1px dashed #f1f3f4;\n  color: #395692;\n  margin-top: 8px;\n}\n\n.preview {\n  font-size: 12px;\n  color: #888;\n  line-height: 18px;\n  width: 220px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n  white-space: nowrap;\n  height: 18px;\n}\n"],sourceRoot:""}]),o.locals={root:"IFFE2hRR3g",send:"Eev1E6LFhB",receive:"Kv35x4rdMm",container:"P387dp5Goh",header:"eefwgb8vaR",footer:"nCqHkv5xsO",preview:"KXHfh5bou2"};const i=o},5965:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".sWnNfV3B5s {\n  font-size: 14px;\n  border-radius: 2px;\n  background-color: #f5f6f8;\n  max-width: 240px;\n  padding: 8px;\n  line-height: 16px;\n}.sWnNfV3B5s.zlsgqeBenz {\n    background-color: #d7e4ff;\n  }\n\n.TfXcQ_zrLr {\n  color: #395692;\n  text-decoration: underline;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/OrderMessage/index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,kBAAkB;EAClB,yBAAyB;EACzB,gBAAgB;EAChB,YAAY;EACZ,iBAAiB;AAKnB,CAHE;IACE,yBAAyB;EAC3B;;AAGF;EACE,cAAc;EACd,0BAA0B;EAC1B,eAAe;AACjB",sourcesContent:[".order {\n  font-size: 14px;\n  border-radius: 2px;\n  background-color: #f5f6f8;\n  max-width: 240px;\n  padding: 8px;\n  line-height: 16px;\n\n  &.send {\n    background-color: #d7e4ff;\n  }\n}\n\n.link {\n  color: #395692;\n  text-decoration: underline;\n  cursor: pointer;\n}\n"],sourceRoot:""}]),o.locals={order:"sWnNfV3B5s",send:"zlsgqeBenz",link:"TfXcQ_zrLr"};const i=o},1500:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".E_OLrXNoEk {\n  background: #f5f6f8;\n  padding: 8px;\n  width: 224px;\n  word-break: break-all;\n  font-size: 14px;\n  box-sizing: content-box;\n}\n\n.LDttZcGOz6 {\n  box-sizing: content-box;\n  border-top: 1px solid #e8e8e8;\n  height: 36px;\n  line-height: 36px;\n  width: 224px;\n  word-break: break-all;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #888;\n  cursor: pointer;\n  text-align: center;\n  white-space: nowrap;\n}\n\n.wf9mOd836y {\n  padding-bottom: 8px;\n  line-height: 21px;\n}\n\n.fI2ODdwFGy {\n  color: #ee4d2d;\n}\n\n.lPtsH0BIt2 {\n  color: #ccc;\n  cursor: default;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/PondMessage/index.css"],names:[],mappings:"AAAA;EACE,mBAAmB;EACnB,YAAY;EACZ,YAAY;EACZ,qBAAqB;EACrB,eAAe;EACf,uBAAuB;AACzB;;AAEA;EACE,uBAAuB;EACvB,6BAA6B;EAC7B,YAAY;EACZ,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,gBAAgB;EAChB,uBAAuB;EACvB,WAAW;EACX,eAAe;EACf,kBAAkB;EAClB,mBAAmB;AACrB;;AAEA;EACE,mBAAmB;EACnB,iBAAiB;AACnB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,WAAW;EACX,eAAe;AACjB",sourcesContent:[".root {\n  background: #f5f6f8;\n  padding: 8px;\n  width: 224px;\n  word-break: break-all;\n  font-size: 14px;\n  box-sizing: content-box;\n}\n\n.option {\n  box-sizing: content-box;\n  border-top: 1px solid #e8e8e8;\n  height: 36px;\n  line-height: 36px;\n  width: 224px;\n  word-break: break-all;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #888;\n  cursor: pointer;\n  text-align: center;\n  white-space: nowrap;\n}\n\n.title {\n  padding-bottom: 8px;\n  line-height: 21px;\n}\n\n.primary {\n  color: #ee4d2d;\n}\n\n.invalid {\n  color: #ccc;\n  cursor: default;\n}\n"],sourceRoot:""}]),o.locals={root:"E_OLrXNoEk",option:"LDttZcGOz6",title:"wf9mOd836y",primary:"fI2ODdwFGy",invalid:"lPtsH0BIt2"};const i=o},6496:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".EfqwjCbjYK {\n  left: 0;\n  bottom: 0;\n  color: #fff;\n  display: flex;\n  width: 100%;\n  padding: 8px;\n  font-size: 14px;\n  cursor: pointer;\n  align-items: center;\n  flex-direction: row;\n  box-sizing: border-box;\n  background-color: rgba(0, 0, 0, 0.4);\n}\n\n.lRBlAKma_w {\n  line-height: 16px;\n  flex-grow: 1;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.MxoUoxkjhX {\n  cursor: pointer;\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  flex-shrink: 0;\n  flex-grow: 0;\n  color: #fff;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/UnreadBriefMessages/index.css"],names:[],mappings:"AAAA;EACE,OAAO;EACP,SAAS;EACT,WAAW;EACX,aAAa;EACb,WAAW;EACX,YAAY;EACZ,eAAe;EACf,eAAe;EACf,mBAAmB;EACnB,mBAAmB;EACnB,sBAAsB;EACtB,oCAAoC;AACtC;;AAEA;EACE,iBAAiB;EACjB,YAAY;EACZ,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,eAAe;EACf,qBAAqB;EACrB,WAAW;EACX,YAAY;EACZ,cAAc;EACd,YAAY;EACZ,WAAW;AACb",sourcesContent:[".root {\n  left: 0;\n  bottom: 0;\n  color: #fff;\n  display: flex;\n  width: 100%;\n  padding: 8px;\n  font-size: 14px;\n  cursor: pointer;\n  align-items: center;\n  flex-direction: row;\n  box-sizing: border-box;\n  background-color: rgba(0, 0, 0, 0.4);\n}\n\n.new-message {\n  line-height: 16px;\n  flex-grow: 1;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.new-message-arrow {\n  cursor: pointer;\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  flex-shrink: 0;\n  flex-grow: 0;\n  color: #fff;\n}\n"],sourceRoot:""}]),o.locals={root:"EfqwjCbjYK","new-message":"lRBlAKma_w",newMessage:"lRBlAKma_w","new-message-arrow":"MxoUoxkjhX",newMessageArrow:"MxoUoxkjhX"};const i=o},1337:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".N1x9FHSgsu {\n  height: 100%;\n  flex-grow: 1;\n}\n\n.AbLCooIIar {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.cmgkmzn7la {\n  outline: 0 none;\n  overscroll-behavior: contain;\n}\n\n.kRvCnxx7Qk {\n  position: absolute;\n  bottom: 40px;\n  right: 20px;\n  height: 36px;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/index.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,OAAO;EACP,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,eAAe;EACf,4BAA4B;AAC9B;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,YAAY;EACZ,eAAe;AACjB",sourcesContent:[".message-section {\n  height: 100%;\n  flex-grow: 1;\n}\n\n.layers {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.grid {\n  outline: 0 none;\n  overscroll-behavior: contain;\n}\n\n.iconWrapper {\n  position: absolute;\n  bottom: 40px;\n  right: 20px;\n  height: 36px;\n  cursor: pointer;\n}\n"],sourceRoot:""}]),o.locals={"message-section":"N1x9FHSgsu",messageSection:"N1x9FHSgsu",layers:"AbLCooIIar",grid:"cmgkmzn7la",iconWrapper:"kRvCnxx7Qk"};const i=o},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,s,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&o[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),s&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=s):u[4]="".concat(s)),t.push(u))}},t}},7537:e=>{"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),a="/*# ".concat(s," */"),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[t].concat(o).concat([a]).join("\n")}return[t].join("\n")}},5666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",i=s.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var s=t&&t.prototype instanceof h?t:h,a=Object.create(s.prototype),o=new w(r||[]);return a._invoke=function(e,t,n){var r=d;return function(s,a){if(r===A)throw new Error("Generator is already running");if(r===g){if("throw"===s)throw a;return T()}for(n.method=s,n.arg=a;;){var o=n.delegate;if(o){var i=x(o,n);if(i){if(i===f)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=A;var c=u(e,t,n);if("normal"===c.type){if(r=n.done?g:p,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=g,n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",A="executing",g="completed",f={};function h(){}function E(){}function m(){}var v={};v[a]=function(){return this};var S=Object.getPrototypeOf,_=S&&S(S(O([])));_&&_!==n&&r.call(_,a)&&(v=_);var y=m.prototype=h.prototype=Object.create(v);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(s,a,o,i){var c=u(e[s],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,i)}))}i(c.arg)}var s;this._invoke=function(e,r){function a(){return new t((function(t,s){n(e,r,t,s)}))}return s=s?s.then(a,a):a()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var s=u(r,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,f;var a=s.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function O(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,o=function n(){for(;++s<e.length;)if(r.call(e,s))return n.value=e[s],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:T}}function T(){return{value:t,done:!0}}return E.prototype=y.constructor=m,m.constructor=E,E.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},C(b.prototype),b.prototype[o]=function(){return this},e.AsyncIterator=b,e.async=function(t,n,r,s,a){void 0===a&&(a=Promise);var o=new b(l(t,n,r,s),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},C(y),c(y,i,"Generator"),y[a]=function(){return this},y.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function s(r,s){return i.type="throw",i.arg=e,n.next=r,s&&(n.method="next",n.arg=t),!!s}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var s=r.arg;I(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},3379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},o=[],i=0;i<e.length;i++){var c=e[i],l=r.base?c[0]+r.base:c[0],u=a[l]||0,d="".concat(l," ").concat(u);a[l]=u+1;var p=n(d),A={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(A);else{var g=s(A,r);r.byIndex=i,t.splice(i,0,{identifier:d,updater:g,references:1})}o.push(d)}return o}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var a=r(e=e||[],s=s||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var i=n(a[o]);t[i].references--}for(var c=r(e,s),l=0;l<a.length;l++){var u=n(a[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=c}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,s&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},5327:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,s=t;return[s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]]].join("")}},5217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},1171:(e,t,n)=>{var r=n(5217),s=n(5327);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[a+i]=o[i];return t||s(o)}},6512:e=>{"use strict";e.exports=x},1361:e=>{"use strict";e.exports=g},6359:e=>{"use strict";e.exports=d},1524:e=>{"use strict";e.exports=D},2236:e=>{"use strict";e.exports=q},2470:e=>{"use strict";e.exports=P},3710:e=>{"use strict";e.exports=w},731:e=>{"use strict";e.exports=O},7095:e=>{"use strict";e.exports=T},1547:e=>{"use strict";e.exports=k},9181:e=>{"use strict";e.exports=R},8062:e=>{"use strict";e.exports=B},6572:e=>{"use strict";e.exports=b},2066:e=>{"use strict";e.exports=I},5343:e=>{"use strict";e.exports=S},1769:e=>{"use strict";e.exports=v},9977:e=>{"use strict";e.exports=y},5330:e=>{"use strict";e.exports=p},8310:e=>{"use strict";e.exports=N},464:e=>{"use strict";e.exports=m},8661:e=>{"use strict";e.exports=_},8550:e=>{"use strict";e.exports=j},8156:t=>{"use strict";t.exports=e},9424:e=>{"use strict";e.exports=F},4756:e=>{"use strict";e.exports=n},4236:e=>{"use strict";e.exports=o},2779:e=>{"use strict";e.exports=i},3202:e=>{"use strict";e.exports=c},2167:e=>{"use strict";e.exports=a},8252:e=>{"use strict";e.exports=f},5447:e=>{"use strict";e.exports=t},4944:e=>{"use strict";e.exports=h},8509:e=>{"use strict";e.exports=A},5600:e=>{"use strict";e.exports=C},2511:e=>{"use strict";e.exports=u},1501:e=>{"use strict";e.exports=r},2760:e=>{"use strict";e.exports=L},3162:e=>{"use strict";e.exports=s},8720:e=>{"use strict";e.exports=M},1855:e=>{"use strict";e.exports=l},4672:e=>{"use strict";e.exports=E},907:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:()=>r})},885:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(181);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){i=!0,s=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw s}}return a}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(907);function s(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},U={};function Y(e){var t=U[e];if(void 0!==t)return t.exports;var n=U[e]={id:e,exports:{}};return G[e](n,n.exports,Y),n.exports}Y.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return Y.d(t,{a:t}),t},Y.d=(e,t)=>{for(var n in t)Y.o(t,n)&&!Y.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},Y.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Y.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},Y.nc=void 0;var W={};return(()=>{"use strict";Y.r(W),Y.d(W,{default:()=>rp,getModule:()=>np});var e={};function t(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}Y.r(e),Y.d(e,{HIGHLIGHT_TIMEOUT:()=>Cn,abortAllSendingMessages:()=>Ps,cancelSendingMessageRequested:()=>Ds,cancelSendingMessageSucceeded:()=>Ns,changeTranslateStatus:()=>pa,clearChatRoomRefer:()=>kt,deleteConversationMessageHash:()=>lr,deleteMessagePostRequested:()=>Do,deleteMessageRequested:()=>Po,deleteVideoInfo:()=>Mr,evaluationRequested:()=>Ye,fetchConversationMessagesSaga:()=>en,fetchFaqMessagesRequested:()=>Na,fetchFaqMessagesSucceeded:()=>ja,fetchMessagesRequested:()=>Qt,fetchMessagesRequestedSaga:()=>an,fetchMessagesRequestedWithPreloadSaga:()=>sn,fetchMessagesSucceeded:()=>Xt,fillMessageContent:()=>St,fillMessageRequested:()=>mt,handleCurrentConversationChange:()=>bo,handleFaqExpiredMessage:()=>Zs,handleNewConversationMessageQueue:()=>So,handleSendSucceededMessages:()=>zs,handleSensitiveUrl:()=>wa,makeServiceList:()=>Dr,messageSyncUpdate:()=>Go,receiveMessageRequested:()=>io,receiveMessageSucceeded:()=>co,reducerMap:()=>ni,replaceHttpLinkWithHttps:()=>Cr,resendMessageRequested:()=>Un,resendOfflineMessagesOnce:()=>tr,resendOfflineMessagesOnceSucceed:()=>nr,resetConversationQueue:()=>po,resetCurrentConversationReplyToMessage:()=>kn,resetMessagesFailedByOffline:()=>er,resetNewConversationQueue:()=>lo,resetOldConversationQueue:()=>uo,resetReplyToMessage:()=>Mn,resetScrollToMessageId:()=>On,sagas:()=>ti,scrollToMessage:()=>In,scrollToMessageSaga:()=>Rn,sendMessages:()=>Hs,sendMessagesFailed:()=>Rs,sendMessagesFailedByOffline:()=>$n,sendMessagesRequested:()=>Os,sendMessagesSucceeded:()=>Ts,sendMessagesToPending:()=>ks,sendTranslateFeedback:()=>ga,sendVideoMessageRequested:()=>js,sendingMessages:()=>Bs,setCurrentConversationReplyToMessage:()=>Bn,setEntryPoint:()=>Zo,setInScrollToMessage:()=>Tn,setReplyToMessage:()=>xn,setScrollToMessageId:()=>wn,setSecurityTipsMessage:()=>Kt,showFaqHistoryModal:()=>La,showMyRateCard:()=>Le,showRateCard:()=>Ge,showTranslateFeedback:()=>Aa,translateMessagesRequested:()=>da,updateCurrentFaqId:()=>qa,updateFetchFaqMessagesRequestedStatus:()=>Fa,updateFetchMessagesRequestedStatus:()=>Jt,updateHasConflict:()=>Xo,updateMessageFillStatusMap:()=>Et,updateMessagesRelated:()=>Bt,updateResendConversationMessage:()=>sr,updateVideoInfo:()=>xr,uploadMonitor:()=>Or,uploadVideGetResult:()=>Rr,uploadVideo:()=>Nr,uploadVideoGetToken:()=>Tr,watchDeleteMessage:()=>Fo,watchEvaluation:()=>ze,watchFaqHistorySagas:()=>Ya,watchFetchMessage:()=>cn,watchFill:()=>Ct,watchNewConversationMessageQueue:()=>_o,watchOffline:()=>ar,watchOldConversationMessageQueue:()=>yo,watchReceive:()=>xo,watchReplySaga:()=>jn,watchResend:()=>Wn,watchSend:()=>$s,watchSendWithCancel:()=>Ks,watchTranslate:()=>Ca});var n=Y(8156),r=Y.n(n),s=Y(5447);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function g(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var h=Y(4756),E=Y(1501),m=Y.n(E),v=Y(3162),S=Y.n(v),_=Y(2167),y=Y.n(_),C=Y(4236),b=Y.n(C),x=Y(2779),M=Y.n(x),I=Y(3202),w=Y.n(I),O=Y(1855),T=Y(2511),B=Y(6359),k=Y.n(B),R=Y(3379),P=Y.n(R),D=Y(7795),N=Y.n(D),j=Y(569),F=Y.n(j),q=Y(3565),L=Y.n(q),G=Y(9216),U=Y.n(G),z=Y(4589),Z=Y.n(z),H=Y(1337),V={};V.styleTagTransform=Z(),V.setAttributes=L(),V.insert=F().bind(null,"head"),V.domAPI=N(),V.insertStyleElement=U(),P()(H.Z,V);const Q=H.Z&&H.Z.locals?H.Z.locals:void 0;var X=r().createContext({});X.displayName="ImgCacheContext",Y(5330);var J=Y(8509),K={closeMediaPreview:T.closeChatbotMediaPreview};const $=(0,h.connect)((function(e){return{imageUrl:(0,T.chatbotImageSelector)(e)}}),K)(J.ChatbotProvider);var ee=Y(1361),te=Y.n(ee),ne=Y(6496),re={};re.styleTagTransform=Z(),re.setAttributes=L(),re.insert=F().bind(null,"head"),re.domAPI=N(),re.insertStyleElement=U(),P()(ne.Z,re);const se=ne.Z&&ne.Z.locals?ne.Z.locals:void 0,ae=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var s=f(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return g(this,n)}}(n);function n(){return i(this,n),t.apply(this,arguments)}return l(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.message,n=e.shopId,r=t.id,s=t.conversation_id;(0,T.$tracker)({operation:O.TrackerOperation.IMPRESSION,trackerName:"impressionOrClickUnreadBriefMessage",data:{message_id:r,conversation_id:s},shopId:n})}},{key:"render",value:function(){var e=this.props,t=e.username,n=e.message,s=e.onClick,a=e.shopId,o=e.enableTranslation,i=e.locale,c=n.id,l=n.conversation_id;return r().createElement("div",{className:se.root,onClick:function(){(0,T.$tracker)({trackerName:"impressionOrClickUnreadBriefMessage",data:{message_id:c,conversation_id:l},shopId:a}),s&&s()}},r().createElement("div",{className:se.newMessage},t,": ",(0,O.previewMessage)(n,o,!0,i)),r().createElement(S(),{svg:te(),className:se.newMessageArrow}))}}]),n}(r().PureComponent);var oe=Y(8304),ie={};ie.styleTagTransform=Z(),ie.setAttributes=L(),ie.insert=F().bind(null,"head"),ie.domAPI=N(),ie.insertStyleElement=U(),P()(oe.Z,ie);const ce=oe.Z&&oe.Z.locals?oe.Z.locals:void 0;var le=Y(8252),ue=Y(907),de=Y(181);function pe(e){return function(e){if(Array.isArray(e))return(0,ue.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,de.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ae=Y(7757),ge=Y.n(Ae),fe=Y(4944),he=Y(1171),Ee=Y.n(he);function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}O.MessageTypes.MSG_TYPE_OFFER,O.MessageTypes.MSG_TYPE_ORDER;var Se,_e,ye=O.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,Ce={1:"product_entry_point",2:"order_entry_point",3:"shop_entry_point",8:"product_inactive_seller",10:"lowest_price_guaranteed",11:"poor_fulfilment"},be=function(e){var t=e.id,n=e.recipientID,r=e.message,s=e.redirectInfo,a=e.conversationId,o=e.entryPoint,i=e.replyToMessageId,c=e.shopId,l=t||Ee()(),u=r.content,d=r.type,p=r.textContent,A={id:l,type:d,content:u,to_id:n,shop_id:c,request_id:l,created_timestamp:Math.floor(Date.now()/1e3),chat_send_option:{force_send_cancel_order_warning:!1,comply_cancel_order_warning:!1}};if(i&&(A.content=ve(ve({},A.content),{},{quoted_msg_id:i})),p&&d===ye&&(A.textContent=p),o&&o.type&&o.conversationId===a?A.entry_point=Ce[o.type]:A.entry_point="direct_chat_entry_point",s){var g=s.orderId,f=s.productId,h=s.conversationId,E=s.shopId;if(parseInt(a)===parseInt(h)){if(A.conversation_id=a,g){var m=parseInt(g);A=ve(ve({},A),{},{order_id:m,source_content:{order_id:m,shop_id:E},source_type:"order"})}if(f){var v=parseInt(f);A=ve(ve({},A),{},{product_id:v,source_content:{product_id:v,shop_id:E},source_type:"product"})}}}return A},xe=function(e,t){return e===t?0:(0,O.greaterThan)(e,t)?1:-1},Me=O.MessageTypes.MSG_TYPE_ITEM_LIST,Ie=O.MessageTypes.MSG_TYPE_ADD_ON_DEAL,we=O.MessageTypes.MSG_TYPE_BUNDLE_DEAL,Oe=O.MessageTypes.MSG_TYPE_FLASH_SALE,Te=(o(Se={},Me,{listKey:"chat_product_infos",cleaner:T.itemListDetailCleaner}),o(Se,Ie,{listKey:"add_on_deal_item_list",cleaner:T.addOnDealItemDetailCleaner}),o(Se,we,{listKey:"bundle_deal_item_list",cleaner:T.bundleDealItemDetailCleaner}),o(Se,Oe,{listKey:"flash_sale_item",cleaner:T.flashSaleItemDetailCleaner}),Se),Be=[Me,Ie,we,Oe],ke=function(e){var t=e.type,n=e.content,r=e.country,s=n.shop_id;if(Te[t]){var a=Te[t],o=a.listKey,i=a.cleaner,c=e.content[o];e.content[o]=c.slice(0,O.MAX_SHOWING_ITEM_COUNT).map((function(e){return i(e,r,s)}))}if(t===Me){var l=n.chat_product_infos;e.content.exceedMaxCount=l.length>O.MAX_SHOWING_ITEM_COUNT}else if(t===Ie){var u=n.add_on_deal_rule;e.content.add_on_deal_rule=(0,T.addOnDealRuleCleaner)(u,r)}else if(t===we){var d=n.bundle_rule;e.content.bundle_rule=(0,T.bundleDealRuleCleaner)(d,r)}},Re=function(e){Array.isArray(e)?e.forEach((function(e){ke(e),e.quoted_msg&&ke(e.quoted_msg)})):(ke(e),e.quoted_msg&&ke(e.quoted_msg))};!function(e){e.DELETE_CONVERSATION_MESSAGE_HASH="DELETE_CONVERSATION_MESSAGE_HASH",e.SET_ENTRY_POINT="SET_ENTRY_POINT",e.EVALUATION_REQUESTED="EVALUATION_REQUESTED",e.FETCH_FAQ_MESSAGES_REQUESTED="FETCH_FAQ_MESSAGES_REQUESTED",e.FETCH_FAQ_MESSAGES_SUCCEEDED="FETCH_FAQ_MESSAGES_SUCCEEDED",e.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS="UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS",e.UPDATE_CURRENT_FAQ_ID="UPDATE_CURRENT_FAQ_ID",e.SHOW_FAQ_HISTORY_MODAL="SHOW_FAQ_HISTORY_MODAL",e.FETCH_MESSAGES_REQUESTED="FETCH_MESSAGES_REQUESTED",e.FETCH_MESSAGES_SUCCEEDED="FETCH_MESSAGES_SUCCEEDED",e.UPDATE_FETCH_MESSAGES_REQUESTED_STATUS="UPDATE_FETCH_MESSAGES_REQUESTED_STATUS",e.HANDLE_SENSITIVE_URL="HANDLE_SENSITIVE_URL",e.SEND_MESSAGES_FAILED_BY_OFFLINE="SEND_MESSAGES_FAILED_BY_OFFLINE",e.RESET_MESSAGES_FAILED_BY_OFFLINE="RESET_MESSAGES_FAILED_BY_OFFLINE",e.RESEND_OFFLINE_MESSAGES_ONCE="RESEND_OFFLINE_MESSAGES_ONCE",e.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED="RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED",e.FILL_MESSAGE_REQUESTED="FILL_MESSAGE_REQUESTED",e.RECEIVE_MESSAGE_REQUESTED="RECEIVE_MESSAGE_REQUESTED",e.RECEIVE_MESSAGE_SUCCEEDED="RECEIVE_MESSAGE_SUCCEEDED",e.RESET_NEW_CONVERSATION_QUEUE="RESET_NEW_CONVERSATION_QUEUE",e.RESET_OLD_CONVERSATION_QUEUE="RESET_OLD_CONVERSATION_QUEUE",e.RESET_CONVERSATION_QUEUE="RESET_CONVERSATION_QUEUE",e.RESEND_MESSAGE_REQUESTED="RESEND_MESSAGE_REQUESTED",e.SEND_MESSAGES_REQUESTED="SEND_MESSAGES_REQUESTED",e.SEND_MESSAGES_SUCCEEDED="SEND_MESSAGES_SUCCEEDED",e.SENDING_MESSAGES="SENDING_MESSAGES",e.SEND_MESSAGES_TO_PENDING="SEND_MESSAGES_TO_PENDING",e.SEND_MESSAGES_FAILED="SEND_MESSAGES_FAILED",e.ABORT_ALL_SENDING_MESSAGES="ABORT_ALL_SENDING_MESSAGES",e.CANCEL_SENDING_MESSAGE_REQUESTED="CANCEL_SENDING_MESSAGE_REQUESTED",e.CANCEL_SENDING_MESSAGE_SUCCEEDED="CANCEL_SENDING_MESSAGE_SUCCEEDED",e.SEND_VIDEO_MESSAGE_REQUESTED="SEND_VIDEO_MESSAGE_REQUESTED",e.SEND_PRODUCTS_MESSAGE_REQUESTED="SEND_PRODUCTS_MESSAGE_REQUESTED",e.TRANSLATE_MESSAGES_REQUESTED="TRANSLATE_MESSAGES_REQUESTED",e.CHANGE_TRANSLATE_STATUS="CHANGE_TRANSLATE_STATUS",e.UPDATE_VIDEO_INFO="UPDATE_VIDEO_INFO",e.DELETE_VIDEO_INFO="DELETE_VIDEO_INFO",e.MESSAGE_SYNC_UPDATE="MESSAGE_SYNC_UPDATE",e.SHOW_TRANSLATE_FEEDBACK="SHOW_TRANSLATE_FEEDBACK",e.SEND_TRANSLATE_FEEDBACK="SEND_TRANSLATE_FEEDBACK",e.UPDATE_MESSAGE_FILL_STATUS_MAP="UPDATE_MESSAGE_FILL_STATUS_MAP",e.CHATBOT_INTENTS_REPORT_REQUEST="CHATBOT_INTENTS_REPORT_REQUEST",e.UPDATE_HAS_CONFLICT="UPDATE_HAS_CONFLICT",e.UPDATE_MESSAGES_RELATED="UPDATE_MESSAGES_RELATED",e.UPDATE_MESSAGES_RELATED="UPDATE_MESSAGES_RELATED",e.CLEAR_CHAT_ROOM_REFER="CLEAR_CHAT_ROOM_REFER"}(_e||(_e={}));var Pe=ge().mark(Le),De=ge().mark(Ge),Ne=ge().mark(We),je=ge().mark(ze);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e,t,n){var r,s;return ge().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,fe.select)((0,T.rateCardSelector)(e));case 2:if((r=a.sent)&&r.status!==O.EvaluationStatus.UNRATED){a.next=8;break}return s="webview"===n?{parent:"rating_cards",parentId:e,resource:"get"}:{subServer:"workbenchapi",resource:"rating_card",id:e},a.next=7,(0,fe.call)(T.fetch,qe(qe({},s),{},{params:t}));case 7:r=a.sent;case 8:return a.abrupt("return",r);case 9:case"end":return a.stop()}}),Pe)}function Ge(e){var t,n,r,s,a,o,i,c,l,u,d,p,A,g,f;return ge().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.ids,n=e.shopId,r=e.type,s=Array.isArray(t)?t:[t],a={},"0"!==n&&(a.shop_id=n),h.next=6,(0,fe.select)(T.isSubAccountSelector);case 6:return o=h.sent,h.next=9,(0,fe.select)(T.currentUserShopIdSelector);case 9:if(h.sent===parseInt(n)||o){h.next=23;break}return i=[],s.forEach((function(e){return i.push((0,fe.call)(Le,e,a,r))})),h.next=15,(0,fe.all)(i);case 15:if(c=h.sent,"rating_card"!==r){h.next=20;break}return l=(0,T.normalize)("rateCards",c),u=l.entities,h.next=20,(0,fe.put)((0,T.updateEntities)({entities:u}));case 20:return h.abrupt("return",c);case 23:return d="rating_cards",a.ids="[".concat(s.join(","),"]"),h.next=27,(0,fe.call)(T.fetch,{resource:d,params:a});case 27:if(p=h.sent,A=p[d],"rating_card"!==r){h.next=33;break}return g=(0,T.normalize)("rateCards",p[d]),f=g.entities,h.next=33,(0,fe.put)((0,T.updateEntities)({entities:f}));case 33:return h.abrupt("return",A||[]);case 34:case"end":return h.stop()}}),De)}var Ue,Ye=(0,le.createActions)(o({},_e.EVALUATION_REQUESTED,(function(e){var t=e.messageId,n=e.grade,r=e.reason;return{messageId:t,grade:n,reason:void 0===r?[]:r,otherReason:e.otherReason}}))).evaluationRequested;function We(e){var t,n,r,s,a,o,i,c,l,u,d,p,A,g,f,h,E;return ge().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,n=t.messageId,r=t.grade,s=t.reason,a=t.otherReason,m.next=3,(0,fe.select)((0,T.getMessageSelector)(n));case 3:if(o=m.sent,i=o.from_shop_id,c=o.textContent,l=o.type,u=l===O.MessageTypes.MSG_TYPE_WEBVIEW,d=c.id,m.prev=7,p={grade:r,reason:s},A={},u?A={parent:"rating_cards",resource:"evaluate"}:(p.other_reason=a,A={subServer:"workbenchapi",parent:"rating_card"}),i&&(p.shop_id=i),!u){m.next=19;break}return m.next=15,(0,fe.call)(T.fetch,qe(qe({method:"PUT"},A),{},{parentId:d,payload:JSON.stringify(p)}));case 15:return m.next=17,(0,fe.put)((0,T.updateRecord)({name:"rateCards",id:d,record:{grade:r,status:O.EvaluationStatus.RATED}}));case 17:m.next=24;break;case 19:return m.next=21,(0,fe.call)(T.fetch,qe(qe({method:"PUT"},A),{},{parentId:d,payload:JSON.stringify(p)}));case 21:return g=m.sent,m.next=24,(0,fe.put)((0,T.updateRecord)({name:"rateCards",id:d,record:{grade:r,status:O.EvaluationStatus.RATED,reason_ids:g.reason_ids,other_reason:g.other_reason}}));case 24:m.next=34;break;case 26:return m.prev=26,m.t0=m.catch(7),h=Date.now(),null!==m.t0&&void 0!==m.t0&&null!==(f=m.t0.error)&&void 0!==f&&f.error_code&&((E=m.t0.error.error_code)===O.EvaluationErrorCode.RATED&&(h=O.EvaluationStatus.RATED),E===O.EvaluationErrorCode.EXPIRED&&(h=O.EvaluationStatus.EXPIRED)),m.next=32,(0,fe.put)((0,T.updateRecord)({name:"rateCards",id:d,record:{status:h}}));case 32:return m.next=34,(0,fe.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:m.t0}));case 34:case"end":return m.stop()}}),Ne,null,[[7,26]])}function ze(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,fe.takeLatest)(Ye,We);case 2:case"end":return e.stop()}}),je)}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve=ge().mark(St),Qe=ge().mark(_t),Xe=ge().mark(yt),Je=ge().mark(Ct),Ke="source-",$e="source",et=O.MessageFillStatus.FILLED,tt=O.MessageFillStatus.FAILED,nt=O.MessageFillStatus.FILLING,rt=O.MessageTypes.MSG_TYPE_PRODUCT,st=O.MessageTypes.MSG_TYPE_ORDER,at=O.MessageTypes.MSG_TYPE_OFFER,ot=O.MessageTypes.MSG_TYPE_VOUCHER,it=O.MessageTypes.MSG_TYPE_FEED_STORY,ct=O.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,lt=O.MessageTypes.MSG_TYPE_BUNDLE_MESSAGE,ut=O.MessageTypes.MSG_TYPE_SHOPPING_CART,dt=O.MessageTypes.MSG_TYPE_RATE_CARD,pt=O.MessageTypes.MSG_TYPE_RATE_CARDS,At=O.MessageTypes.MSG_TYPE_WEBVIEW,gt=O.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,ft=[rt,st,at,ot,dt,it,ct,lt,ut,At,gt],ht=(0,le.createActions)((o(Ue={},_e.UPDATE_MESSAGE_FILL_STATUS_MAP,(function(e){return{status:e.status,messageIds:e.messageIds}})),o(Ue,_e.FILL_MESSAGE_REQUESTED,(function(e){return{message:e.message,isSource:e.isSource}})),Ue)),Et=ht.updateMessageFillStatusMap,mt=ht.fillMessageRequested,vt=function(e,t,n){var r,s=t["".concat(e,"_id")];return e===ct&&(s=t.order_id),e===dt?t.card_id:e===gt?null==t||null===(r=t.bot_order_info)||void 0===r?void 0:r.order_id:s||n};function St(e){var t,n,r,s,a,o,i,c,l,u,d,p,A,g,f,h,E,m,v,S=arguments;return ge().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return t=S.length>1&&void 0!==S[1]?S[1]:{},n=t.sync,r=void 0!==n&&n,s=t.reFillType,a=e[0].conversation_id,_.next=5,(0,fe.select)(T.isSubAccountSelector);case 5:return o=_.sent,_.next=8,(0,fe.select)(T.curConvsMessageSelector);case 8:return i=_.sent,_.next=11,(0,fe.select)(T.currentUserIdSelector);case 11:return c=_.sent,_.next=14,(0,fe.select)((0,T.getConversationShopId)(a));case 14:return l=_.sent,_.next=17,(0,fe.select)(T.messageFillStatusMapSelector);case 17:return u=_.sent,d={},p=[],A=[],s?(g=e[0],f="".concat(s===$e?Ke:"").concat(g.id),d={messageId:[f]},p=[f]):e.forEach((function(e){var t=e.type,n=e.content,r=e.id,s=e.source_type,a=e.source_content,g=void 0===a?{}:a,f=i.find((function(e){var t=e.id;return r===t})),h=!1,E=!1;if(null!=f&&f.textContent){h=!0;var m=f.content,v=f.textContent,S=void 0===v?{}:v;switch(t){case At:E=m.type===pt&&S.status===O.EvaluationStatus.UNRATED;break;case dt:E=S.status===O.EvaluationStatus.UNRATED;break;case at:E=S.status===O.OfferStatus.PENDING;break;case lt:E=!1;break;default:ft.includes(t)&&(E=!0)}}else h=u[r]===nt;if(!h||E){var _;if(s&&g){var y=g["".concat(s,"_id")];if(y&&![-1,0].includes(y)){var C="".concat(Ke).concat(r);E?A.push(C):p.push(C),_=vt(s,g,C),(d[_]||(d[_]=[]))&&d[_].push(C)}}if(ft.includes(t)&&n){var b=!1;switch(t){case st:b=o&&l!==n.shop_id;break;case dt:b=c!==e.to_id}b||(E?A.push(r):p.push(r),_=vt(t,n,r),(d[_]||(d[_]=[]))&&d[_].push(r))}}})),_.next=24,(0,fe.put)(Et({status:nt,messageIds:p}));case 24:if(h=Object.keys(d),!r){_.next=32;break}return E=[],h.forEach((function(t){var n=d[t];E.push((0,fe.call)(_t,e,n,A))})),_.next=30,(0,fe.all)(E);case 30:_.next=39;break;case 32:if(!h.length){_.next=39;break}return m=h.shift(),v=d[m],_.next=37,(0,fe.spawn)(_t,e,v,A);case 37:_.next=32;break;case 39:case"end":return _.stop()}}),Ve)}function _t(e,t,n){var r,s,a,o,i,c,l,u,d,p,A,g,f,h,E,m,v,S,_,y,C,b,x,M,I,w,B,k,R,P,D,N,j;return ge().wrap((function(F){for(;;)switch(F.prev=F.next){case 0:a=t[0],o=a,(i=a.includes(Ke))&&(o=a.split(Ke)[1]),c=e.find((function(e){return e.id===o})),u=(l=c).content,d=l.type,p=l.source_type,A=l.source_content,h=(f=i?A:u)["".concat(g=i?p:d,"_id")],(E=d===gt?null==u||null===(r=u.bot_order_info)||void 0===r?void 0:r.shop_id:f.shop_id)||(E=c.to_shop_id),F.prev=11,F.t0=g,F.next=F.t0===rt?15:F.t0===st||F.t0===ct||F.t0===gt?19:F.t0===at?23:F.t0===ot?27:F.t0===it?31:F.t0===ut?35:F.t0===dt?39:F.t0===lt?44:F.t0===At?48:62;break;case 15:return F.next=17,(0,fe.call)(T.showProduct,{payload:{id:h,shopId:E}});case 17:return m=F.sent,F.abrupt("break",62);case 19:return F.next=21,(0,fe.call)(T.showOrder,{payload:{id:h||u.order_id||(null==u||null===(s=u.bot_order_info)||void 0===s?void 0:s.order_id),shopId:E,isChatbotOrder:g===gt}});case 21:return m=F.sent,F.abrupt("break",62);case 23:return F.next=25,(0,fe.call)(T.showOffer,{payload:{id:h,shopId:E}});case 25:return m=F.sent,F.abrupt("break",62);case 27:return F.next=29,(0,fe.call)(T.showVoucher,{shopId:E,id:h});case 29:return m=F.sent,F.abrupt("break",62);case 31:return F.next=33,(0,fe.call)(T.showFeedStory,{payload:{id:h,creatorId:u.creator_id}});case 33:return m=F.sent,F.abrupt("break",62);case 35:return F.next=37,(0,fe.call)(T.showCartReminder,{cartItems:u.cart_items,shopId:E});case 37:return m=F.sent,F.abrupt("break",62);case 39:return F.next=41,(0,fe.call)(Ge,{shopId:E,ids:u.card_id,type:d});case 41:return v=F.sent,m=v[0],F.abrupt("break",62);case 44:return F.next=46,(0,fe.call)(T.showFaqHistory,{payload:{id:o,ids:u.messages.slice(0,3)}});case 46:return m=F.sent,F.abrupt("break",62);case 48:if(S=u.url,y=(_=void 0===S?"":S).split("/"),(C=y[y.length-2])!==pt){F.next=61;break}return b={},x=(0,O.getUrlParam)("id",_),t.forEach((function(e){e.includes(Ke)||(b[e]={content:He(He({},u),{},{id:x,type:C})})})),F.next=57,(0,fe.put)((0,T.batchUpdateRecord)({name:"messages",records:b}));case 57:return F.next=59,(0,fe.call)(Ge,{ids:[x],shopId:(0,O.getUrlParam)("shop_id",_),type:d});case 59:M=F.sent,m=M[0];case 61:return F.abrupt("break",62);case 62:if(m){F.next=66;break}return F.next=65,(0,fe.put)(Et({status:tt,messageIds:t.filter((function(e){return!n.includes(e)}))}));case 65:return F.abrupt("return");case 66:I={},w=pe(t);case 68:if(!w.length){F.next=78;break}return B=w.shift(),F.next=72,(0,fe.select)((0,T.getMessageSelector)(B));case 72:k=F.sent,R={},P={type:g,content:m},B.includes(Ke)&&!(0,O.simpleEqualCheck)(P,null==k?void 0:k.sourceContent)?(R=I[B.split(Ke)[1]]||{},I[B.split(Ke)[1]]=He(He({},R),{},{sourceContent:P})):(0,O.simpleEqualCheck)(m,null==k?void 0:k.textContent)||(R=I[B]||{},I[B]=He(He({},R),{},{textContent:m})),F.next=68;break;case 78:return F.next=80,(0,fe.put)((0,T.batchUpdateRecord)({name:"messages",records:I}));case 80:D=e.filter((function(e){var n;return t.includes(null===(n=e.quoted_msg)||void 0===n?void 0:n.id)}));case 81:if(!D.length){F.next=90;break}return N=D.shift(),F.next=85,(0,fe.select)((0,T.getMessageSelector)(N.quoted_msg.id));case 85:return j=F.sent,F.next=88,(0,fe.put)((0,T.updateRecord)({name:"messages",id:N.id,record:{quoted_msg:He({},j)}}));case 88:F.next=81;break;case 90:return F.next=92,(0,fe.put)(Et({status:et,messageIds:t}));case 92:F.next=98;break;case 94:return F.prev=94,F.t1=F.catch(11),F.next=98,(0,fe.put)(Et({status:tt,messageIds:t.filter((function(e){return!n.includes(e)}))}));case 98:case"end":return F.stop()}}),Qe,null,[[11,94]])}function yt(e){var t,n,r;return ge().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.message,r=t.isSource,s.next=3,(0,fe.call)(St,[n],{reFillType:r?$e:"content"});case 3:case"end":return s.stop()}}),Xe)}function Ct(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,fe.takeEvery)(mt,yt);case 2:case"end":return e.stop()}}),Je)}const bt=o({},_e.UPDATE_MESSAGE_FILL_STATUS_MAP,(function(e,t){var n=t.payload,r=n.status,s=n.messageIds,a=Object.assign({},e.messageFillStatusMap);return s.forEach((function(e){r===et?delete a[e]:a[e]=r})),He(He({},e),{},{messageFillStatusMap:He({},a)})}));var xt;function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wt=ge().mark(Rt),Ot=ge().mark(Pt),Tt=(0,le.createActions)((o(xt={},_e.UPDATE_MESSAGES_RELATED,(function(e){return{conversationId:e.conversationId,updateKey:e.updateKey,updateValue:e.updateValue}})),o(xt,_e.CLEAR_CHAT_ROOM_REFER,(function(e){return{conversationId:e.conversationId}})),xt)),Bt=Tt.updateMessagesRelated,kt=Tt.clearChatRoomRefer;function Rt(e){var t;return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.conversationId,n.next=3,(0,fe.put)(Bt({conversationId:t,updateKey:O.MessagesRelatedKey.REFER,updateValue:null}));case 3:case"end":return n.stop()}}),wt)}function Pt(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,fe.takeEvery)(kt,Rt);case 2:case"end":return e.stop()}}),Ot)}const Dt=o({},_e.UPDATE_MESSAGES_RELATED,(function(e,t){var n=t.payload,r=n.conversationId,s=n.updateKey,a=n.updateValue,i=e.messagesRelatedMap,c=i[r]||{},l=c[s];return It(It({},e),{},{messagesRelatedMap:It(It({},i),{},o({},r,It(It({},c),{},o({},s,"object"===A(l)&&a&&"object"===A(a)?It(It({},l),a):a))))})}));var Nt,jt=["offset"];function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lt=ge().mark(en),Gt=ge().mark(tn),Ut=ge().mark(nn),Yt=ge().mark(rn),Wt=ge().mark(sn),zt=ge().mark(an),Zt=ge().mark(on),Ht=ge().mark(cn),Vt=(0,le.createActions)({FETCH_MESSAGES_REQUESTED:function(e){return{conversationId:e.conversationId,reset:e.reset,direction:e.direction,messageId:e.messageId,cachedLatestId:e.cachedLatestId,cachedOldestId:e.cachedOldestId,source:e.source,isPreload:e.isPreload,messageList:e.messageList}},FETCH_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,messageIds:e.messageIds,limit:e.limit,persist:e.persist,status:e.status,messageRequestIds:e.messageRequestIds,direction:e.direction,reset:e.reset,cachedOldestId:e.cachedOldestId,shouldAutoFetch:e.shouldAutoFetch}},UPDATE_FETCH_MESSAGES_REQUESTED_STATUS:function(e){return{status:e.status}},SET_SECURITY_TIPS_MESSAGE:function(e){return{messageId:e.messageId,conversationId:e.conversationId}}}),Qt=Vt.fetchMessagesRequested,Xt=Vt.fetchMessagesSucceeded,Jt=Vt.updateFetchMessagesRequestedStatus,Kt=Vt.setSecurityTipsMessage,$t=function(e){var t=e.conversationId,n=e.shopId,r=e.offset,s=e.limit,a=void 0===s?20:s,o=e.direction,i=void 0===o?"older":o,c=(e.source,{shop_id:n,offset:r,limit:"around"===i?Math.ceil(a/2):a,direction:i});return new Promise((function(e,n){(0,T.fetch)({parent:"conversations",parentId:t,resource:"messages",params:c}).then((function(t){var n=t.messages,r=void 0===n?[]:n;Re(r),e({messages:r,limit:a})})).catch((function(e){n(e)}))}))};function en(e){var t,n,r;return ge().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.msgId,n=e.shopId,s.next=3,(0,fe.call)(T.fetch,{parent:"conversation",resource:"get_messages",params:{message_id:t,shop_id:n,limit:10,direction:"around"}});case 3:return r=s.sent,Re((null==r?void 0:r.get_messages)||[]),s.abrupt("return",r);case 6:case"end":return s.stop()}}),Lt)}function tn(e,t){var n,r;return ge().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,fe.select)((0,T.getConvsMessagesRelatedSelector)(e));case 2:return r=s.sent,s.abrupt("return",null===(n=r.preloaded)||void 0===n?void 0:n[t]);case 4:case"end":return s.stop()}}),Gt)}function nn(e){var n,r,s,a,i;return ge().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload,c.next=3,(0,fe.call)(an,{payload:qt(qt({},n),{},{isPreload:!0,reset:!1,direction:"older"})});case 3:if(!(r=c.sent)){c.next=21;break}return s=r.offset,a=t(r,jt),i=n.conversationId,c.next=9,(0,fe.call)(tn,i,s);case 9:if(c.sent!==O.FetchMessageStatus.FETCHING){c.next=19;break}return c.next=13,(0,fe.put)(Xt(qt({},a)));case 13:return c.next=15,(0,fe.put)(Bt({conversationId:i,updateKey:O.MessagesRelatedKey.PRELOADED,updateValue:o({},s,null)}));case 15:return c.next=17,(0,fe.fork)(nn,{payload:n});case 17:c.next=21;break;case 19:return c.next=21,(0,fe.put)(Bt({conversationId:i,updateKey:O.MessagesRelatedKey.PRELOADED,updateValue:o({},s,a)}));case 21:case"end":return c.stop()}}),Ut)}function rn(e){var t,n,r,s;return ge().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.reset||"around"===e.direction){a.next=8;break}return a.next=3,(0,fe.select)((function(e){return e.messageReducer}));case 3:return t=a.sent,n=t.messagesRelatedMap,r=e.conversationId,s=n[r]||{},a.abrupt("return",0===(s.all||[]).length);case 8:return a.abrupt("return","older"===e.direction);case 9:case"end":return a.stop()}}),Yt)}function sn(e){var t;return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,rn(t);case 3:if(!n.sent){n.next=13;break}return n.next=7,(0,fe.call)(an,{payload:t});case 7:if(!n.sent){n.next=11;break}return n.next=11,(0,fe.fork)(nn,{payload:t});case 11:n.next=15;break;case 13:return n.next=15,(0,fe.call)(an,{payload:t});case 15:case"end":return n.stop()}}),Wt)}function an(e){var t,n,r,s,a,i,c,l,u,d,p,A,g,f,h,E,m,v,S,_,y,C,b,x,M,I,w,B,k,R;return ge().wrap((function(P){for(;;)switch(P.prev=P.next){case 0:return t=e.payload,n=t.conversationId,r=t.reset,s=t.direction,a=t.messageId,i=t.source,c=t.isPreload,l=t.shouldFillSync,u=t.messageList,P.prev=1,P.next=4,(0,fe.select)((function(e){return e.conversationReducer}));case 4:return d=P.sent,p=d.persist,P.next=8,(0,fe.select)((0,T.getConversationShopId)(n));case 8:return A=P.sent,P.next=11,(0,fe.select)((function(e){return e.messageReducer}));case 11:if(g=P.sent,f=g.messagesRelatedMap,h=f[n]||{},!r||"around"===s){P.next=20;break}E=0,s="older",m=!0,P.next=33;break;case 20:P.t0=s,P.next="older"===P.t0?23:"latest"===P.t0?26:"around"===P.t0?29:32;break;case 23:return E=h.oldestMessageId,m=h.hasMoreOlderMessage,P.abrupt("break",33);case 26:return E=h.latestMessageId,m=h.hasMoreLatestMessage,P.abrupt("break",33);case 29:return E=a,m=!0,P.abrupt("break",33);case 32:return P.abrupt("break",33);case 33:if(m){P.next=41;break}return P.next=36,(0,fe.select)(T.messageHttpStatusSelector);case 36:if(!P.sent.includes("failed")){P.next=40;break}return P.next=40,(0,fe.put)(Jt({status:O.DataFetchStatus.SUCCEED}));case 40:return P.abrupt("return");case 41:if(c){P.next=44;break}return P.next=44,(0,fe.put)(Jt({status:r||"around"===s?O.DataFetchStatus.INIT_PENDING:O.DataFetchStatus.PENDING}));case 44:if(!c){P.next=49;break}return P.next=47,(0,fe.put)(Bt({conversationId:n,updateKey:O.MessagesRelatedKey.PRELOADED,updateValue:o({},E,O.FetchMessageStatus.PRELOADING)}));case 47:P.next=65;break;case 49:return P.next=51,(0,fe.call)(tn,n,E);case 51:if(!(_=P.sent)){P.next=65;break}if(_!==O.FetchMessageStatus.PRELOADING){P.next=59;break}return P.next=56,(0,fe.put)(Bt({conversationId:n,updateKey:O.MessagesRelatedKey.PRELOADED,updateValue:o({},E,O.FetchMessageStatus.FETCHING)}));case 56:return P.abrupt("return",!1);case 59:if(_===O.FetchMessageStatus.FETCHING){P.next=65;break}return P.next=62,(0,fe.put)(Xt(qt({},_)));case 62:return P.next=64,(0,fe.put)(Bt({conversationId:n,updateKey:O.MessagesRelatedKey.PRELOADED,updateValue:o({},E,null)}));case 64:return P.abrupt("return",!0);case 65:if(!u||!u.length){P.next=70;break}v=u,S=20,P.next=75;break;case 70:return P.next=72,(0,fe.call)($t,{conversationId:n,shopId:A,offset:E,direction:s,source:i});case 72:y=P.sent,v=y.messages,S=y.limit;case 75:if(v.sort((function(e,t){return t.id-e.id})),C=v.map((function(e){return e.id})),!v.length){P.next=87;break}return b=pe(v),v.forEach((function(e){var t=e.quoted_msg;if(t){if(b.some((function(e){return e.id===t.id}))||(0,O.isDeletedMessage)(t))return;b=[].concat(pe(b),[t])}})),P.next=82,(0,fe.select)(T.messageEntitiesSelector);case 82:return x=P.sent,P.next=85,(0,fe.call)(T.updateOrReplaceAction,x,b,"messages",["content"]);case 85:return P.next=87,(0,fe.call)(St,b,{isSync:l});case 87:if(M=new Map,I=v.reduce((function(e,t){var n=t.request_id,r=t.id;return e.has(n)||e.set(n,r),e}),M),w={reset:r,limit:S,offset:E,direction:s,messageIds:C,conversationId:n,persist:p,status:O.DataFetchStatus.SUCCEED,messageRequestIds:I},!c){P.next=92;break}return P.abrupt("return",w);case 92:return B=!1,(k=h.cachedLatestId)||(k=(h.all||[])[0],w.cachedLatestId=k),k&&r&&(R=C[C.length-1]||E,(0,O.greaterThan)(R,k)?B=!0:w.cachedLatestId=null),w.shouldAutoFetch=B,P.next=99,(0,fe.put)(Xt(w));case 99:if(!B){P.next=102;break}return P.next=102,(0,fe.fork)(an,{payload:{direction:"older",conversationId:n}});case 102:if(!("around"===s||u&&u.length)||!a){P.next=110;break}return T.EventBus.emit("scrollToMessage",a),P.next=106,(0,fe.select)(T.isNavigateToUnreadMessageSelector);case 106:if(!P.sent){P.next=110;break}return P.next=110,(0,fe.put)((0,T.setNavigateToUnreadMessageId)({navigateToUnreadMessageId:a}));case 110:return P.abrupt("return",w);case 113:if(P.prev=113,P.t1=P.catch(1),c){P.next=118;break}return P.next=118,(0,fe.put)(Jt({status:r?O.DataFetchStatus.INIT_FAILED:O.DataFetchStatus.FAILED}));case 118:case"end":return P.stop()}}),zt,null,[[1,113]])}function on(e){var t,n,r,s,a,o,i,c,l,u;return ge().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(t=e.payload,n=t.conversationId,"older"===t.direction){d.next=4;break}return d.abrupt("return");case 4:return d.next=6,(0,fe.select)((0,T.getConversationShopId)(n));case 6:return r=d.sent,d.next=9,(0,fe.select)((0,T.shopSelector)(r));case 9:if(s=d.sent,a=s?s.country:(0,O.getRuntimeRegion)(),!["br","tw"].includes(a.toLowerCase())){d.next=33;break}return d.next=14,(0,fe.select)(T.messagesRelatedMapSelector);case 14:if(o=d.sent,!(i=o[n])){d.next=33;break}if(!i.securityTipsMessageId){d.next=19;break}return d.abrupt("return");case 19:if(i.hasMoreOlderMessage){d.next=33;break}return d.next=22,(0,fe.select)(T.messageEntitiesSelector);case 22:if(c=d.sent,l=(0,O.makeSecurityTipsMessage)(Ee()(),n),!i.oldestMessageId){d.next=29;break}return d.next=27,(0,fe.select)((0,T.getMessageSelector)(i.oldestMessageId));case 27:(u=d.sent)&&(l.created_timestamp=u.created_timestamp);case 29:return d.next=31,(0,fe.call)(T.updateOrReplaceAction,c,[l],"messages");case 31:return d.next=33,(0,fe.put)(Kt({messageId:l.id,conversationId:n}));case 33:case"end":return d.stop()}}),Zt)}function cn(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,fe.takeEvery)(Qt,sn);case 2:return e.next=4,(0,fe.takeEvery)(Xt,on);case 4:case"end":return e.stop()}}),Ht)}const ln=(o(Nt={},Xt,(function(e,t){var n=t.payload,r=n.limit,s=n.status,a=n.conversationId,i=n.messageIds,c=n.persist,l=n.messageRequestIds,u=n.direction,d=n.reset,p=n.cachedLatestId,A=n.shouldAutoFetch,g=e.messagesRelatedMap,f=g[a]||{},h={};switch(u){case"older":h.hasMoreOlderMessage=i.length>=r;break;case"latest":h.latestMessageId=i[0],h.hasMoreLatestMessage=i.length>=r;break;case"around":h.latestMessageId=i[0],h.hasMoreOlderMessage=!0,h.hasMoreLatestMessage=!0,f={}}d&&"around"!==u&&(h.hasMoreLatestMessage=!1);var E=(f.all||[]).map((function(e){return l.has(e)?l.get(e):e})),m=f.failed||[],v=function(e,t){for(var n,r=e.length,s=t.length,a=0,o=0,i=new Array(r+s).fill(0);a<r||o<s;)n=a===r?t[o++]:o===s?e[a++]:/^\d+$/.test(e[a])?(0,O.greaterThan)(e[a],t[o])?e[a++]:t[o++]:e[a++],i[a+o-1]=n;return pe(new Set(i))}(E,i);return h.oldestMessageId=A?i[i.length-1]:v[v.length-1],p&&(h.cachedLatestId=p),qt(qt({},e),{},{status:s,messagesRelatedMap:qt(qt({},g),{},o({},a,qt(qt({},f),{},{all:v,failed:m.filter((function(e){return!l.has(e)}))},h))),persist:c})})),o(Nt,Jt,(function(e,t){var n=t.payload.status;return qt(qt({},e),{},{status:n})})),o(Nt,Kt,(function(e,t){var n=t.payload,r=n.conversationId,s=n.messageId,a="messagesRelatedMap",i=e[a],c=i[r]||{};return qt(qt({},e),{},o({},a,qt(qt({},i),{},o({},r,qt(qt({},c),{},{securityTipsMessageId:s})))))})),Nt);var un,dn=Y(885),pn=Y(4672),An=Y(464),gn=Y.n(An),fn=Y(1769),hn=Y.n(fn),En=Y(5343),mn=Y.n(En),vn=Y(4323).t,Sn=ge().mark(jn);function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cn=1500,bn=(0,le.createActions)({SET_REPLY_TO_MESSAGE:function(e){return{messageId:e.messageId}},RESET_REPLY_TO_MESSAGE:function(){return{}},SCROLL_TO_MESSAGE:function(e){return{messageId:e.messageId}},SET_SCROLL_TO_MESSAGE_ID:function(e){return{messageId:e.messageId}},RESET_SCROLL_TO_MESSAGE_ID:function(){},SET_IN_SCROLL_TO_MESSAGE:function(e){return{inScrollToMessage:e.inScrollToMessage}},SET_CURRENT_CONVERSATION_REPLY_TO_MESSAGE:function(e){return{messageId:e.messageId,currentConversationId:e.currentConversationId}},RESET_CURRENT_CONVERSATION_REPLY_TO_MESSAGE:function(e){return{currentConversationId:e.currentConversationId}}}),xn=bn.setReplyToMessage,Mn=bn.resetReplyToMessage,In=bn.scrollToMessage,wn=bn.setScrollToMessageId,On=bn.resetScrollToMessageId,Tn=bn.setInScrollToMessage,Bn=bn.setCurrentConversationReplyToMessage,kn=bn.resetCurrentConversationReplyToMessage,Rn=ge().mark((function e(t){var n,r,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload.messageId,e.next=3,(0,fe.select)(T.curMessagesRelatedSelector);case 3:if(e.sent.all.includes(n)){e.next=14;break}return e.next=7,(0,fe.select)(T.currentConversationSelector);case 7:return r=e.sent,e.next=10,(0,fe.call)(an,{payload:{conversationId:r.id,direction:"around",reset:!0,messageId:n,shouldFillSync:!0}});case 10:return e.next=12,(0,fe.put)(Tn({inScrollToMessage:!0}));case 12:e.next=22;break;case 14:return e.next=16,(0,fe.select)((0,T.getMessageSelector)(n));case 16:if(s=e.sent,!(0,O.isDeletedMessage)(s)){e.next=21;break}return e.next=20,(0,fe.call)(T.setToastInformationSaga,(0,T.setToastInformation)({toast:{show:!0,type:"fail",message:vn("message.notfound")}}));case 20:return e.abrupt("return");case 21:T.EventBus.emit("scrollToMessage",n);case 22:return e.next=24,(0,fe.put)(wn({messageId:n}));case 24:return e.next=26,(0,fe.delay)(Cn);case 26:return e.next=28,(0,fe.select)(T.scrollToMessageIdSelector);case 28:if(e.sent!==n){e.next=32;break}return e.next=32,(0,fe.put)(On());case 32:case"end":return e.stop()}}),e)})),Pn=ge().mark((function e(t){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload.messageId,e.next=3,(0,fe.select)(T.currentConversationIdSelector);case 3:return r=e.sent,e.next=6,(0,fe.put)(Bn({currentConversationId:r,messageId:n}));case 6:case"end":return e.stop()}}),e)})),Dn=ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,fe.select)(T.currentConversationIdSelector);case 2:return t=e.sent,e.next=5,(0,fe.put)(kn({currentConversationId:t}));case 5:case"end":return e.stop()}}),e)}));const Nn=(o(un={},Bn,(function(e,t){var n=t.payload,r=n.currentConversationId,s=void 0===r?"":r,a=n.messageId,i=void 0===a?"":a;return s&&i?yn(yn({},e),{},{reply:yn(yn({},e.reply),{},{toMessageId:yn(yn({},e.reply.toMessageId),{},o({},s,i))})}):e})),o(un,kn,(function(e,t){var n=t.payload.currentConversationId,r=void 0===n?"":n;return r?yn(yn({},e),{},{reply:yn(yn({},e.reply),{},{toMessageId:yn(yn({},e.reply.toMessageId),{},o({},r,""))})}):e})),o(un,wn,(function(e,t){return yn(yn({},e),{},{reply:yn(yn({},e.reply),{},{scrollToMessageId:t.payload.messageId})})})),o(un,On,(function(e){return yn(yn({},e),{},{reply:yn(yn({},e.reply),{},{scrollToMessageId:""})})})),o(un,Tn,(function(e,t){return yn(yn({},e),{},{reply:yn(yn({},e.reply),{},{inScrollToMessage:t.payload.inScrollToMessage})})})),un);function jn(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,fe.takeEvery)(In,Rn);case 2:return e.next=4,(0,fe.takeEvery)(Mn,Dn);case 4:return e.next=6,(0,fe.takeEvery)(xn,Pn);case 6:case"end":return e.stop()}}),Sn)}var Fn,qn,Ln=ge().mark(Yn),Gn=ge().mark(Wn),Un=(0,le.createActions)(o({},_e.RESEND_MESSAGE_REQUESTED,(function(e){return{conversationId:e.conversationId,message:e.message}}))).resendMessageRequested;function Yn(e){var t,n,r,s,a;return ge().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.conversationId,r=t.message,o.next=3,(0,fe.select)((0,T.getConversation)(n));case 3:if("closed"!==o.sent.status){o.next=9;break}return o.next=8,(0,fe.call)(T.setToastInformationSaga,(0,T.setToastInformation)({type:"conversation-closed-tip"}));case 8:case 13:return o.abrupt("return");case 9:if(s=r.type,a=r.content,s!==O.MessageTypes.MSG_TYPE_VIDEO||a.video_url){o.next=14;break}return o.next=13,(0,fe.put)(js({conversationId:n,message:r,isResend:!0}));case 14:return o.next=16,(0,fe.put)(Os({conversationId:n,messages:[r],more:{isResend:!0}}));case 16:case"end":return o.stop()}}),Ln)}function Wn(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,fe.takeEvery)(Un,Yn);case 2:case"end":return e.stop()}}),Gn)}function zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hn=ge().mark(rr),Vn=ge().mark(sr),Qn=ge().mark(ar);function Xn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kn=(0,le.createActions)((o(Fn={},_e.SEND_MESSAGES_FAILED_BY_OFFLINE,(function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}})),o(Fn,_e.RESET_MESSAGES_FAILED_BY_OFFLINE,(function(){return{}})),o(Fn,_e.RESEND_OFFLINE_MESSAGES_ONCE,(function(){return{}})),o(Fn,_e.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED,(function(e){return{conversationId:e.conversationId,messageIds:e.messageIds}})),Fn)),$n=Kn.sendMessagesFailedByOffline,er=Kn.resetMessagesFailedByOffline,tr=Kn.resendOfflineMessagesOnce,nr=Kn.resendOfflineMessagesOnceSucceed;function rr(){var e,t,n,r,s,a,o,i,c;return ge().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,fe.select)(T.offlineMessagesSelector);case 2:e=l.sent,t=Object.entries(e),n=[],r=ge().mark((function e(){var t,r,o,i,c,l;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a[s],r=(0,dn.Z)(t,2),o=r[0],i=r[1],e.next=4,(0,fe.select)((0,T.getMessagesSelector)(i));case 4:c=e.sent,l=i.map((function(e,t){return{conversationId:o,requestIds:[e],messages:[c[t]]}})).filter((function(e){return e.messages[0]})),n=n.concat(l);case 7:case"end":return e.stop()}}),e)})),s=0,a=t;case 7:if(!(s<a.length)){l.next=12;break}return l.delegateYield(r(),"t0",9);case 9:s++,l.next=7;break;case 12:o=Xn(n),l.prev=13,o.s();case 15:if((i=o.n()).done){l.next=23;break}return c=i.value,l.next=19,Hs(c);case 19:return l.next=21,(0,fe.delay)(400);case 21:l.next=15;break;case 23:l.next=28;break;case 25:l.prev=25,l.t1=l.catch(13),o.e(l.t1);case 28:return l.prev=28,o.f(),l.finish(28);case 31:return l.next=33,(0,fe.put)(er());case 33:case"end":return l.stop()}}),Hn,null,[[13,25,28,31]])}function sr(e){var t,n;return ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.conversationId,n=e.messageIds,r.next=3,(0,fe.put)(nr({conversationId:t,messageIds:n}));case 3:case"end":return r.stop()}}),Vn)}function ar(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,fe.takeEvery)(tr,rr);case 2:case"end":return e.stop()}}),Qn)}window.addEventListener("judge-online",(function(){pn.store.dispatch(tr())}));const or=(o(qn={},_e.SEND_MESSAGES_FAILED_BY_OFFLINE,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=e.offlineMessages,i=(a[r]||[]).concat(s);return Zn(Zn({},e),{},{offlineMessages:Zn(Zn({},a),{},o({},r,pe(new Set(i))))})})),o(qn,_e.RESET_MESSAGES_FAILED_BY_OFFLINE,(function(e){return Zn(Zn({},e),{},{offlineMessages:{}})})),o(qn,_e.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED,(function(e,t){var n=t.payload,r=n.conversationId,s=n.messageIds,a=e.messagesRelatedMap,i=a[r]||{},c=(i.all||[]).filter((function(e){return!s.includes(e)})),l=(i.failed||[]).filter((function(e){return!s.includes(e)})),u=(i.sending||[]).filter((function(e){return!s.includes(e)}));return Zn(Zn({},e),{},{messagesRelatedMap:Zn(Zn({},a),{},o({},r,Zn(Zn({},i),{},{all:c,failed:l,sending:u})))})})),qn);function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lr=(0,le.createActions)(o({},_e.DELETE_CONVERSATION_MESSAGE_HASH,(function(e){return{conversationId:e.conversationId}}))).deleteConversationMessageHash;const ur=o({},_e.DELETE_CONVERSATION_MESSAGE_HASH,(function(e,t){var n=t.payload.conversationId,r=e.messagesRelatedMap;return delete r[n],cr(cr({},e),{},{messagesRelatedMap:cr({},r)})}));var dr,pr,Ar=Y(9977),gr=Y.n(Ar);function fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Er=ge().mark(Tr),mr=ge().mark(Br),vr=ge().mark(kr),Sr=ge().mark(Rr),_r=ge().mark(Nr),yr=function(e){return e?e/3*1e3:8e3},Cr=function(e){var t="http:";return e.startsWith(t)?e.replace(t,"https:"):e},br=(0,le.createActions)((o(dr={},_e.UPDATE_VIDEO_INFO,(function(e){var t=e.id,n=e.info;return{id:t,info:void 0===n?{}:n}})),o(dr,_e.DELETE_VIDEO_INFO,(function(e){return{id:e.id}})),dr)),xr=br.updateVideoInfo,Mr=br.deleteVideoInfo,Ir="get_config_error",wr="query_result_error";function Or(e,t){(0,T.fetch)({method:"POST",subServer:"coreapi",parent:"video",resource:"monitor",payload:JSON.stringify({step:e,reason:t})}).catch((function(){return{}}))}function Tr(e){var t,n,r,s,a;return ge().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,(0,fe.select)((0,T.getConversationShopId)(e));case 3:return t=o.sent,o.next=6,(0,fe.call)(T.fetch,{method:"POST",subServer:"coreapi",parent:"video",resource:"preupload",payload:JSON.stringify({conversation_id:e,shop_id:t})});case 6:if(n=o.sent,r=n.is_allowed,s=n.data,a=void 0===s?{}:s,r){o.next=14;break}return o.next=13,(0,fe.call)(Or,Ir,"Not Allowed");case 13:return o.abrupt("return",null);case 14:return o.abrupt("return",a);case 17:return o.prev=17,o.t0=o.catch(0),o.next=21,(0,fe.call)(Or,Ir);case 21:return o.abrupt("return",!1);case 22:case"end":return o.stop()}}),Er,null,[[0,17]])}function Br(e){var t,n,r,s,a;return ge().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=performance.now(),n=e.file,r=e.onProgress,s=e.serviceList,a=new(gr())(s),o.next=5,a.upload({mediaFile:n,mediaType:Ar.MediaType.video});case 5:return a.on(Ar.UploaderEvents.mediaProgress,(function(e){return r(.95*e.percent*100)})),o.next=8,a.done().then((function(e){var n=performance.now();return(0,T.collectAsyncTask)(T.ReportPoint.VIDEO_UPLOAD,n-t),{error:!1,data:e}})).catch((function(){return Or("upload_error"),!1}));case 8:return o.abrupt("return",o.sent);case 9:case"end":return o.stop()}}),mr)}function kr(e){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,fe.call)(T.fetch,{method:"POST",subServer:"coreapi",parent:"video",resource:"report_upload",payload:JSON.stringify(e)});case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),t.next=10,(0,fe.call)(Or,"report_upload_error");case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),vr,null,[[0,6]])}function Rr(e){var t;return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,fe.call)(T.fetch,{subServer:"coreapi",parent:"video",resource:"upload_status",params:{vid:e}});case 3:return t=n.sent,n.abrupt("return",t);case 7:return n.prev=7,n.t0=n.catch(0),n.next=11,(0,fe.call)(Or,wr);case 11:return n.abrupt("return",{});case 12:case"end":return n.stop()}}),Sr,null,[[0,7]])}var Pr=function(e){var t=e.video,n=e.thumbnail,r=e.duration;return{video_url:t,thumb_url:n,thumb_width:e.width,thumb_height:e.height,duration_seconds:Math.ceil(r/1e3)}};function Dr(e,t){var n=[];return e.forEach((function(e,r){var s=e.service_id,a=e.token,o=e.upload_domain,i=e.domain,c=e.bucket,l=e.slice_size;n.push({vid:t,bucket:c,sliceSize:l,biz:120,env:"live",country:"VN",serviceID:s,serviceIndex:r,authorization:a,domain:Cr(i),uploadDomain:Cr(o)})})),n}function Nr(e){var t,n,r,s,a,o,i,c,l,u,d,p,A,g,f,h,E,m,v,S,_,y,C,b;return ge().wrap((function(x){for(;;)switch(x.prev=x.next){case 0:return t=new Error("upload fail"),n=e.id,r=e.file,s=e.duration,a=e.onProgress,o=void 0===a?function(){return{}}:a,x.next=4,(0,fe.select)((0,T.selectVideoInfoByKey)(n));case 4:return i=x.sent,l=(c=i||{}).vid,(u=c.services).forEach((function(e,t){"txcloud"===e.service_id&&u.unshift(u.splice(t,1)[0])})),x.next=9,(0,fe.call)(Br,{file:r,serviceList:Dr(u,l),onProgress:o});case 9:if(d=x.sent){x.next=12;break}throw t;case 12:if(p=u[0],A=p.service_id,g=p.domain,f="txcloud"===A,h=d.data.video,E=h.md5,m=h.extendId,v=h.url,!f||v){x.next=17;break}throw t;case 17:return x.next=19,(0,fe.call)(kr,{vid:l,md5:E,service_id:A,extend_id:m,file_size:r.size,video_url:v||"".concat(g,"/").concat(l,".ori.mp4")});case 19:if(x.sent){x.next=22;break}throw t;case 22:return x.next=24,(0,fe.delay)(yr(s));case 24:S=180;case 25:if(!(S>0)){x.next=58;break}return x.next=28,(0,fe.select)((0,T.selectVideoInfoByKey)(n));case 28:if("successful"!==(i=x.sent).status){x.next=31;break}return x.abrupt("return",Pr(i.uploadResult));case 31:if("failed"!==i.status){x.next=35;break}return x.next=34,(0,fe.call)(Or,wr,"failed");case 34:throw t;case 35:return x.next=37,(0,fe.call)(Rr,l);case 37:if(_=x.sent,(y=_.status)&&"reported"!==y){x.next=45;break}return x.next=42,(0,fe.delay)(3e3);case 42:S-=3,x.next=56;break;case 45:return x.next=47,(0,fe.put)(xr({id:n,info:{status:y}}));case 47:if("successful"!==y){x.next=53;break}return(C=performance.getEntriesByName("REPORT_UPLOAD_".concat(l),"mark")[0])&&(performance.mark("SERVICE_DONE_".concat(l)),b=performance.getEntriesByName("SERVICE_DONE_".concat(l))[0].startTime-C.startTime,performance.clearMarks("REPORT_UPLOAD_".concat(l)),performance.clearMarks("SERVICE_DONE_".concat(l)),(0,T.collectAsyncTask)(T.ReportPoint.SERVICE_DONE,b)),x.abrupt("return",Pr(_));case 53:return x.next=55,(0,fe.call)(Or,wr,y);case 55:throw t;case 56:x.next=25;break;case 58:return x.next=60,(0,fe.call)(Or,"push_timeout",status);case 60:throw t;case 61:case"end":return x.stop()}}),_r)}const jr=(o(pr={},_e.UPDATE_VIDEO_INFO,(function(e,t){var n=t.payload,r=n.id,s=n.info,a=e.videoMap[r]||{};return hr(hr({},e),{},{videoMap:hr(hr({},e.videoMap),{},o({},r,hr(hr({},a),s)))})})),o(pr,_e.DELETE_VIDEO_INFO,(function(e,t){var n=t.payload.id,r=e.videoMap;return delete r[n],hr(hr({},e),{},{videoMap:hr({},r)})})),pr);var Fr,qr=function(e,t,n){return e===t&&(new Date).getTime()<=n/1e6},Lr=Y(4323).t,Gr=ge().mark(qs),Ur=ge().mark(Ls),Yr=ge().mark(Gs),Wr=ge().mark(Ys),zr=ge().mark(zs),Zr=ge().mark(Zs),Hr=ge().mark(Hs),Vr=ge().mark(Qs),Qr=ge().mark(Xs),Xr=ge().mark(Js),Jr=ge().mark(Ks),Kr=ge().mark($s);function $r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function es(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}hn().init();var ts,ns=O.MessageTypes.MSG_TYPE_IMAGE,rs=O.MessageTypes.MSG_TYPE_TEXT,ss=O.MessageTypes.MSG_TYPE_WEBVIEW,as=O.MessageTypes.MSG_TYPE_VIDEO,os=(O.MessageTypes.MSG_TYPE_ITEM_LIST,O.MessageTypes.MSG_TYPE_RATE_CARDS),is=O.MessageTypes.MSG_TYPE_RATE_CARD,cs=O.MessageTypes.MSG_TYPE_FAQ_QUESTION,ls=O.MessageTypes.MSG_TYPE_FAQ_FEEDBACK,us=O.MessageTypes.MSG_TYPE_FAQ_CATEGORY_CHOICE,ds=O.MessageTypes.MSG_TYPE_FAQ_TYPE_CHOICE,ps=O.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,As=O.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,gs=O.MessageErrorCode.DEFAULT,fs=O.MessageErrorCode.FORBIDDEN,hs=O.MessageErrorCode.LIMITING,Es=O.MessageErrorCode.CUSTOM_ERROR,ms=O.MessageErrorCode.BLACKLIST,vs=O.MessageErrorCode.CANCEL_ORDER,Ss=O.MessageErrorCode.UNVERIFIED_PHONE_NUMBER,_s=O.MessageErrorCode.EXCEED_DAILY_LIMIT,ys=O.MessageErrorCode.UNTRUSTED_NETWORK,Cs=O.MessageErrorCode.NEED_CAPTCHA,bs=O.MessageErrorCode.DFP_ERROR,xs=O.MessageErrorCode.SPAMMER,Ms=O.MessageErrorCode.FAQ_EXPIRED,Is=O.MessageErrorCode.FAQ_SESSION_OLD;ts="mini-sc_redirect";var ws=(0,le.createActions)({SEND_MESSAGES_REQUESTED:function(e){var t=e.id,n=e.conversationId,r=e.messages,s=e.more;return{id:t,conversationId:n,messages:r,more:void 0===s?{}:s}},SEND_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,requestIdToMessageId:e.requestIdToMessageId}},SENDING_MESSAGES:function(e){var t=e.conversationId,n=e.requestIds,r=e.isCancelable;return{conversationId:t,requestIds:n,isCancelable:void 0!==r&&r}},SEND_MESSAGES_TO_PENDING:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},SEND_MESSAGES_FAILED:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},ABORT_ALL_SENDING_MESSAGES:function(){return{}},CANCEL_SENDING_MESSAGE_REQUESTED:function(e){return{id:e.id,conversationId:e.conversationId}},CANCEL_SENDING_MESSAGE_SUCCEEDED:function(e){return{id:e.id,conversationId:e.conversationId}},SEND_VIDEO_MESSAGE_REQUESTED:function(e){var t=e.conversationId,n=e.message,r=e.isResend;return{conversationId:t,message:n,isResend:void 0!==r&&r}}}),Os=ws.sendMessagesRequested,Ts=ws.sendMessagesSucceeded,Bs=ws.sendingMessages,ks=ws.sendMessagesToPending,Rs=ws.sendMessagesFailed,Ps=ws.abortAllSendingMessages,Ds=ws.cancelSendingMessageRequested,Ns=ws.cancelSendingMessageSucceeded,js=ws.sendVideoMessageRequested;function Fs(e,t){return delete e.errorCode,delete e.error,es(es({},e),{},{chat_send_option:{force_send_cancel_order_warning:t,comply_cancel_order_warning:!t}})}function qs(e){var t,n,r,s,a,o,i;return ge().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.conversationId,r=t.message,s=t.isResend,c.next=3,(0,fe.call)(Tr,n);case 3:if(null!==(a=c.sent)){c.next=8;break}return c.next=7,(0,fe.call)(T.setToastInformationSaga,(0,T.setToastInformation)({toast:{show:!0,type:"fail",message:Lr("toast.chat_bot_limit")}}));case 7:case 11:return c.abrupt("return");case 8:if(!1!==a){c.next=12;break}return c.next=11,(0,fe.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:null}));case 12:return o=s?r.id:Ee()(),i=es({},a),s&&(i.precent=0),c.next=17,(0,fe.put)(xr({id:o,info:i}));case 17:return c.next=19,(0,fe.put)(Os({id:o,conversationId:n,messages:[es(es({},r),{},{type:as})],more:{isResend:s}}));case 19:case"end":return c.stop()}}),Gr)}function Ls(e,t){return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,fe.delay)(1e3);case 2:return n.next=4,(0,fe.put)(ks({conversationId:e,requestIds:t}));case 4:case"end":return n.stop()}}),Ur)}function Gs(e,t){var n,r,s,a,o,i,c,l,u,d,p,A,g,f,h,E;return ge().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(n=e.type,r=e.request_id,s=e.content,a=s.url,o=s.file,i=s.duration_seconds,c=s.video_url,l=n===as,m.prev=2,n!==ns||a){m.next=24;break}return(u=new window.FormData).append("file",o),u.append("conversation_id",t),m.next=9,(0,fe.call)(T.fetch,{method:"POST",subServer:"coreapi",resource:"images",payload:u});case 9:d=m.sent,p=d.url,A=d.thumbnail,g=d.thumb_width,f=d.thumb_height,h=d.file_server_id,e.content.url_hash=p.split("/").pop(),e.content.url=p,e.content.thumb_url=A,e.content.thumb_width=g,e.content.thumb_height=f,e.content.file_server_id=h,delete e.content.file,m.next=30;break;case 24:if(!l||c){m.next=30;break}return m.next=27,(0,fe.call)(Nr,{id:r,file:o,duration:i,onProgress:function(e){pn.store.dispatch(xr({id:r,info:{percent:e}}))}});case 27:E=m.sent,e.content=es(es({},e.content),E),delete e.content.file;case 30:return m.abrupt("return",!0);case 33:if(m.prev=33,m.t0=m.catch(2),m.t1=l,!m.t1){m.next=39;break}return m.next=39,(0,fe.put)(xr({id:r,info:{percent:void 0}}));case 39:return m.abrupt("return",!1);case 40:case"end":return m.stop()}}),Yr,null,[[2,33]])}var Us=["request_id","to_id","type","content","shop_id","order_id","source","chat_send_option","source_content","source_type","entry_point"];function Ys(e,t,n){var r,s,a,o,i,c,l,u,d,p,A,g;return ge().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return r="",s={},Us.forEach((function(t){e[t]&&(s[t]=e[t]),s[t]&&s[t].localUrl&&(r=s[t].localUrl,delete s[t].localUrl)})),e.retryRequestId&&(s.request_id=e.retryRequestId),a=JSON.stringify(es(es({},s),{},{device_id:n,source:(0,O.checkIsScChat)()?"minichat":"pc_mall"})),o=""+Date.parse(new Date)/1e3,i={},f.prev=7,c=gn()(a).toString(),f.next=11,mn().x(c,o,1,"VN".toUpperCase());case 11:i=f.sent,f.next=17;break;case 14:f.prev=14,f.t0=f.catch(7),i={"X-Sap-Access-S":a.request_id,"X-Sap-Access-T":o,"X-Sap-Access-F":"error"};case 17:return f.prev=17,f.next=20,hn().getClientCheckData();case 20:l=f.sent,f.next=26;break;case 23:f.prev=23,f.t1=f.catch(17),l="error";case 26:return u=Math.floor(Date.now()/1e3),f.prev=27,d=es(es({},i),{},{"X-Dfp-Access-F":l}),f.next=31,(0,fe.select)(T.captchaSignatureSelector);case 31:if(!(p=f.sent)){f.next=36;break}return d["X-Dfp-Access-S"]=p,f.next=36,(0,fe.call)(T.updateCaptchaSignatureSaga,(0,T.updateCaptchaSignature)({signature:""}));case 36:return f.next=38,(0,fe.call)(T.fetch,{method:"POST",resource:"messages",payload:a,headers:es({},d)});case 38:return A=f.sent,r&&(A.content.localUrl=r),t&&(0,O.removeItem)(ts),f.abrupt("return",es(es({},A),{},{created_at:new Date,created_timestamp:u}));case 44:f.prev=44,f.t2=f.catch(27),f.t3=!0,f.next=f.t3===f.t2 instanceof T.Forbidden?49:f.t3===f.t2 instanceof T.Limiting?51:f.t3===f.t2 instanceof T.CustomError?53:f.t3===f.t2 instanceof T.Blacklist?55:f.t3===f.t2 instanceof T.CancelOrderWarning?58:f.t3===f.t2 instanceof T.UnverifiedPhoneNumber?60:f.t3===("message_exceed_daily_limit"===f.t2.message)?62:f.t3===("request_block_errorrequest block error."===f.t2.message)?64:f.t3===("need_captcha"===f.t2.message)?66:f.t3===("dfp_block_error"===f.t2.message)||f.t3===("captcha_error"===f.t2.message)?68:f.t3===("soft_spammer_error"===f.t2.message)?70:f.t3===("faq_session_expire"===f.t2.message)?72:f.t3===Is?74:77;break;case 49:return g=fs,f.abrupt("break",78);case 51:return g=hs,f.abrupt("break",78);case 53:return g=Es,f.abrupt("break",78);case 55:return g=ms,e.message_option=O.MessageOption.MSG_OPT_CENSORED_BLACKLIST,f.abrupt("break",78);case 58:return g=vs,f.abrupt("break",78);case 60:return g=Ss,f.abrupt("break",78);case 62:return g=_s,f.abrupt("break",78);case 64:return g=ys,f.abrupt("break",78);case 66:return g=Cs,f.abrupt("break",78);case 68:return g=bs,f.abrupt("break",78);case 70:return g=xs,f.abrupt("break",78);case 72:return g=Ms,f.abrupt("break",78);case 74:return f.next=76,(0,fe.spawn)(Zs,!1);case 76:return f.abrupt("break",78);case 77:g=gs;case 78:return r&&(e.content.localUrl=r),f.abrupt("return",es(es({},e),{},{requestId:e.request_id,created_timestamp:u,errorCode:g,error:f.t2}));case 80:case"end":return f.stop()}}),Wr,null,[[7,14],[17,23],[27,44]])}var Ws=function(e){return e.content&&e.content.translation&&e.content.translation.text};function zs(e,t){var n,r,s,a,i,c,l,u,d,p,A,g,f,h;return ge().wrap((function(E){for(;;)switch(E.prev=E.next){case 0:return n=[],r=[],E.next=4,(0,fe.select)(T.currentConversationIdSelector);case 4:if((s=E.sent)===t){E.next=12;break}return E.next=8,(0,fe.select)((0,T.getConvsMessagesRelatedSelector)(t));case 8:return n=E.sent,E.next=11,(0,fe.select)((0,T.getMessagesSelector)(n.all));case 11:r=E.sent;case 12:return E.next=14,(0,fe.put)(Et({conversationId:t,status:O.MessageFillStatus.FILLED,messageIds:e.map((function(e){return e.id}))}));case 14:return E.next=16,(0,fe.select)(T.curConvsMessageSelector);case 16:if(a=E.sent,i=(0,T.normalize)("messages",a).entities.messages||{},c=[],l=e.map((function(e){var n,o=e.request_id,l=e.id,u=(e.content,e.type);if(i[o]){u===as&&c.push((0,fe.put)(Mr({id:o}))),c.push((0,fe.put)((0,T.deleteRecord)({name:"messages",id:o})));var d=es(es({},i[o]),{},{translateStatus:Ws(e)?O.TranslationStatus.SHOW:O.TranslationStatus.FAILED});return i[l]?null:(0,O.deepMerge)(d,e)}if((n=s!==t?r.filter((function(e){return e&&e.retryRequestId===o})):a.filter((function(e){return e.retryRequestId===o}))).length){var p=n[0].request_id;c.push((0,fe.put)((0,T.deleteRecord)({name:"messages",id:p})));var A=es(es({},i[p]),{},{translateStatus:Ws(e)?O.TranslationStatus.SHOW:O.TranslationStatus.FAILED}),g=i[l]?null:(0,O.deepMerge)(A,e);return g&&g.retryRequestId&&(g.original_request_id=p),g}return null})).filter(Boolean),l.length){E.next=22;break}return E.abrupt("return");case 22:return E.next=24,(0,fe.call)(T.updateOrReplaceAction,i,l,"messages");case 24:return E.next=26,(0,fe.put)(Ts({conversationId:t,requestIdToMessageId:l.reduce((function(e,t){return t.original_request_id?es(es({},e),{},o({},t.original_request_id,t.id)):es(es({},e),{},o({},t.request_id,t.id))}),{})}));case 26:return l.sort((function(e,t){return t.id-e.id})),E.next=29,(0,fe.all)(c);case 29:return u=l[0],d=u.id,p=u.content,A=u.created_at,g=u.created_timestamp,f=u.type,h=u.message_option,E.next=32,(0,fe.put)((0,T.updateRecord)({name:"conversations",id:t,record:{latest_message_id:d,latest_message_type:f,latest_message_content:p,last_message_time:A,last_message_option:h,max_general_option_hide_time:g,crm_message_preview:{},unread_count:0,flag:"normal"}}));case 32:case"end":return E.stop()}}),zr)}function Zs(e){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,fe.put)((0,T.showModal)({type:"CONFIRM_MODAL",actions:{confirm:{label:{key:"common.ok"},handler:function(){pn.store.dispatch((0,T.closeModal)())}}},additions:{content:{key:"faq.expired".concat(e?".chat_with_seller":"")},modalStyle:{width:"348px",minWidth:"348px"},contentStyle:{paddingBottom:0,lineHeight:"20px"},confirmStyle:{width:"auto",padding:"0 16px",height:"32px",lineHeight:"32px"}}}));case 2:case"end":return t.stop()}}),Zr)}function Hs(e){var t,n,r,s,a,o,i,c,l,u,d,p,A,g,f,h,E,m,v,S,_,y,C,b,x,M,I,w,B,k,R,P,D,N;return ge().wrap((function(j){for(;;)switch(j.prev=j.next){case 0:if(t=e.conversationId,n=e.requestIds,r=e.messages,s=e.more,o=(a=void 0===s?{}:s).isRedirect,i=a.isCancelable,r[0].content.type===os||r[0].type===is){j.next=5;break}return j.next=5,(0,fe.put)(Bs({conversationId:t,requestIds:n,isCancelable:i}));case 5:if(c=r.length,j.t0=!i,!j.t0){j.next=10;break}return j.next=10,(0,fe.spawn)(Ls,t,n);case 10:return l=0,u=[],d=[],p=[],j.next=16,(0,fe.select)(T.networkStatusSelector);case 16:return A=j.sent,j.next=19,(0,fe.call)(O.getItem,"device_id");case 19:if(g=j.sent,"offline"!==A){j.next=26;break}f=r.map((function(e){return es(es({},e),{},{requestId:e.request_id})})),p.push.apply(p,pe(f)),d.push.apply(d,pe(f)),j.next=55;break;case 26:if(!(l<c)){j.next=55;break}return h=r[l],j.next=30,(0,fe.call)(Gs,h,t);case 30:if(E=j.sent,m=void 0,E){j.next=37;break}m=es(es({},h),{},{requestId:h.request_id}),d.push(m),j.next=52;break;case 37:return j.next=39,(0,fe.call)(Ys,h,o,g);case 39:if(!(m=j.sent).errorCode){j.next=50;break}if(v=h.type,S=h.content,!(v===ss&&S&&S.type===os||v===is)){j.next=47;break}return j.next=45,(0,fe.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:m.error}));case 45:j.next=48;break;case 47:d.push(m);case 48:j.next=51;break;case 50:u.push(m);case 51:m.error&&m.error.offlineError&&p.push(m);case 52:l++,j.next=26;break;case 55:if(!u.length){j.next=59;break}return u.forEach((function(e){e.send_status=O.MessageSendStatus.SUCCEED})),j.next=59,(0,fe.call)(zs,u,t);case 59:if(!d.length){j.next=116;break}return j.next=62,(0,fe.select)(T.currentConversationIdSelector);case 62:if(j.sent!==t){j.next=76;break}if(_=d.find((function(e){return e.errorCode===Cs})),!_){j.next=70;break}return j.next=68,(0,fe.put)((0,T.updateCaptchaVisible)({visible:!0,resendMessagePayload:{conversationId:t,messageId:_.id}}));case 68:j.next=76;break;case 70:if(y=[gs,Es],C=d.find((function(e){return y.includes(e.errorCode)})),j.t1=C,!j.t1){j.next=76;break}return j.next=76,(0,fe.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:C.error}));case 76:return b=[],d.forEach((function(e){var t=e.errorCode,n=e.error,r=e.request_id,s=e.type,a=e.content,o=e.to_id,i=e.from_id,c=e.shop_id,l=e.conversation_id,u=e.message_option;t===hs&&b.push((0,fe.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:n})));var d={errorCode:t,translateStatus:O.TranslationStatus.FAILED,retryRequestId:Ee()()};s===as&&(0,T.$tracker)({operation:O.TrackerOperation.IMPRESSION,trackerName:"impressionResendVideo",data:{message_id:0,conversation_id:l,is_sender:!0,from_user_id:i,to_user_id:o,video_original_duration:a.duration_seconds},shopId:c}),(s===rs&&t===ms||[as,ns].includes(s))&&(d.content=a),(0,O.hasTargetMessageOption)(u,O.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(d.message_option=u),b.push((0,fe.put)((0,T.updateRecord)({name:"messages",id:r,record:d})))})),j.next=80,(0,fe.all)(b);case 80:return x=d.map((function(e){return e.requestId})),j.next=83,(0,fe.put)(Rs({conversationId:t,requestIds:x}));case 83:if(M=[vs,ys,bs,_s,xs,Ms,Is],I=d.find((function(e){return M.includes(e.errorCode)})),!I){j.next=116;break}return j.next=88,(0,fe.select)(T.currentConversationShopSelectors);case 88:w=j.sent,B=(w||{}).country,k=B&&B.toLowerCase(),j.t2=I.errorCode,j.next=j.t2===vs?94:j.t2===_s?100:j.t2===xs?103:j.t2===Ms?106:j.t2===Is?109:112;break;case 94:return j.next=96,(0,fe.select)((0,T.getMessageSelector)(I.request_id));case 96:return R=j.sent,j.next=99,(0,fe.put)((0,T.showModal)({type:"Cancel_ORDER_WARNING_MODAL",title:{key:"cancel_order.modal.title"},additions:{content:{key:"cancel_order.modal.content"},region:k||"sg"},actions:{cancel:{label:{key:"cancel_order.modal.send_it"},handler:function(){pn.store.dispatch((0,T.closeModal)());var e=Fs(R,!0);pn.store.dispatch(Un({conversationId:t,message:e}))}},confirm:{label:{key:"cancel_order.modal.not_send"},handler:function(){pn.store.dispatch((0,T.closeModal)());var e=Fs(R,!1);pn.store.dispatch(Un({conversationId:t,message:e}))}}}}));case 99:return j.abrupt("break",116);case 100:return j.next=102,(0,fe.put)((0,T.showModal)({type:"CONFIRM_MODAL",additions:{content:{key:"label.exceed.daily.limit.warning"}},actions:{confirm:{label:{key:"label.modal.confirm"},handler:function(){return pn.store.dispatch((0,T.closeModal)())}}}}));case 102:return j.abrupt("break",116);case 103:return j.next=105,(0,fe.put)((0,T.showModal)({type:"SPAMMER_MODAL",title:{key:"modal.translation_spammer.title"},additions:{content:{key:"modal.translation_spammer.content"},region:k||"sg"},actions:{confirm:{label:{key:"common.ok"},handler:function(){return pn.store.dispatch((0,T.closeModal)())}}}}));case 105:return j.abrupt("break",116);case 106:return j.next=108,(0,fe.spawn)(Zs,!0);case 108:return j.abrupt("break",116);case 109:return j.next=111,(0,fe.spawn)(Zs,!1);case 111:return j.abrupt("break",116);case 112:return P=I.errorCode===bs,D='<a style="color: #395692" target="blank" href="'.concat((0,O.getShopeeCustomerService)(k),'">').concat(Lr("text.shopee_cs"),"</a>"),j.next=116,(0,fe.put)((0,T.showModal)({type:"CONFIRM_MODAL",title:{key:"modal.title.".concat(P?"common_error":"untrusted_network")},additions:{withCloseIcon:!0,renderContentAsHtml:!0,content:Lr("modal.content.".concat(P?"common_error_hint":"untrusted_network"),{someone:D})},actions:{confirm:{label:{key:"common.ok"}}}}));case 116:if(!p.length){j.next=121;break}return N=p.map((function(e){return e.requestId})),j.next=120,(0,fe.put)($n({conversationId:t,requestIds:N}));case 120:(0,T.networkJudge)();case 121:case"end":return j.stop()}}),Hr)}var Vs=[cs,ls,us,ds,ps,As];function Qs(e){var t,n,r,s,a,o,i,c,l,u,d,p,A,g,f,h,E,m,v,S,_,y,C,b,x,M,I;return ge().wrap((function(w){for(;;)switch(w.prev=w.next){case 0:if(n=e.payload,r=n.id,s=n.conversationId,a=n.messages,o=n.more,i=null===(t=a[0])||void 0===t?void 0:t.type,!Vs.includes(i)){w.next=18;break}return w.next=5,(0,fe.select)(T.currentFaqSessionInfoSelector);case 5:if(l=w.sent,u=l.faqSessionId,d=l.sessionExpiryTime,void 0!==u){w.next=12;break}return w.next=11,(0,fe.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:null}));case 11:case 17:case 29:return w.abrupt("return");case 12:if(p=(null===(c=a[0])||void 0===c?void 0:c.content)||{},A=p.faq_session_id,qr(u,A,d)){w.next=18;break}return g="0"===d||u===A&&(new Date).getTime()>d/1e6,w.next=17,(0,fe.spawn)(Zs,g);case 18:if(!(0,O.checkIsScChat)()){w.next=21;break}return w.next=21,(0,fe.put)((0,T.reportRequested)({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 21:return w.next=23,(0,fe.select)((0,T.getConversation)(s));case 23:if(f=w.sent,h=f.to_id,!o.isResend){w.next=30;break}return w.next=29,Hs({conversationId:s,messages:a,requestIds:[a[0].request_id],more:{isCancelable:!!r}});case 30:return w.next=32,(0,fe.select)(T.inlocationSelector);case 32:return E=w.sent,w.next=35,(0,fe.select)(T.inScrollToMessageSelector);case 35:return m=w.sent,w.next=38,(0,fe.select)(T.isNavigateToUnreadMessageSelector);case 38:if(v=w.sent,!(E||m||v)){w.next=57;break}if(w.t0=v,!w.t0){w.next=45;break}return w.next=45,(0,fe.put)((0,T.setNavigateToUnreadMessage)({isNavigateToUnreadMessage:!1}));case 45:if(w.t1=m,!w.t1){w.next=49;break}return w.next=49,(0,fe.put)(Tn({inScrollToMessage:!1}));case 49:if(w.t2=E,!w.t2){w.next=53;break}return w.next=53,(0,fe.put)((0,T.updateLocationMode)({inlocation:!1}));case 53:return w.next=55,(0,fe.put)(lr({conversationId:s}));case 55:return w.next=57,(0,fe.call)(an,{payload:{conversationId:s,reset:!0,source:O.MessageSource.SEND}});case 57:return w.next=59,(0,fe.select)(T.entryPointSelector);case 59:return S=w.sent,w.next=62,(0,fe.select)(T.curConvsMessageSelector);case 62:return w.sent,w.next=65,(0,fe.call)(O.getItem,ts);case 65:return _=w.sent,y=f.shop_id,C=a.map((function(e){var t;return be({id:r,recipientID:h,message:e,redirectInfo:_,conversationId:s,replyToMessageId:null==e||null===(t=e.replyToMessage)||void 0===t?void 0:t.id,shopId:y,entryPoint:S})})),w.next=70,(0,fe.select)(T.currentUserIdSelector);case 70:return b=w.sent,w.next=73,(0,fe.select)(T.currentUserSelector);case 73:return x=w.sent,M=C.map((function(e,t){var n,r=es({},e);r.from_id=b;var s,o=r.type,i=r.content;if(["product","order","voucher"].includes(o)){var c="".concat(o,"_id"),l=i[c],u=a.find((function(e){return e.content[c]===l}));u&&(r.textContent=u.textContent)}else o===rs&&(r.translateStatus=O.TranslationStatus.PENDING);return null!==(n=a[t])&&void 0!==n&&n.replyToMessage&&(r.quoted_msg=null===(s=a[t])||void 0===s?void 0:s.replyToMessage),r.from_user_name=x.username||x.name,r})),I=(0,T.normalize)("messages",M),w.next=78,(0,fe.put)((0,T.updateEntities)({entities:I.entities}));case 78:return w.next=80,Hs({conversationId:s,messages:C,requestIds:I.result,more:{isRedirect:!!_,isCancelable:!!r}});case 80:case"end":return w.stop()}}),Vr)}function Xs(){var e,t;return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,fe.select)(T.messagesRelatedMapSelector);case 2:return e=n.sent,t=[],Object.entries(e).forEach((function(e){var n=(0,dn.Z)(e,2),r=n[0],s=n[1].sending||[];s.length&&t.push((0,fe.put)(Rs({conversationId:r,requestIds:s})))})),n.next=7,(0,fe.all)(t);case 7:case"end":return n.stop()}}),Qr)}function Js(e){var t,n,r;return ge().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.id,r=t.conversationId,s.next=3,(0,fe.put)(Ns({id:n,conversationId:r}));case 3:return s.next=5,(0,fe.put)((0,T.deleteRecord)({name:"messages",id:n}));case 5:case"end":return s.stop()}}),Xr)}function Ks(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.takeEveryWithCancel)(Os,Qs,Ns);case 2:case"end":return e.stop()}}),Jr)}function $s(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,fe.takeEvery)(Ds,Js);case 2:return e.next=4,(0,fe.takeEvery)(js,qs);case 4:return e.next=6,(0,fe.takeLatest)(Ps,Xs);case 6:case"end":return e.stop()}}),Kr)}const ea=(o(Fr={},Bs,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=n.isCancelable,i=e.messagesRelatedMap,c=i[r]||{},l=c.sending||[];l=a?l.concat(s):l;var u=c.all||[],d=c.failed||[];return es(es({},e),{},{messagesRelatedMap:es(es({},i),{},o({},r,es(es({},c),{},{all:s.reverse().filter((function(e){return!u.includes(e)})).concat(u),failed:d.filter((function(e){return!s.includes(e)})),sending:l})))})})),o(Fr,ks,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=e.messagesRelatedMap,i=a[r]||{},c=i.sending||[],l=i.all||[],u=i.failed||[],d=s.filter((function(e){return l.includes(e)&&!u.includes(e)}));return es(es({},e),{},{messagesRelatedMap:es(es({},a),{},o({},r,es(es({},i),{},{sending:c.concat(d)})))})})),o(Fr,Ts,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIdToMessageId,a=e.messagesRelatedMap,i=a[r]||{},c=(i.all||[]).map((function(e){return s[e]?s[e]:e})),l=i.sending||[];return es(es({},e),{},{messagesRelatedMap:es(es({},a),{},o({},r,es(es({},i),{},{all:c,offset:c[c.length-1],sending:l.filter((function(e){return!s.hasOwnProperty(e)}))})))})})),o(Fr,Rs,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=e.messagesRelatedMap,i=a[r]||{},c=i.failed||[],l=i.sending||[];return es(es({},e),{},{messagesRelatedMap:es(es({},a),{},o({},r,es(es({},i),{},{sending:l.filter((function(e){return!s.includes(e)})),failed:c.concat(s)})))})})),o(Fr,Ns,(function(e,t){var n=t.payload,r=n.id,s=n.conversationId,a=e.messagesRelatedMap,i=a[s]||{},c=i.all||[],l=i.sending||[];return es(es({},e),{},{messagesRelatedMap:es(es({},a),{},o({},s,es(es({},i),{},{all:c.filter((function(e){return e!==r})),sending:l.filter((function(e){return e!==r}))})))})})),Fr);var ta,na=Y(4323).t,ra=ge().mark(ma),sa=ge().mark(va),aa=ge().mark(_a),oa=ge().mark(ya),ia=ge().mark(Ca);function ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ua=(0,le.createActions)((o(ta={},_e.TRANSLATE_MESSAGES_REQUESTED,(function(e){return{messageId:e.messageId,toggle:e.toggle,isIDAndPcmall:e.isIDAndPcmall}})),o(ta,_e.CHANGE_TRANSLATE_STATUS,(function(e){return{messageId:e.messageId,status:e.status,changeMidStatus:e.changeMidStatus}})),o(ta,_e.SHOW_TRANSLATE_FEEDBACK,(function(e){return{messageId:e.messageId,translationSource:e.translationSource}})),o(ta,_e.SEND_TRANSLATE_FEEDBACK,(function(e){return{quality:e.quality,messageId:e.messageId,translationModel:e.translationModel,feedbacks:e.feedbacks,otherSuggestion:e.otherSuggestion}})),ta)),da=ua.translateMessagesRequested,pa=ua.changeTranslateStatus,Aa=ua.showTranslateFeedback,ga=ua.sendTranslateFeedback,fa=function(e,t){return(0,fe.put)((0,T.updateRecord)({name:"messages",id:e,record:t}))};function ha(e,t,n,r,s,a,o,i,c,l){var u={step2_target_language:i,step2_translation_status:!!c},d=e||!s?la(la({},{step1_target_language:a,step1_translation_status:!!o}),u):u;(0,T.$tracker)({trackerName:"translationTryAgain",data:la({message_id:t,conversation_id:n,message_type:0,is_sender:r,original_language:l},d)})}function Ea(e,t,n,r,s){var a=e||!s?{step1_translation_status:!1,step2_translation_status:!1}:{step2_translation_status:!1};(0,T.$tracker)({trackerName:"translationTryAgain",data:la({message_id:t,conversation_id:n,message_type:0,is_sender:r},a)})}function ma(e){var t,n,r,s,a,o,i,c,l,u,d,p,A,g,f,h,E,m,v,S,_,y,C,b,x,M,I,w,B,k,R,P,D;return ge().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return t=e.payload,n=t.messageId,r=t.toggle,s=t.isIDAndPcmall,N.next=3,(0,fe.select)((0,T.getMessageSelector)(n));case 3:if(N.t0=N.sent,N.t0){N.next=6;break}N.t0={};case 6:return a=N.t0,o=a.conversation_id,N.next=10,(0,fe.select)((0,T.getConversation)(o));case 10:return i=N.sent,c=i.shop_id,l=(0,O.getMessageIsSend)(a,i),u=a.content||{},d=u.text,p=u.translation,A=u.mid,g=(A||{}).text,N.prev=15,f={},r?f.toggleTranslateStatus=O.TranslationStatus.PENDING:f.translateStatus=O.TranslationStatus.PENDING,N.next=20,fa(n,f);case 20:return N.next=22,(0,fe.call)(T.fetch,{method:"POST",resource:"messages",suffix:"retry_translate",payload:JSON.stringify({shop_id:c,message_id:n,conversation_id:o})});case 22:if(h=N.sent,m=(E=h||{}).translated,v=E.middle_translated,_=(S=m||{}).translated_text,y=S.target_language,C=S.source_language,x=(b=v||{}).translated_text,M=b.target_language,I=b.source_language,B=(w=r?!!x:!!_)?O.TranslationStatus.SUCCEED:O.TranslationStatus.FAILED,k=r?{toggleTranslateStatus:B}:{translateStatus:B},R=r?la(la({},v),{},{text:x}):la(la({},m),{},{text:_}),P=w?R:la(la({},R),{},{text:""}),ha(r,n,o,l,g,M,x,y,_,I||C),s){N.next=37;break}return N.next=36,fa(n,la(la({},k),{},{content:{text:d,translation:P,mid:la(la({},v),{},{text:x})}}));case 36:return N.abrupt("return");case 37:return N.next=39,fa(n,la(la({},k),{},{content:{text:d,translation:r?p:P,mid:r?P:A}}));case 39:N.next=47;break;case 41:return N.prev=41,N.t1=N.catch(15),Ea(r,n,o,l,g),D=r?{toggleTranslateStatus:O.TranslationStatus.FAILED}:{translateStatus:O.TranslationStatus.FAILED},N.next=47,fa(n,la(la({},D),{},{content:{text:d,translation:r?p:la(la({},p),{},{text:""}),mid:r?la(la({},A),{},{text:""}):A}}));case 47:case"end":return N.stop()}}),ra,null,[[15,41]])}function va(e){var t,n,r,s,a;return ge().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.messageId,r=t.status,s=t.changeMidStatus,a=s?{toggleTranslateStatus:r}:{translateStatus:r},o.next=4,fa(n,a);case 4:case"end":return o.stop()}}),sa)}var Sa={shopee_en:"local_en",shopee_cn:"cn_en",shopee_kr:"kr_en"};function _a(e){var t,n,r,s,a,o,i,c;return ge().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.messageId,r=t.translationSource,l.next=3,(0,fe.select)((0,T.getMessageSelector)(n));case 3:if(l.t0=l.sent,l.t0){l.next=6;break}l.t0={};case 6:return s=l.t0,a=s.conversation_id,l.next=10,(0,fe.select)((0,T.getConversation)(a));case 10:return o=l.sent,i=o.shop_id,c=(0,O.getMessageIsSend)(s,o),l.next=15,(0,fe.put)((0,T.showModal)({type:"EVALUTE_MODAL",title:{key:"modal.translation_feedback.title"},actions:{cancel:{label:{key:"common.cancel"},shape:"default",handler:function(){pn.store.dispatch((0,T.closeModal)())}},confirm:{label:{key:"common.submit"},handler:function(e){pn.store.dispatch((0,T.closeModal)()),pn.store.dispatch(ga(la({messageId:n,translationModel:Sa[r]},e)))}}},additions:{trackerData:{data:{message_id:n,conversation_id:a,message_type:O.ApiMessageTypes[O.MessageTypes.MSG_TYPE_TEXT],is_sender:c},shopId:Number(i)}}}));case 15:case"end":return l.stop()}}),aa)}function ya(e){var t,n,r,s,a,o,i,c,l,u,d,p;return ge().wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return t=e.payload,n=t.quality,r=t.messageId,s=t.translationModel,a=t.feedbacks,o=t.otherSuggestion,A.prev=1,A.next=4,(0,fe.select)((0,T.getMessageSelector)(r));case 4:if(A.t0=A.sent,A.t0){A.next=7;break}A.t0={};case 7:return i=A.t0,A.next=10,(0,fe.select)(T.isSubAccountSelector);case 10:return c=A.sent,l=i.conversation_id,A.next=14,(0,fe.select)((0,T.getConversation)(l));case 14:return u=A.sent,d=u.shop_id,p={quality:n,message_id:r,conversation_id:l,translation_model:s,feedbacks:a,other_suggestion:o,to_shop_id:String(i.from_shop_id)},c&&(p.shop_id=d.toString()),A.next=20,(0,fe.call)(T.fetch,{method:"POST",resource:"translation",suffix:"feedback",payload:JSON.stringify(p)});case 20:return A.next=22,(0,fe.call)(T.setToastInformationSaga,(0,T.setToastInformation)({toast:{show:!0,type:"success",message:na("common.toast.translation_feedback")}}));case 22:A.next=26;break;case 24:A.prev=24,A.t1=A.catch(1);case 26:case"end":return A.stop()}}),oa,null,[[1,24]])}function Ca(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,fe.takeEvery)(da,ma);case 2:return e.next=4,(0,fe.takeEvery)(pa,va);case 4:return e.next=6,(0,fe.takeEvery)(Aa,_a);case 6:return e.next=8,(0,fe.takeEvery)(ga,ya);case 8:case"end":return e.stop()}}),ia)}var ba,xa,Ma=ge().mark(Oa),Ia=ge().mark(Ta),wa=(0,le.createActions)(o({},_e.HANDLE_SENSITIVE_URL,(function(e){return{href:e.href}}))).handleSensitiveUrl;function Oa(e){var t;return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.href,n.next=3,(0,fe.put)((0,T.showModal)({type:"CONFIRM_MODAL",title:{key:"common.navigation.cofirm_titile"},actions:{cancel:{label:{key:"common.cancel"},handler:function(){pn.store.dispatch((0,T.closeModal)())}},confirm:{label:{key:"common.navigation.confirm"},handler:function(){pn.store.dispatch((0,T.closeModal)());var e=window.open();e.opener=null,e.location=t}}},additions:{content:{key:"common.navigation.cofirm_content"},modalStyle:{width:"352px"},contentStyle:{paddingTop:"8px",paddingBottom:"13px"}}}));case 3:case"end":return n.stop()}}),Ma)}function Ta(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,fe.takeEvery)(wa,Oa);case 2:case"end":return e.stop()}}),Ia)}function Ba(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ka(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ba(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ba(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ra=ge().mark(Ua),Pa=ge().mark(Ya),Da=(0,le.createActions)((o(ba={},_e.FETCH_FAQ_MESSAGES_REQUESTED,(function(e){var t=e.sourceId,n=e.shopId,r=e.reset;return{sourceId:t,shopId:n,reset:void 0!==r&&r}})),o(ba,_e.FETCH_FAQ_MESSAGES_SUCCEEDED,(function(e){var t=e.messageIds,n=e.sourceId,r=e.faqHistoryStatus,s=e.offset,a=e.hasMore;return{messageIds:t,sourceId:n,faqHistoryStatus:r,offset:s,hasMore:void 0===a||a}})),o(ba,_e.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS,(function(e){return{status:e.status}})),o(ba,_e.UPDATE_CURRENT_FAQ_ID,(function(e){return{id:e.id}})),o(ba,_e.SHOW_FAQ_HISTORY_MODAL,(function(e){return{sourceId:e.sourceId,shopId:e.shopId}})),ba)),Na=Da.fetchFaqMessagesRequested,ja=Da.fetchFaqMessagesSucceeded,Fa=Da.updateFetchFaqMessagesRequestedStatus,qa=Da.updateCurrentFaqId,La=Da.showFaqHistoryModal,Ga=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;return new Promise((function(s,a){(0,T.fetch)({parent:"conversation",resource:"bundle_message",params:{shop_id:t,offset:n,limit:r,source_id:e}}).then((function(e){var t=e.bundle_message,n=e.total;Re(t),s({messages:t,total:n})})).catch((function(e){a(e)}))}))};function Ua(e){var t,n,r,s,a,o,i,c,l,u,d,p,A,g,f;return ge().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=t.sourceId,r=t.shopId,s=t.reset,h.prev=1,h.next=4,(0,fe.put)(qa({id:n}));case 4:return h.next=6,(0,fe.select)(T.currentFaqHistorySeletor);case 6:if(a=h.sent,o=a.offset,i=void 0===o?0:o,!(void 0!==(c=a.hasMore)&&!c||s&&i)){h.next=13;break}return h.abrupt("return",null);case 13:return h.next=15,(0,fe.put)(Fa({status:s?O.DataFetchStatus.INIT_PENDING:O.DataFetchStatus.PENDING}));case 15:return h.next=17,Ga(n,r,i);case 17:return l=h.sent,u=l.messages,d=l.total,p=i+u.length,u.sort((function(e,t){return xe(e.id,t.id)})),u=u.filter((function(e){return"webview"!==e.type})),A=(0,T.normalize)("messages",u),g=A.result,f=A.entities,h.next=26,(0,fe.put)((0,T.updateEntities)({entities:f}));case 26:return h.next=28,(0,fe.call)(St,u);case 28:return h.next=30,(0,fe.put)(ja({sourceId:n,offset:p,hasMore:p<d,faqHistoryStatus:O.DataFetchStatus.SUCCEED,messageIds:g}));case 30:h.next=36;break;case 32:return h.prev=32,h.t0=h.catch(1),h.next=36,(0,fe.put)(Fa({status:s?O.DataFetchStatus.INIT_FAILED:O.DataFetchStatus.FAILED}));case 36:case"end":return h.stop()}}),Ra,null,[[1,32]])}function Ya(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,fe.takeEvery)(Na,Ua);case 2:case"end":return e.stop()}}),Pa)}const Wa=(o(xa={},_e.FETCH_FAQ_MESSAGES_SUCCEEDED,(function(e,t){var n=t.payload,r=n.messageIds,s=n.sourceId,a=n.faqHistoryStatus,i=n.offset,c=n.hasMore,l=e.faqHistoryHash,u=(l[s]||{all:[]}).all,d=Array.from(new Set(u.concat(r)));return ka(ka({},e),{},{faqHistoryHash:ka(ka({},l),{},o({},s,{all:d,offset:i,hasMore:c})),faqHistoryStatus:a})})),o(xa,_e.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS,(function(e,t){var n=t.payload.status;return ka(ka({},e),{},{faqHistoryStatus:n})})),o(xa,_e.UPDATE_CURRENT_FAQ_ID,(function(e,t){var n=t.payload.id;return ka(ka({},e),{},{faqId:n})})),xa);function za(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Za(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Za(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function Za(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ha=ge().mark(mo),Va=ge().mark(vo),Qa=ge().mark(So),Xa=ge().mark(_o),Ja=ge().mark(yo),Ka=ge().mark(bo),$a=ge().mark(xo);function eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function to(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var no,ro=O.MessageTypes.MSG_TYPE_OFFER,so=O.MessageTypes.MSG_TYPE_VIDEO,ao=O.MessageTypes.MSG_TYPE_NOTIFICATION,oo=(0,le.createActions)({RECEIVE_MESSAGE_REQUESTED:function(e){return{message:e.message}},RECEIVE_MESSAGE_SUCCEEDED:function(e){return{conversationId:e.conversationId,message:e.message}},RESET_NEW_CONVERSATION_QUEUE:function(){return{}},RESET_OLD_CONVERSATION_QUEUE:function(){return{}},RESET_CONVERSATION_QUEUE:function(){return{}}}),io=oo.receiveMessageRequested,co=oo.receiveMessageSucceeded,lo=oo.resetNewConversationQueue,uo=oo.resetOldConversationQueue,po=oo.resetConversationQueue,Ao=2e3,go=Ao,fo=Ao,ho=[],Eo=[];function mo(e){var t,n,r,s,a,o,i,c;return ge().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.content,e.from_id,e.send_by_yourself,n=e.conversation_id,s=(r=t||{}).offer_id,a=r.model_id,r.shop_id,o=r.product_id,i=[],c={},l.next=6,(0,fe.select)((0,T.relatedOfferIdsSelector)(n,a,s,o));case 6:return l.sent.forEach((function(e){var t=e.id;c[t]=to(to({},e),{},{status:O.OfferStatus.CANCELLED})})),i.push((0,fe.put)((0,T.batchUpdateRecord)({name:"offers",records:c}))),l.next=11,(0,fe.all)(i);case 11:case"end":return l.stop()}}),Ha)}function vo(e){var t,n,r,s,a,o,i,c,l,u,d,p,A,g,f,h,E,m,v,S,_,y,C,b,x,M,I,w,B;return ge().wrap((function(k){for(;;)switch(k.prev=k.next){case 0:return t=e.payload.message,n=t.id,r=t.type,s=t.request_id,a=t.conversation_id,o=t.send_by_yourself,i=t.content,c=t.created_at,Be.includes(r)&&Re(t),k.next=5,(0,fe.select)((function(e){return e.conversationReducer}));case 5:return l=k.sent,u=l.conversationIdsMap,d=l.currentConversationId,p=l.currentConversationCanRead,k.next=11,(0,fe.select)((0,T.getConversation)(a));case 11:if(A=k.sent,g=A.id&&void 0!==A.faking,u&&u[a.toString()]||g){k.next=18;break}ho.push(t),k.next=98;break;case 18:if(r!==ro){k.next=22;break}return k.next=22,(0,fe.call)(mo,t);case 22:if(f=d===a,h=(0,O.getChatBotParams)(t,{updateMaxGeneralOptionHideTime:o}),E=(0,O.getCrmPreviewParams)(t),!f){k.next=97;break}return k.next=28,(0,fe.select)(T.curConvsMessageSelector);case 28:if(m=k.sent,!o){k.next=70;break}v=!1,S=!1,_=!1,y=za(m),k.prev=34,y.s();case 36:if((C=y.n()).done){k.next=46;break}if(b=C.value,x=b.id,M=b.retryRequestId,S=x===s,_=M===s,!((v=x===n)||S||_)){k.next=44;break}return k.abrupt("break",46);case 44:k.next=36;break;case 46:k.next=51;break;case 48:k.prev=48,k.t0=k.catch(34),y.e(k.t0);case 51:return k.prev=51,y.f(),k.finish(51);case 54:if(v){k.next=68;break}if(!S&&!_){k.next=60;break}return k.next=58,(0,fe.call)(zs,[t],a);case 58:k.next=68;break;case 60:return k.next=62,(0,fe.call)(T.updateOrReplaceAction,m,[t],"messages",["content"]);case 62:return k.next=64,(0,fe.call)(St,[t]);case 64:return k.next=66,(0,fe.put)((0,T.updateRecord)({name:"conversations",id:a,record:to(to({latest_message_id:n,latest_message_type:r,latest_message_content:i,last_message_time:c},h),E)}));case 66:return k.next=68,(0,fe.put)(co({conversationId:a,message:t}));case 68:k.next=89;break;case 70:if(r!==so){k.next=73;break}return k.next=73,(0,fe.put)(xr({id:s,info:{shouldPreload:!0}}));case 73:return k.next=75,(0,fe.call)(T.updateOrReplaceAction,m,[t],"messages",["content"]);case 75:return k.next=77,(0,fe.call)(St,[t]);case 77:return k.next=79,(0,fe.select)(T.currentConversationSelector);case 79:if(I=k.sent,w=I.unread_count,B=p?w:w+1,0!==w||p||r===ao){k.next=85;break}return k.next=85,(0,fe.spawn)(T.handleUnreadCountChangeAction,(0,T.updateUnreadCount)({type:T.unreadCountActions.RECEIVE_UNREADABLE_MESSAGE,conversation:I}));case 85:return k.next=87,(0,fe.put)((0,T.updateRecord)({name:"conversations",id:a,record:to(to({latest_message_id:n,latest_message_type:r,latest_message_content:i,last_message_time:c,unread_count:B},h),E)}));case 87:return k.next=89,(0,fe.put)(co({conversationId:a,message:t}));case 89:if(!g){k.next=92;break}return k.next=92,(0,fe.call)(T.fetchConversationsRequestedSaga,(0,T.fetchConversationsRequested)({direction:"latest"}));case 92:if(o||!p){k.next=95;break}return k.next=95,(0,fe.call)(T.markMessagesRequestedSaga,(0,T.markMessagesRequested)({conversationId:a,isRead:!0,latestMessageId:n}));case 95:k.next=98;break;case 97:Eo.push(t);case 98:case"end":return k.stop()}}),Va,null,[[34,48,51,54]])}function So(){var e,t,n,r,s,a,o,i=arguments;return ge().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=i.length>0&&void 0!==i[0]&&i[0],!(t=ho.length)){c.next=19;break}return c.next=5,(0,fe.select)(T.isSubAccountSelector);case 5:return n=c.sent,r=ho.splice(0,t).sort((function(e,t){return e.created_timestamp-t.created_timestamp})),c.next=9,(0,fe.select)((function(e){return e.conversationReducer}));case 9:if(s=c.sent,a=s.maxLatestTimestampNano,o=s.maxLatestReceivedMessageId,!(n?(0,O.greaterThan)(r[0].id,o):a<=r[0].created_timestamp*Math.pow(10,9))){c.next=19;break}return c.next=16,(0,fe.call)(T.fetchConversationsRequestedSaga,(0,T.fetchConversationsRequested)({direction:"latest"}));case 16:if(!e){c.next=19;break}return c.next=19,(0,fe.spawn)(T.handleUnreadCountChangeAction,(0,T.updateUnreadCount)({type:T.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT}));case 19:case"end":return c.stop()}}),Qa)}function _o(){var e,t;return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,(0,fe.delay)(go);case 3:if(e=ho.length){n.next=8;break}go=8e3===go?go:2*go,n.next=20;break;case 8:if(go=Ao,t=ho[e-1].id,no===t){n.next=14;break}return no=t,n.next=14,(0,fe.spawn)(T.handleUnreadCountChangeAction,(0,T.updateUnreadCount)({type:T.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT}));case 14:return n.next=16,(0,fe.select)(T.showChatWindowSelector);case 16:if(!n.sent){n.next=20;break}return n.next=20,(0,fe.call)(So,!0);case 20:n.next=0;break;case 22:case"end":return n.stop()}}),Xa)}function yo(){var e;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,(0,fe.delay)(fo);case 3:if(e=Eo.length){t.next=8;break}fo=8e3===fo?fo:2*fo,t.next=9;break;case 8:return t.delegateYield(ge().mark((function t(){var n,r,s,a,o;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,fe.put)((0,T.updateFetchConversationsDirection)({direction:"latest"}));case 2:return n=Eo.splice(0,e),fo=Ao,r=Array.from(new Set(n.map((function(e){return e.conversation_id})))),t.next=7,(0,fe.select)((0,T.getConversations)(r));case 7:return s=t.sent,a={},o=0,n.forEach((function(e){var t=e.id,n=e.type,r=e.content,i=e.created_at,c=e.conversation_id,l=e.send_by_yourself,u=(0,O.getChatBotParams)(e,{updateMaxGeneralOptionHideTime:l}),d=(0,O.getCrmPreviewParams)(e),p=to(to({latest_message_id:t,latest_message_type:n,latest_message_content:r,last_message_time:i},u),d),A=a[c],g=!l&&n!==ao;if(A)t>A.latest_message_id?a[c]=to(to(to({},A),p),{},{unread_count:g?A.unread_count+1:A.unread_count}):a[c]=to(to({},A),{},{unread_count:g?A.unread_count+1:A.unread_count});else{var f=s.find((function(e){return e.id===c}))||{},h=f.unread_count,E=void 0===h?0:h;f.shop_id,a[c]=to(to({},p),{},{unread_count:g?E+1:E}),g&&0===E&&(o+=1)}})),t.next=13,(0,fe.put)((0,T.batchUpdateRecord)({name:"conversations",records:a,checkProp:"latest_message_id"}));case 13:return t.next=15,(0,fe.spawn)(T.handleUnreadCountChangeAction,(0,T.updateUnreadCount)({type:T.unreadCountActions.MESSAGE_QUEUE_UPDATE,messageQueueUpdate:{totalIncrease:o}}));case 15:case"end":return t.stop()}}),t)}))(),"t0",9);case 9:t.next=0;break;case 11:case"end":return t.stop()}}),Ja)}function Co(){var e=ho.length,t=Eo.length;e&&ho.splice(0,e),t&&Eo.splice(0,t)}function bo(e){var t,n,r,s,a,o,i,c,l,u,d;return ge().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(!(t=Eo.filter((function(t){return t.conversation_id===e}))).length){p.next=12;break}return t.forEach((function(e){var t=Eo.findIndex((function(t){return t.id===e.id}));Eo.splice(t,1)})),n=t.sort((function(e,t){return t.latest_message_id-e.latest_message_id})),r=n[0],s=r.id,a=r.type,o=r.content,i=r.created_at,c=r.send_by_yourself,l=(0,O.getChatBotParams)(r,{updateMaxGeneralOptionHideTime:c}),u=(0,O.getCrmPreviewParams)(r),d=to(to({latest_message_id:s,latest_message_type:a,latest_message_content:o,last_message_time:i},l),u),p.next=11,(0,fe.put)((0,T.updateRecord)({name:"conversations",id:e,record:d}));case 11:return p.abrupt("return",s);case 12:return p.abrupt("return",null);case 13:case"end":return p.stop()}}),Ka)}function xo(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,fe.takeEvery)(io,vo);case 2:return e.next=4,(0,fe.takeEvery)(po,Co);case 4:case"end":return e.stop()}}),$a)}const Mo=o({},co,(function(e,t){var n,r=t.payload,s=r.conversationId,a=r.message,i=a.id,c=a.request_id,l=e.messagesRelatedMap,u=l[s]||{},d=u.all,p=void 0===d?[]:d,A=u.sending,g=void 0===A?[]:A;return n=p.includes(i)?p:[i].concat(p).filter((function(e){return e!==c})),to(to({},e),{},{messagesRelatedMap:to(to({},l),{},o({},s,to(to({},u),{},{all:n,sending:g.filter((function(e){return!g.includes(c)}))})))})}));var Io=Y(4323).t;function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var To=ge().mark(No),Bo=ge().mark(jo),ko=ge().mark(Fo),Ro=(0,le.createActions)({DELETE_MESSAGE_REQUESTED:function(e){return{messageId:e.messageId}},DELETE_MESSAGE_POST_REQUESTED:function(e){return{messageId:e.messageId}}}),Po=Ro.deleteMessageRequested,Do=Ro.deleteMessagePostRequested;function No(e){var t,n,r,s;return ge().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.messageId,a.next=3,(0,fe.select)((0,T.getMessageSelector)(t));case 3:return n=a.sent,r=n.type,s=n.conversation_id,a.next=7,(0,fe.put)((0,T.showModal)({type:"CONFIRM_MODAL",title:{key:"message.delete.title"},actions:{cancel:{label:Io("common.cancel"),handler:function(){pn.store.dispatch((0,T.closeModal)()),(0,T.$tracker)({trackerName:"cancelConfirm",data:{message_id:t,message_type:r,conversation_id:s}})}},confirm:{label:Io("common.confirm"),handler:function(){pn.store.dispatch((0,T.closeModal)()),pn.store.dispatch(Do({messageId:t})),(0,T.$tracker)({trackerName:"deleteConfirm",data:{message_id:t,message_type:(0,O.getReplyTrackerMessageType)(r),conversation_id:s}})}}}}));case 7:case"end":return a.stop()}}),To)}function jo(e){var t,n,r,s,a,o,i,c,l,u,d,p,A,g,f,h,E,m;return ge().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload.messageId,v.prev=1,v.next=4,(0,fe.select)(T.deleteConfigSelector);case 4:return n=v.sent,v.next=7,(0,fe.select)((0,T.getMessageSelector)(t));case 7:return r=v.sent,v.next=10,(0,fe.call)(T.fetch,{method:"POST",parent:"messages",resource:"delete",payload:JSON.stringify({msg_id:t,type:r.type,delete_config_version:n.deleteConfigVersion})});case 10:return s=v.sent,a=r.message_option|O.MessageOption.MSG_OPT_DELETE,o=(0,T.normalize)("messages",Oo(Oo({},r),{},{message_option:a})),i=o.entities,v.next=15,(0,fe.put)((0,T.updateEntities)({entities:i}));case 15:return v.next=17,(0,fe.select)((0,T.getConversation)(r.conversation_id));case 17:if((c=v.sent).latest_message_id!==r.id){v.next=22;break}return l=(0,T.normalize)("conversations",Oo(Oo({},c),{},{last_message_option:a,latest_message_content:{text:""},latest_message_from_id:r.from_id})),u=l.entities,v.next=22,(0,fe.put)((0,T.updateEntities)({entities:u}));case 22:if(d=s.config_version,n.deleteConfigVersion!==d){v.next=25;break}return v.abrupt("return");case 25:return v.next=27,(0,fe.select)(T.currentUserSelector);case 27:return p=v.sent,A=(s.region_config||[]).find((function(e){return e.region===p.country})),g=!1,f=0,A&&A.duration&&(g=!0,f=A.duration),v.next=34,(0,fe.put)((0,T.updateDelPermission)({hasDeletePermission:g,deleteConfigVersion:d,deleteConfigDuration:f}));case 34:v.next=45;break;case 36:return v.prev=36,v.t0=v.catch(1),v.next=40,(0,fe.select)((0,T.getMessageSelector)(t));case 40:return h=v.sent,E=h.type,m=h.conversation_id,v.next=44,(0,fe.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:v.t0}));case 44:(0,T.$tracker)({operation:O.TrackerOperation.IMPRESSION,trackerName:"error",data:{message_id:t,message_type:(0,O.getReplyTrackerMessageType)(E),conversation_id:m,error_reason:v.t0.message}});case 45:case"end":return v.stop()}}),Bo,null,[[1,36]])}function Fo(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,fe.takeEvery)(Po,No);case 2:return e.next=4,(0,fe.takeEvery)(Do,jo);case 4:case"end":return e.stop()}}),ko)}var qo=ge().mark(Uo),Lo=ge().mark(Yo),Go=(0,le.createActions)(o({},_e.MESSAGE_SYNC_UPDATE,(function(e){return{conversation:e.conversation}}))).messageSyncUpdate;function Uo(e){var t,n,r,s,a,o,i,c,l,u,d,p,A,g,f,h,E,m,v;return ge().wrap((function(S){for(;;)switch(S.prev=S.next){case 0:return t=e.payload.conversation,n=t.id,r=t.shop_id,S.prev=2,S.next=5,(0,fe.select)((0,T.getConvsMessagesRelatedSelector)(n));case 5:if(a=S.sent,o=a.all,i=void 0===o?[]:o,c=a.timeNow,l=a.oldestMessageId,0!==i.length){S.next=9;break}return S.abrupt("return");case 9:return S.next=11,(0,fe.call)(T.fetch,{subServer:"coreapi",parent:"conversation",resource:"updated_message_list",params:{shop_id:r,conversation_id:n,last_update_time:c||"0"}});case 11:if(u=S.sent,d=u.messages,p=void 0===d?[]:d,A=u.page_result,p.sort((function(e,t){return t.id-e.id})),!(p.length>0)){S.next=18;break}return g=(0,T.normalize)("messages",p),f=g.entities,S.next=18,(0,fe.put)((0,T.updateEntities)({entities:f}));case 18:if(h=null===(s=p[0])||void 0===s?void 0:s.id,m=(E=A||{}).has_more,!(v=E.next_last_update_time)){S.next=23;break}return S.next=23,(0,fe.put)(Bt({conversationId:n,updateKey:O.MessagesRelatedKey.TIME_NOW,updateValue:v}));case 23:if(!(m&&l<h&&p.length>0)){S.next=26;break}return S.next=26,(0,fe.call)(Uo,{payload:{conversation:t}});case 26:S.next=35;break;case 28:if(S.prev=28,S.t0=S.catch(2),!(S.t0 instanceof T.CustomError)){S.next=35;break}return S.next=33,(0,fe.put)(Bt({conversationId:n,updateKey:O.MessagesRelatedKey.TIME_NOW,updateValue:"0"}));case 33:return S.next=35,(0,fe.put)(Qt({conversationId:n,reset:!0}));case 35:case"end":return S.stop()}}),qo,null,[[2,28]])}function Yo(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,fe.takeEvery)(Go,Uo);case 2:case"end":return e.stop()}}),Lo)}function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zo=(0,le.createActions)(o({},_e.SET_ENTRY_POINT,(function(e){return{type:e.type,conversationId:e.conversationId}}))).setEntryPoint;const Ho=o({},_e.SET_ENTRY_POINT,(function(e,t){var n=t.payload;return zo(zo({},e),{},{entryPoint:n})}));function Vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vo(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xo=(0,le.createActions)(o({},_e.UPDATE_HAS_CONFLICT,(function(e){return{hasConflict:e.hasConflict}}))).updateHasConflict;const Jo=o({},_e.UPDATE_HAS_CONFLICT,(function(e,t){var n=t.payload.hasConflict;return Qo(Qo({},e),{},{toBottomHasConflict:n})}));var Ko;function $o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$o(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ti=[cn,$s,Wn,xo,Ta,Ca,Ct,ar,ze,Ks,Ya,yo,_o,jn,Fo,Yo,Pt],ni={messageReducer:(0,le.handleActions)(ei(ei(ei(ei(ei(ei(ei(ei(ei(ei(ei(ei(ei({},Ho),ln),ea),Mo),ur),or),jr),Wa),Jo),Ho),bt),Nn),Dt),(Ko={entryPoint:{},status:"pendingInit",messagesRelatedMap:{},messageFillStatusMap:{},videoMap:{1234:{percentage:"10",size:"1300"}},offlineMessages:{}},o(Ko,"entryPoint",{}),o(Ko,"toBottomHasConflict",!1),o(Ko,"faqHistoryHash",{}),o(Ko,"faqId",null),o(Ko,"faqHistoryStatus",""),o(Ko,"reply",{toMessageId:{},inScrollToMessage:!1,scrollToMessageId:""}),Ko))},ri={setReplyToMessage:xn,deleteMessageRequested:Po,updateHasConflict:Xo};const si=(0,h.connect)((function(e){return{scrollToMessageId:(0,T.scrollToMessageIdSelector)(e),hasReplyPermission:(0,T.hasReplyPermissionSelector)(e),hasDeletePermission:(0,T.hasDeletePermissionSelector)(e),currentConversationId:(0,T.currentConversationIdSelector)(e),deleteConfigDuration:(0,T.deleteConfigDurationSelector)(e)}}),ri)((function(e){return r().createElement(J.MessageToolbar,e)}));var ai=Y(5600),oi=Y(5668),ii={};ii.styleTagTransform=Z(),ii.setAttributes=L(),ii.insert=F().bind(null,"head"),ii.domAPI=N(),ii.insertStyleElement=U(),P()(oi.Z,ii);const ci=oi.Z&&oi.Z.locals?oi.Z.locals:void 0;var li=Y(4323).t;const ui=function(e){var t=e.code,s=(0,n.useRef)(null),a=function(){var t=e.region;window.open("".concat(O.cancelOrderPolicy[t]||O.cancelOrderPolicy.sg))};(0,n.useEffect)((function(){if(s&&s.current){var e=s.current.firstElementChild;if(e)return e.className=ci.policy,e.addEventListener("click",a),function(){e.removeEventListener("click",a)}}}),[s]);var o=(0,O.hasTargetMessageOption)(t,O.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND),i=(0,O.hasTargetMessageOption)(t,O.MessageOption.MSG_OPT_CANCELORDER_WARNING_SENT);if(!o&&!i)return null;var c=o?li("cancel_order.meta.not_send"):i?li("cancel_order.meta.send_it"):"";return r().createElement("span",{ref:s,className:ci.root,dangerouslySetInnerHTML:{__html:c}})};var di=Y(6572),pi=Y.n(di),Ai=Y(6512),gi=Y.n(Ai),fi=Y(5522),hi={};hi.styleTagTransform=Z(),hi.setAttributes=L(),hi.insert=F().bind(null,"head"),hi.domAPI=N(),hi.insertStyleElement=U(),P()(fi.Z,hi);const Ei=fi.Z&&fi.Z.locals?fi.Z.locals:void 0;var mi=Y(4323).t,vi=O.MessageTypes.MSG_TYPE_OFFER;const Si=(0,h.connect)((function(e){return{currentConversationToName:(0,T.currentConversationToNameSelector)(e)}}),{})((function(e){var t=e.message;if(!t)return r().createElement(r().Fragment,null);var n,s=e.currentConversationToName,o=e.buyerId,i=e.shop,c=t.type,l=t.textContent,u=t.to_id,d=t.errorCode,p=t.message_option,A=u===o;if(c===vi&&l){var g=l.buyer_id===o,f=l.status,h=function(e,t){if([O.OfferStatus.ACCEPTED,O.OfferStatus.REJECTED].includes(e)){var n=e.slice(0,e.length-2);return t?A?null:mi("conversation_detail.message_list.".concat(n,"_offer")):A?mi("conversation_detail.message_list.".concat(n,"_offer_user"),{username:s}):null}if(O.OfferStatus.CANCELLED)return t?mi("conversation_detail.message_list.cancel_offer",{username:s}):mi("conversation_detail.message_list.cancel_offer_self")}(f,g);switch(f){case O.OfferStatus.ACCEPTED:h&&(n=r().createElement(ai.Alert,{content:h,type:O.AlertType.normal,showIcon:!0,icon:r().createElement(S(),{className:Ei.successIcon,svg:gi()})}));break;case O.OfferStatus.REJECTED:case O.OfferStatus.CANCELLED:h&&(n=r().createElement(ai.Alert,{content:h,type:O.AlertType.normal}))}}var E={showIcon:!0,icon:r().createElement(S(),{className:Ei.warnIcon,svg:pi()}),type:O.AlertType.normal};if(d===O.MessageErrorCode.FORBIDDEN)n=r().createElement(ai.Alert,a({content:mi("conversation_detail.message_list.error_message_blocked",{username:s})},E));else if(d===O.MessageErrorCode.BLACKLIST)n=r().createElement(ai.Alert,a({content:r().createElement(J.BlacklistHint,null)},E));else if(d===O.MessageErrorCode.UNVERIFIED_PHONE_NUMBER)n=r().createElement(ai.Alert,a({content:mi("conversation_detail.message_list.unverified_phone_number")},E));else if(A&&((0,O.hasTargetMessageOption)(p,O.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)||(0,O.hasTargetMessageOption)(p,O.MessageOption.MSG_OPT_CANCELORDER_WARNING_SENT))){var m=i&&i.country?i.country.toLowerCase():"sg";n=r().createElement(ai.Alert,a({content:r().createElement(ui,{code:p,region:m})},E))}return n?r().createElement("span",{className:Ei.metaContent},n):r().createElement(r().Fragment,null)}));var _i=Y(8733),yi={};yi.styleTagTransform=Z(),yi.setAttributes=L(),yi.insert=F().bind(null,"head"),yi.domAPI=N(),yi.insertStyleElement=U(),P()(_i.Z,yi);const Ci=_i.Z&&_i.Z.locals?_i.Z.locals:void 0;var bi=Y(4323).t;const xi=r().memo((function(){return r().createElement("div",{className:Ci.newMessageTip},r().createElement("span",{className:Ci.newMessageContent},bi("conversation_detail.message_list.unread_messages")))}));var Mi=Y(8720),Ii=Y.n(Mi),wi=Y(1696),Oi={};Oi.styleTagTransform=Z(),Oi.setAttributes=L(),Oi.insert=F().bind(null,"head"),Oi.domAPI=N(),Oi.insertStyleElement=U(),P()(wi.Z,Oi);const Ti=wi.Z&&wi.Z.locals?wi.Z.locals:void 0;var Bi=Y(2066),ki=Y.n(Bi),Ri=Y(4323).t,Pi=r().memo((function(e){var t=e.message,n=e.resendMessage,s=t.send_status,a=t.errorCode,o=t.message_option,i=s===O.MessageSendStatus.FAILED,c=a===O.MessageErrorCode.BLACKLIST,l=(0,O.hasTargetMessageOption)(o,O.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND),u=r().createElement("div",{className:Ti.iconWrap},r().createElement(S(),{svg:ki(),className:Ti.iconBase}));return i?c?u:r().createElement("div",{className:Ti.iconWrap},r().createElement(Ii(),{content:Ri("conversation_detail.message_list.resend")},r().createElement(S(),{svg:ki(),className:Ti.icon,onClick:n}))):l?u:r().createElement(r().Fragment,null)}));Pi.displayName="ErrorContent";const Di=Pi;var Ni=Y(6322),ji={};ji.styleTagTransform=Z(),ji.setAttributes=L(),ji.insert=F().bind(null,"head"),ji.domAPI=N(),ji.insertStyleElement=U(),P()(Ni.Z,ji);const Fi=Ni.Z&&Ni.Z.locals?Ni.Z.locals:void 0;var qi=Y(3710),Li=Y.n(qi),Gi=Y(4323).t,Ui=O.MessageTypes.MSG_TYPE_VIDEO,Yi=O.MessageTypes.MSG_TYPE_IMAGE,Wi=O.MessageTypes.MSG_TYPE_STICKER,zi=r().memo((function(e){var t=e.type,n=e.status,s=e.videoUploaded,a=e.handleCancelMessage;return n===O.MessageSendStatus.SENDING?r().createElement("div",{className:Fi.sendingWrap},t!==Ui||s?[Yi,Wi].includes(t)?null:r().createElement(J.LoadingSpin,{theme:"dark"}):r().createElement(Ii(),{content:Gi("common.cancel")},r().createElement(S(),{svg:Li(),className:Fi.icon,onClick:a}))):null}));const Zi=(0,h.connect)((function(e,t){var n=!1;return t.type===Ui&&(n="successful"===((0,T.selectVideoInfoByKey)(t.requestId)(e)||{}).status),{videoUploaded:n}}),{})(zi);var Hi=Y(7370),Vi={};Vi.styleTagTransform=Z(),Vi.setAttributes=L(),Vi.insert=F().bind(null,"head"),Vi.domAPI=N(),Vi.insertStyleElement=U(),P()(Hi.Z,Vi);const Qi=Hi.Z&&Hi.Z.locals?Hi.Z.locals:void 0;var Xi=Y(1177),Ji={};Ji.styleTagTransform=Z(),Ji.setAttributes=L(),Ji.insert=F().bind(null,"head"),Ji.domAPI=N(),Ji.insertStyleElement=U(),P()(Xi.Z,Ji);const Ki=Xi.Z&&Xi.Z.locals?Xi.Z.locals:void 0;var $i=Y(7974),ec={};ec.styleTagTransform=Z(),ec.setAttributes=L(),ec.insert=F().bind(null,"head"),ec.domAPI=N(),ec.insertStyleElement=U(),P()($i.Z,ec);const tc=$i.Z&&$i.Z.locals?$i.Z.locals:void 0;var nc=Y(731),rc=Y.n(nc),sc=Y(4323).t;const ac=function(e){var t=e.type,n=e.showSentLink;return r().createElement("div",{className:tc.root},r().createElement("div",{className:tc.label},sc("common.".concat(t,".footer"))),n&&r().createElement("div",{className:tc.sendStatus},r().createElement(S(),{svg:rc(),className:tc.linkArrow}),sc("common.order.link_send")))};var oc=Y(7095),ic=Y.n(oc),cc=Y(8062),lc=Y.n(cc),uc=Y(1547),dc=Y.n(uc),pc=Y(9181),Ac=Y.n(pc),gc=Y(2470),fc=Y.n(gc),hc=Y(1524),Ec=Y.n(hc),mc=Y(4323).t,vc={unpaid:lc(),to_ship:dc(),shipping:Ac(),completed:fc(),cancelled:Ec(),refund:ic()},Sc=function(e){var t=e.content,n=e.isSendByMe,s=e.currentUserShopId,a=e.isSubAccount,o=e.isScChat,i=e.buyerShopId,c=e.shopId,l=e.messageId,u=e.hasAccess,d=e.showSentLink,p=e.conversationId,A=e.visitShopSellerCenterRequested,g="";a||(g="https://".concat((0,O.getSellerCenterUrl)(),"/portal/sale/").concat(t.id));var f=(0,O.getMallOrderUrl)(t,n?i:s),h=t.id,E=t.status,m=t.image,v=t.image_hash,_=t.products_count,y=t.local_payment,C=mc((0,O.getOrderStatusTransifyKey)(E)),b=mc("conversation_detail.message_list.order_total_price",{orderTotalPrice:y}),x=mc((0,O.formatTransifyKeyWithNumber)("conversation_detail.message_list.order_product_count",_),{orderProductCount:_});return r().createElement("div",{className:Ki.root,onClick:function(){(0,T.$tracker)({shopId:c,trackerName:"clickVisitOrderInSellerCenter",data:{order_id:h,message_id:l,conversation_id:p}}),o?(0,O.redirectionWithAccess)({access:u,isSubAccount:a,action:function(){return A({shopId:c,orderId:h})},url:g}):window.open(f)},style:{cursor:u?"pointer":"default"}},r().createElement("div",{className:Ki.detailBlock},r().createElement(J.ProductImage,{src:m,hash:v}),r().createElement("div",{className:Ki.content},r().createElement("div",{className:Qi.orderStatus},r().createElement(S(),{svg:vc[E],className:"".concat(Qi.statusIcon," ").concat(Qi[E])}),r().createElement("div",{className:Qi.statusText,title:C},C)),r().createElement("div",{className:Qi.detail},r().createElement("div",{className:Qi.payment,title:b},b),r().createElement("div",{className:Ki.divider}),r().createElement("div",{className:Qi.sourceCount,title:x},x)))),r().createElement(ac,{type:"order",showSentLink:d}))};Sc.displayName="OrderMessageSource";const _c=(0,h.connect)((function(e){return{buyerShopId:(0,T.currentBuyerShopIdSelector)(e),currentUserShopId:(0,T.currentUserShopIdSelector)(e)}}),null)(Sc);var yc=Y(8310),Cc=Y.n(yc),bc=Y(7625),xc={};xc.styleTagTransform=Z(),xc.setAttributes=L(),xc.insert=F().bind(null,"head"),xc.domAPI=N(),xc.insertStyleElement=U(),P()(bc.Z,xc);const Mc=bc.Z&&bc.Z.locals?bc.Z.locals:void 0;var Ic=Y(4323).t,wc=O.ProductStatusUsingNumber.DELETED,Oc=O.ProductStatusUsingNumber.BANNED,Tc=O.ProductStatusUsingNumber.SOLD_OUT,Bc=O.ProductStatusUsingNumber.NORMAL,kc=O.ProductStatusUsingNumber.DELISTED,Rc=[wc,Oc,Tc,kc],Pc=r().memo((function(e){var t=e.content,n=e.isSubAccount,s=e.isScChat,a=e.messageId,o=e.hasAccess,i=e.showSentLink,c=e.conversationId,l=e.visitShopSellerCenterRequested,u=t.id,d=t.status,p=t.shop_id,A=t.region,g=t.name,f=t.image,h=t.image_hash,E=t.original_price,m=t.actual_price,v=t.stock,S=d===wc,_=n?"":"https://".concat((0,O.getSellerCenterUrl)(),"/portal/product/").concat(u),y="https://".concat((0,O.getMallUrl)(A),"/product/").concat(p,"/").concat(u),C=(0,O.getProductStatusTransifyKey)(d),b=d===Bc?Ic((0,O.formatTransifyKeyWithNumber)(C,v),{productStock:v}):Ic(C),x=Cc()(Mc.status,[Bc,wc].includes(d)?Mc[d]:Mc.invalid);return r().createElement("div",{className:Ki.root,onClick:function(){S||((0,T.$tracker)({shopId:p,trackerName:"clickVisitProductInSellerCenter",data:{product_id:u,message_id:a,conversation_id:c}}),s?(0,O.redirectionWithAccess)({access:!!o,isSubAccount:n,action:function(){return l({shopId:p,itemId:u})},url:_}):window.open(y))},style:{cursor:o?"pointer":"default"}},r().createElement("div",{className:Ki.detailBlock},S?r().createElement(J.UnavailableProduct,{className:Mc.productDeleted}):r().createElement(r().Fragment,null,r().createElement(J.ProductImage,{src:f,hash:h,isProductInvalid:Rc.includes(d)}),r().createElement("div",{className:Ki.content},r().createElement("div",{className:Ki.productName,title:g},g),r().createElement("div",{className:Cc()(Ki.productDetail,E?Mc.origin:"")},E&&r().createElement("div",{title:E,className:Mc.originalPrice},E),r().createElement("div",{className:Mc.price,title:m},m),r().createElement("div",{className:Ki.divider}),r().createElement("div",{className:x,title:b},b))))),r().createElement(ac,{type:"product",showSentLink:i}))}));Pc.displayName="ProductMessageSource";const Dc=Pc;function Nc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var jc=r().memo((function(e){var t=e.message,s=e.isSubAccount,a=e.isScChat,i=e.shopId,c=e.isSend,l=e.region,u=e.shopAccess,d=(u=void 0===u?{}:u).hasViewOrderAccess,p=void 0!==d&&d,A=u.hasViewProductAccess,g=void 0!==A&&A,f=e.visitShopSellerCenterRequested,h=t.isFaking,E=t.id,m=t.sourceContent,v=t.source_type,S=t.send_status,_=t.conversation_id,y="order"===v,C="product"===v;if((0,n.useEffect)((function(){var e,t=o({},"".concat(v,"_id"),null==m||null===(e=m.content)||void 0===e?void 0:e.id),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nc(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({message_id:E,conversation_id:_},t);y&&(0,T.$tracker)({operation:O.TrackerOperation.IMPRESSION,shopId:i,trackerName:"impressionOrderFromSourceInSpecialMessage",data:n}),C&&(0,T.$tracker)({operation:O.TrackerOperation.IMPRESSION,shopId:i,trackerName:"impressionProductFromSourceInSpecialMessage",data:n})}),[]),!m)return null;var b=!h&&[O.MessageSendStatus.SUCCEED,null].includes(S)&&c;return C?r().createElement(Dc,{content:m.content,showSentLink:b,isSubAccount:s,isScChat:a,messageId:E,hasAccess:g,conversationId:_,visitShopSellerCenterRequested:f}):y?r().createElement(_c,{content:m.content,isSendByMe:c,isSubAccount:s,shopId:i,isScChat:a,region:l,messageId:E,showSentLink:b,conversationId:_,hasAccess:p,visitShopSellerCenterRequested:f}):void 0}));jc.displayName="MessageSource";var Fc={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested};const qc=(0,h.connect)((function(e){return{shopAccess:(0,T.shopAccessSelector)(e)}}),Fc)(jc);var Lc,Gc;function Uc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uc(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wc=O.MessageTypes.MSG_TYPE_ORDER,zc=O.MessageTypes.MSG_TYPE_PRODUCT,Zc=O.MessageTypes.MSG_TYPE_OFFER,Hc=O.MessageTypes.MSG_TYPE_VOUCHER,Vc=O.MessageTypes.MSG_TYPE_VIDEO,Qc=O.MessageTypes.MSG_TYPE_TEXT,Xc=O.MessageTypes.MSG_TYPE_BUNDLE_DEAL,Jc=O.MessageTypes.MSG_TYPE_FLASH_SALE,Kc=O.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,$c=O.MessageTypes.MSG_TYPE_ITEM_LIST,el=O.MessageTypes.MSG_TYPE_SHOPPING_CART,tl=O.MessageTypes.MSG_TYPE_RATE_CARD,nl=(o(Lc={},Zc,"impressionOfferMessage"),o(Lc,Wc,"impressionOrderMessage"),o(Lc,zc,"impressionProductMessage"),o(Lc,Hc,"impressionVoucherMessage"),o(Lc,Vc,"impressionVideoMessage"),o(Gc={},Xc,"impressionBundleDealCard"),o(Gc,Jc,"impressionFlashSaleCard"),o(Gc,Hc,"impressionVoucherCard"),o(Gc,$c,"impressionProductListCard"),o(Gc,zc,"impressionProductMessage"),o(Gc,Kc,"impressionRateCard"),o(Gc,el,"impressionCartCard"),o(Gc,Vc,"impressionVideoMessage"),o(Gc,Wc,"impressionOrderMessage"),Gc),rl=function(e){var t=e.message,n=e.conversationShopId,r=e.isSend,s=e.extraParams,a=void 0===s?{}:s,o=t.id,i=t.type,c=t.content,l=t.source,u=t.to_id,d=t.from_id,p=t.request_id,A=t.crm_activity_id,g=t.textContent,f=void 0===g?{}:g,h=t.conversation_id,E={crm_activity_id:A||"",from_source:A?"CRM":""},m=c["".concat(i,"_id")];switch(i){case Qc:E={message_type:O.ApiMessageTypes[Qc],is_sender:r};break;case Xc:E.bundle_deal_id=c.bundle_deal_id;break;case Jc:E.flash_sale_id=c.flash_sale_id;break;case Kc:E.order_id=c.order_id;break;case zc:E={product_id:m,product_shopid:n};break;case Wc:E={order_id:m,order_shopid:n};break;case Zc:E={offer_id:m,product_id:c.product_id,offer_shopid:n};break;case Hc:var v=f,S=v.status,_=void 0===S?"":S,y=v.claimed;E.voucher_id=c.voucher_id,r||(E=Yc(Yc({},E),{},{source:l,voucher_status:_===O.VoucherStatus.FINISHED?"expired":y?"claimed":"unclaimed",is_sender:r,promotion_id:c.voucher_id,promotion_shopid:n}));break;case Vc:E={message_id:o===p?0:o,is_sender:r,to_user_id:u,from_user_id:d,video_original_duration:c.duration_seconds};break;case tl:E={is_sender:r}}return{data:Yc(Yc({conversation_id:h,message_id:o},a),E),shopId:n}};function sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var al=O.MessageTypes.MSG_TYPE_WEBVIEW,ol=O.MessageTypes.MSG_TYPE_NOTIFICATION,il=O.MessageTypes.MSG_TYPE_OFFER,cl=O.MessageTypes.MSG_TYPE_VIDEO,ll=O.MessageTypes.MSG_TYPE_TEXT,ul=O.MessageTypes.MSG_TYPE_NEW_FAQ,dl=O.MessageTypes.MSG_TYPE_FAQ_QUESTION_LIST,pl=O.MessageTypes.MSG_TYPE_FAQ_CATEGORY_LIST,Al=["index","timeFlag","lastMessageFlag","messageFillStatus","messageSourceFillStatus","newMessageFlag"],gl=[ul,dl,pl];const fl=function(e){var t=function(t){p(s,t);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var s=f(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return g(this,n)}}(s);function s(e,t){var r;i(this,s),r=n.call(this,e,t);var a=e.index,c=e.message,l=e.newMessageFlag,d=e.exposedMessageIds,p=void 0===d?[]:d,A=e.addExposedMessageId,g=e.locale,f=e.currentFaqSessionInfo,h=f.faqSessionId,E=f.sessionExpiryTime,m=e.conversationShopId,v=c.id,S=c.type,_=c.content,y=c.faq_session_id;(0===a||S===il||l)&&(r.needRemeasure=!0),r.handleReload=r.handleReload.bind(u(r)),r.handleResendMessage=r.handleResendMessage.bind(u(r)),r.handleCancelMessage=r.handleCancelMessage.bind(u(r)),r.handleMessageIsSend=r.handleMessageIsSend.bind(u(r)),r.timer=null,r.messageNode=null,r.shouldExpose=!0,r.clearTimer=r.clearTimer.bind(u(r)),r.handleMouseEnter=r.handleMouseEnter.bind(u(r)),r.handleMouseLeave=r.handleMouseLeave.bind(u(r)),r.state={isHover:!1};var C=gl.includes(S);if(r.needExpose="function"==typeof IntersectionObserver&&(nl[S]&&!p.includes(v)||C),r.needExpose){var b={root:document.querySelector("#messagesContainer"),threshold:.5};r.observer=new IntersectionObserver((function(e){var t=e[0];if(t&&t.isIntersecting&&t.intersectionRatio>=.5){if(r.timer||!r.shouldExpose||C||(r.shouldExpose=!1,r.timer=setTimeout((function(){(0,T.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sl(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({operation:O.TrackerOperation.IMPRESSION,trackerName:nl[S]},rl({message:c,conversationShopId:m,isSend:r.handleMessageIsSend(c)}))),r.clearTimer(),A&&A(v)}),1e3)),C&&r.shouldExpose){r.shouldExpose=!1;var n=_.intents,s=void 0===n?[]:n,a=_.categories,i=void 0===a?[]:a,l=_.other_faq_types,u=void 0===l?[]:l,d=_.questions,p=void 0===d?[]:d;(s.length||i.length||u.length||p.length)&&qr(h,y,E)&&(0,T.collectChatbotReportTask)((0,O.handleReportItems)(_,S===ul,g))}}else t&&t.intersectionRatio<=0&&(r.shouldExpose=!0)}),b)}return r}return l(s,[{key:"componentDidMount",value:function(){var e=this.props,t=e.message,n=e.hasSourceMessageMap;void 0===n[t.id]&&(n[t.id]=t.hasMessageSource),this.needExpose&&this.observer.observe(this.messageNode),this.measureMessage()}},{key:"componentWillUnmount",value:function(){this.clearTimer(),this.needExpose&&this.observer.unobserve(this.messageNode)}},{key:"componentDidUpdate",value:function(e){var t=this,n=e.hasSourceMessageMap,r=e.message,s=e.showWarningMessageIds,a=this.props,o=a.message,i=a.showWarningMessageIds,c=!1;if(r.type===il)c=(r.textContent&&r.textContent.status)!==(o.textContent&&o.textContent.status);else{var l=["hasMessageSource","newMessageFlag","errorCode","status","send_status"];o.type!==al&&l.push("content"),(c=l.some((function(e){return r[e]!==o[e]})))||(c=Al.some((function(n){return t.props[n]!==e[n]})))}n[o.id]!==o.hasMessageSource&&(c=!0,n[o.id]=o.hasMessageSource),r.type===ll&&s.indexOf(r.id)!==i.indexOf(o.id)&&(c=!0),!(0,O.isDeletedMessage)(r)&&(0,O.isDeletedMessage)(o)&&(c=!0),c&&(this.needRemeasure=c),this.measureMessage()}},{key:"clearTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"handleReload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.message,r=t.fillMessageRequested;r({message:n,isSource:e})}},{key:"measureMessage",value:function(){this.needRemeasure&&(this.props.measure(),this.needRemeasure=!1)}},{key:"handleResendMessage",value:function(){var e=this.props,t=e.message,n=e.resendMessageRequested,r=e.conversationId,s=e.conversationShopId,a=t.id;t.type===cl&&(0,T.$tracker)({shopId:s,trackerName:"clickResendVideo",data:{message_id:a,conversation_id:r}}),n({conversationId:r,message:t})}},{key:"handleCancelMessage",value:function(){var e=this.props,t=e.message,n=e.cancelSendingMessageRequested,r=e.conversationId,s=e.conversationShopId,a=t.id;(0,T.$tracker)({shopId:s,trackerName:"clickCancelVideo",data:{message_id:a,conversation_id:r}}),n({id:a,conversationId:r})}},{key:"handleMessageIsSend",value:function(e){var t=this.props.conversationBuyerId;return e.to_id===t}},{key:"getMessageClass",value:function(e){var t=e.isSend,n=e.isSystem,r=e.isChatbot,s=e.isSecurityTips;return n?ce.message:r||s?"":t?ce.messageSend:ce.messageReceive}},{key:"renderMessage",value:function(t){var n=this,s=this.props,a=s.message,o=s.measure,i=s.timeFlag,c=s.isScChat,l=s.isSubAccount,u=s.newMessageFlag,d=s.isLastSystemMessage,p=s.showWarningMessageIds,A=s.shop,g=s.conversationId,f=s.conversationShopId,h=s.conversationBuyerId,E=s.conversationStatus,m=s.isInFaqHistoryModal,v=void 0!==m&&m,S=s.messageFillStatus,_=s.messageSourceFillStatus,y=a.type,C=a.hasMessageSource,b=a.send_status,x=a.content,M=void 0===x?{}:x,I=a.from_shop_id,w=a.request_id,T=a.sourceContent,B=y===O.MessageTypes.MSG_TYPE_TEXT&&!t&&-1!==p.indexOf(a.id),k=y===O.MessageTypes.FAQ_TYPE_BOT_RESPONSE_MESSAGE,R=y===ol||(0,O.getMessageIsRatecard)(y,M)&&(t||l),P=y===O.MessageTypes.MSG_TYPE_SECURITY_TIPS,D=this.getMessageClass({isSend:t,isSystem:R,isChatbot:k,isSecurityTips:P}),N=k?"":ce.bubble,j=!(C||i||d||R)||i&&R?"4px":"8px",F=(A&&A.country?A.country:"SG").toLowerCase(),q="closed"===E,L=(0,O.isDeletedMessage)(a);return r().createElement(r().Fragment,null,u&&r().createElement(xi,null),i&&r().createElement("div",{className:ce.messageTime},i),C&&r().createElement("div",{style:{marginTop:i?"1.5em":"0.75em"}},_?r().createElement(J.Processor,{status:_,messageType:"source",content:T,reloadRequest:function(){return n.handleReload(!0)}}):r().createElement(qc,{message:a,isSubAccount:l,isScChat:c,shopId:f,isSend:t,region:F})),r().createElement("div",{style:{marginTop:j},className:D},t&&r().createElement(Di,{isClosed:q,message:a,resendMessage:this.handleResendMessage}),t&&!R&&r().createElement(Zi,{type:y,status:b,requestId:w,handleCancelMessage:this.handleCancelMessage}),L?r().createElement(J.DeletedMessage,{isSend:t}):r().createElement(si,{isSend:t,message:a,isInFaqHistoryModal:v,isClosed:q,isHoverBaseMsg:this.state.isHover},r().createElement("div",{className:N},S?r().createElement(J.Processor,{status:S,messageType:y===al?M.type:y,content:M,reloadRequest:function(){return n.handleReload()},isScChat:c}):r().createElement(e,{message:a,isScChat:c,isSend:t,measure:o,isSubAccount:l,shop:A,region:F,conversationId:g,conversationShopId:f,conversationBuyerId:h,conversationStatus:E,isInFaqHistoryModal:v,handleMessageIsSend:this.handleMessageIsSend})))),r().createElement(Si,{message:a,buyerId:h,shop:A}),B&&r().createElement(J.TextWarning,{shopId:I,region:F}))}},{key:"handleMouseEnter",value:function(){this.setState({isHover:!0})}},{key:"handleMouseLeave",value:function(){this.setState({isHover:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,s=t.message,a=t.isLastMessage,o=t.className,i=this.renderMessage(this.handleMessageIsSend(s)),c="".concat(ce.root," ").concat(a?ce.lastMessage:""," ").concat(o);return r().createElement("div",{style:n,className:c,ref:function(t){return e.messageNode=t},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},i)}}]),s}(r().PureComponent);return t.defaultProps={showWarningMessageIds:[]},t},hl=fl((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e)}}),null)((function(e){var t=e.isSend,n=e.message,s=e.locale,a=n.type,o=n.content,i=n.textContent;return r().createElement(J.SystemMessage,{type:a,locale:s,isSend:t,content:o,textContent:i||{}})})));var El={handleSensitiveUrl:wa,changeTranslateStatus:pa,translateMessagesRequested:da,scrollToMessage:In,showTranslateFeedback:Aa};const ml=fl((0,h.connect)((function(e){return{shopTranslationSettings:(0,T.shopTranslationSettingsSelector)(e),currentConversationTranslationAccess:(0,T.currentConversationTranslationAccessSelector)(e),locale:(0,T.localeSelector)(e)}}),El)((function(e){var t=e.isScChat,n=e.isSend,s=e.shopTranslationSettings,a=e.measure,o=e.handleSensitiveUrl,i=e.changeTranslateStatus,c=e.translateMessagesRequested,l=e.message,u=e.conversationShopId,d=e.currentConversationTranslationAccess,p=e.scrollToMessage,A=e.conversationId,g=e.conversationBuyerId,f=e.showTranslateFeedback,h=e.handleMessageIsSend,E=e.locale,m=l.send_status,v=l.message_option,S=l.content,_=l.id,y=l.country,C=l.translateStatus,b=l.toggleTranslateStatus,x=l.type,M=l.quoted_msg,I=l.source,w=(S||{}).translation,T=(w=void 0===w?{}:w).text,B=s[u]||{},k=B.translationPreference,R=B.autoTranslationStatus,P=B.source,D=B.inTranslationFeedbackWhitelist,N=R===O.SwitchStatus.ENABLED,j=(0,O.handleDisplayTranslation)(N,n,T,t,d);return r().createElement(J.TextMessage,{buyerId:g,shopId:u,sendStatus:m,messageOption:v,enableTranslation:j,translationPreference:k,translationSource:P,id:_,measure:a,translateStatus:C,toggleTranslateStatus:b,handleSensitiveUrl:o,changeTranslateStatus:i,translateMessagesRequested:c,content:S,isScChat:t,enableAutoTranslation:N,isSend:n,country:y,type:x,replyToMessage:M,scrollToMessage:p,conversationId:A,messageSource:I,showTranslateFeedback:f,inTranslationFeedbackWhitelist:D,handleMessageIsSend:h,locale:E})})));function vl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vl(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _l={showMediaPreviewModalRequested:T.showMediaPreviewModalRequested,scrollToMessage:In};const yl=fl((0,h.connect)((function(){return{}}),_l)((function(e){var t=e.isSend,s=e.measure,a=e.showMediaPreviewModalRequested,o=e.message,i=e.scrollToMessage,c=e.handleMessageIsSend,l=e.conversationShopId,u=o.id,d=o.request_id,p=o.content,A=o.quoted_msg,g=o.conversation_id,f=(0,n.useContext)(X),h={data:{conversation_id:g,message_id:u===d?0:u},shopId:l};(0,n.useEffect)((function(){p.unknown_qr_code&&!t&&(0,T.$tracker)(Sl({operation:O.TrackerOperation.IMPRESSION,trackerName:"impressionImageMessage"},h))}),[]);var E=function(){return a({messageId:u})};return r().createElement(J.ImageMessage,{isSend:t,imgCache:f,id:u,request_id:d,content:p,measure:s,replyToMessage:A,scrollToMessage:i,handleMessageIsSend:c,openPreviewModal:E,handleOpenQrCode:function(){E(),(0,T.$tracker)(Sl({trackerName:"clickPreviewQrcode"},h))}})})));var Cl=Y(8550),bl=Y.n(Cl),xl=Y(5945),Ml=function(e,t){var n=e.id,r=e.status,s=e.shop_id,a=e.region;(0,O.checkProductDeleted)(n,r)||(window.open("https://".concat((0,O.getMallUrl)(a),"/product/").concat(s,"/").concat(n,"/")),t&&t(e))};const Il=fl((0,h.connect)((function(e){return{isCB:(0,T.isCBSellerSelector)(e)}}),null)((function(e){var t=e.isSend,n=e.region,s=e.message,a=e.measure,o=e.conversationShopId,i=e.conversationStatus,c=e.isCB,l=s.id,u=s.content,d=s.textContent,p=void 0===d?{}:d,A=s.conversation_id,g=u.tax_value;return r().createElement(J.OfferMessage,{id:l,isSend:t,country:n,measure:a,onReply:function(e){(0,T.$tracker)({trackerName:e.isAccept?"clickAcceptOffer":"clickRejectOffer",data:{itemid:p.id,conversation_id:A,message_id:l},shopId:o}),function(e){bl().put(xl.default.replyOfferRequested({payload:e}))}(e)},priceBeforeTax:u.price_before_tax,taxValue:g,textContent:p,handleClickItem:Ml,conversationClosed:"closed"===i,isCB:c})})));function wl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ol={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested};const Tl=fl((0,h.connect)((function(e){return{shopAccess:(0,T.shopAccessSelector)(e)}}),Ol)((function(e){var t=e.isScChat,n=e.isSubAccount,s=e.visitShopSellerCenterRequested,a=e.isSend,i=e.message,c=e.shopAccess,l=void 0===c?{}:c,u=e.conversationShopId,d=l.hasViewProductAccess,p=i.textContent,A=p||{},g=A.id,f=A.status,h=A.shop_id,E=A.region,m=(0,O.checkProductDeleted)(g,f),v=h===u,S=t||!v||!n||d;return r().createElement(J.ProductMessage,{item:p,isSend:a,deleted:m,hasAccess:S,handleClickMessage:function(){S&&!m&&((0,T.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wl(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trackerName:"impressionProductMessage"},rl({message:i,isSend:a,conversationShopId:u,extraParams:{itemid:g}}))),v?n?(0,O.redirectionWithAccess)({access:!0,isSubAccount:!0,action:function(){return s({shopId:h,itemId:g})}}):t?window.open("https://".concat((0,O.getSellerCenterUrl)((0,O.isVisitingCNSC)()?"cn":E),"/portal/product/").concat(g)):window.open("https://".concat((0,O.getMallUrl)(E),"/product/").concat(h,"/").concat(g,"/")):window.open("https://".concat((0,O.getMallUrl)(E),"/product/").concat(h,"/").concat(g,"/")))}})})));var Bl=Y(5965),kl={};kl.styleTagTransform=Z(),kl.setAttributes=L(),kl.insert=F().bind(null,"head"),kl.domAPI=N(),kl.insertStyleElement=U(),P()(Bl.Z,kl);const Rl=Bl.Z&&Bl.Z.locals?Bl.Z.locals:void 0;var Pl=Y(4323).t;function Dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dl(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jl={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested,copySucceedFeedback:T.copySucceedFeedback};const Fl=fl((0,h.connect)((function(e){return{shopAccess:(0,T.shopAccessSelector)(e)}}),jl)((function(e){var t=e.isSubAccount,n=e.isSend,s=e.visitShopSellerCenterRequested,a=e.message,i=e.shopAccess,c=void 0===i?{}:i,l=e.conversationShopId,u=e.region,d=e.copySucceedFeedback,p=e.isScChat,A=a.content,g=a.textContent,f=(a.type,A||{}),h=f.shop_id,E=f.order_id,m=f.bot_order_info,v=(m=void 0===m?{}:m).shop_id,S=m.order_id,_=c.hasViewOrderAccess,y=void 0!==_&&_,C=h||v,b=E||S,x=C===l;return!x&&t?r().createElement("div",{className:Cc()(Rl.order,o({},Rl.send,n))},r().createElement("span",{className:Rl.link,onClick:function(){window.open((0,O.getMallOrderUrl)({id:E},C,u))}},Pl("conversation_detail.message_list.order_not_in_your_shop"))):r().createElement(J.OrderMessage,{region:u,hasViewOrderAccess:y,isSend:n,isScChat:p,textContent:g,handleClickMessage:function(){if(!x)return window.open((0,O.getMallOrderUrl)(g,C,u)),null;(0,T.$tracker)(Nl({trackerName:"clickOrderMessage"},rl({message:a,isSend:n,conversationShopId:l}))),(0,O.redirectionWithAccess)({access:y,isSubAccount:t,action:function(){return s({shopId:C,orderId:b})},url:"https://".concat((0,O.getSellerCenterUrl)(u),"/portal/sale/").concat(b)})},copySucceedFeedback:function(){d(),(0,T.$tracker)(Nl({trackerName:"clickCopyOrderSN"},rl({message:a,isSend:n,conversationShopId:l})))}})})));var ql={scrollToMessage:In};const Ll=fl((0,h.connect)((function(){return{}}),ql)((function(e){var t=e.region,s=e.message,a=e.isSend,o=e.scrollToMessage,i=e.conversationBuyerId,c=e.handleMessageIsSend,l=s.send_status,u=s.request_id,d=s.id,p=s.content,A=s.quoted_msg,g=a&&l===O.MessageSendStatus.SENDING,f=(0,n.useContext)(X);return r().createElement(J.StickerMessage,{imgCache:f,isSending:g,id:d,content:p,country:t,request_id:u,isSend:a,replyToMessage:A,scrollToMessage:o,conversationBuyerId:i,handleMessageIsSend:c})})));function Gl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ul(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gl(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yl={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested};const Wl=fl((0,h.connect)((function(e){return{isSubAccount:(0,T.isSubAccountSelector)(e),shopAccess:(0,T.shopAccessSelector)(e),shop:(0,T.currentConversationShopSelectors)(e)}}),Yl)((function(e){var t=e.isSend,s=e.visitShopSellerCenterRequested,a=e.isSubAccount,o=e.message,i=e.shopAccess,c=e.shop.country,l=void 0===c?"":c,u=e.conversationShopId,d=rl({message:o,isSend:t,conversationShopId:u});(0,n.useEffect)((function(){!t&&(0,T.$tracker)(Ul({operation:O.TrackerOperation.IMPRESSION,trackerName:"impressionVoucherForReceiverInMinichat"},d))}),[]);var p=i.hasViewVoucherAccess,A=o.content,g=o.textContent,f=void 0===g?{}:g,h=o.id,E=f.country,m=f.id,v=f.url,S=A.shop_id,_=(A.source,function(){var e;v&&(S=(0,O.getUrlParam)("shop_id",v),(0,O.getUrlParam)("source",v)),e={messageId:h},bl().put(xl.default.claimVoucherRequested({payload:e})),(0,T.$tracker)(Ul({trackerName:"clickClaimVoucher"},d))});return r().createElement(J.VoucherMessage,{voucher:f,isSend:t,shopRegion:l,isSubAccount:a,hasViewVoucherAccess:p,onOperatorClick:function(e){switch(e){case O.VoucherOperateType.DETAILS:!function(){v&&(S=(0,O.getUrlParam)("shop_id",v));var e="https://".concat((0,O.getSellerCenterUrl)(E),"/portal/marketing/vouchers/").concat(m);a?s({url:e,shopId:S}):window.open(e)}();break;case O.VoucherOperateType.CLAIM:_();break;case O.VoucherOperateType.USE:v&&(S=(0,O.getUrlParam)("shop_id",v)),window.open("https://".concat((0,O.getMallUrl)(E),"/shop/").concat(S))}}})})));function zl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Zl=fl((function(e){var t=e.isSend,n=e.message,s=e.region,a=e.conversationShopId,i=n.type,c=n.content,l=function(e){var r=e.id;(0,T.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zl(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trackerName:"clickProductListMessage"},rl({message:n,isSend:t,conversationShopId:a,extraParams:{itemid:r}})))};return r().createElement(J.ProductsMessage,{region:s,type:i,isSend:t,content:c,handleClickItem:function(e){Ml(e,l)}})})),Hl=fl((0,h.connect)((function(e){return{currentUser:(0,T.currentUserSelector)(e)}}),{})((function(e){var t=e.measure,s=e.isSend,a=e.conversation,o=e.message,i=o.id,c=o.conversation_id,l=o.request_id,u=o.textContent,d=(0,n.useContext)(X);return r().createElement(J.FeedStoryMessage,{imgCache:d,id:i,requestId:l,measure:t,isSend:s,textContent:u,handleTrackStory:function(){(0,T.$tracker)({shopId:a.shop_id,trackerName:"clickHandleStoryMessage",data:{story_id:u.id,message_id:i,conversation_id:c}})}})})));function Vl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ql(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vl(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Xl=fl((function(e){var t=e.measure,n=e.isSend,s=e.message,a=e.region,o=e.conversationShopId,i=s.content,c=i.cart_items,l=void 0===c?[]:c,u=i.shop_id,d=s.textContent,p=void 0===d?[]:d,A=function(e){var t=e.id;(0,T.$tracker)(Ql({trackerName:"clickCartProduct"},rl({message:s,isSend:n,conversationShopId:o,extraParams:{itemid:t}})))};return r().createElement(J.CartReminderMessage,{isSend:n,measure:t,products:p,cartItemsCount:l.length,handleClickItem:function(e){Ml(e,A)},handleClickMessage:function(){var e=function(e,t){var n=e.map((function(e){var n=e.model_id,r=e.item_id,s=e.group_id,a={shopId:t,itemId:r};return n&&(a.modelId=n),s&&"0"!==s&&(a.itemGroupId=s),a}));return(0,O.encode)(JSON.stringify(n))}(l,u);window.open("https://".concat((0,O.getMallUrl)(a),"/cart?referrerItems=").concat(e,"&source=seller_chat")),(0,T.$tracker)(Ql({trackerName:"clickCartButton"},rl({message:s,isSend:n,conversationShopId:o})))}})}));Y(4323).t;var Jl=function(e,t){return e>t},Kl=function(e){return e[e.length-1]},$l=function(e,t){return e?function(){}:t},eu=function(e,t){return e.length===t.length&&e.every((function(e,n){var r=t[n];return JSON.stringify(e)===JSON.stringify(r)}))},tu={sendMessagesRequested:Os};const nu=fl((0,h.connect)((function(){return{}}),tu)((function(e){var t=e.isSend,n=e.measure,s=e.sendMessagesRequested,a=e.message,o=e.conversationShopId,i=e.conversationBuyerId,c=e.conversationId,l=e.isInFaqHistoryModal,u=a.content,d=a.faq_session_id,p=$l(l,s);return r().createElement(J.FaqMessage,{isSend:t,measure:n,sendMessagesRequested:p,content:u,conversationId:c,shopId:o,conversationUserId:i,faqSessionId:d})})));var ru=Y(8674),su={};su.styleTagTransform=Z(),su.setAttributes=L(),su.insert=F().bind(null,"head"),su.domAPI=N(),su.insertStyleElement=U(),P()(ru.Z,su);const au=ru.Z&&ru.Z.locals?ru.Z.locals:void 0;var ou=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var s=f(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return g(this,n)}}(n);function n(){return i(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.conversationId,n=e.conversationShopId,s=e.conversationBuyerId,a=e.sendMessagesRequested,o=e.isSend,i=e.isInFaqHistoryModal,c=e.message,l=void 0===c?{}:c,u=l.type,d=$l(i,a),p=u===O.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED;return r().createElement("div",null,r().createElement("div",{className:Cc()(au.message,o?au.send:"",p?au.unsupportFaq:"")},(0,O.getCustomMessageText)(l.type)),p&&r().createElement(J.FaqButton,{isSend:o,conversationId:t,shopId:n,conversationUserId:s,sendMessagesRequested:d}))}}]),n}(r().PureComponent),iu={sendMessagesRequested:Os};const cu=fl((0,h.connect)(null,iu)(ou));var lu={sendMessagesRequested:Os};const uu=fl((0,h.connect)((function(){return{}}),lu)((function(e){var t=e.sendMessagesRequested,n=e.isSend,s=e.message,a=e.conversationShopId,o=e.conversationBuyerId,i=e.conversationId,c=e.isInFaqHistoryModal,l=s.id,u=s.content,d=s.faq_session_id,p=$l(c,t);return r().createElement(J.FaqFeedbackPromptMessage,{id:l,content:u,sendMessagesRequested:p,conversationId:i,conversationUserId:o,isSend:n,shopId:a,faqSessionId:d})})));var du={sendMessagesRequested:Os};const pu=fl((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e)}}),du)((function(e){var t=e.sendMessagesRequested,n=e.isSend,s=e.conversationShopId,a=e.conversationBuyerId,o=e.conversationId,i=e.isInFaqHistoryModal,c=e.message,l=e.locale,u=c.content,d=c.faq_session_id,p=$l(i,t);return r().createElement(J.FaqLiveAgentPromptMessage,{sendMessagesRequested:p,isSend:n,conversationId:o,shopId:s,conversationUserId:a,content:u,locale:l,faqSessionId:d})})));function Au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const gu=fl((function(e){var t=e.region,n=e.measure,s=e.isSend,a=void 0!==s&&s,i=e.message,c=e.conversationShopId,l=i.content,u=function(e){var t=e.id;(0,T.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Au(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trackerName:"clickBundleDealDetail"},rl({message:i,isSend:a,conversationShopId:c,extraParams:{itemid:t}})))};return r().createElement(J.BundleDealMessage,{region:t,measure:n,isSend:a,content:l,handleClickItem:function(e){Ml(e,u)}})})),fu=fl((function(e){var t=e.measure,n=e.isSend,s=void 0!==n&&n,a=e.message.content;return r().createElement(J.FlashSaleMessage,{measure:t,isSend:s,content:a,handleClickItem:Ml})}));function hu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hu(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mu={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested};const vu=fl((0,h.connect)((function(e){return{shopAccess:(0,T.shopAccessSelector)(e)}}),mu)((function(e){var t=e.isSend,n=e.isSubAccount,s=e.visitShopSellerCenterRequested,a=e.message,o=e.shopAccess,i=void 0===o?{}:o,c=e.region,l=e.conversationShopId,u=i.hasViewOrderAccess,d=a.content,p=d.order_id,A=d.shop_id,g=a.textContent,f=rl({message:a,isSend:t,conversationShopId:l});return r().createElement(J.RateReminderMessage,{isSend:t,textContent:g,hasViewOrderAccess:u,handleClickMessage:function(){t?(0,O.redirectionWithAccess)({access:u,isSubAccount:n,action:function(){return s({shopId:A,orderId:p})},url:"https://".concat((0,O.getSellerCenterUrl)((0,O.isVisitingCNSC)()?"cn":c),"/portal/sale/").concat(p)}):window.open("https://".concat((0,O.getMallUrl)(c),"/user/purchase/order/").concat(p,"/?shopid=").concat(A))},trackRateButton:function(){(0,T.$tracker)(Eu({trackerName:"clickRateButton"},f))},trackRateProduct:function(){(0,T.$tracker)(Eu({trackerName:"clickRateProduct"},f))}})})));var Su=Y(9424),_u=Y.n(Su),yu=Y(2236),Cu=Y.n(yu),bu=Y(1644),xu={};xu.styleTagTransform=Z(),xu.setAttributes=L(),xu.insert=F().bind(null,"head"),xu.domAPI=N(),xu.insertStyleElement=U(),P()(bu.Z,xu);const Mu=bu.Z&&bu.Z.locals?bu.Z.locals:void 0,Iu=function(e){var t=e.title,n=e.closeModal,s=e.noCancel,a="".concat(Mu.root," ").concat(s?"":Mu.hasCancel);return r().createElement("div",{className:a},r().createElement("div",{className:Mu.title},t),!s&&r().createElement(S(),{svg:Cu(),className:Mu.cancel,onClick:n}))};var wu=Y(5792),Ou={};Ou.styleTagTransform=Z(),Ou.setAttributes=L(),Ou.insert=F().bind(null,"head"),Ou.domAPI=N(),Ou.insertStyleElement=U(),P()(wu.Z,Ou);const Tu=wu.Z&&wu.Z.locals?wu.Z.locals:void 0;var Bu=function(e){var t,s=e.label,a=e.title,o=e.children,i=e.closeable,c=e.onClick,l=e.className,u=e.getModalVisible,d=e.onClose,p=(0,n.useState)(!1),A=(0,dn.Z)(p,2),g=A[0],f=A[1],h=function(){var e=g;f(!e),"function"==typeof u&&u(!e),"function"==typeof d&&e&&d()};return t="#".concat(window.miniChatContainerId),r().createElement("div",{className:Tu.root},r().createElement("div",{onClick:function(e){return function(e){var t=function(){e.stopPropagation(),h()};"function"==typeof c?c(t):t()}(e)}},s),r().createElement(_u(),{isOpen:g,className:Tu.content,overlayClassName:Tu.overlay,shouldReturnFocusAfterClose:!1,onRequestClose:i?h:null,parentSelector:function(){return document.querySelector(t)}},r().createElement("div",{className:l},r().createElement(Iu,{title:a,closeModal:h}),o)))};Bu.defaultProps={closeable:!1};const ku=Bu;var Ru=Y(2760),Pu=Y.n(Ru),Du=Y(2147),Nu={};Nu.styleTagTransform=Z(),Nu.setAttributes=L(),Nu.insert=F().bind(null,"head"),Nu.domAPI=N(),Nu.insertStyleElement=U(),P()(Du.Z,Nu);const ju=Du.Z&&Du.Z.locals?Du.Z.locals:void 0,Fu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAMAAAAJixmgAAABIFBMVEUAAADr7vnt8Prt8Pnt8fvt8fvt8PvEpaPs8Prt8fvt8Pvo7Pbo7fjr7/nn7Pfs7/rv8f3h5fDg5PDi5/Hn6/To6/Te4+7s7/np7fni5vHo7Pjm6vfk6fbf4/De4/Dc4O3d4u3i5/TZ3uvP1OHZ3ura3urvWz7y9f7/gmrW2ufvWz7Y3enxXUDW2uj4bVLyYET/g2vvWz7xXkL+eF70ZUn2Zkr+d13w8/zj5/Dm6vTj5vH3a0//gGf5blP4bVHN09/L0N3y9f7S1+Po7PbX2+fl6fPw8vvP1OHr7vfd4eza3+rs7/ng5e/u8Pre4u3U2eXv8/zj5/Hi5vH////Y3enl5/LwWz7yYUX09fn2Z0z/f2f5bVL8c1n4+fv/eV/u8Pak0IEiAAAAP3RSTlMABwwZEhYkBSAQHAQzLzcrJ0JKPi4pRx86Oj5CRlRQWE1PXe3Lp+rn6djDsJNrD6aLg/PHWSXwh4Ht37uejXhSf/O8AAAHjUlEQVR42uzWS2oDMRBF0TfTMkImctMI9z8T24FsokXbJvtfRqwWxJ+JZzao7tnBpSiqBAAAAAAAAAAAAAAAAABPuLaqWic72uNFKzuqFFzJjOk3+ZIZ4zkZZMbhlBxkxm5JRpnRx7jEOMmKKSa9zBjnpNat7b7gVySswd1d73C82KtM9Ro83vUWfZn7NXjSPzecV6UG+9Trb3p3p+xbZQoPK9wsWVChXOd95669MWtkQ5gzK73dnNWlHuFH3liv+ty7lRXhfb0fm58X2nxq5YL3zXvm+8eeHewmCwQBHB9YNEqXGq1iuPkqXwhkjUiKpIkX0vd/i8+NG6sG1llbBlb9zUUOHv4ZwmXIelUxdO0fMaCgD/6knD4Ea702/Nrwa8P933BKONTB7ohPw1U45SP3GV7pQbT6ETGQPokBHTeaXYrkllNiQIaFs2she+BgP6yzfNhgFtZjqZ6twe60SZpu6YYumGuCtSzd8OCj0ZYYtMzxGBu4/FmCWRDdstWzKtgN3m/b6tkUPOAYG2LQmnGAstGzJ9iZzFE2evYE+xOcjZ41wc4CSRCDlnhDJCHEhm7aC2YjJKFnzYb9JZLQsycYS+hZE8ywhJ41wd4AKSYGLXE9pFjPmmBnjBTrWRMMLlKsZ0+w82zB4ODECenE0B5ksJ5FGwZ4cxASYtCqt9uSJCYd6FqiZ9mGexwsL9Wz1Uxdqps9SPD1pbrZQwTXXarJJElxx5wY/7HxUk3l6y5pVUqp+DLVfKkmUtzhuzyp4sJM46Xah1p9CE7Lc9+FEXfaxAUSO2Oy96J4VyO7tlN4YzCHOt0HJ+W1RBd7Hf3RjEGN7oP3p70m6meKqVV0wWrFLpMnbWhLZqg4RsaZVJVSlRmINMYAbz4//uZq350Hi1LaHx/U59o0+L3BCDz+8xSM4aDz4H0pCVV/HpyjcI25zy8MAKAnwcn5hiuVmyEmDwJ+GCQPoPPgC9Xp/Za5KHMpOAyKA38u/wX1lRa5gcn8MGjLNoKze0f1VrmJhRmnPxsuqvKoWJsYDhenQfD6E6x6q93ayOjM8Paw3gSr93mfr+8KVpa3+PDX/nNXvz9pA3Ecx48KgkxnFIZTBB1gFkP2eG5Prr1eKXeUNjCW7Nn+//9idz1+iPZKvx3Iyes0NkJi3n5aZflMVe+QQVVXrqqbGROs/gP/FVccdNgRkCnB6o6OeyHAwSWjgv9wuBKMtYNgnuPkDy7CFMxYmM+/5HACYqGt42/MAimYEuz+inE4aK9ZwTO4AoDsfT/BfOqOBo4wcqcsXzASzAqmWsHQeW404VQpxz5kgHZjlsuG4GDgvPJ7HqwBrM2P5pIazEdOkjGjAgIyJDhN6OhMqQgua46G+cFTZ27ghVzuHXpjZ847wIUDRxkyusLdZTEqwzY2PTicr8uidYvneoKADAmONIeqLJdGr3hOrAmc2JBgHbWjFyVRD/fXEwRiRHCkE6p9SbLfjvR9zxNTGsGPztgRxhEhUeIZxi8fIRiDF1YDc5GWjA4MmDjKgWi46obWm8RPMajLhGDdHUsH0ozoRQMJ9IfaiGDNxEzWDEkabyB8R/tEtmciawKShg2E3l4XJiQCHw1vLHBCfP2hY+ErAjF34eFIoCTVSLIAExsfTFIXVu+pouxMCNbGSMRP5Q6FyoEs7GYNPpSFvQzBQ8lCe5yYEB96dKauQP00xBV+IBADFtZgrsD8NDNX6KHyYSxMPWGC0wSe8IRAzF2YeFKE9dQ7rtE+J/a3B4eeEGI95gk/EYTRwZGaeMPAT6j8zhbGWuFECPzUl38UEYTZwdFUYjgZn0pP6N0tnFLMAonjJDSQflpov/AW2RiHgcTk9frBsyDWL8MWNjpYIGGMkZffZ+HcAyzJ8GBbFCuc4PnMMpeGwqr4YBa2BcIWKJFPu08oZ2tAG5sRbCcfVexzlozPlsXZJzYjWMeOYSriXh+KMTVgY6wF33iZ7FP+EiXxr4IrD4eysPhQ/Gg917elVXE/a5cpwfZmmBAqEaJqlR5V+vtb2M5zcvv2uCiulCz05gpFnJOdU2dZ3PvW6bQbtbNP1WIBIejC8NKr8+tGq9PJuXD+4GfFnaVW4/r8SnTvQqF0fHrRvlvAbzyx+JGdx0jpde7WtS9Oj0tbzC5W6rX71rrcC0OLu3asJayK71oJ7mv1ShH9J6tar7W/JLB3qbv8XGpLd49E6bcTfJHatXrVyjvs8cfbSx0bAFqb5DLW7pFY9zLV7cdj6NQnldPmbRr7jTWU+54KFpe36ZqnlROUTeGoftPcxN6Jru7mti/mLuPiB3HV3OymflTYWFs9u8mia++UCl3pXiw0+t2u7L3J6Kya0vyhdP45o3/t3U0OgkAMhuFSRkUGhUQN7llzB+9/KoOTKCFE4/9k+j5dddl8m26a9t3ph7p+N3F8Qr3w8+G21TZRVZvNPc1KWqGTdDfJG6fs6mjsH6tf5STwZROTw33NG0of5l2acZk4LwzJRbSMUzvUyNB/gIrLTXGyMEacMaJrU1RETRERr4aEzSMzw0uQGSFX3gRBJFa3+vtlOL6MbAEAAAAAAAAAAAAAAID0nAFUiEuaAG9VMQAAAABJRU5ErkJggg==";var qu=Y(4323).t,Lu=function(e){var t=(0,n.useRef)(null),s=(0,n.useRef)(0),a=(0,O.throttle)((function(n){var r=e.loadMoreOffset,a=e.onLoadMore,o=e.onScroll,i=e.status,c=t.current,l=c.scrollHeight,u=c.scrollTop,d=c.clientHeight;if(i===O.DataFetchStatus.PENDING)return!1;l-u-d<=r&&s.current<u&&a&&a(),s.current=u,o&&o()}),200),o=e.listData,i=e.customRootClass,c=e.makeItem,l=e.status,u=e.emptyImage,d=e.emptyText,p=e.emptyClassName;return r().createElement("div",{className:Cc()(ju.root,i),onScroll:a,ref:t},l===O.DataFetchStatus.SUCCEED||l===O.DataFetchStatus.PENDING||l===O.DataFetchStatus.FAILED?o.length>0?o.map((function(e,t){return c(e,t)})):r().createElement(Pu(),{classname:p||ju.empty,image:u||Fu,text:d||qu("common.scroll_list.no_data")}):"")};Lu.defaultProps={loadMoreOffset:10,emptyImage:Fu};const Gu=m()(Lu),Uu=function(e){var t=e.measure,n=e.evaluationRequested,s=e.message,a=s.textContent,o=s.id;return r().createElement(J.EvaluationMessage,{measure:t,content:a,onSubmit:function(e){return n(e)},messageId:o})};var Yu={evaluationRequested:Ye};const Wu=fl((0,h.connect)((function(){return{}}),Yu)((function(e){return r().createElement(Uu,e)})));var zu=Y(699),Zu={};Zu.styleTagTransform=Z(),Zu.setAttributes=L(),Zu.insert=F().bind(null,"head"),Zu.domAPI=N(),Zu.insertStyleElement=U(),P()(zu.Z,Zu);const Hu=zu.Z&&zu.Z.locals?zu.Z.locals:void 0;var Vu=O.MessageTypes.MSG_TYPE_WEBVIEW,Qu=O.MessageTypes.MSG_TYPE_RATE_CARDS,Xu={},Ju=r().createContext({});const Ku=function(e){var t=e.isScChat,s=e.currentUser,a=e.isSubAccount,o=e.messageList,i=e.fillMessageRequested,c=e.messageHttpStatus,l=e.fetchFaqMessagesRequested,u=e.sourceId,d=e.shop,p=e.conversationId,A=e.conversationShopId,g=e.conversationBuyerId,f=e.conversationStatus,h=e.handleMessageIsSend,E=e.messagesFillStatusMap,m=e.currentFaqSessionInfo,v=function(){},S=(0,n.useRef)({});return r().createElement("div",{className:Hu.list},r().createElement(Ju.Provider,{value:S.current},r().createElement(Gu,{makeItem:function(e,n){if(e&&e.content){var o=e.id,c=e.type,u=e.content,S=void 0===u?{}:u,_=e.to_id,y=e.from_user_name,C=e.created_timestamp,b=_===g,x=(0,O.customizeTime)(1e3*C),M=jd(c);return e.type===Vu&&S.type===Qu&&_===s.id&&(M=Wu),r().createElement("div",{key:o,className:Hu.baseMessage},function(e,t,n){var s=[r().createElement("span",{key:"name",className:Hu.username},e),r().createElement("span",{key:"split",className:Hu.split}),r().createElement("span",{key:"time",className:Hu.stamp},t)],a="".concat(Hu.header," ").concat(n?Hu.right:"");return r().createElement("div",{className:a},n?s.reverse():s)}(y,x,b),r().createElement(M,{className:Hu.message,index:n,shop:d,message:e,isScChat:t,newMessageFlag:!1,currentUser:s,isSubAccount:a,hasSourceMessageMap:Xu,fillMessageRequested:i,fetchFaqMessagesRequested:l,conversationId:p,conversationShopId:A,conversationBuyerId:g,conversationStatus:f,measure:v,replyOfferRequested:v,evaluationRequested:v,claimVoucherRequested:v,sendMessagesRequested:v,resendMessageRequested:v,translateMessagesRequested:v,messageFillStatus:E[o],handleMessageIsSend:h,isInFaqHistoryModal:!0,currentFaqSessionInfo:m}))}},listData:o,status:c,onLoadMore:function(){return l({sourceId:u,shopId:A})},onRefresh:function(){return l({sourceId:u,shopId:A,reset:!o.length})}})))};var $u={changeTranslateStatus:pa,fillMessageRequested:mt};const ed=(0,h.connect)((function(e){return{sourceId:(0,T.faqIdSelector)(e),isScChat:(0,T.isScChatSelector)(e),isSubAccount:(0,T.isSubAccountSelector)(e),messageList:(0,T.faqHistoryMessagesSelector)(e),currentUser:(0,T.currentUserSelector)(e),messageHttpStatus:(0,T.faqHistoryhttpStatusSelector)(e),currentConversation:(0,T.currentConversationSelector)(e),conversationId:(0,T.currentConversationIdSelector)(e),conversationShopId:(0,T.currentConversationShopIdSelectors)(e),conversationBuyerId:(0,T.currentConversationBuyerIdSelectors)(e),conversationStatus:(0,T.currentConversationStatusSelectors)(e),shop:(0,T.currentConversationShopSelectors)(e),messagesFillStatusMap:(0,T.messageFillStatusMapSelector)(e),currentFaqSessionInfo:(0,T.currentFaqSessionInfoSelector)(e)}}),$u)((function(e){return r().createElement(Ku,e)}));var td=Y(7539),nd={};nd.styleTagTransform=Z(),nd.setAttributes=L(),nd.insert=F().bind(null,"head"),nd.domAPI=N(),nd.insertStyleElement=U(),P()(td.Z,nd);const rd=td.Z&&td.Z.locals?td.Z.locals:void 0;var sd=Y(4323).t;const ad=function(e){var t=e.isSend,n=e.message,s=e.updateCurrentFaqId,a=e.conversationShopId,o=e.fetchFaqMessagesRequested,i=e.handleMessageIsSend,c=e.locale,l=n.id,u=n.content.messages,d=void 0===u?[]:u,p=n.textContent,A=(void 0===p?{messages:[]}:p).messages,g=(void 0===A?[]:A).filter((function(e){return"webview"!==e.type})).map((function(e){var t=function(e){return{username:e.from_user_name,content:(0,O.previewMessage)(e,!1,!1,c)}}(e),n=t.username,s=t.content;return r().createElement("div",{key:"faq-".concat(e.id),className:rd.preview},"".concat(n,": ").concat(s))}));return r().createElement(ku,{onClose:function(){return s({id:null})},title:sd("conversation_list.conversation_cell.new_bundle_message_message"),className:rd.container,label:r().createElement("div",{onClick:function(){return o({sourceId:l,shopId:a,reset:!0})},className:Cc()(rd.root,t?rd.send:rd.receive)},r().createElement("div",{className:rd.header},sd("conversation_list.conversation_cell.new_bundle_message_message")),r().createElement("div",{style:{height:"".concat(18*(d.length>3?3:d.length),"px")}},g),r().createElement("div",{className:rd.footer},sd("faq_history.see_all")))},r().createElement(ed,{fetchFaqMessagesRequested:o,handleMessageIsSend:i}))};var od={fetchFaqMessagesRequested:Na,updateCurrentFaqId:qa};const id=fl((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e)}}),od)((function(e){return r().createElement(ad,e)})));var cd=Y(1500),ld={};ld.styleTagTransform=Z(),ld.setAttributes=L(),ld.insert=F().bind(null,"head"),ld.domAPI=N(),ld.insertStyleElement=U(),P()(cd.Z,ld);const ud=cd.Z&&cd.Z.locals?cd.Z.locals:void 0;var dd=O.MessageTypes.MSG_TYPE_SELECTED_OPTION,pd=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var s=f(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return g(this,n)}}(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).renderOption=r.renderOption.bind(u(r)),r.sendMessage=r.sendMessage.bind(u(r)),r}return l(n,[{key:"sendMessage",value:function(e){var t=e.request_live_agent,n=e.payload,r=e.text,s=this.props;(0,s.sendMessagesRequested)({conversationId:s.conversationId,messages:[{type:dd,content:{text:r,payload:n,request_live_agent:t}}]})}},{key:"renderOption",value:function(e,t){var n,s=this,a=e.text,i=e.variant,c=this.props,l=c.message,u=c.currentConversationMaxOptionHideTime,d=l.created_timestamp<u,p=Cc()(ud.option,(o(n={},ud.primary,1===i),o(n,ud.invalid,d),n));return r().createElement("div",{key:t,className:p,title:a,onClick:function(){if(d)return null;s.sendMessage(e)}},a)}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSensitiveUrl,s=t.message,a=s.content,o=a.title,i=a.options,c=void 0===i?[]:i,l=s.message_option;return r().createElement("div",{className:ud.root},r().createElement("div",{className:ud.title},r().createElement(J.Text,{text:o,messageOption:l,handleSensitiveUrl:n})),c.map((function(t,n){return e.renderOption(t,n)})))}}]),n}(n.PureComponent),Ad={handleSensitiveUrl:wa,sendMessagesRequested:Os};const gd=fl((0,h.connect)((function(e){return{conversation:(0,T.currentConversationSelector)(e),currentConversationMaxOptionHideTime:(0,T.currentConversationMaxOptionHideTimeSelectors)(e)}}),Ad)(pd)),fd=fl((function(e){var t=e.isSend,n=e.message.content;return r().createElement(J.AddOnDealMessage,{content:n,isSend:t,handleClickItem:Ml})}));var hd={showMediaPreviewModalRequested:T.showMediaPreviewModalRequested,scrollToMessage:In};const Ed=(0,h.connect)((function(e,t){return{videoInfo:(0,T.selectVideoInfoByKey)(t.message.request_id)(e)}}),hd)((function(e){var t=e.isSend,n=e.videoInfo,s=e.showMediaPreviewModalRequested,a=e.message,o=e.conversationShopId,i=e.scrollToMessage,c=e.conversationBuyerId,l=e.handleMessageIsSend,u=a.id,d=a.conversation_id,p=a.to_id,A=a.from_id,g=a.request_id,f=a.content,h=a.send_status,E=a.quoted_msg,m=t&&h===O.MessageSendStatus.SENDING;return r().createElement(J.VideoMessage,{id:u,isSend:t,content:f,isSending:m,videoInfo:n,onPlayVideo:function(e){(0,T.$tracker)({trackerName:"clickPlayInVideoMessage",data:{message_id:u===g?0:u,conversation_id:d,is_sender:t,to_user_id:p,from_user_id:A,video_original_duration:f.duration_seconds},conversationShopId:o}),s({messageId:e})},replyToMessage:E,scrollToMessage:i,conversationBuyerId:c,handleMessageIsSend:l})})),md=fl((function(e){return r().createElement(Ed,e)}));var vd={handleSensitiveUrl:wa,showMediaPreviewModalRequested:T.showMediaPreviewModalRequested};const Sd=fl((0,h.connect)((function(){return{}}),vd)((function(e){var t=e.isSend,s=e.measure,a=e.showMediaPreviewModalRequested,o=e.message,i=e.handleSensitiveUrl,c=e.conversationShopId,l=o.content,u=o.id,d=o.request_id,p=o.message_option,A=o.business_tag,g=(0,n.useContext)(X),f={shopId:c,data:{message_id:u,business_tag:A}};return r().createElement(J.ImageWithTextMessage,{content:l,measure:s,messageId:u,requestId:d,isSend:t,imgCache:g,messageOption:p,handleSensitiveUrl:i,showMediaPreviewModalRequested:a,trackerData:f})})));var _d={evaluationRequested:Ye};const yd=fl((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e),currentUser:(0,T.currentUserSelector)(e)}}),_d)((function(e){var t=e.measure,n=e.evaluationRequested,s=e.message,a=e.conversationId,o=e.isSend,i=e.locale,c=e.isInFaqHistoryModal,l=e.currentUser,u=e.conversationShopId,d=s.id,p=s.from_shop_id,A=s.textContent,g=s.to_id;return r().createElement(J.RateCardMessage,{measure:t,rateShopId:p,onSubmit:n,conversationId:a,isSend:o,textContent:A,locale:i,isInFaqHistoryModal:c,isSelfReceived:g===l.id,conversationShopId:u,messageId:d})})));function Cd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cd(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xd={sendMessagesRequested:Os};const Md=fl((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e)}}),xd)((function(e){var t=e.isSend,n=void 0!==t&&t,s=e.conversationId,a=e.conversationShopId,o=e.conversationBuyerId,i=e.sendMessagesRequested,c=e.message,l=e.isInFaqHistoryModal,u=e.locale,d=c.content,p=c.faq_session_id,A=$l(l,i);return r().createElement(J.NewFaqMessage,{isSend:n,sendMessagesRequested:A,content:d,conversationId:s,shopId:a,conversationUserId:o,locale:u,handleSendMessage:function(e){var t=e.type,n=e.content;A({conversationId:s,conversationUserId:o,messages:[{shopId:a,type:t,content:bd(bd({},n),{},{faq_session_id:p})}]})},faqSessionId:p})})));function Id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Id(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Id(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Od=O.MessageTypes.MSG_TYPE_FAQ_QUESTION_LIST,Td=O.MessageTypes.MSG_TYPE_FAQ_QUESTION,Bd=O.MessageTypes.MSG_TYPE_FAQ_CATEGORY_CHOICE,kd={sendMessagesRequested:Os};const Rd=fl((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e)}}),kd)((function(e){var t=e.isSend,n=void 0!==t&&t,s=e.conversationId,a=e.conversationShopId,o=e.conversationBuyerId,i=e.sendMessagesRequested,c=e.message,l=e.isInFaqHistoryModal,u=e.locale,d=c.content,p=c.type,A=c.faq_session_id,g=$l(l,i);return r().createElement(J.FaqListMessage,{isSend:n,content:d,type:p,locale:u,handleSendMessage:function(e){g({conversationId:s,conversationUserId:o,messages:[{shopId:a,type:p===Od?Td:Bd,content:wd(wd({},e),{},{faq_session_id:A})}]})}})}))),Pd=fl((0,h.connect)((function(e){return{currentBuyerShopId:(0,T.currentBuyerShopIdSelector)(e)}}),null)((function(e){var t=e.isSend,n=e.message,s=e.currentBuyerShopId,a=e.conversationId,o=e.measure,i=n.content.bot_data,c=n.faq_session_id;return r().createElement(J.ChatbotMessage,{isSend:t,message:i,shopId:s,conversationId:a,measure:o,faqSessionId:c})})));var Dd,Nd=(o(Dd={},O.MessageTypes.MSG_TYPE_TEXT,ml),o(Dd,O.MessageTypes.MSG_TYPE_IMAGE,yl),o(Dd,O.MessageTypes.MSG_TYPE_OFFER,Il),o(Dd,O.MessageTypes.MSG_TYPE_ORDER,Fl),o(Dd,O.MessageTypes.MSG_TYPE_STICKER,Ll),o(Dd,O.MessageTypes.MSG_TYPE_PRODUCT,Tl),o(Dd,O.MessageTypes.MSG_TYPE_NOTIFICATION,hl),o(Dd,O.MessageTypes.MSG_TYPE_VOUCHER,Wl),o(Dd,O.MessageTypes.MSG_TYPE_ITEM_LIST,Zl),o(Dd,O.MessageTypes.MSG_TYPE_FEED_STORY,Hl),o(Dd,O.MessageTypes.MSG_TYPE_SHOPPING_CART,Xl),o(Dd,O.MessageTypes.MSG_TYPE_FAQ,nu),o(Dd,O.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT,ml),o(Dd,O.MessageTypes.MSG_TYPE_FAQ_QUESTION,ml),o(Dd,O.MessageTypes.MSG_TYPE_FAQ_FEEDBACK,ml),o(Dd,O.MessageTypes.MSG_TYPE_FAQ_FEEDBACK_PROMPT,uu),o(Dd,O.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,pu),o(Dd,O.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,vu),o(Dd,O.MessageTypes.MSG_TYPE_BUNDLE_MESSAGE,id),o(Dd,O.MessageTypes.MSG_TYPE_BUNDLE_DEAL,gu),o(Dd,O.MessageTypes.MSG_TYPE_FLASH_SALE,fu),o(Dd,O.MessageTypes.MSG_TYPE_OPTION_PACK,gd),o(Dd,O.MessageTypes.MSG_TYPE_SELECTED_OPTION,ml),o(Dd,O.MessageTypes.MSG_TYPE_ADD_ON_DEAL,fd),o(Dd,O.MessageTypes.MSG_TYPE_VIDEO,md),o(Dd,O.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT,Sd),o(Dd,O.MessageTypes.MSG_TYPE_RATE_CARD,yd),o(Dd,O.MessageTypes.MSG_TYPE_NEW_FAQ,Md),o(Dd,O.MessageTypes.MSG_TYPE_FAQ_CATEGORY_CHOICE,ml),o(Dd,O.MessageTypes.MSG_TYPE_FAQ_TYPE_CHOICE,ml),o(Dd,O.MessageTypes.MSG_TYPE_FAQ_QUESTION_LIST,Rd),o(Dd,O.MessageTypes.MSG_TYPE_FAQ_CATEGORY_LIST,Rd),o(Dd,O.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,ml),o(Dd,O.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,(function(e){return r().createElement(Fl,e)})),o(Dd,O.MessageTypes.FAQ_TYPE_BOT_RESPONSE_MESSAGE,Pd),o(Dd,O.MessageTypes.MSG_TYPE_SECURITY_TIPS,fl(J.SecurityTipsMessage)),Dd);const jd=function(e){return Nd[e]||cu};var Fd=function(e,t){var n=(0,dn.Z)(e,2),r=n[0],s=n[1];return r<=t&&s>=t},qd=function(e,t){return e&&e.length&&t?e.findIndex((function(e){return e.id===t})):null},Ld=O.MessageTypes.MSG_TYPE_TEXT,Gd=O.MessageTypes.MSG_TYPE_WEBVIEW,Ud=O.MessageTypes.MSG_TYPE_NOTIFICATION,Yd=O.MessageTypes.MSG_TYPE_RATE_CARDS,Wd=O.MessageTypes.MSG_TYPE_SHOPPING_CART,zd=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var s=f(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return g(this,n)}}(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).keyMapper=r.keyMapper.bind(u(r)),r.getListRef=r.getListRef.bind(u(r)),r.scrollUpHandler=(0,O.memFn)(Jl,10),r.handleWheel=r.handleWheel.bind(u(r)),r.rowRenderer=r.rowRenderer.bind(u(r)),r.handleScroll=r.handleScroll.bind(u(r)),r.handleGoToBottom=r.handleGoToBottom.bind(u(r)),r.handleRowsRender=r.handleRowsRender.bind(u(r)),r.handleScrollToMessage=r.handleScrollToMessage.bind(u(r)),r.addExposedMessageId=r.addExposedMessageId.bind(u(r)),r.handleAutoSizerResized=r.handleAutoSizerResized.bind(u(r)),r.handleConversationChanged=r.handleConversationChanged.bind(u(r)),r.handleMsgListChanged=r.handleMsgListChanged.bind(u(r)),r.handleMsgListLengthUnchange=r.handleMsgListLengthUnchange.bind(u(r)),r.debounceMarkMessage=(0,O.debounce)(r.handleMarkMessage.bind(u(r)),300),r.debounceFetchMoreMessage=(0,O.debounce)(r.fetchMoreMessage.bind(u(r)),300),r.dobouceUpdateCurrentConversationCanRead=(0,O.debounce)(r.updateCurrentConversationCanRead.bind(u(r)),100),r.containerProps={onWheel:r.handleWheel},r._cache=new(w())({fixedWidth:!0,keyMapper:r.keyMapper}),r.imgCache={},r.listNode=null,r.startIndex=0,r.stopIndex=0,r.scrollTop=0,r.targetMsgRow=0,r.targetRowInfo=null,r.exposedMessageIds=[],r.hasSourceMessageMap={},r.stickyScrollPosition=null,r.messageScrollDirection=null,r.state={firstUnreadMsgId:null,shouldRenderNewMessageTip:!1},r}return l(n,[{key:"addExposedMessageId",value:function(e){this.exposedMessageIds.push(e)}},{key:"getListRef",value:function(e){this.listNode=e}},{key:"keyMapper",value:function(e){var t=this.props.messageList[e];return t&&t.id}},{key:"onMeasure",value:function(e,t){var n,r;t(),this.targetRowInfo&&Fd(this.targetRowInfo.range,e)&&(null===(n=this.listNode)||void 0===n||null===(r=n.scrollToRow)||void 0===r||r.call(n,this.targetRowInfo.index))}},{key:"cleanTargetRowInfo",value:function(){this.targetRowInfo=null}},{key:"componentDidMount",value:function(){this.onAppendMessage(),this.shouldScrollToBottom=!0,T.EventBus.on("scrollToMessage",this.handleScrollToMessage)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this,r=Object.keys(e),s=Object.keys(this.props);return r.length!==s.length||t.shouldRenderNewMessageTip!==this.state.shouldRenderNewMessageTip||t.firstUnreadMsgId!==this.state.firstUnreadMsgId||r.some((function(t){var r,s,a=e[t],o=n.props[t],i=!1;switch(t){case"currentConversation":i=a.id!==o.id;break;case"unreadMessageIds":s=o,i=!((r=a).length===s.length&&r.every((function(e,t){return e===s[t]})));break;case"messageList":i=!eu(a,o);break;default:i=a!==o}return i}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.conversationId,n=e.messageList,r=e.unreadMessageIds,s=e.navigateToUnreadMessageId,a=e.currentConversation,o=this.props,i=o.conversationId,c=o.messageList,l=o.unreadMessageIds,u=o.navigateToUnreadMessageId,d={};if(this.conversationChanged=t!==i,(this.conversationChanged||l.length&&!r.length)&&(d.shouldRenderNewMessageTip=!1),u!==s){var p=function(e,t,n){var r=null,s=[];return e&&n&&(s=t.filter((function(t){var r=(0,O.getMessageIsSend)(t,e);return t&&!r&&(0,O.greaterThan)(t.id,n)})).map((function(e){return e.id}))),s.length&&(r=s[0]),r}(a,n,s);d.firstUnreadMsgId=p}this.conversationChanged?this.handleConversationChanged():c.length!==n.length?this.handleMsgListChanged(e):this.handleMsgListLengthUnchange(e),(0,O.checkEmptyObject)(d)||this.setState(d)}},{key:"componentDidUpdate",value:function(){this.conversationChanged?(this.conversationChanged=!1,this.onAppendMessage()):this.messageScrollDirection&&(1===this.messageScrollDirection?this.onAppendMessage():-1===this.messageScrollDirection&&this.onPrependMessage(),this.messageScrollDirection=null)}},{key:"componentWillUnmount",value:function(){T.EventBus.removeListener("scrollToMessage",this.handleScrollToMessage)}},{key:"handleAutoSizerResized",value:function(e){var t=e.height;this.shouldScrollToBottom&&t&&(this.shouldScrollToBottom=!1,this.onAppendMessage())}},{key:"handleScrollToMessage",value:function(e){var t=this.props.isNavigateToUnreadMessage,n=qd(this.props.messageList,e);if(n>=0){var r,s,a=t?n+1:n;this.targetMsgRow=a,null===(r=this.listNode)||void 0===r||null===(s=r.scrollToRow)||void 0===s||s.call(r,a)}}},{key:"handleConversationChanged",value:function(){var e,t,n=this.props,r=n.messageList;(0,n.setCurrentConversationCanRead)({canRead:!0}),this.scrollTop=0,this.startIndex=0,this.stopIndex=0,this.cleanTargetRowInfo(),this.scrollUpHandler.reset(),this.hasSourceMessageMap={},this.shouldScrollToBottom=!0,null===(e=this.listNode)||void 0===e||null===(t=e.forceUpdateGrid)||void 0===t||t.call(e);var s=qd(r,this.state.firstUnreadMsgId);s>-1&&this._cache.clear(s)}},{key:"handleMsgListLengthUnchange",value:function(e){var t,n,r=e.messageList,s=e.hasMoreOlderMessage,a=(e.unreadMessageIds,e.currentConversationCanRead,this.props),o=a.messageList,i=(a.unreadMessageIds,a.hasMoreOlderMessage),c=function(e,t,n,r){var s=e.slice(n,r+1),a=t.slice(n,r+1);return!eu(s,a)}(o,r,this.startIndex,this.stopIndex);(c||i&&!s)&&(null===(t=this.listNode)||void 0===t||null===(n=t.forceUpdateGrid)||void 0===n||n.call(t));var l=Kl(r),u=Kl(o);if(l&&u){var d=l.type,p=l.request_id,A=l.errorCode,g=l.message_option,f=l.textContent,h=l.send_status,E=u.request_id,m=u.retryRequestId,v=u.errorCode,S=u.message_option,_=u.send_status,y=u.textContent;switch(d){case Ld:p!==E&&p!==m||!(h!==_||A!==v&&A===O.MessageErrorCode.BLACKLIST||g!==S&&0!==g)||(this.messageScrollDirection=1);break;case Wd:!y&&f&&(this.messageScrollDirection=1)}}}},{key:"handleMsgListChanged",value:function(e){var t,n,r,s,a=this.props.messageList,o=e.currentConversation,i=e.messageList,c=e.unreadMessageIds,l=e.currentConversationCanRead,u=a.length,d=i.length,p=Kl(i),A=p&&(0,O.getMessageIsSend)(p,o),g=!0,f=function(e,t){for(var n=e.length-1;n>=0;){var r=e[n];if(!t.includes(r.id))return n;n--}}(i,c);(l||!c.length||A||this.stopIndex>=f)&&(g=!1),this.setState({shouldRenderNewMessageTip:g}),t=i,r=(n=a).length,s=t.length,!r&&s||(r?n[0].id:null)===(s?t[0].id:null)?!A&&u&&u-1!==this.stopIndex||(this.cleanTargetRowInfo(),this.messageScrollDirection=1,this.onAppendMessage()):(this.cleanTargetRowInfo(),this.stickyScrollPosition={index:this.startIndex+d-u,stickyScrollTop:this.scrollTop},this.messageScrollDirection=-1)}},{key:"handleWheel",value:function(e){this.targetRowInfo&&e.deltaY<0&&this.cleanTargetRowInfo()}},{key:"handleMarkMessage",value:function(){var e=this.props.unreadMessageIds.length;if(e){var t=this.props,n=t.showChatWindow,r=t.showConversationDetail,s=t.messageList,a=t.unreadMessageIds,o=t.markMessagesRequested,i=t.currentConversation,c=i.status,l=i.id,u=a[e-1],d=qd(s,u);n&&r&&"closed"!==c&&this.stopIndex>=d&&o({isRead:!0,conversationId:l,latestMessageId:u})}}},{key:"onAppendMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,n=void 0===t?"end":t,r=e.index,s=void 0===r?null:r,a=this.props,o=a.inScrollToMessage,i=a.messageList,c=a.isNavigateToUnreadMessage;if(!o&&i.length&&!c){var l,u,d,p,A,g,f=null,h=s||i.length-1,E="end"===n;E?this.targetRowInfo={index:h,range:[this.startIndex,h]}:f=null===(l=this.listNode)||void 0===l||null===(u=l.getOffsetForRow)||void 0===u?void 0:u.call(l,{index:h,alignment:n}),E?null===(d=this.listNode)||void 0===d||null===(p=d.scrollToRow)||void 0===p||p.call(d,h<0?0:h):null===(A=this.listNode)||void 0===A||null===(g=A.scrollToPosition)||void 0===g||g.call(A,f)}}},{key:"onPrependMessage",value:function(){var e,t,n,r,s=this.stickyScrollPosition||{},a=s.index,o=s.stickyScrollTop,i=(null===(e=this.listNode)||void 0===e||null===(t=e.getOffsetForRow)||void 0===t?void 0:t.call(e,{index:a,alignment:"start"}))||0;null===(n=this.listNode)||void 0===n||null===(r=n.scrollToPosition)||void 0===r||r.call(n,i+o)}},{key:"handleGoToBottom",value:function(){var e=this.props,t=e.conversationId,n=e.inScrollToMessage,r=e.fetchRequested,s=e.deleteConversationMessageHash,a=e.setInScrollToMessage,o=e.currentConversation,i=e.isNavigateToUnreadMessage,c=e.setNavigateToUnreadMessage;n||i?(n&&a({inScrollToMessage:!1}),i&&c({isNavigateToUnreadMessage:!1}),t&&s({conversationId:t}),r({conversation:o,needReset:!0}),this.shouldScrollToBottom=!0):this.onAppendMessage()}},{key:"fetchMoreMessage",value:function(e){var t=this.props,n=t.messageList,r=t.fetchRequested,s=t.conversationId;n.length&&r({direction:e,conversationId:s})}},{key:"updateCurrentConversationCanRead",value:function(e){var t=this.props,n=t.currentConversationCanRead,r=t.setCurrentConversationCanRead;e!==n&&r({canRead:e})}},{key:"handleScroll",value:function(e){var t=e.clientHeight,n=e.scrollHeight,r=e.scrollTop,s=this.props,a=s.messageList,o=s.inScrollToMessage,i=s.hasMoreOlderMessage,c=s.hasMoreLatestMessage,l=s.handleComponentScroll,u=s.isNavigateToUnreadMessage;if(n>0&&(this.targetRowInfo&&this.scrollUpHandler.check(this.scrollTop,r)&&this.cleanTargetRowInfo(),this.scrollTop>r?(l("up"),!1!==i&&r<200&&0!==t&&this.debounceFetchMoreMessage("older")):(l("down"),(o||u)&&c&&r>n-t-30&&this.debounceFetchMoreMessage("latest"))),this.stopIndex>0){var d,p=a.length,A=r>0?n-r-t<=60||(null===(d=this.targetRowInfo)||void 0===d?void 0:d.index)===p-1:!(p>0)||this.stopIndex>=p-1;this.dobouceUpdateCurrentConversationCanRead(A)}this.scrollTop=r}},{key:"handleRowsRender",value:function(e){var t,n,r=e.startIndex,s=e.stopIndex;this.startIndex=r,this.stopIndex=s,this.debounceMarkMessage(),this.targetRowInfo&&Fd(this.targetRowInfo.range,r)?this.targetRowInfo.range=[r,this.targetRowInfo.range[1]]:this.cleanTargetRowInfo(),this.targetMsgRow>0&&(null===(t=this.listNode)||void 0===t||null===(n=t.scrollToRow)||void 0===n||n.call(t,this.targetMsgRow),this.targetMsgRow=null)}},{key:"rowRenderer",value:function(e){var t=this,n=e.index,s=(e.key,e.parent),a=e.style,o=this.props.messageList[n];if(!o)return null;var i=this.props,c=i.shop,l=i.isScChat,u=i.currentUser,d=i.isSubAccount,p=i.messageList,A=i.hasMoreOlderMessage,g=i.resendMessageRequested,f=i.fillMessageRequested,h=i.cancelSendingMessageRequested,E=i.showWarningMessageIds,m=i.conversationId,v=i.conversationShopId,S=i.conversationBuyerId,_=i.conversationStatus,y=i.messagesFillStatusMap,C=i.currentFaqSessionInfo,b=p[n-1]||{},x=b.type,I=b.to_id,w=b.content,T=void 0===w?{}:w,B=b.created_timestamp,k=o.type,R=o.content,P=void 0===R?{}:R,D=o.to_id,N=o.id,j=o.created_timestamp,F=jd(k),q=y[N],L=y["source-".concat(N)];k===Gd&&(P.type===Yd?D===u.id?F=Wu:(F=hl,q=null,L=null):(q=null,L=null));var G=x===Ud||(0,O.getMessageIsRatecard)(x,T)&&(u.id!==I||d),U=1e3*j,Y=1e3*B,W=U&&!Y||U-Y>3e5||0===n&&!A?(0,O.customizeTime)(U):null,z=0===n;return r().createElement(M(),{key:N,parent:s,rowIndex:n,columnIndex:0,cache:this._cache},(function(e){var s=e.measure;return r().createElement(F,{index:n,style:a,shop:c,message:o,measure:function(){return t.onMeasure(n,s)},timeFlag:W,isScChat:l,isSubAccount:d,isLastMessage:n===p.length-1,newMessageFlag:N===t.state.firstUnreadMsgId&&!z,isLastSystemMessage:G,hasSourceMessageMap:t.hasSourceMessageMap,resendMessageRequested:g,fillMessageRequested:f,addExposedMessageId:t.addExposedMessageId,exposedMessageIds:t.exposedMessageIds,cancelSendingMessageRequested:h,showWarningMessageIds:E,conversationId:m,conversationShopId:v,conversationBuyerId:S,conversationStatus:_,messageFillStatus:q,messageSourceFillStatus:L,currentFaqSessionInfo:C})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.locale,s=t.isScChat,a=t.messageList,o=void 0===a?[]:a,i=t.unreadMessageIds,c=void 0===i?[]:i,l=t.currentConversation,u=t.shopTranslationSettings,d=t.messagesFillStatusMap,p=t.currentConversationTranslationAccess,A=t.currentConversationCanRead,g=t.toBottomHasConflict,f=l.status,h=l.shop_id,E=l.to_name,m=l.to_id,v=l.latest_message_from_id,_=o.filter((function(e){return c.includes(e.id)})),C=_.length?_[_.length-1]:null,x=o.length||1,M=m!==v,I=(C||{}).content,w=(void 0===I?{}:I).translation,T=(w=void 0===w?{}:w).text,B=(u[h]||{}).autoTranslationStatus===O.SwitchStatus.ENABLED,R=(0,O.handleDisplayTranslation)(B,M,T,s,p),P="closed"===f;return r().createElement("div",{className:Q.messageSection,id:"messageSection"},r().createElement(b(),{onResize:this.handleAutoSizerResized},(function(t){var n=t.width,s=t.height;return r().createElement($,null,r().createElement(X.Provider,{value:e.imgCache},r().createElement(y(),{width:n,height:s,ref:e.getListRef,rowCount:x,rowHeight:e._cache.rowHeight,className:Q.grid,containerProps:e.containerProps,containerStyle:{},estimatedRowSize:37,overscanRowCount:10,deferredMeasurementCache:e._cache,onScroll:e.handleScroll,rowRenderer:e.rowRenderer,onRowsRendered:e.handleRowsRender,differProp:d})))})),r().createElement("div",{className:Q.layers},!g&&!A&&r().createElement("div",{id:"toBottomButton",className:Q.iconWrapper,onClick:this.handleGoToBottom},r().createElement(S(),{svg:k()})),this.state.shouldRenderNewMessageTip&&!P&&r().createElement(ae,{locale:n,shopId:h,username:E,message:C||{},onClick:this.handleGoToBottom,enableTranslation:R})))}}]),n}(r().Component);const Zd=m()(zd,{dataKey:"messageList",penddingController:function(e,t,n){return!t||n!==O.DataFetchStatus.INIT_PENDING},scrollController:function(e,t,n,r,s,a,o){var i=e!==t;i&&(o&&r===O.DataFetchStatus.FAILED&&o(),n(e));var c=a.current;c&&clearTimeout(c),a.current=setTimeout((function(){i&&!r.toLowerCase().includes("init")&&s(O.DataFetchStatus.SUCCEED)}),10)}});var Hd=["fetchMessagesRequested","messageHttpStatus"];function Vd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vd(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xd=function(e){p(s,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var s=f(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return g(this,n)}}(s);function s(e){var t;return i(this,s),(t=n.call(this,e)).fetchRequested=t.fetchRequested.bind(u(t)),t}return l(s,[{key:"fetchRequested",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needReset,n=void 0!==t&&t,r=e.direction,s=this.props,a=s.messageList,o=s.currentConversation,i=s.fetchMessagesRequested,c={conversationId:o.id,direction:"up"===r||"older"===r?"older":"latest"};if(n)c.read=!0,c.reset=!0;else if(!a.length)return;i(Qd({},c))}},{key:"render",value:function(){var e=this.props,n=(e.fetchMessagesRequested,e.messageHttpStatus),s=t(e,Hd);return r().createElement(Zd,a({},s,{status:n,fetchRequested:this.fetchRequested}))}}]),s}(r().PureComponent),Jd={markMessagesRequested:T.markMessagesRequested,fetchMessagesRequested:Qt,resendMessageRequested:Un,fillMessageRequested:mt,setCurrentConversationCanRead:T.setCurrentConversationCanRead,cancelSendingMessageRequested:Ds,deleteConversationMessageHash:lr,setInScrollToMessage:Tn,setNavigateToUnreadMessage:T.setNavigateToUnreadMessage};const Kd=(0,h.connect)((function(e){return{isScChat:(0,T.isScChatSelector)(e),hasMoreOlderMessage:(0,T.hasMoreOlderMessageSelector)(e),hasMoreLatestMessage:(0,T.hasMoreLatestMessageSelector)(e),isSubAccount:(0,T.isSubAccountSelector)(e),messageList:(0,T.curConvsMessageSelector)(e),showChatWindow:(0,T.showChatWindowSelector)(e),unreadMessageIds:(0,T.unreadMessageIdsSelector)(e),messageHttpStatus:(0,T.messageHttpStatusSelector)(e),showConversationDetail:(0,T.showConversationDetailSelector)(e),currentConversationCanRead:(0,T.currentConversationCanReadSelector)(e),showWarningMessageIds:(0,T.showWarningMessageIdsSelector)(e),conversationId:(0,T.currentConversationIdSelector)(e),conversationShopId:(0,T.currentConversationShopIdSelectors)(e),conversationBuyerId:(0,T.currentConversationBuyerIdSelectors)(e),conversationStatus:(0,T.currentConversationStatusSelectors)(e),shop:(0,T.currentConversationShopSelectors)(e),inScrollToMessage:(0,T.inScrollToMessageSelector)(e)||(0,T.inlocationSelector)(e),shopTranslationSettings:(0,T.shopTranslationSettingsSelector)(e),currentConversationTranslationAccess:(0,T.currentConversationTranslationAccessSelector)(e),messagesFillStatusMap:(0,T.messageFillStatusMapSelector)(e),locale:(0,T.localeSelector)(e),currentFaqSessionInfo:(0,T.currentFaqSessionInfoSelector)(e),toBottomHasConflict:(0,T.toBottomHasConflictSelector)(e),isNavigateToUnreadMessage:(0,T.isNavigateToUnreadMessageSelector)(e),navigateToUnreadMessageId:(0,T.navigateToUnreadMessageIdSelector)(e)}}),Jd)(Xd);var $d=ni,ep=ti,tp=t(e,["reducerMap","sagas"]),np=function(){return{id:"message-section",reducerMap:$d,sagas:ep,actionsMap:tp,retained:!0}};function rp(e){return r().createElement(s.DynamicModuleLoader,{modules:[np()]},r().createElement(Kd,e))}})(),W})(),e.exports=r(n(67294),n(99591),n(50558),n(34012),n(20590),n(31427),n(78330),n(54818),n(36032),n(26842),n(37764),n(74010),n(37521),n(13283),n(47865),n(53053),n(34857),n(28366),n(52153),n(23668),n(72873),n(58518),n(70249),n(77996),n(90167),n(56462),n(75282),n(33640),n(86134),n(77672),n(82233),n(23384),n(15991),n(58556),n(15663),n(14183),n(94184),n(847),n(83253),n(80862),n(82365))},56462:e=>{e.exports='<svg data-name=" 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="chat-icon"><g data-name="Layer 1"><path d="M512 1024A512.2 512.2 0 01312.75 40.2a512.12 512.12 0 01398.6 943.5A507.07 507.07 0 01512 1024zm0-960a447.88 447.88 0 00-316.8 764.8A448 448 0 10686.45 99.2 444.4 444.4 0 00512 64z"></path><path d="M448 736a31.55 31.55 0 01-22.6-9.4l-192-192a32 32 0 1145.3-45.3L448 658.7l297.4-297.4a32 32 0 1145.3 45.3l-320 320A32 32 0 01448 736z"></path></g></svg>'},47865:e=>{e.exports='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.99996 8.14645L11.1464 3L11.8535 3.70711L6.70707 8.85355C6.31655 9.24408 5.68338 9.24408 5.29286 8.85355L0.146408 3.70711L0.853516 3L5.99996 8.14645Z" fill="white"></path></svg>'},74010:e=>{e.exports='<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#filter0_d_92_10269)"><circle cx="18" cy="17" r="17" fill="#FAFAFA"></circle></g><path d="M18 17.1464L23.1464 12L23.8535 12.7071L18.7071 17.8536C18.3165 18.2441 17.6834 18.2441 17.2929 17.8536L12.1464 12.7071L12.8535 12L18 17.1464Z" fill="#EE4D2D"></path><path d="M18 22.1464L23.1464 17L23.8535 17.7071L18.7071 22.8536C18.3165 23.2441 17.6834 23.2441 17.2929 22.8536L12.1464 17.7071L12.8535 17L18 22.1464Z" fill="#EE4D2D"></path><defs><filter id="filter0_d_92_10269" x="0" y="0" width="36" height="36" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="1"></feOffset><feGaussianBlur stdDeviation="0.5"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_92_10269"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_92_10269" result="shape"></feBlend></filter></defs></svg>'},14183:e=>{e.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M5.75 2.75v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75h-12A.75.75 0 012 15.5v-12a.75.75 0 01.75-.75h3zm4.175 7.614l2.651-2.652-1.06-1.06-2.652 2.651-2.652-2.651-1.06 1.06 2.651 2.652-2.651 2.652 1.06 1.06 2.652-2.651 2.652 2.651 1.06-1.06-2.651-2.652zM7.25 2h3a.75.75 0 01.75.75v.75H6.5v-.75A.75.75 0 017.25 2z"></path></svg>'},15663:e=>{e.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M6 2.25v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75H3a.75.75 0 01-.75-.75V3A.75.75 0 013 2.25h3zm1.409 8.553L5.288 8.682l-1.061 1.06 3.182 3.183 6.364-6.364-1.06-1.061-5.304 5.303zM7.5 1.5h3a.75.75 0 01.75.75V3h-4.5v-.75a.75.75 0 01.75-.75z"></path></svg>'},77672:e=>{e.exports='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M9.192 0L9.9.707 3.536 7.071 0 3.536l.707-.708 2.828 2.828z"></path></svg>'},15991:e=>{e.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M6 2.25v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75H3a.75.75 0 01-.75-.75V3A.75.75 0 013 2.25h3zm-1.5 4.5v1.5h9v-1.5h-9zm0 3.25v1.5h6V10h-6zm3-8.5h3a.75.75 0 01.75.75V3h-4.5v-.75a.75.75 0 01.75-.75z"></path></svg>'},58556:e=>{e.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><g fill-rule="evenodd"><path d="M2.05 13H1V4a1 1 0 011-1h9.738v2h3.481a1 1 0 01.97.757L17 9v4h-1.05a2.5 2.5 0 00-4.9 0h-4.1a2.5 2.5 0 00-4.9 0zM12 6v2h3.807l-.524-2H12z"></path><circle cx="4.5" cy="13.5" r="1.5"></circle><circle cx="13.5" cy="13.5" r="1.5"></circle></g></svg>'},33640:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M8 16A8 8 0 118 0a8 8 0 010 16zm.8-7V4H7.3v5h1.5zm0 3v-1.5H7.3V12h1.5z"></path></svg>'}}]);